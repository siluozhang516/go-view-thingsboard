"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t){!function(){var n="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=r(t);function r(t,e){return function(n,i){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:i}),e&&e(n,i)}}void 0===n.Reflect?n.Reflect=t:i=r(n.Reflect,i),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,o={__proto__:[]}instanceof Array,s=!a&&!o,u={create:a?function(){return it(Object.create(null))}:o?function(){return it({__proto__:null})}:function(){return it({})},has:s?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:s?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,d=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,f=new(l||"function"!=typeof WeakMap?nt():WeakMap);function h(t,e,n,i){if(U(n)){if(!B(t))throw new TypeError;if(!G(e))throw new TypeError;return A(t,e)}if(!B(t))throw new TypeError;if(!F(e))throw new TypeError;if(!F(i)&&!U(i)&&!P(i))throw new TypeError;return P(i)&&(i=void 0),w(t,e,n=H(n),i)}function y(t,e){function n(n,i){if(!F(n))throw new TypeError;if(!U(i)&&!q(i))throw new TypeError;C(t,e,n,i)}return n}function m(t,e,n,i){if(!F(n))throw new TypeError;return U(i)||(i=H(i)),C(t,e,n,i)}function g(t,e,n){if(!F(e))throw new TypeError;return U(n)||(n=H(n)),D(t,e,n)}function v(t,e,n){if(!F(e))throw new TypeError;return U(n)||(n=H(n)),R(t,e,n)}function T(t,e,n){if(!F(e))throw new TypeError;return U(n)||(n=H(n)),N(t,e,n)}function E(t,e,n){if(!F(e))throw new TypeError;return U(n)||(n=H(n)),O(t,e,n)}function b(t,e){if(!F(t))throw new TypeError;return U(e)||(e=H(e)),M(t,e)}function S(t,e){if(!F(t))throw new TypeError;return U(e)||(e=H(e)),k(t,e)}function _(t,e,n){if(!F(e))throw new TypeError;U(n)||(n=H(n));var i=I(e,n,!1);if(U(i))return!1;if(!i.delete(t))return!1;if(i.size>0)return!0;var r=f.get(e);return r.delete(n),r.size>0||f.delete(e),!0}function A(t,e){for(var n=t.length-1;n>=0;--n){var i=(0,t[n])(e);if(!U(i)&&!P(i)){if(!G(i))throw new TypeError;e=i}}return e}function w(t,e,n,i){for(var r=t.length-1;r>=0;--r){var a=(0,t[r])(e,n,i);if(!U(a)&&!P(a)){if(!F(a))throw new TypeError;i=a}}return i}function I(t,e,n){var i=f.get(t);if(U(i)){if(!n)return;i=new p,f.set(t,i)}var r=i.get(e);if(U(r)){if(!n)return;r=new p,i.set(e,r)}return r}function D(t,e,n){if(R(t,e,n))return!0;var i=Z(e);return!P(i)&&D(t,i,n)}function R(t,e,n){var i=I(e,n,!1);return!U(i)&&j(i.has(t))}function N(t,e,n){if(R(t,e,n))return O(t,e,n);var i=Z(e);return P(i)?void 0:N(t,i,n)}function O(t,e,n){var i=I(e,n,!1);if(!U(i))return i.get(t)}function C(t,e,n,i){I(n,i,!0).set(t,e)}function M(t,e){var n=k(t,e),i=Z(t);if(null===i)return n;var r=M(i,e);if(r.length<=0)return n;if(n.length<=0)return r;for(var a=new d,o=[],s=0,u=n;s<u.length;s++){var c=u[s];a.has(c)||(a.add(c),o.push(c))}for(var l=0,p=r;l<p.length;l++){c=p[l];a.has(c)||(a.add(c),o.push(c))}return o}function k(t,e){var n=[],i=I(t,e,!1);if(U(i))return n;for(var r=Q(i.keys()),a=0;;){var o=X(r);if(!o)return n.length=a,n;var s=J(o);try{n[a]=s}catch(t){try{$(r)}finally{throw t}}a++}}function L(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function U(t){return void 0===t}function P(t){return null===t}function x(t){return"symbol"==typeof t}function F(t){return"object"==typeof t?null!==t:"function"==typeof t}function W(t,e){switch(L(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=z(t,i);if(void 0!==r){var a=r.call(t,n);if(F(a))throw new TypeError;return a}return V(t,"default"===n?"number":n)}function V(t,e){if("string"===e){var n=t.toString;if(K(n))if(!F(r=n.call(t)))return r;if(K(i=t.valueOf))if(!F(r=i.call(t)))return r}else{var i;if(K(i=t.valueOf))if(!F(r=i.call(t)))return r;var r,a=t.toString;if(K(a))if(!F(r=a.call(t)))return r}throw new TypeError}function j(t){return!!t}function Y(t){return""+t}function H(t){var e=W(t,3);return x(e)?e:Y(e)}function B(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function K(t){return"function"==typeof t}function G(t){return"function"==typeof t}function q(t){switch(L(t)){case 3:case 4:return!0;default:return!1}}function z(t,e){var n=t[e];if(null!=n){if(!K(n))throw new TypeError;return n}}function Q(t){var e=z(t,r);if(!K(e))throw new TypeError;var n=e.call(t);if(!F(n))throw new TypeError;return n}function J(t){return t.value}function X(t){var e=t.next();return!e.done&&e}function $(t){var e=t.return;e&&e.call(t)}function Z(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var n=t.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return e;var r=i.constructor;return"function"!=typeof r||r===t?e:r}function tt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[r]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,i)},e.prototype.values=function(){return new n(this._keys,this._values,a)},e.prototype.entries=function(){return new n(this._keys,this._values,o)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[r]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function i(t,e){return t}function a(t,e){return e}function o(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new p}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[r]=function(){return this.keys()},t}()}function nt(){var t=16,n=u.create(),i=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=a(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=a(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return a(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=a(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var t;do{t="@@WeakMap@@"+c()}while(u.has(n,t));return n[t]=!0,t}function a(t,n){if(!e.call(t,i)){if(!n)return;Object.defineProperty(t,i,{value:u.create()})}return t[i]}function o(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t)}function c(){var e=s(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",i=0;i<t;++i){var r=e[i];4!==i&&6!==i&&8!==i||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}function it(t){return t.__=void 0,delete t.__,t}t("decorate",h),t("metadata",y),t("defineMetadata",m),t("hasMetadata",g),t("hasOwnMetadata",v),t("getMetadata",T),t("getOwnMetadata",E),t("getMetadataKeys",b),t("getOwnMetadataKeys",S),t("deleteMetadata",_)}(i)}()}(t||(t={}));var n="named",i="name",r="unmanaged",a="optional",o="inject",s="multi_inject",u="inversify:tagged",c="inversify:tagged_props",l="inversify:paramtypes",p="post_construct",d="pre_destroy";var f=[o,s,i,r,n,a],h={Request:"Request",Singleton:"Singleton",Transient:"Transient"},y={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},m={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},g=0;function v(){return g++}var T=function(){function t(t,e){this.id=v(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=y.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===h.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e},t}(),E="Metadata key was used more than once in a parameter:",b="NULL argument",S="Key Not Found",_="Ambiguous match found for serviceIdentifier:",A="No matching bindings found for serviceIdentifier:",w="Missing required @injectable annotation in:",I="Missing required @inject or @multiInject annotation in:",D="Circular dependency found:",R="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",N=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},O=function(t,e){return"@postConstruct error in class "+t+": "+e},C=function(t,e){return"@preDestroy error in class "+t+": "+e},M=function(t,e){return"onDeactivation() error in class "+t+": "+e},k="Maximum call stack size exceeded",L=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(l,t),userGeneratedMetadata:Reflect.getMetadata(u,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(c,t)||[]},t}(),U={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function P(t){return t instanceof RangeError||t.message===k}function x(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function F(t,e,n){var i="",r=n(t,e);return 0!==r.length&&(i="\nRegistered bindings:",r.forEach((function(t){var e="Object";null!==t.implementationType&&(e=j(t.implementationType)),i=i+"\n "+e,t.constraint.metaData&&(i=i+" - "+t.constraint.metaData)}))),i}function W(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||W(t.parentRequest,e))}function V(t){t.childRequests.forEach((function(t){if(W(t,t.serviceIdentifier)){var e=function(t){var e=function t(e,n){void 0===n&&(n=[]);var i=x(e.serviceIdentifier);return n.push(i),null!==e.parentRequest?t(e.parentRequest,n):n}(t);return e.reverse().join(" --\x3e ")}(t);throw new Error(D+" "+e)}V(t)}))}function j(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}var Y=function(){function t(t){this.id=v(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}(),H=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===n?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},t}(),B=function(t,e){this.parentContext=t,this.rootRequest=e},K=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}(),G=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}(),q=function(){function t(t,e,i,r){this.id=v(),this.type=t,this.serviceIdentifier=i;var a="symbol"==typeof e?e.toString().slice(7,-1):e;this.name=new G(a||""),this.identifier=e,this.metadata=new Array;var o=null;"string"==typeof r?o=new H(n,r):r instanceof H&&(o=r),null!==o&&this.metadata.push(o)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(s)},t.prototype.matchesArray=function(t){return this.matchesTag(s)(t)},t.prototype.isNamed=function(){return this.hasTag(n)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return f.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag(a)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===n}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return f.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(n)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var i=0,r=e.metadata;i<r.length;i++){var a=r[i];if(a.key===t&&a.value===n)return!0}return!1}},t}(),z=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,a=e.length;r<a;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};function Q(t,e,n,i){var r=t.getConstructorMetadata(n),a=r.compilerGeneratedMetadata;if(void 0===a)throw new Error(w+" "+e+".");var o=r.userGeneratedMetadata,s=Object.keys(o),u=0===n.length&&s.length>0,c=s.length>n.length,l=function(t,e,n,i,r){for(var a=[],o=0;o<r;o++){var s=J(o,t,e,n,i);null!==s&&a.push(s)}return a}(i,e,a,o,u||c?s.length:n.length),p=$(t,n,e);return z(z([],l,!0),p,!0)}function J(t,e,n,i,r){var a=r[t.toString()]||[],o=tt(a),s=!0!==o.unmanaged,u=i[t],c=o.inject||o.multiInject;if((u=c||u)instanceof K&&(u=u.unwrap()),s){if(!e&&(u===Object||u===Function||void 0===u))throw new Error(I+" argument "+t+" in class "+n+".");var l=new q(m.ConstructorArgument,o.targetName,u);return l.metadata=a,l}return null}function X(t,e,n,i){var r=t||e;if(void 0===r){var a=w+" for property "+String(n)+" in class "+i+".";throw new Error(a)}return r}function $(t,e,n){for(var i=t.getPropertiesMetadata(e),r=[],a=Object.getOwnPropertySymbols(i),o=0,s=Object.keys(i).concat(a);o<s.length;o++){var u=s[o],c=i[u],l=tt(c),p=l.targetName||u,d=X(l.inject,l.multiInject,u,n),f=new q(m.ClassProperty,p,d);f.metadata=c,r.push(f)}var h=Object.getPrototypeOf(e.prototype).constructor;if(h!==Object){var y=$(t,h,n);r=z(z([],r,!0),y,!0)}return r}function Z(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var i=Q(t,j(n),n,!0),a=i.map((function(t){return t.metadata.filter((function(t){return t.key===r}))})),o=[].concat.apply([],a).length,s=i.length-o;return s>0?s:Z(t,n)}return 0}function tt(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[o],multiInject:e[s],targetName:e[i],unmanaged:e[r]}}var et=function(){function t(t,e,n,i,r){this.id=v(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=r,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,i){var r=new t(e,this.parentContext,this,n,i);return this.childRequests.push(r),r},t}();function nt(t){return t._bindingDictionary}function it(t,e,n,i,r){var a=at(n.container,r.serviceIdentifier),o=[];return a.length===U.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof r.serviceIdentifier&&t.getConstructorMetadata(r.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(r.serviceIdentifier).toSelf(),a=at(n.container,r.serviceIdentifier)),o=e?a:a.filter((function(t){var e=new et(t.serviceIdentifier,n,i,t,r);return t.constraint(e)})),function(t,e,n,i){switch(e.length){case U.NoBindingsAvailable:if(n.isOptional())return e;var r=x(t),a=A;throw a+=function(t,e){if(e.isTagged()||e.isNamed()){var n="",i=e.getNamedTag(),r=e.getCustomTags();return null!==i&&(n+=i.toString()+"\n"),null!==r&&r.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t}(r,n),a+=F(i,r,at),new Error(a);case U.OnlyOneBindingAvailable:return e;case U.MultipleBindingsAvailable:default:if(n.isArray())return e;r=x(t),a=_+" "+r;throw a+=F(i,r,at),new Error(a)}}(r.serviceIdentifier,o,r,n.container),o}function rt(t,e,n,i,r,a){var o,s;if(null===r){o=it(t,e,i,null,a),s=new et(n,i,null,o,a);var u=new B(i,s);i.addPlan(u)}else o=it(t,e,i,r,a),s=r.addChildRequest(a.serviceIdentifier,o,a);o.forEach((function(e){var n=null;if(a.isArray())n=s.addChildRequest(e.serviceIdentifier,e,a);else{if(e.cache)return;n=s}if(e.type===y.Instance&&null!==e.implementationType){var r=function(t,e){return Q(t,j(e),e,!1)}(t,e.implementationType);if(!i.container.options.skipBaseClassChecks){var o=Z(t,e.implementationType);if(r.length<o){var u=N(j(e.implementationType));throw new Error(u)}}r.forEach((function(e){rt(t,!1,e.serviceIdentifier,i,n,e)}))}}))}function at(t,e){var n=[],i=nt(t);return i.hasKey(e)?n=i.get(e):null!==t.parent&&(n=at(t.parent,e)),n}function ot(t,e,n,i,r,a,u,c){void 0===c&&(c=!1);var l=new Y(e),p=function(t,e,n,i,r,a){var u=new H(t?s:o,n),c=new q(e,i,n,u);if(void 0!==r){var l=new H(r,a);c.metadata.push(l)}return c}(n,i,r,"",a,u);try{return rt(t,c,r,l,null,p),l}catch(t){throw P(t)&&V(l.plan.rootRequest),t}}function st(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&"function"==typeof t.then}function ut(t){return!!st(t)||Array.isArray(t)&&t.some(st)}var ct,lt=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((i=i.apply(t,e||[])).next())}))},pt=function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},dt=function(t,e,n){t.has(e.id)||t.set(e.id,n)},ft=function(t,e){t.cache=e,t.activated=!0,st(e)&&ht(t,e)},ht=function(t,e){return lt(void 0,void 0,void 0,(function(){var n,i;return pt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e];case 1:return n=r.sent(),t.cache=n,[3,3];case 2:throw i=r.sent(),t.cache=null,t.activated=!1,i;case 3:return[2]}}))}))};!function(t){t.DynamicValue="toDynamicValue",t.Factory="toFactory",t.Provider="toProvider"}(ct||(ct={}));var yt=function(){return yt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},yt.apply(this,arguments)},mt=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((i=i.apply(t,e||[])).next())}))},gt=function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},vt=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,a=e.length;r<a;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};function Tt(t,e,n){var i;if(e.length>0){var r=function(t,e){return t.reduce((function(t,n){var i=e(n);return n.target.type===m.ConstructorArgument?t.constructorInjections.push(i):(t.propertyRequests.push(n),t.propertyInjections.push(i)),t.isAsync||(t.isAsync=ut(i)),t}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(e,n),a=yt(yt({},r),{constr:t});i=r.isAsync?function(t){return mt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(i){switch(i.label){case 0:return[4,bt(t.constructorInjections)];case 1:return e=i.sent(),[4,bt(t.propertyInjections)];case 2:return n=i.sent(),[2,Et(yt(yt({},t),{constructorInjections:e,propertyInjections:n}))]}}))}))}(a):Et(a)}else i=new t;return i}function Et(t){var e,n=new((e=t.constr).bind.apply(e,vt([void 0],t.constructorInjections,!1)));return t.propertyRequests.forEach((function(e,i){var r=e.target.identifier,a=t.propertyInjections[i];e.target.isOptional()&&void 0===a||(n[r]=a)})),n}function bt(t){return mt(this,void 0,void 0,(function(){var e,n,i,r;return gt(this,(function(a){for(e=[],n=0,i=t;n<i.length;n++)r=i[n],Array.isArray(r)?e.push(Promise.all(r)):e.push(r);return[2,Promise.all(e)]}))}))}function St(t,e){var n=function(t,e){var n,i;if(Reflect.hasMetadata(p,t)){var r=Reflect.getMetadata(p,t);try{return null===(i=(n=e)[r.value])||void 0===i?void 0:i.call(n)}catch(e){if(e instanceof Error)throw new Error(O(t.name,e.message))}}}(t,e);return st(n)?n.then((function(){return e})):e}function _t(t,e){t.scope!==h.Singleton&&function(t,e){var n="Class cannot be instantiated in "+(t.scope===h.Request?"request":"transient")+" scope.";if("function"==typeof t.onDeactivation)throw new Error(M(e.name,n));if(Reflect.hasMetadata(d,e))throw new Error(C(e.name,n))}(t,e)}var At=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((i=i.apply(t,e||[])).next())}))},wt=function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},It=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,i=e.childRequests,r=e.target&&e.target.isArray(),a=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(r&&a)return i.map((function(e){return It(t)(e)}));if(!e.target.isOptional()||0!==n.length){var o=n[0];return Ot(t,e,o)}}},Dt=function(t,e){var n=function(t){switch(t.type){case y.Factory:return{factory:t.factory,factoryType:ct.Factory};case y.Provider:return{factory:t.provider,factoryType:ct.Provider};case y.DynamicValue:return{factory:t.dynamicValue,factoryType:ct.DynamicValue};default:throw new Error("Unexpected factory type "+t.type)}}(t);return function(t,e){try{return t()}catch(t){throw P(t)&&(t=e()),t}}((function(){return n.factory.bind(t)(e)}),(function(){return new Error((t=n.factoryType,i=e.currentRequest.serviceIdentifier.toString(),"It looks like there is a circular dependency in one of the '"+t+"' bindings. Please investigate bindings with service identifier '"+i+"'."));var t,i}))},Rt=function(t,e,n){var i,r=e.childRequests;switch(function(t){var e=null;switch(t.type){case y.ConstantValue:case y.Function:e=t.cache;break;case y.Constructor:case y.Instance:e=t.implementationType;break;case y.DynamicValue:e=t.dynamicValue;break;case y.Provider:e=t.provider;break;case y.Factory:e=t.factory}if(null===e){var n=x(t.serviceIdentifier);throw new Error("Invalid binding type: "+n)}}(n),n.type){case y.ConstantValue:case y.Function:i=n.cache;break;case y.Constructor:i=n.implementationType;break;case y.Instance:i=function(t,e,n,i){_t(t,e);var r=Tt(e,n,i);return st(r)?r.then((function(t){return St(e,t)})):St(e,r)}(n,n.implementationType,r,It(t));break;default:i=Dt(n,e.parentContext)}return i},Nt=function(t,e,n){var i=function(t,e){return e.scope===h.Singleton&&e.activated?e.cache:e.scope===h.Request&&t.has(e.id)?t.get(e.id):null}(t,e);return null!==i||function(t,e,n){e.scope===h.Singleton&&ft(e,n),e.scope===h.Request&&dt(t,e,n)}(t,e,i=n()),i},Ot=function(t,e,n){return Nt(t,n,(function(){var i=Rt(t,e,n);return i=st(i)?i.then((function(t){return Ct(e,n,t)})):Ct(e,n,i)}))};function Ct(t,e,n){var i,r=Mt(t.parentContext,e,n),a=Pt(t.parentContext.container),o=a.next();do{i=o.value;var s=t.parentContext,u=t.serviceIdentifier,c=Ut(i,u);r=st(r)?Lt(c,s,r):kt(c,s,r),o=a.next()}while(!0!==o.done&&!nt(i).hasKey(t.serviceIdentifier));return r}var Mt=function(t,e,n){return"function"==typeof e.onActivation?e.onActivation(t,n):n},kt=function(t,e,n){for(var i=t.next();!i.done;){if(st(n=i.value(e,n)))return Lt(t,e,n);i=t.next()}return n},Lt=function(t,e,n){return At(void 0,void 0,void 0,(function(){var i,r;return wt(this,(function(a){switch(a.label){case 0:return[4,n];case 1:i=a.sent(),r=t.next(),a.label=2;case 2:return r.done?[3,4]:[4,r.value(e,i)];case 3:return i=a.sent(),r=t.next(),[3,2];case 4:return[2,i]}}))}))},Ut=function(t,e){var n=t._activations;return n.hasKey(e)?n.get(e).values():[].values()},Pt=function(t){for(var e=[t],n=t.parent;null!==n;)e.push(n),n=n.parent;return{next:function(){var t=e.pop();return void 0!==t?{done:!1,value:t}:{done:!0,value:void 0}}}};var xt=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||xt(n,e))},Ft=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new H(t,e),n}},Wt=Ft(n),Vt=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var i=e.bindings[0].implementationType;return t===i}return!1}},jt=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new Yt(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=Wt(t),new Yt(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t&&(null!==t.target&&!t.target.isNamed()&&!t.target.isTagged())},new Yt(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=Ft(t)(e),new Yt(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return null!==e&&Vt(t)(e.parentRequest)},new Yt(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return null!==e&&Wt(t)(e.parentRequest)},new Yt(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&Ft(t)(e)(n.parentRequest)},new Yt(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return null!==e&&xt(e,Vt(t))},new Yt(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return null!==e&&!xt(e,Vt(t))},new Yt(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return null!==e&&xt(e,Wt(t))},new Yt(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return null!==e&&!xt(e,Wt(t))},new Yt(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&xt(n,Ft(t)(e))},new Yt(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&!xt(n,Ft(t)(e))},new Yt(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return null!==e&&xt(e,t)},new Yt(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return null!==e&&!xt(e,t)},new Yt(this._binding)},t}(),Yt=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new jt(this._binding)},t.prototype.onDeactivation=function(t){return this._binding.onDeactivation=t,new jt(this._binding)},t}(),Ht=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new jt(this._binding),this._bindingOnSyntax=new Yt(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},t}(),Bt=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=h.Request,new Ht(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=h.Transient,new Ht(this._binding)},t}(),Kt=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new jt(this._binding),this._bindingOnSyntax=new Yt(this._binding),this._bindingInSyntax=new Bt(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},t}(),Gt=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=y.Instance,this._binding.implementationType=t,new Kt(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=y.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=y.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new Kt(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=y.Constructor,this._binding.implementationType=t,this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=y.Factory,this._binding.factory=t,this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error("Value provided to function binding must be a function!");var e=this.toConstantValue(t);return this._binding.type=y.Function,this._binding.scope=h.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=y.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.toAutoNamedFactory=function(t){return this._binding.type=y.Factory,this._binding.factory=function(e){return function(n){return e.container.getNamed(t,n)}},new Ht(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=y.Provider,this._binding.provider=t,this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}(),qt=function(){function t(){}return t.of=function(e,n,i,r,a){var o=new t;return o.bindings=e,o.middleware=n,o.deactivations=r,o.activations=i,o.moduleActivationStore=a,o},t}();var zt=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(b);if(null==e)throw new Error(b);var n=this._map.get(t);void 0!==n?n.push(e):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(b);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(S)},t.prototype.remove=function(t){if(null==t)throw new Error(b);if(!this._map.delete(t))throw new Error(S)},t.prototype.removeIntersection=function(t){var e=this;this.traverse((function(n,i){var r=t.hasKey(n)?t.get(n):void 0;if(void 0!==r){var a=i.filter((function(t){return!r.some((function(e){return t===e}))}));e._setValue(n,a)}}))},t.prototype.removeByCondition=function(t){var e=this,n=[];return this._map.forEach((function(i,r){for(var a=[],o=0,s=i;o<s.length;o++){var u=s[o];t(u)?n.push(u):a.push(u)}e._setValue(r,a)})),n},t.prototype.hasKey=function(t){if(null==t)throw new Error(b);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,"object"==typeof(i=t)&&null!==i&&"clone"in i&&"function"==typeof i.clone?t.clone():t);var i}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t.prototype._setValue=function(t,e){e.length>0?this._map.set(t,e):this._map.delete(t)},t}(),Qt=function(){function t(){this._map=new Map}return t.prototype.remove=function(t){if(this._map.has(t)){var e=this._map.get(t);return this._map.delete(t),e}return this._getEmptyHandlersStore()},t.prototype.addDeactivation=function(t,e,n){this._getModuleActivationHandlers(t).onDeactivations.add(e,n)},t.prototype.addActivation=function(t,e,n){this._getModuleActivationHandlers(t).onActivations.add(e,n)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){e._map.set(n,{onActivations:t.onActivations.clone(),onDeactivations:t.onDeactivations.clone()})})),e},t.prototype._getModuleActivationHandlers=function(t){var e=this._map.get(t);return void 0===e&&(e=this._getEmptyHandlersStore(),this._map.set(t,e)),e},t.prototype._getEmptyHandlersStore=function(){return{onActivations:new zt,onDeactivations:new zt}},t}(),Jt=function(){return Jt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Jt.apply(this,arguments)},Xt=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((i=i.apply(t,e||[])).next())}))},$t=function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Zt=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,a=e.length;r<a;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},te=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===e.defaultScope)e.defaultScope=h.Transient;else if(e.defaultScope!==h.Singleton&&e.defaultScope!==h.Transient&&e.defaultScope!==h.Request)throw new Error('Invalid Container option. Default scope must be a string ("singleton" or "transient").');if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=v(),this._bindingDictionary=new zt,this._snapshots=[],this._middleware=null,this._activations=new zt,this._deactivations=new zt,this.parent=null,this._metadataReader=new L,this._moduleActivationStore=new Qt}return t.merge=function(e,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var a=new t,o=Zt([e,n],i,!0).map((function(t){return nt(t)})),s=nt(a);return o.forEach((function(t){var e;e=s,t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))})),a},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),i=0,r=t;i<r.length;i++){var a=r[i],o=n(a.id);a.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction,o.unbindAsyncFunction,o.onActivationFunction,o.onDeactivationFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,void 0,(function(){var e,n,i,r,a;return $t(this,(function(o){switch(o.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,i=t,o.label=1;case 1:return n<i.length?(r=i[n],a=e(r.id),[4,r.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){var n=t._removeModuleBindings(e.id);t._deactivateSingletons(n),t._removeModuleHandlers(e.id)}))},t.prototype.unloadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,void 0,(function(){var e,n,i,r;return $t(this,(function(a){switch(a.label){case 0:e=0,n=t,a.label=1;case 1:return e<n.length?(i=n[e],r=this._removeModuleBindings(i.id),[4,this._deactivateSingletonsAsync(r)]):[3,4];case 2:a.sent(),this._removeModuleHandlers(i.id),a.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))},t.prototype.bind=function(t){var e=this.options.defaultScope||h.Transient,n=new T(t,e);return this._bindingDictionary.add(t,n),new Gt(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.rebindAsync=function(t){return Xt(this,void 0,void 0,(function(){return $t(this,(function(e){switch(e.label){case 0:return[4,this.unbindAsync(t)];case 1:return e.sent(),[2,this.bind(t)]}}))}))},t.prototype.unbind=function(t){if(this._bindingDictionary.hasKey(t)){var e=this._bindingDictionary.get(t);this._deactivateSingletons(e)}this._removeServiceFromDictionary(t)},t.prototype.unbindAsync=function(t){return Xt(this,void 0,void 0,(function(){var e;return $t(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(t)?(e=this._bindingDictionary.get(t),[4,this._deactivateSingletonsAsync(e)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(t),[2]}}))}))},t.prototype.unbindAll=function(){var t=this;this._bindingDictionary.traverse((function(e,n){t._deactivateSingletons(n)})),this._bindingDictionary=new zt},t.prototype.unbindAllAsync=function(){return Xt(this,void 0,void 0,(function(){var t,e=this;return $t(this,(function(n){switch(n.label){case 0:return t=[],this._bindingDictionary.traverse((function(n,i){t.push(e._deactivateSingletonsAsync(i))})),[4,Promise.all(t)];case 1:return n.sent(),this._bindingDictionary=new zt,[2]}}))}))},t.prototype.onActivation=function(t,e){this._activations.add(t,e)},t.prototype.onDeactivation=function(t,e){this._deactivations.add(t,e)},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isCurrentBound=function(t){return this._bindingDictionary.hasKey(t)},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,n,e)},t.prototype.isBoundTagged=function(t,e,n){var i=!1;if(this._bindingDictionary.hasKey(t)){var r=this._bindingDictionary.get(t),a=function(t,e,n,i){var r=new q(m.Variable,"",e,new H(n,i)),a=new Y(t);return new et(e,a,null,[],r)}(this,t,e,n);i=r.some((function(t){return t.constraint(a)}))}return!i&&this.parent&&(i=this.parent.isBoundTagged(t,e,n)),i},t.prototype.snapshot=function(){this._snapshots.push(qt.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error("No snapshot available to restore.");this._bindingDictionary=t.bindings,this._activations=t.activations,this._deactivations=t.deactivations,this._middleware=t.middleware,this._moduleActivationStore=t.moduleActivationStore},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){var e=this._getNotAllArgs(t,!1);return this._getButThrowIfAsync(e)},t.prototype.getAsync=function(t){return Xt(this,void 0,void 0,(function(){var e;return $t(this,(function(n){return e=this._getNotAllArgs(t,!1),[2,this._get(e)]}))}))},t.prototype.getTagged=function(t,e,n){var i=this._getNotAllArgs(t,!1,e,n);return this._getButThrowIfAsync(i)},t.prototype.getTaggedAsync=function(t,e,n){return Xt(this,void 0,void 0,(function(){var i;return $t(this,(function(r){return i=this._getNotAllArgs(t,!1,e,n),[2,this._get(i)]}))}))},t.prototype.getNamed=function(t,e){return this.getTagged(t,n,e)},t.prototype.getNamedAsync=function(t,e){return this.getTaggedAsync(t,n,e)},t.prototype.getAll=function(t){var e=this._getAllArgs(t);return this._getButThrowIfAsync(e)},t.prototype.getAllAsync=function(t){var e=this._getAllArgs(t);return this._getAll(e)},t.prototype.getAllTagged=function(t,e,n){var i=this._getNotAllArgs(t,!0,e,n);return this._getButThrowIfAsync(i)},t.prototype.getAllTaggedAsync=function(t,e,n){var i=this._getNotAllArgs(t,!0,e,n);return this._getAll(i)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,n,e)},t.prototype.getAllNamedAsync=function(t,e){return this.getAllTaggedAsync(t,n,e)},t.prototype.resolve=function(t){var e=this.isBound(t);e||this.bind(t).toSelf();var n=this.get(t);return e||this.unbind(t),n},t.prototype._preDestroy=function(t,e){var n,i;if(Reflect.hasMetadata(d,t))return null===(i=(n=e)[Reflect.getMetadata(d,t).value])||void 0===i?void 0:i.call(n)},t.prototype._removeModuleHandlers=function(t){var e=this._moduleActivationStore.remove(t);this._activations.removeIntersection(e.onActivations),this._deactivations.removeIntersection(e.onDeactivations)},t.prototype._removeModuleBindings=function(t){return this._bindingDictionary.removeByCondition((function(e){return e.moduleId===t}))},t.prototype._deactivate=function(t,e){var n=this,i=Object.getPrototypeOf(e).constructor;try{if(this._deactivations.hasKey(t.serviceIdentifier)){var r=this._deactivateContainer(e,this._deactivations.get(t.serviceIdentifier).values());if(st(r))return this._handleDeactivationError(r.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(t,e,i)})),i)}var a=this._propagateContainerDeactivationThenBindingAndPreDestroy(t,e,i);if(st(a))return this._handleDeactivationError(a,i)}catch(t){if(t instanceof Error)throw new Error(M(i.name,t.message))}},t.prototype._handleDeactivationError=function(t,e){return Xt(this,void 0,void 0,(function(){var n;return $t(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return i.sent(),[3,3];case 2:if((n=i.sent())instanceof Error)throw new Error(M(e.name,n.message));return[3,3];case 3:return[2]}}))}))},t.prototype._deactivateContainer=function(t,e){for(var n=this,i=e.next();i.value;){var r=i.value(t);if(st(r))return r.then((function(){return n._deactivateContainerAsync(t,e)}));i=e.next()}},t.prototype._deactivateContainerAsync=function(t,e){return Xt(this,void 0,void 0,(function(){var n;return $t(this,(function(i){switch(i.label){case 0:n=e.next(),i.label=1;case 1:return n.value?[4,n.value(t)]:[3,3];case 2:return i.sent(),n=e.next(),[3,1];case 3:return[2]}}))}))},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(i){var r=t.rebind(i);return e(r,n),r}},i=function(e){return function(n,i){t._moduleActivationStore.addActivation(e,n,i),t.onActivation(n,i)}},r=function(e){return function(n,i){t._moduleActivationStore.addDeactivation(e,n,i),t.onDeactivation(n,i)}};return function(a){return{bindFunction:(o=a,function(n){var i=t.bind(n);return e(i,o),i}),isboundFunction:function(e){return t.isBound(e)},onActivationFunction:i(a),onDeactivationFunction:r(a),rebindFunction:n(a),unbindFunction:function(e){return t.unbind(e)},unbindAsyncFunction:function(e){return t.unbindAsync(e)}};var o}},t.prototype._getAll=function(t){return Promise.all(this._get(t))},t.prototype._get=function(t){var e=Jt(Jt({},t),{contextInterceptor:function(t){return t},targetType:m.Variable});if(this._middleware){var n=this._middleware(e);if(null==n)throw new Error("Invalid return type in middleware. Middleware must return!");return n}return this._planAndResolve()(e)},t.prototype._getButThrowIfAsync=function(t){var e=this._get(t);if(ut(e))throw new Error(function(t){return"You are attempting to construct '"+t+"' in a synchronous way\n but it has asynchronous dependencies."}(t.serviceIdentifier));return e},t.prototype._getAllArgs=function(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}},t.prototype._getNotAllArgs=function(t,e,n,i){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:n,value:i}},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=ot(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return function(t){return It(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}(n=e.contextInterceptor(n))}},t.prototype._deactivateIfSingleton=function(t){var e=this;if(t.activated)return st(t.cache)?t.cache.then((function(n){return e._deactivate(t,n)})):this._deactivate(t,t.cache)},t.prototype._deactivateSingletons=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];if(st(this._deactivateIfSingleton(i)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},t.prototype._deactivateSingletonsAsync=function(t){return Xt(this,void 0,void 0,(function(){var e=this;return $t(this,(function(n){switch(n.label){case 0:return[4,Promise.all(t.map((function(t){return e._deactivateIfSingleton(t)})))];case 1:return n.sent(),[2]}}))}))},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(t,e,n){return this.parent?this._deactivate.bind(this.parent)(t,e):this._bindingDeactivationAndPreDestroy(t,e,n)},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(t,e,n){return Xt(this,void 0,void 0,(function(){return $t(this,(function(i){switch(i.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(t,e)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(t,e,n)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))},t.prototype._removeServiceFromDictionary=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error("Could not unbind serviceIdentifier: "+x(t))}},t.prototype._bindingDeactivationAndPreDestroy=function(t,e,n){var i=this;if("function"==typeof t.onDeactivation){var r=t.onDeactivation(e);if(st(r))return r.then((function(){return i._preDestroy(n,e)}))}return this._preDestroy(n,e)},t.prototype._bindingDeactivationAndPreDestroyAsync=function(t,e,n){return Xt(this,void 0,void 0,(function(){return $t(this,(function(i){switch(i.label){case 0:return"function"!=typeof t.onDeactivation?[3,2]:[4,t.onDeactivation(e)];case 1:i.sent(),i.label=2;case 2:return[4,this._preDestroy(n,e)];case 3:return i.sent(),[2]}}))}))},t}();function ee(t,e,n,i){!function(t){if(void 0!==t)throw new Error(R)}(e),ie(u,t,n.toString(),i)}function ne(t){var e=[];if(Array.isArray(t)){var n=function(t){for(var e=new Set,n=0,i=t;n<i.length;n++){var r=i[n];if(e.has(r))return r;e.add(r)}}((e=t).map((function(t){return t.key})));if(void 0!==n)throw new Error(E+" "+n.toString())}else e=[t];return e}function ie(t,e,n,i){var r=ne(i),a={};Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var o=a[n];if(void 0===o)o=[];else for(var s=function(t){if(r.some((function(e){return e.key===t.key})))throw new Error(E+" "+t.key.toString())},u=0,c=o;u<c.length;u++){s(c[u])}o.push.apply(o,r),a[n]=o,Reflect.defineMetadata(t,a,e)}function re(t){return function(e,n,i){"number"==typeof i?ee(e,n,i,t):function(t,e,n){if(void 0!==t.prototype)throw new Error(R);ie(c,t.constructor,e,n)}(e,n,t)}}function ae(){return function(t){if(Reflect.hasOwnMetadata(l,t))throw new Error("Cannot apply @injectable decorator multiple times.");var e=Reflect.getMetadata("design:paramtypes",t)||[];return Reflect.defineMetadata(l,e,t),t}}function oe(t){return function(e){return function(n,i,r){if(void 0===e){var a="function"==typeof n?n.name:n.constructor.name;throw new Error("@inject called with undefined this could mean that the class "+a+" has a circular dependency problem. You can use a LazyServiceIdentifier to  overcome this limitation.")}return re(new H(t,e))(n,i,r)}}}var se=oe(o),ue=oe(s),ce={HttpClientInternal:Symbol.for("HttpClientInternal"),NoopInterceptor:Symbol.for("NoopInterceptor"),JsonpClientBackend:Symbol.for("JsonpClientBackend"),DOCUMENT:Symbol.for("DOCUMENT"),JsonpInterceptor:Symbol.for("JsonpInterceptor"),HttpXhrBackend:Symbol.for("HttpXhrBackend"),XhrFactory:Symbol.for("XhrFactory"),HttpXsrfCookieExtractor:Symbol.for("HttpXsrfCookieExtractor"),HttpXsrfInterceptor:Symbol.for("HttpXsrfInterceptor"),HTTP_INTERCEPTORS:Symbol.for("HTTP_INTERCEPTORS"),HttpBackend:Symbol.for("HttpBackend"),HttpInterceptingHandler:Symbol.for("HttpInterceptingHandler"),HttpInterceptor:Symbol.for("HttpInterceptor"),GlobalHttpInterceptor:Symbol.for("GlobalHttpInterceptor")},le=function(t,e){return le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},le(t,e)};function pe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}le(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var de=function(){return de=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},de.apply(this,arguments)};function fe(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function he(t,e){return function(n,i){e(n,i,t)}}function ye(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function me(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((i=i.apply(t,e||[])).next())}))}function ge(t,e){var n,i,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function ve(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Te(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function Ee(t,e,n){if(n||2===arguments.length)for(var i,r=0,a=e.length;r<a;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function be(t){return this instanceof be?(this.v=t,this):new be(t)}function Se(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),a=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",(function(t){return function(e){return Promise.resolve(e).then(t,c)}})),i[Symbol.asyncIterator]=function(){return this},i;function o(t,e){r[t]&&(i[t]=function(e){return new Promise((function(n,i){a.push([t,e,n,i])>1||s(t,e)}))},e&&(i[t]=e(i[t])))}function s(t,e){try{(n=r[t](e)).value instanceof be?Promise.resolve(n.value.v).then(u,c):l(a[0][2],n)}catch(t){l(a[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),a.shift(),a.length&&s(a[0][0],a[0][1])}}function _e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=ve(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}function Ae(t){return"function"==typeof t}function we(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}"function"==typeof SuppressedError&&SuppressedError;var Ie=we((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function De(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var e;return t.prototype.unsubscribe=function(){var t,e,n,i,r;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=ve(a),s=o.next();!s.done;s=o.next()){s.value.remove(this)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}else a.remove(this);var u=this.initialTeardown;if(Ae(u))try{u()}catch(t){r=t instanceof Ie?t.errors:[t]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var l=ve(c),p=l.next();!p.done;p=l.next()){var d=p.value;try{Ce(d)}catch(t){r=null!=r?r:[],t instanceof Ie?r=Ee(Ee([],Te(r)),Te(t.errors)):r.push(t)}}}catch(t){n={error:t}}finally{try{p&&!p.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}if(r)throw new Ie(r)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Ce(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&De(e,t)},t.prototype.remove=function(e){var n=this._finalizers;n&&De(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),Ne=Re.EMPTY;function Oe(t){return t instanceof Re||t&&"closed"in t&&Ae(t.remove)&&Ae(t.add)&&Ae(t.unsubscribe)}function Ce(t){Ae(t)?t():t.unsubscribe()}var Me={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ke={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=ke.delegate;return(null==r?void 0:r.setTimeout)?r.setTimeout.apply(r,Ee([t,e],Te(n))):setTimeout.apply(void 0,Ee([t,e],Te(n)))},clearTimeout:function(t){var e=ke.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Le(t){ke.setTimeout((function(){throw t}))}function Ue(){}var Pe=null;function xe(t){if(Me.useDeprecatedSynchronousErrorHandling){var e=!Pe;if(e&&(Pe={errorThrown:!1,error:null}),t(),e){var n=Pe,i=n.errorThrown,r=n.error;if(Pe=null,i)throw r}}else t()}var Fe=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,Oe(e)&&e.add(n)):n.destination=Be,n}return pe(e,t),e.create=function(t,e,n){return new Ye(t,e,n)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Re),We=Function.prototype.bind;function Ve(t,e){return We.call(t,e)}var je=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){He(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){He(t)}else He(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){He(t)}},t}(),Ye=function(t){function e(e,n,i){var r,a,o=t.call(this)||this;Ae(e)||!e?r={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=i?i:void 0}:o&&Me.useDeprecatedNextContext?((a=Object.create(e)).unsubscribe=function(){return o.unsubscribe()},r={next:e.next&&Ve(e.next,a),error:e.error&&Ve(e.error,a),complete:e.complete&&Ve(e.complete,a)}):r=e;return o.destination=new je(r),o}return pe(e,t),e}(Fe);function He(t){Le(t)}var Be={closed:!0,next:Ue,error:function(t){throw t},complete:Ue},Ke="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ge(t){return t}var qe=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this,r=function(t){return t&&t instanceof Fe||function(t){return t&&Ae(t.next)&&Ae(t.error)&&Ae(t.complete)}(t)&&Oe(t)}(t)?t:new Ye(t,e,n);return xe((function(){var t=i,e=t.operator,n=t.source;r.add(e?e.call(r,n):n?i._subscribe(r):i._trySubscribe(r))})),r},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=ze(e))((function(e,i){var r=new Ye({next:function(e){try{t(e)}catch(t){i(t),r.unsubscribe()}},error:i,complete:e});n.subscribe(r)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[Ke]=function(){return this},t.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0===(t=e).length?Ge:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)})(this)},t.prototype.toPromise=function(t){var e=this;return new(t=ze(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function ze(t){var e;return null!==(e=null!=t?t:Me.Promise)&&void 0!==e?e:Promise}function Qe(t){return Ae(null==t?void 0:t.lift)}function Je(t){return function(e){if(Qe(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Xe(t,e,n,i,r){return new $e(t,e,n,i,r)}var $e=function(t){function e(e,n,i,r,a,o){var s=t.call(this,e)||this;return s.onFinalize=a,s.shouldUnsubscribe=o,s._next=n?function(t){try{n(t)}catch(t){e.error(t)}}:t.prototype._next,s._error=r?function(t){try{r(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,s._complete=i?function(){try{i()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,s}return pe(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(Fe);function Ze(){return Je((function(t,e){var n=null;t._refCount++;var i=Xe(e,void 0,void 0,void 0,(function(){if(!t||t._refCount<=0||0<--t._refCount)n=null;else{var i=t._connection,r=n;n=null,!i||r&&i!==r||i.unsubscribe(),e.unsubscribe()}}));t.subscribe(i),i.closed||(n=t.connect())}))}var tn=function(t){function e(e,n){var i=t.call(this)||this;return i.source=e,i.subjectFactory=n,i._subject=null,i._refCount=0,i._connection=null,Qe(e)&&(i.lift=e.lift),i}return pe(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,null==t||t.unsubscribe()},e.prototype.connect=function(){var t=this,e=this._connection;if(!e){e=this._connection=new Re;var n=this.getSubject();e.add(this.source.subscribe(Xe(n,void 0,(function(){t._teardown(),n.complete()}),(function(e){t._teardown(),n.error(e)}),(function(){return t._teardown()})))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e},e.prototype.refCount=function(){return Ze()(this)},e}(qe),en=we((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),nn=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return pe(e,t),e.prototype.lift=function(t){var e=new rn(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new en},e.prototype.next=function(t){var e=this;xe((function(){var n,i;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var r=ve(e.currentObservers),a=r.next();!a.done;a=r.next()){a.value.next(t)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}}))},e.prototype.error=function(t){var e=this;xe((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}}))},e.prototype.complete=function(){var t=this;xe((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,n=this,i=n.hasError,r=n.isStopped,a=n.observers;return i||r?Ne:(this.currentObservers=null,a.push(t),new Re((function(){e.currentObservers=null,De(a,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,n=e.hasError,i=e.thrownError,r=e.isStopped;n?t.error(i):r&&t.complete()},e.prototype.asObservable=function(){var t=new qe;return t.source=this,t},e.create=function(t,e){return new rn(t,e)},e}(qe),rn=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return pe(e,t),e.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},e.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:Ne},e}(nn),an=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return pe(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){var t=this,e=t.hasError,n=t.thrownError,i=t._value;if(e)throw n;return this._throwIfClosed(),i},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(nn),on={now:function(){return(on.delegate||Date).now()},delegate:void 0},sn=function(t){function e(e,n,i){void 0===e&&(e=1/0),void 0===n&&(n=1/0),void 0===i&&(i=on);var r=t.call(this)||this;return r._bufferSize=e,r._windowTime=n,r._timestampProvider=i,r._buffer=[],r._infiniteTimeWindow=!0,r._infiniteTimeWindow=n===1/0,r._bufferSize=Math.max(1,e),r._windowTime=Math.max(1,n),r}return pe(e,t),e.prototype.next=function(e){var n=this,i=n.isStopped,r=n._buffer,a=n._infiniteTimeWindow,o=n._timestampProvider,s=n._windowTime;i||(r.push(e),!a&&r.push(o.now()+s)),this._trimBuffer(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var e=this._innerSubscribe(t),n=this._infiniteTimeWindow,i=this._buffer.slice(),r=0;r<i.length&&!t.closed;r+=n?1:2)t.next(i[r]);return this._checkFinalizedStatuses(t),e},e.prototype._trimBuffer=function(){var t=this,e=t._bufferSize,n=t._timestampProvider,i=t._buffer,r=t._infiniteTimeWindow,a=(r?1:2)*e;if(e<1/0&&a<i.length&&i.splice(0,i.length-a),!r){for(var o=n.now(),s=0,u=1;u<i.length&&i[u]<=o;u+=2)s=u;s&&i.splice(0,s+1)}},e}(nn),un=function(t){function e(e,n){return t.call(this)||this}return pe(e,t),e.prototype.schedule=function(t,e){return this},e}(Re),cn={setInterval:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=cn.delegate;return(null==r?void 0:r.setInterval)?r.setInterval.apply(r,Ee([t,e],Te(n))):setInterval.apply(void 0,Ee([t,e],Te(n)))},clearInterval:function(t){var e=cn.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},ln=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.pending=!1,i}return pe(e,t),e.prototype.schedule=function(t,e){var n;if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),cn.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&cn.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n,i=!1;try{this.work(t)}catch(t){i=!0,n=t||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),n},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,n=this.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,De(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(un),pn=function(){function t(e,n){void 0===n&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},t.now=on.now,t}(),dn=new(function(t){function e(e,n){void 0===n&&(n=pn.now);var i=t.call(this,e,n)||this;return i.actions=[],i._active=!1,i}return pe(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(pn))(ln),fn=dn,hn=new qe((function(t){return t.complete()}));function yn(t){return t&&Ae(t.schedule)}function mn(t){return t[t.length-1]}function gn(t){return yn(mn(t))?t.pop():void 0}var vn=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Tn(t){return Ae(null==t?void 0:t.then)}function En(t){return Ae(t[Ke])}function bn(t){return Symbol.asyncIterator&&Ae(null==t?void 0:t[Symbol.asyncIterator])}function Sn(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var _n="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function An(t){return Ae(null==t?void 0:t[_n])}function wn(t){return Se(this,arguments,(function(){var e,n,i;return ge(this,(function(r){switch(r.label){case 0:e=t.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,be(e.read())];case 3:return n=r.sent(),i=n.value,n.done?[4,be(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,be(i)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function In(t){return Ae(null==t?void 0:t.getReader)}function Dn(t){if(t instanceof qe)return t;if(null!=t){if(En(t))return r=t,new qe((function(t){var e=r[Ke]();if(Ae(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(vn(t))return i=t,new qe((function(t){for(var e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()}));if(Tn(t))return n=t,new qe((function(t){n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Le)}));if(bn(t))return Rn(t);if(An(t))return e=t,new qe((function(t){var n,i;try{for(var r=ve(e),a=r.next();!a.done;a=r.next()){var o=a.value;if(t.next(o),t.closed)return}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.complete()}));if(In(t))return Rn(wn(t))}var e,n,i,r;throw Sn(t)}function Rn(t){return new qe((function(e){(function(t,e){var n,i,r,a;return me(this,void 0,void 0,(function(){var o,s;return ge(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=_e(t),u.label=1;case 1:return[4,n.next()];case 2:if((i=u.sent()).done)return[3,4];if(o=i.value,e.next(o),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=u.sent(),r={error:s},[3,11];case 6:return u.trys.push([6,,9,10]),i&&!i.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}function Nn(t,e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=!1);var a=e.schedule((function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()}),i);if(t.add(a),!r)return a}function On(t,e){return void 0===e&&(e=0),Je((function(n,i){n.subscribe(Xe(i,(function(n){return Nn(i,t,(function(){return i.next(n)}),e)}),(function(){return Nn(i,t,(function(){return i.complete()}),e)}),(function(n){return Nn(i,t,(function(){return i.error(n)}),e)})))}))}function Cn(t,e){return void 0===e&&(e=0),Je((function(n,i){i.add(t.schedule((function(){return n.subscribe(i)}),e))}))}function Mn(t,e){if(!t)throw new Error("Iterable cannot be null");return new qe((function(n){Nn(n,e,(function(){var i=t[Symbol.asyncIterator]();Nn(n,e,(function(){i.next().then((function(t){t.done?n.complete():n.next(t.value)}))}),0,!0)}))}))}function kn(t,e){if(null!=t){if(En(t))return function(t,e){return Dn(t).pipe(Cn(e),On(e))}(t,e);if(vn(t))return function(t,e){return new qe((function(n){var i=0;return e.schedule((function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())}))}))}(t,e);if(Tn(t))return function(t,e){return Dn(t).pipe(Cn(e),On(e))}(t,e);if(bn(t))return Mn(t,e);if(An(t))return function(t,e){return new qe((function(n){var i;return Nn(n,e,(function(){i=t[_n](),Nn(n,e,(function(){var t,e,r;try{e=(t=i.next()).value,r=t.done}catch(t){return void n.error(t)}r?n.complete():n.next(e)}),0,!0)})),function(){return Ae(null==i?void 0:i.return)&&i.return()}}))}(t,e);if(In(t))return function(t,e){return Mn(wn(t),e)}(t,e)}throw Sn(t)}function Ln(t,e){return e?kn(t,e):Dn(t)}function Un(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ln(t,gn(t))}function Pn(t,e){var n=Ae(t)?t:function(){return t},i=function(t){return t.error(n())};return new qe(e?function(t){return e.schedule(i,0,t)}:i)}function xn(t,e){return Je((function(n,i){var r=0;n.subscribe(Xe(i,(function(n){i.next(t.call(e,n,r++))})))}))}var Fn=Array.isArray;function Wn(t){return xn((function(e){return function(t,e){return Fn(e)?t.apply(void 0,Ee([],Te(e))):t(e)}(t,e)}))}var Vn=Array.isArray,jn=Object.getPrototypeOf,Yn=Object.prototype,Hn=Object.keys;function Bn(t){if(1===t.length){var e=t[0];if(Vn(e))return{args:e,keys:null};if((i=e)&&"object"==typeof i&&jn(i)===Yn){var n=Hn(e);return{args:n.map((function(t){return e[t]})),keys:n}}}var i;return{args:t,keys:null}}function Kn(t,e,n,i,r,a,o,s){var u=[],c=0,l=0,p=!1,d=function(){!p||u.length||c||e.complete()},f=function(t){return c<i?h(t):u.push(t)},h=function(t){a&&e.next(t),c++;var s=!1;Dn(n(t,l++)).subscribe(Xe(e,(function(t){null==r||r(t),a?f(t):e.next(t)}),(function(){s=!0}),void 0,(function(){if(s)try{c--;for(var t=function(){var t=u.shift();o?Nn(e,o,(function(){return h(t)})):h(t)};u.length&&c<i;)t();d()}catch(t){e.error(t)}})))};return t.subscribe(Xe(e,f,(function(){p=!0,d()}))),function(){null==s||s()}}function Gn(t,e,n){return void 0===n&&(n=1/0),Ae(e)?Gn((function(n,i){return xn((function(t,r){return e(n,t,i,r)}))(Dn(t(n,i)))}),n):("number"==typeof e&&(n=e),Je((function(e,i){return Kn(e,i,t,n)})))}function qn(){return void 0===(t=1)&&(t=1/0),Gn(Ge,t);var t}function zn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(t){return Ae(mn(t))?t.pop():void 0}(t),i=Bn(t),r=i.args,a=i.keys,o=new qe((function(t){var e=r.length;if(e)for(var n=new Array(e),i=e,o=e,s=function(e){var s=!1;Dn(r[e]).subscribe(Xe(t,(function(t){s||(s=!0,o--),n[e]=t}),(function(){return i--}),void 0,(function(){i&&s||(o||t.next(a?function(t,e){return t.reduce((function(t,n,i){return t[n]=e[i],t}),{})}(a,n):n),t.complete())})))},u=0;u<e;u++)s(u);else t.complete()}));return n?o.pipe(Wn(n)):o}function Qn(t,e,n){void 0===t&&(t=0),void 0===n&&(n=fn);var i=-1;return null!=e&&(yn(e)?n=e:i=e),new qe((function(e){var r=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;r<0&&(r=0);var a=0;return n.schedule((function(){e.closed||(e.next(a++),0<=i?this.schedule(void 0,i):e.complete())}),r)}))}function Jn(t,e){return Je((function(n,i){var r=0;n.subscribe(Xe(i,(function(n){return t.call(e,n,r++)&&i.next(n)})))}))}function Xn(t){return Je((function(e,n){var i,r=null,a=!1;r=e.subscribe(Xe(n,void 0,void 0,(function(o){i=Dn(t(o,Xn(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):a=!0}))),a&&(r.unsubscribe(),r=null,i.subscribe(n))}))}function $n(t,e){return Je(function(t,e,n,i,r){return function(a,o){var s=n,u=e,c=0;a.subscribe(Xe(o,(function(e){var n=c++;u=s?t(u,e,n):(s=!0,e),i&&o.next(u)}),r&&function(){s&&o.next(u),o.complete()}))}}(t,e,arguments.length>=2,!1,!0))}var Zn=function(t,e){return t.push(e),t};function ti(t,e){return Ae(e)?Gn(t,e,1):Gn(t,1)}var ei={connector:function(){return new nn}};function ni(t,e){void 0===e&&(e=ei);var n=e.connector;return Je((function(e,i){var r,a=n();Dn(t((r=a,new qe((function(t){return r.subscribe(t)}))))).subscribe(i),i.add(e.subscribe(a))}))}function ii(t,e){return void 0===e&&(e=dn),Je((function(n,i){var r=null,a=null,o=null,s=function(){if(r){r.unsubscribe(),r=null;var t=a;a=null,i.next(t)}};function u(){var n=o+t,a=e.now();if(a<n)return r=this.schedule(void 0,n-a),void i.add(r);s()}n.subscribe(Xe(i,(function(n){a=n,o=e.now(),r||(r=e.schedule(u,t),i.add(r))}),(function(){s(),i.complete()}),void 0,(function(){a=r=null})))}))}function ri(t){return t<=0?function(){return hn}:Je((function(e,n){var i=0;e.subscribe(Xe(n,(function(e){++i<=t&&(n.next(e),t<=i&&n.complete())})))}))}function ai(t,e){return e?function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return qn()(Ln(t,gn(t)))}(e.pipe(ri(1),Je((function(t,e){t.subscribe(Xe(e,Ue))}))),n.pipe(ai(t)))}:Gn((function(e,n){return Dn(t(e,n)).pipe(ri(1),function(t){return xn((function(){return t}))}(e))}))}function oi(t){return Je((function(e,n){try{e.subscribe(n)}finally{n.add(t)}}))}function si(t,e,n,i){n&&!Ae(n)&&(i=n);var r=Ae(n)?n:void 0;return function(n){return function(t,e){var n=Ae(t)?t:function(){return t};return Ae(e)?ni(e,{connector:n}):function(t){return new tn(t,n)}}(new sn(t,e,i),r)(n)}}function ui(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!0!==e){if(!1!==e){var r=new Ye({next:function(){r.unsubscribe(),t()}});return Dn(e.apply(void 0,Ee([],Te(n)))).subscribe(r)}}else t()}function ci(t){return Jn((function(e,n){return t<=n}))}function li(t,e){return Je((function(n,i){var r=null,a=0,o=!1,s=function(){return o&&!r&&i.complete()};n.subscribe(Xe(i,(function(n){null==r||r.unsubscribe();var o=0,u=a++;Dn(t(n,u)).subscribe(r=Xe(i,(function(t){return i.next(e?e(n,t,u,o++):t)}),(function(){r=null,s()})))}),(function(){o=!0,s()})))}))}function pi(t,e,n){var i=Ae(t)||e||n?{next:t,error:e,complete:n}:t;return i?Je((function(t,e){var n;null===(n=i.subscribe)||void 0===n||n.call(i);var r=!0;t.subscribe(Xe(e,(function(t){var n;null===(n=i.next)||void 0===n||n.call(i,t),e.next(t)}),(function(){var t;r=!1,null===(t=i.complete)||void 0===t||t.call(i),e.complete()}),(function(t){var n;r=!1,null===(n=i.error)||void 0===n||n.call(i,t),e.error(t)}),(function(){var t,e;r&&(null===(t=i.unsubscribe)||void 0===t||t.call(i)),null===(e=i.finalize)||void 0===e||e.call(i)})))})):Ge}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */var di=function(){},fi=function(){},hi=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach((function(t){var n=t.indexOf(":");if(n>0){var i=t.slice(0,n),r=i.toLowerCase(),a=t.slice(n+1).trim();e.maybeSetNormalizedName(i,r),e.headers.has(r)?e.headers.get(r).push(a):e.headers.set(r,[a])}}))}:function(){e.headers=new Map,Object.keys(t).forEach((function(n){var i=t[n],r=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(e.headers.set(r,i),e.maybeSetNormalizedName(n,r))}))}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(t){return e.applyUpdate(t)})),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach((function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))}))},t.prototype.clone=function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var i=("a"===t.op?this.headers.get(e):void 0)||[];i.push.apply(i,Ee([],Te(n),!1)),this.headers.set(e,i);break;case"d":var r=t.value;if(r){var a=this.headers.get(e);if(!a)return;a=a.filter((function(t){return-1===r.indexOf(t)})),0===a.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return t(e.normalizedNames.get(n),e.headers.get(n))}))},t}(),yi=function(){function t(){}return t.prototype.encodeKey=function(t){return mi(t)},t.prototype.encodeValue=function(t){return mi(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function mi(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function gi(t){return"".concat(t)}var vi=function(){function t(t){void 0===t&&(t={});var e=this;if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new yi,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){var n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach((function(t){var i=t.indexOf("="),r=Te(-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],2),a=r[0],o=r[1],s=n.get(a)||[];s.push(o),n.set(a,s)})),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach((function(n){var i=t.fromObject[n];e.map.set(n,Array.isArray(i)?i:[i])}))):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.appendAll=function(t){var e=[];return Object.keys(t).forEach((function(n){var i=t[n];Array.isArray(i)?i.forEach((function(t){e.push({param:n,value:t,op:"a"})})):e.push({param:n,value:i,op:"a"})})),this.clone(e)},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map((function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map((function(e){return n+"="+t.encoder.encodeValue(e)})).join("&")})).filter((function(t){return""!==t})).join("&")},t.prototype.clone=function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(e){return t.map.set(e,t.cloneFrom.map.get(e))})),this.updates.forEach((function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(gi(e.value)),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var i=t.map.get(e.param)||[],r=i.indexOf(gi(e.value));-1!==r&&i.splice(r,1),i.length>0?t.map.set(e.param,i):t.map.delete(e.param)}})),this.cloneFrom=this.updates=null)},t}(),Ti=function(t){this.defaultValue=t},Ei=function(){function t(){this.map=new Map}return t.prototype.set=function(t,e){return this.map.set(t,e),this},t.prototype.get=function(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)},t.prototype.delete=function(t){return this.map.delete(t),this},t.prototype.has=function(t){return this.map.has(t)},t.prototype.keys=function(){return this.map.keys()},t.prototype.forEach=function(t){this.map.forEach((function(e,n){return t(n,e)}))},t}();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function bi(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Si(t){return"undefined"!=typeof Blob&&t instanceof Blob}function _i(t){return"undefined"!=typeof FormData&&t instanceof FormData}var Ai,wi=function(){function t(t,e,n,i){var r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new hi),this.context||(this.context=new Ei),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=e;else{var o=e.indexOf("?"),s=-1===o?"?":o<e.length-1?"&":"";this.urlWithParams=e+s+a}}else this.params=new vi,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:bi(this.body)||Si(this.body)||_i(this.body)||"string"==typeof this.body?this.body:this.body instanceof vi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body||_i(this.body)?null:Si(this.body)?this.body.type||null:bi(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){var n;void 0===e&&(e={});var i=e.method||this.method,r=e.url||this.url,a=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,u=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,p=null!==(n=e.context)&&void 0!==n?n:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((function(t,n){return t.set(n,e.setHeaders[n])}),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((function(t,n){return t.set(n,e.setParams[n])}),l)),new t(i,r,o,{params:l,headers:c,context:p,reportProgress:u,responseType:a,withCredentials:s})},t}();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */!function(t){t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User"}(Ai||(Ai={}));var Ii=function(t,e,n){void 0===e&&(e=200),void 0===n&&(n="OK"),this.headers=t.headers||new hi,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},Di=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=Ai.ResponseHeader,n}return pe(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(Ii),Ri=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=Ai.Response,n.body=void 0!==e.body?e.body:null,n}return pe(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(Ii),Ni=function(t){function e(e){var n=t.call(this,e,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.status>=200&&n.status<300?n.message="Http failure during parsing for ".concat(e.url||"(unknown url)"):n.message="Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),n.error=e.error||null,n}return pe(e,t),e}(Ii);
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function Oi(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var Ci=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,n){var i,r=this;if(void 0===n&&(n={}),t instanceof wi)i=t;else{var a=void 0;a=n.headers instanceof hi?n.headers:new hi(n.headers);var o=void 0;n.params&&(o=n.params instanceof vi?n.params:new vi({fromObject:n.params})),i=new wi(t,e,void 0!==n.body?n.body:null,{headers:a,context:n.context,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var s=Un(i).pipe(ti((function(t){return r.handler.handle(t)})));if(t instanceof wi||"events"===n.observe)return s;var u=s.pipe(Jn((function(t){return t instanceof Ri})));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return u.pipe(xn((function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body})));case"blob":return u.pipe(xn((function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body})));case"text":return u.pipe(xn((function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body})));default:return u.pipe(xn((function(t){return t.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(n.observe,"}"))}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new vi).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,n){return void 0===n&&(n={}),this.request("PATCH",t,Oi(n,e))},t.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.request("POST",t,Oi(n,e))},t.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.request("PUT",t,Oi(n,e))},t=fe([ae(),he(0,se(ce.HttpInterceptingHandler)),ye("design:paramtypes",[di])],t)}(),Mi=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),ki=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t=fe([ae()],t)}(),Li=0,Ui=function(){},Pi=function(){function t(t,e){this.callbackMap=t,this.document=e,this.resolvedPromise=Promise.resolve()}return t.prototype.nextCallback=function(){return"ng_jsonp_callback_".concat(Li++)},t.prototype.handle=function(t){var e=this;if("JSONP"!==t.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==t.responseType)throw new Error("JSONP requests must use Json response type.");return new qe((function(n){var i=e.nextCallback(),r=t.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,"=".concat(i,"$1")),a=e.document.createElement("script");a.src=r;var o=null,s=!1,u=!1;e.callbackMap[i]=function(t){delete e.callbackMap[i],u||(o=t,s=!0)};var c=function(){a.parentNode&&a.parentNode.removeChild(a),delete e.callbackMap[i]},l=function(t){u||e.resolvedPromise.then((function(){c(),s?(n.next(new Ri({body:o,status:200,statusText:"OK",url:r})),n.complete()):n.error(new Ni({url:r,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")}))}))},p=function(t){u||(c(),n.error(new Ni({error:t,status:0,statusText:"JSONP Error",url:r})))};return a.addEventListener("load",l),a.addEventListener("error",p),e.document.body.appendChild(a),n.next({type:Ai.Sent}),function(){u=!0,a.removeEventListener("load",l),a.removeEventListener("error",p),c()}}))},t=fe([ae(),he(1,se(ce.DOCUMENT)),ye("design:paramtypes",[Ui,Object])],t)}(),xi=function(){function t(t){this.jsonp=t}return t.prototype.intercept=function(t,e){return"JSONP"===t.method?this.jsonp.handle(t):e.handle(t)},t=fe([ae(),he(0,se(ce.JsonpClientBackend)),ye("design:paramtypes",[Pi])],t)}(),Fi=function(){function t(){}return t=fe([ae(),ye("design:paramtypes",[])],t)}(),Wi=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t=fe([ae()],t)}(),Vi=function(){function t(t,e){this.backend=t,this.httpInterceptors=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.httpInterceptors;this.chain=e.reduceRight((function(t,e){return new Mi(t,e)}),this.backend)}return this.chain.handle(t)},t=fe([ae(),he(0,se(ce.HttpBackend)),he(1,ue(ce.HTTP_INTERCEPTORS)),ye("design:paramtypes",[fi,Array])],t)}(),ji=/^\)\]\}',?\n/;
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */var Yi=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new qe((function(n){var i=e.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((function(t,e){return i.setRequestHeader(t,e.join(","))})),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var r=t.detectContentTypeHeader();null!==r&&i.setRequestHeader("Content-Type",r)}if(t.responseType){var a=t.responseType.toLowerCase();i.responseType="json"!==a?a:"text"}var o=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===i.status?204:i.status,n=i.statusText||"OK",r=new hi(i.getAllResponseHeaders()),a=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||t.url;return s=new Di({headers:r,status:e,statusText:n,url:a})},c=function(){var e=u(),r=e.headers,a=e.status,o=e.statusText,s=e.url,c=null;204!==a&&(c=void 0===i.response?i.responseText:i.response),0===a&&(a=c?200:0);var l=a>=200&&a<300;if("json"===t.responseType&&"string"==typeof c){var p=c;c=c.replace(ji,"");try{c=""!==c?JSON.parse(c):null}catch(t){c=p,l&&(l=!1,c={error:t,text:c})}}l?(n.next(new Ri({body:c,headers:r,status:a,statusText:o,url:s||void 0})),n.complete()):n.error(new Ni({error:c,headers:r,status:a,statusText:o,url:s||void 0}))},l=function(t){var e=u().url,r=new Ni({error:t,status:i.status||0,statusText:i.statusText||"Unknown Error",url:e||void 0});n.error(r)},p=!1,d=function(e){p||(n.next(u()),p=!0);var r={type:Ai.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(r.total=e.total),"text"===t.responseType&&i.responseText&&(r.partialText=i.responseText),n.next(r)},f=function(t){var e={type:Ai.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return i.addEventListener("load",c),i.addEventListener("error",l),i.addEventListener("timeout",l),i.addEventListener("abort",l),t.reportProgress&&(i.addEventListener("progress",d),null!==o&&i.upload&&i.upload.addEventListener("progress",f)),i.send(o),n.next({type:Ai.Sent}),function(){i.removeEventListener("error",l),i.removeEventListener("abort",l),i.removeEventListener("load",c),i.removeEventListener("timeout",l),t.reportProgress&&(i.removeEventListener("progress",d),null!==o&&i.upload&&i.upload.removeEventListener("progress",f)),i.readyState!==i.DONE&&i.abort()}}))},t=fe([ae(),he(0,se(ce.XhrFactory)),ye("design:paramtypes",[Wi])],t)}(),Hi=new Ti((function(){return{}})),Bi=new Ti((function(){return{}})),Ki=new Ti((function(){return{}})),Gi=function(){function t(){}return t.prototype.handle=function(t){return"POST"===t.method&&t.context.has(Hi)?this.upload(t):"GET"===t.method&&t.context.has(Bi)?this.download(t):this.request(t)},t.prototype.upload=function(t){var e=this;return new qe((function(n){var i=function(e){var i=e.header;n.next(new Di({url:t.url,headers:new hi(i)}))},r=function(t){var e=t.totalBytesSent,i=t.totalBytesExpectedToSend;n.next({type:Ai.UploadProgress,loaded:e,total:i})},a=t.context.get(Hi),o=a.filePath,s=a.fileName,u=a.timeout,c=a.baseUrl,l=wx.uploadFile({url:(c||"")+t.urlWithParams,filePath:o,name:s,header:e.buildHeaders(t),formData:t.body,timeout:u,success:function(e){var i=e.data,r=e.statusCode,a=e.errMsg,o=r>=200&&r<300,s=null;if("json"===t.responseType&&"string"==typeof i&&""!==i)try{s=JSON.parse(i)}catch(t){o&&(o=!1,s={error:t,text:s})}o?(n.next(new Ri({url:t.url,body:s,status:r,statusText:a})),n.complete()):n.error(new Ni({url:t.url,error:s,status:r,statusText:a}))},fail:function(e){var i=e.errMsg;n.error(new Ni({url:t.url,statusText:i}))}});return n.next({type:Ai.Sent}),t.reportProgress&&(l.onHeadersReceived(i),l.onProgressUpdate(r)),function(){t.reportProgress&&(l.offHeadersReceived(i),l.offProgressUpdate(r)),l.abort()}}))},t.prototype.download=function(t){var e=this;return new qe((function(n){var i=function(e){var i=e.header;n.next(new Di({url:t.url,headers:new hi(i)}))},r=function(t){var e=t.totalBytesWritten,i=t.totalBytesExpectedToWrite;n.next({type:Ai.DownloadProgress,loaded:e,total:i})},a=t.context.get(Bi),o=a.filePath,s=a.timeout,u=wx.downloadFile({url:t.urlWithParams,filePath:o,header:e.buildHeaders(t),timeout:s,success:function(e){var i=e.statusCode,r=e.errMsg;i>=200&&i<300?(n.next(new Ri({url:t.url,status:i,statusText:r})),n.complete()):n.error(new Ni({url:t.url,status:i,statusText:r}))},fail:function(e){var i=e.errMsg;n.error(new Ni({url:t.url,statusText:i}))}});return n.next({type:Ai.Sent}),t.reportProgress&&(u.onHeadersReceived(i),u.onProgressUpdate(r)),function(){t.reportProgress&&(u.offHeadersReceived(i),u.offProgressUpdate(r)),u.abort()}}))},t.prototype.request=function(t){var e=this;return new qe((function(n){if("PATCH"===t.method)throw Error("WeChat MiniProgram does not support http method as "+t.method);var i=function(e){var i=e.header;n.next(new Di({url:t.url,headers:new hi(i)}))},r=wx.request(de({url:(t.context.get(Ki).baseUrl||"")+t.urlWithParams,method:t.method,data:t.body,header:e.buildHeaders(t),responseType:"arraybuffer"===t.responseType?t.responseType:"text",dataType:"json"===t.responseType?t.responseType:"其他",success:function(e){var i=e.data,r=e.header,a=e.statusCode,o=e.errMsg,s=a>=200&&a<300,u=new hi(r);s?(n.next(new Ri({url:t.url,body:i,status:a,statusText:o,headers:u})),n.complete()):n.error(new Ni({url:t.url,error:i,status:a,statusText:o,headers:u}))},fail:function(e){var i=e.errMsg;n.error(new Ni({url:t.url,statusText:i}))}},t.context.get(Ki)));return n.next({type:Ai.Sent}),t.reportProgress&&r.onHeadersReceived(i),function(){t.reportProgress&&r.offHeadersReceived(i),r.abort()}}))},t.prototype.buildHeaders=function(t){return t.headers.keys().reduce((function(e,n){return e[n]=t.headers.getAll(n).join(","),e}),{})},t=fe([ae()],t)}(),qi="X-XSRF-TOKEN";var zi=function(){},Qi=function(){function t(t){this.doc=t,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=function(t,e){var n,i;e=encodeURIComponent(e);try{for(var r=ve(t.split(";")),a=r.next();!a.done;a=r.next()){var o=a.value,s=o.indexOf("="),u=Te(-1==s?[o,""]:[o.slice(0,s),o.slice(s+1)],2),c=u[0],l=u[1];if(c.trim()===e)return decodeURIComponent(l)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return null}(t,"XSRF-TOKEN"),this.lastCookieString=t),this.lastToken},t=fe([ae(),he(0,se(ce.DOCUMENT)),ye("design:paramtypes",[Object])],t)}(),Ji=function(){function t(t){this.tokenService=t}return t.prototype.intercept=function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var i=this.tokenService.getToken();return null===i||t.headers.has(qi)||(t=t.clone({headers:t.headers.set(qi,i)})),e.handle(t)},t=fe([ae(),he(0,se(ce.HttpXsrfCookieExtractor)),ye("design:paramtypes",[zi])],t)}(),Xi=new te;Xi.bind(ce.HttpClientInternal).to(Ci),Xi.bind(ce.NoopInterceptor).to(ki),Xi.bind(ce.JsonpClientBackend).to(Pi),Xi.bind(ce.DOCUMENT).to(Fi),Xi.bind(ce.JsonpInterceptor).to(xi),window&&window.XMLHttpRequest&&Xi.bind(ce.XhrFactory).to(Wi),Xi.bind(ce.HttpXsrfCookieExtractor).to(Qi),Xi.bind(ce.HttpXsrfInterceptor).to(Ji),Xi.bind(ce.HTTP_INTERCEPTORS).to(Ji),Xi.bind(ce.HttpBackend).toDynamicValue((function(t){return window&&window.XMLHttpRequest?new Yi(t.container.get(ce.XhrFactory)):new Gi})),Xi.bind(ce.HttpInterceptingHandler).to(Vi);var $i=function(){function t(){}return t.prototype.decodeToken=function(t){if(!t||""===t)return null;var e=t.split(".");if(3!==e.length)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");var n=this.urlBase64Decode(e[1]);if(!n)throw new Error("Cannot decode the token.");return JSON.parse(n)},t.prototype.urlBase64Decode=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(e)},t.prototype.b64DecodeUnicode=function(t){return decodeURIComponent(Array.prototype.map.call(this.b64decode(t),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))},t.prototype.b64decode=function(t){var e="";if((t=String(t).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var n=0,i=void 0,r=void 0,a=0;r=t.charAt(a++);~r&&(i=n%4?64*i+r:r,n++%4)?e+=String.fromCharCode(255&i>>(-2*n&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return e},t}(),Zi={TelemetryWebsocketService:Symbol.for("TelemetryWebsocketService"),Window:Symbol.for("Window"),NgZone:Symbol.for("ngZone"),AlarmDataService:Symbol.for("AlarmDataService"),EventDataService:Symbol.for("EventDataService"),EntityDataService:Symbol.for("EntityDataService"),DataSubscriptionService:Symbol.for("DataSubscriptionService"),UtilsService:Symbol.for("UtilsService"),TimeService:Symbol.for("TimeService"),RafService:Symbol.for("RafService"),TranslateService:Symbol.for("TranslateService"),AdminService:Symbol.for("AdminService"),OAuth2Service:Symbol.for("OAuth2Service"),OtaPackageService:Symbol.for("OtaPackageService"),QueueService:Symbol.for("QueueService"),ResourceService:Symbol.for("ResourceService"),TenantProfileService:Symbol.for("TenantProfileService"),TenantService:Symbol.for("TenantService"),UiSettingsService:Symbol.for("UiSettingsService"),UserService:Symbol.for("UserService"),AlarmService:Symbol.for("AlarmService"),AssetService:Symbol.for("AssetService"),AttributeService:Symbol.for("AttributeService"),AuditLogService:Symbol.for("AuditLogService"),CustomerService:Symbol.for("CustomerService"),DeviceService:Symbol.for("DeviceService"),EdgeService:Symbol.for("EdgeService"),EntityRelationService:Symbol.for("EntityRelationService"),EntityViewService:Symbol.for("EntityViewService"),EntityService:Symbol.for("EntityService"),EventService:Symbol.for("EventService"),AuthService:Symbol.for("AuthService"),HttpClient:Symbol.for("HttpClient"),DeviceProfileService:Symbol.for("DeviceProfileService"),EntityGroupService:Symbol.for("EntityGroupService"),LocalStorage:Symbol.for("LocalStorage"),SchedulerService:Symbol.for("SchedulerService"),AssetProfileService:Symbol.for("AssetProfileService"),NotificationService:Symbol.for("NotificationService"),ImageService:Symbol.for("ImageService"),NotificationWebsocketService:Symbol.for("NotificationWebsocketService"),RuleEngineService:Symbol.for("RuleEngineService")},tr=function(t){function e(e,n){var i=t.call(this,{fromObject:n})||this;return i.interceptorConfig=e,i}return pe(e,t),e}(vi),er=function(t,e,n){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=!1),this.ignoreLoading=t,this.ignoreErrors=e,this.resendRequest=n};function nr(t){return t||(t={}),ir(t.ignoreLoading,t.ignoreErrors,t.resendRequest)}function ir(t,e,n){return void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=!1),{headers:new hi({"Content-Type":"application/json"}),params:new tr(new er(t,e,n))}}function rr(t,e,n){return void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=!1),{params:new tr(new er(t,e,n))}}var ar={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(t,n){(function(){var i,r="Expected a function",a="__lodash_hash_undefined__",o="__lodash_placeholder__",s=16,u=32,c=64,l=128,p=256,d=1/0,f=9007199254740991,h=NaN,y=4294967295,m=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",u],["partialRight",c],["rearg",p]],g="[object Arguments]",v="[object Array]",T="[object Boolean]",E="[object Date]",b="[object Error]",S="[object Function]",_="[object GeneratorFunction]",A="[object Map]",w="[object Number]",I="[object Object]",D="[object Promise]",R="[object RegExp]",N="[object Set]",O="[object String]",C="[object Symbol]",M="[object WeakMap]",k="[object ArrayBuffer]",L="[object DataView]",U="[object Float32Array]",P="[object Float64Array]",x="[object Int8Array]",F="[object Int16Array]",W="[object Int32Array]",V="[object Uint8Array]",j="[object Uint8ClampedArray]",Y="[object Uint16Array]",H="[object Uint32Array]",B=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,Q=RegExp(q.source),J=RegExp(z.source),X=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,rt=RegExp(it.source),at=/^\s+/,ot=/\s/,st=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pt=/[()=,{}\[\]\/\s]/,dt=/\\(\\)?/g,ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ht=/\w*$/,yt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,Tt=/^(?:0|[1-9]\d*)$/,Et=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,St=/['\n\r\u2028\u2029\\]/g,_t="\\ud800-\\udfff",At="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wt="\\u2700-\\u27bf",It="a-z\\xdf-\\xf6\\xf8-\\xff",Dt="A-Z\\xc0-\\xd6\\xd8-\\xde",Rt="\\ufe0e\\ufe0f",Nt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ot="['’]",Ct="["+_t+"]",Mt="["+Nt+"]",kt="["+At+"]",Lt="\\d+",Ut="["+wt+"]",Pt="["+It+"]",xt="[^"+_t+Nt+Lt+wt+It+Dt+"]",Ft="\\ud83c[\\udffb-\\udfff]",Wt="[^"+_t+"]",Vt="(?:\\ud83c[\\udde6-\\uddff]){2}",jt="[\\ud800-\\udbff][\\udc00-\\udfff]",Yt="["+Dt+"]",Ht="\\u200d",Bt="(?:"+Pt+"|"+xt+")",Kt="(?:"+Yt+"|"+xt+")",Gt="(?:['’](?:d|ll|m|re|s|t|ve))?",qt="(?:['’](?:D|LL|M|RE|S|T|VE))?",zt="(?:"+kt+"|"+Ft+")"+"?",Qt="["+Rt+"]?",Jt=Qt+zt+("(?:"+Ht+"(?:"+[Wt,Vt,jt].join("|")+")"+Qt+zt+")*"),Xt="(?:"+[Ut,Vt,jt].join("|")+")"+Jt,$t="(?:"+[Wt+kt+"?",kt,Vt,jt,Ct].join("|")+")",Zt=RegExp(Ot,"g"),te=RegExp(kt,"g"),ee=RegExp(Ft+"(?="+Ft+")|"+$t+Jt,"g"),ne=RegExp([Yt+"?"+Pt+"+"+Gt+"(?="+[Mt,Yt,"$"].join("|")+")",Kt+"+"+qt+"(?="+[Mt,Yt+Bt,"$"].join("|")+")",Yt+"?"+Bt+"+"+Gt,Yt+"+"+qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lt,Xt].join("|"),"g"),ie=RegExp("["+Ht+_t+At+Rt+"]"),re=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ae=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oe=-1,se={};se[U]=se[P]=se[x]=se[F]=se[W]=se[V]=se[j]=se[Y]=se[H]=!0,se[g]=se[v]=se[k]=se[T]=se[L]=se[E]=se[b]=se[S]=se[A]=se[w]=se[I]=se[R]=se[N]=se[O]=se[M]=!1;var ue={};ue[g]=ue[v]=ue[k]=ue[L]=ue[T]=ue[E]=ue[U]=ue[P]=ue[x]=ue[F]=ue[W]=ue[A]=ue[w]=ue[I]=ue[R]=ue[N]=ue[O]=ue[C]=ue[V]=ue[j]=ue[Y]=ue[H]=!0,ue[b]=ue[S]=ue[M]=!1;var ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},le=parseFloat,pe=parseInt,de="object"==typeof e&&e&&e.Object===Object&&e,fe="object"==typeof self&&self&&self.Object===Object&&self,he=de||fe||Function("return this")(),ye=n&&!n.nodeType&&n,me=ye&&t&&!t.nodeType&&t,ge=me&&me.exports===ye,ve=ge&&de.process,Te=function(){try{var t=me&&me.require&&me.require("util").types;return t||ve&&ve.binding&&ve.binding("util")}catch(t){}}(),Ee=Te&&Te.isArrayBuffer,be=Te&&Te.isDate,Se=Te&&Te.isMap,_e=Te&&Te.isRegExp,Ae=Te&&Te.isSet,we=Te&&Te.isTypedArray;function Ie(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function De(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var o=t[r];e(i,o,n(o),t)}return i}function Re(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Ne(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Oe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Ce(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}function Me(t,e){return!!(null==t?0:t.length)&&Ye(t,e,0)>-1}function ke(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Le(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Ue(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Pe(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function xe(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Fe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var We=Ge("length");function Ve(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function je(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function Ye(t,e,n){return e==e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):je(t,Be,n)}function He(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function Be(t){return t!=t}function Ke(t,e){var n=null==t?0:t.length;return n?Qe(t,e)/n:h}function Ge(t){return function(e){return null==e?i:e[t]}}function qe(t){return function(e){return null==t?i:t[e]}}function ze(t,e,n,i,r){return r(t,(function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)})),n}function Qe(t,e){for(var n,r=-1,a=t.length;++r<a;){var o=e(t[r]);o!==i&&(n=n===i?o:n+o)}return n}function Je(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Xe(t){return t?t.slice(0,yn(t)+1).replace(at,""):t}function $e(t){return function(e){return t(e)}}function Ze(t,e){return Le(e,(function(e){return t[e]}))}function tn(t,e){return t.has(e)}function en(t,e){for(var n=-1,i=t.length;++n<i&&Ye(e,t[n],0)>-1;);return n}function nn(t,e){for(var n=t.length;n--&&Ye(e,t[n],0)>-1;);return n}var rn=qe({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),an=qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(t){return"\\"+ce[t]}function sn(t){return ie.test(t)}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function cn(t,e){return function(n){return t(e(n))}}function ln(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var s=t[n];s!==e&&s!==o||(t[n]=o,a[r++]=n)}return a}function pn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function fn(t){return sn(t)?function(t){var e=ee.lastIndex=0;for(;ee.test(t);)++e;return e}(t):We(t)}function hn(t){return sn(t)?function(t){return t.match(ee)||[]}(t):function(t){return t.split("")}(t)}function yn(t){for(var e=t.length;e--&&ot.test(t.charAt(e)););return e}var mn=qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function t(e){var n,ot=(e=null==e?he:gn.defaults(he.Object(),e,gn.pick(he,ae))).Array,_t=e.Date,At=e.Error,wt=e.Function,It=e.Math,Dt=e.Object,Rt=e.RegExp,Nt=e.String,Ot=e.TypeError,Ct=ot.prototype,Mt=wt.prototype,kt=Dt.prototype,Lt=e["__core-js_shared__"],Ut=Mt.toString,Pt=kt.hasOwnProperty,xt=0,Ft=(n=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Wt=kt.toString,Vt=Ut.call(Dt),jt=he._,Yt=Rt("^"+Ut.call(Pt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=ge?e.Buffer:i,Bt=e.Symbol,Kt=e.Uint8Array,Gt=Ht?Ht.allocUnsafe:i,qt=cn(Dt.getPrototypeOf,Dt),zt=Dt.create,Qt=kt.propertyIsEnumerable,Jt=Ct.splice,Xt=Bt?Bt.isConcatSpreadable:i,$t=Bt?Bt.iterator:i,ee=Bt?Bt.toStringTag:i,ie=function(){try{var t=da(Dt,"defineProperty");return t({},"",{}),t}catch(t){}}(),ce=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,de=_t&&_t.now!==he.Date.now&&_t.now,fe=e.setTimeout!==he.setTimeout&&e.setTimeout,ye=It.ceil,me=It.floor,ve=Dt.getOwnPropertySymbols,Te=Ht?Ht.isBuffer:i,We=e.isFinite,qe=Ct.join,vn=cn(Dt.keys,Dt),Tn=It.max,En=It.min,bn=_t.now,Sn=e.parseInt,_n=It.random,An=Ct.reverse,wn=da(e,"DataView"),In=da(e,"Map"),Dn=da(e,"Promise"),Rn=da(e,"Set"),Nn=da(e,"WeakMap"),On=da(Dt,"create"),Cn=Nn&&new Nn,Mn={},kn=Fa(wn),Ln=Fa(In),Un=Fa(Dn),Pn=Fa(Rn),xn=Fa(Nn),Fn=Bt?Bt.prototype:i,Wn=Fn?Fn.valueOf:i,Vn=Fn?Fn.toString:i;function jn(t){if(ns(t)&&!Ko(t)&&!(t instanceof Kn)){if(t instanceof Bn)return t;if(Pt.call(t,"__wrapped__"))return Wa(t)}return new Bn(t)}var Yn=function(){function t(){}return function(e){if(!es(e))return{};if(zt)return zt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Hn(){}function Bn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Kn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new zn;++e<n;)this.add(t[e])}function Jn(t){var e=this.__data__=new qn(t);this.size=e.size}function Xn(t,e){var n=Ko(t),i=!n&&Bo(t),r=!n&&!i&&Qo(t),a=!n&&!i&&!r&&ls(t),o=n||i||r||a,s=o?Je(t.length,Nt):[],u=s.length;for(var c in t)!e&&!Pt.call(t,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ta(c,u))||s.push(c);return s}function $n(t){var e=t.length;return e?t[Qi(0,e-1)]:i}function Zn(t,e){return Ua(Or(t),ui(e,0,t.length))}function ti(t){return Ua(Or(t))}function ei(t,e,n){(n!==i&&!jo(t[e],n)||n===i&&!(e in t))&&oi(t,e,n)}function ni(t,e,n){var r=t[e];Pt.call(t,e)&&jo(r,n)&&(n!==i||e in t)||oi(t,e,n)}function ii(t,e){for(var n=t.length;n--;)if(jo(t[n][0],e))return n;return-1}function ri(t,e,n,i){return fi(t,(function(t,r,a){e(i,t,n(t),a)})),i}function ai(t,e){return t&&Cr(e,Ms(e),t)}function oi(t,e,n){"__proto__"==e&&ie?ie(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function si(t,e){for(var n=-1,r=e.length,a=ot(r),o=null==t;++n<r;)a[n]=o?i:Ds(t,e[n]);return a}function ui(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ci(t,e,n,r,a,o){var s,u=1&e,c=2&e,l=4&e;if(n&&(s=a?n(t,r,a,o):n(t)),s!==i)return s;if(!es(t))return t;var p=Ko(t);if(p){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Pt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!u)return Or(t,s)}else{var d=ya(t),f=d==S||d==_;if(Qo(t))return Ar(t,u);if(d==I||d==g||f&&!a){if(s=c||f?{}:ga(t),!u)return c?function(t,e){return Cr(t,ha(t),e)}(t,function(t,e){return t&&Cr(e,ks(e),t)}(s,t)):function(t,e){return Cr(t,fa(t),e)}(t,ai(s,t))}else{if(!ue[d])return a?t:{};s=function(t,e,n){var i=t.constructor;switch(e){case k:return wr(t);case T:case E:return new i(+t);case L:return function(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case U:case P:case x:case F:case W:case V:case j:case Y:case H:return Ir(t,n);case A:return new i;case w:case O:return new i(t);case R:return function(t){var e=new t.constructor(t.source,ht.exec(t));return e.lastIndex=t.lastIndex,e}(t);case N:return new i;case C:return r=t,Wn?Dt(Wn.call(r)):{}}var r}(t,d,u)}}o||(o=new Jn);var h=o.get(t);if(h)return h;o.set(t,s),ss(t)?t.forEach((function(i){s.add(ci(i,e,n,i,t,o))})):is(t)&&t.forEach((function(i,r){s.set(r,ci(i,e,n,r,t,o))}));var y=p?i:(l?c?aa:ra:c?ks:Ms)(t);return Re(y||t,(function(i,r){y&&(i=t[r=i]),ni(s,r,ci(i,e,n,r,t,o))})),s}function li(t,e,n){var r=n.length;if(null==t)return!r;for(t=Dt(t);r--;){var a=n[r],o=e[a],s=t[a];if(s===i&&!(a in t)||!o(s))return!1}return!0}function pi(t,e,n){if("function"!=typeof t)throw new Ot(r);return Ca((function(){t.apply(i,n)}),e)}function di(t,e,n,i){var r=-1,a=Me,o=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=Le(e,$e(n))),i?(a=ke,o=!1):e.length>=200&&(a=tn,o=!1,e=new Qn(e));t:for(;++r<s;){var l=t[r],p=null==n?l:n(l);if(l=i||0!==l?l:0,o&&p==p){for(var d=c;d--;)if(e[d]===p)continue t;u.push(l)}else a(e,p,i)||u.push(l)}return u}jn.templateSettings={escape:X,evaluate:$,interpolate:Z,variable:"",imports:{_:jn}},jn.prototype=Hn.prototype,jn.prototype.constructor=jn,Bn.prototype=Yn(Hn.prototype),Bn.prototype.constructor=Bn,Kn.prototype=Yn(Hn.prototype),Kn.prototype.constructor=Kn,Gn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Gn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gn.prototype.get=function(t){var e=this.__data__;if(On){var n=e[t];return n===a?i:n}return Pt.call(e,t)?e[t]:i},Gn.prototype.has=function(t){var e=this.__data__;return On?e[t]!==i:Pt.call(e,t)},Gn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=On&&e===i?a:e,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=ii(e,t);return!(n<0)&&(n==e.length-1?e.pop():Jt.call(e,n,1),--this.size,!0)},qn.prototype.get=function(t){var e=this.__data__,n=ii(e,t);return n<0?i:e[n][1]},qn.prototype.has=function(t){return ii(this.__data__,t)>-1},qn.prototype.set=function(t,e){var n=this.__data__,i=ii(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},zn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(In||qn),string:new Gn}},zn.prototype.delete=function(t){var e=la(this,t).delete(t);return this.size-=e?1:0,e},zn.prototype.get=function(t){return la(this,t).get(t)},zn.prototype.has=function(t){return la(this,t).has(t)},zn.prototype.set=function(t,e){var n=la(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Qn.prototype.add=Qn.prototype.push=function(t){return this.__data__.set(t,a),this},Qn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.clear=function(){this.__data__=new qn,this.size=0},Jn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Jn.prototype.get=function(t){return this.__data__.get(t)},Jn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qn){var i=n.__data__;if(!In||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new zn(i)}return n.set(t,e),this.size=n.size,this};var fi=Lr(bi),hi=Lr(Si,!0);function yi(t,e){var n=!0;return fi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function mi(t,e,n){for(var r=-1,a=t.length;++r<a;){var o=t[r],s=e(o);if(null!=s&&(u===i?s==s&&!cs(s):n(s,u)))var u=s,c=o}return c}function gi(t,e){var n=[];return fi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function vi(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=va),r||(r=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?vi(s,e-1,n,i,r):Ue(r,s):i||(r[r.length]=s)}return r}var Ti=Ur(),Ei=Ur(!0);function bi(t,e){return t&&Ti(t,e,Ms)}function Si(t,e){return t&&Ei(t,e,Ms)}function _i(t,e){return Ce(e,(function(e){return $o(t[e])}))}function Ai(t,e){for(var n=0,r=(e=Er(e,t)).length;null!=t&&n<r;)t=t[xa(e[n++])];return n&&n==r?t:i}function wi(t,e,n){var i=e(t);return Ko(t)?i:Ue(i,n(t))}function Ii(t){return null==t?t===i?"[object Undefined]":"[object Null]":ee&&ee in Dt(t)?function(t){var e=Pt.call(t,ee),n=t[ee];try{t[ee]=i;var r=!0}catch(t){}var a=Wt.call(t);r&&(e?t[ee]=n:delete t[ee]);return a}(t):function(t){return Wt.call(t)}(t)}function Di(t,e){return t>e}function Ri(t,e){return null!=t&&Pt.call(t,e)}function Ni(t,e){return null!=t&&e in Dt(t)}function Oi(t,e,n){for(var r=n?ke:Me,a=t[0].length,o=t.length,s=o,u=ot(o),c=1/0,l=[];s--;){var p=t[s];s&&e&&(p=Le(p,$e(e))),c=En(p.length,c),u[s]=!n&&(e||a>=120&&p.length>=120)?new Qn(s&&p):i}p=t[0];var d=-1,f=u[0];t:for(;++d<a&&l.length<c;){var h=p[d],y=e?e(h):h;if(h=n||0!==h?h:0,!(f?tn(f,y):r(l,y,n))){for(s=o;--s;){var m=u[s];if(!(m?tn(m,y):r(t[s],y,n)))continue t}f&&f.push(y),l.push(h)}}return l}function Ci(t,e,n){var r=null==(t=Ra(t,e=Er(e,t)))?t:t[xa(Ja(e))];return null==r?i:Ie(r,t,n)}function Mi(t){return ns(t)&&Ii(t)==g}function ki(t,e,n,r,a){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,n,r,a,o){var s=Ko(t),u=Ko(e),c=s?v:ya(t),l=u?v:ya(e),p=(c=c==g?I:c)==I,d=(l=l==g?I:l)==I,f=c==l;if(f&&Qo(t)){if(!Qo(e))return!1;s=!0,p=!1}if(f&&!p)return o||(o=new Jn),s||ls(t)?na(t,e,n,r,a,o):function(t,e,n,i,r,a,o){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case k:return!(t.byteLength!=e.byteLength||!a(new Kt(t),new Kt(e)));case T:case E:case w:return jo(+t,+e);case b:return t.name==e.name&&t.message==e.message;case R:case O:return t==e+"";case A:var s=un;case N:var u=1&i;if(s||(s=pn),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;i|=2,o.set(t,e);var l=na(s(t),s(e),i,r,a,o);return o.delete(t),l;case C:if(Wn)return Wn.call(t)==Wn.call(e)}return!1}(t,e,c,n,r,a,o);if(!(1&n)){var h=p&&Pt.call(t,"__wrapped__"),y=d&&Pt.call(e,"__wrapped__");if(h||y){var m=h?t.value():t,S=y?e.value():e;return o||(o=new Jn),a(m,S,n,r,o)}}if(!f)return!1;return o||(o=new Jn),function(t,e,n,r,a,o){var s=1&n,u=ra(t),c=u.length,l=ra(e),p=l.length;if(c!=p&&!s)return!1;var d=c;for(;d--;){var f=u[d];if(!(s?f in e:Pt.call(e,f)))return!1}var h=o.get(t),y=o.get(e);if(h&&y)return h==e&&y==t;var m=!0;o.set(t,e),o.set(e,t);var g=s;for(;++d<c;){var v=t[f=u[d]],T=e[f];if(r)var E=s?r(T,v,f,e,t,o):r(v,T,f,t,e,o);if(!(E===i?v===T||a(v,T,n,r,o):E)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var b=t.constructor,S=e.constructor;b==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof S&&S instanceof S||(m=!1)}return o.delete(t),o.delete(e),m}(t,e,n,r,a,o)}(t,e,n,r,ki,a))}function Li(t,e,n,r){var a=n.length,o=a,s=!r;if(null==t)return!o;for(t=Dt(t);a--;){var u=n[a];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<o;){var c=(u=n[a])[0],l=t[c],p=u[1];if(s&&u[2]){if(l===i&&!(c in t))return!1}else{var d=new Jn;if(r)var f=r(l,p,c,t,e,d);if(!(f===i?ki(p,l,3,r,d):f))return!1}}return!0}function Ui(t){return!(!es(t)||function(t){return!!Ft&&Ft in t}(t))&&($o(t)?Yt:gt).test(Fa(t))}function Pi(t){return"function"==typeof t?t:null==t?ru:"object"==typeof t?Ko(t)?Yi(t[0],t[1]):ji(t):fu(t)}function xi(t){if(!Aa(t))return vn(t);var e=[];for(var n in Dt(t))Pt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fi(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in Dt(t))e.push(n);return e}(t);var e=Aa(t),n=[];for(var i in t)("constructor"!=i||!e&&Pt.call(t,i))&&n.push(i);return n}function Wi(t,e){return t<e}function Vi(t,e){var n=-1,i=qo(t)?ot(t.length):[];return fi(t,(function(t,r,a){i[++n]=e(t,r,a)})),i}function ji(t){var e=pa(t);return 1==e.length&&e[0][2]?Ia(e[0][0],e[0][1]):function(n){return n===t||Li(n,t,e)}}function Yi(t,e){return ba(t)&&wa(e)?Ia(xa(t),e):function(n){var r=Ds(n,t);return r===i&&r===e?Rs(n,t):ki(e,r,3)}}function Hi(t,e,n,r,a){t!==e&&Ti(e,(function(o,s){if(a||(a=new Jn),es(o))!function(t,e,n,r,a,o,s){var u=Na(t,n),c=Na(e,n),l=s.get(c);if(l)return void ei(t,n,l);var p=o?o(u,c,n+"",t,e,s):i,d=p===i;if(d){var f=Ko(c),h=!f&&Qo(c),y=!f&&!h&&ls(c);p=c,f||h||y?Ko(u)?p=u:zo(u)?p=Or(u):h?(d=!1,p=Ar(c,!0)):y?(d=!1,p=Ir(c,!0)):p=[]:as(c)||Bo(c)?(p=u,Bo(u)?p=vs(u):es(u)&&!$o(u)||(p=ga(c))):d=!1}d&&(s.set(c,p),a(p,c,r,o,s),s.delete(c));ei(t,n,p)}(t,e,s,n,Hi,r,a);else{var u=r?r(Na(t,s),o,s+"",t,e,a):i;u===i&&(u=o),ei(t,s,u)}}),ks)}function Bi(t,e){var n=t.length;if(n)return Ta(e+=e<0?n:0,n)?t[e]:i}function Ki(t,e,n){e=e.length?Le(e,(function(t){return Ko(t)?function(e){return Ai(e,1===t.length?t[0]:t)}:t})):[ru];var i=-1;e=Le(e,$e(ca()));var r=Vi(t,(function(t,n,r){var a=Le(e,(function(e){return e(t)}));return{criteria:a,index:++i,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(r,(function(t,e){return function(t,e,n){var i=-1,r=t.criteria,a=e.criteria,o=r.length,s=n.length;for(;++i<o;){var u=Dr(r[i],a[i]);if(u)return i>=s?u:u*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}))}function Gi(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],s=Ai(t,o);n(s,o)&&tr(a,Er(o,t),s)}return a}function qi(t,e,n,i){var r=i?He:Ye,a=-1,o=e.length,s=t;for(t===e&&(e=Or(e)),n&&(s=Le(t,$e(n)));++a<o;)for(var u=0,c=e[a],l=n?n(c):c;(u=r(s,l,u,i))>-1;)s!==t&&Jt.call(s,u,1),Jt.call(t,u,1);return t}function zi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;Ta(r)?Jt.call(t,r,1):dr(t,r)}}return t}function Qi(t,e){return t+me(_n()*(e-t+1))}function Ji(t,e){var n="";if(!t||e<1||e>f)return n;do{e%2&&(n+=t),(e=me(e/2))&&(t+=t)}while(e);return n}function Xi(t,e){return Ma(Da(t,e,ru),t+"")}function $i(t){return $n(js(t))}function Zi(t,e){var n=js(t);return Ua(n,ui(e,0,n.length))}function tr(t,e,n,r){if(!es(t))return t;for(var a=-1,o=(e=Er(e,t)).length,s=o-1,u=t;null!=u&&++a<o;){var c=xa(e[a]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(a!=s){var p=u[c];(l=r?r(p,c,u):i)===i&&(l=es(p)?p:Ta(e[a+1])?[]:{})}ni(u,c,l),u=u[c]}return t}var er=Cn?function(t,e){return Cn.set(t,e),t}:ru,nr=ie?function(t,e){return ie(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:ru;function ir(t){return Ua(js(t))}function rr(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=ot(r);++i<r;)a[i]=t[i+e];return a}function ar(t,e){var n;return fi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function or(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var a=i+r>>>1,o=t[a];null!==o&&!cs(o)&&(n?o<=e:o<e)?i=a+1:r=a}return r}return sr(t,e,ru,n)}function sr(t,e,n,r){var a=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!=e,u=null===e,c=cs(e),l=e===i;a<o;){var p=me((a+o)/2),d=n(t[p]),f=d!==i,h=null===d,y=d==d,m=cs(d);if(s)var g=r||y;else g=l?y&&(r||f):u?y&&f&&(r||!h):c?y&&f&&!h&&(r||!m):!h&&!m&&(r?d<=e:d<e);g?a=p+1:o=p}return En(o,4294967294)}function ur(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!jo(s,u)){var u=s;a[r++]=0===o?0:o}}return a}function cr(t){return"number"==typeof t?t:cs(t)?h:+t}function lr(t){if("string"==typeof t)return t;if(Ko(t))return Le(t,lr)+"";if(cs(t))return Vn?Vn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pr(t,e,n){var i=-1,r=Me,a=t.length,o=!0,s=[],u=s;if(n)o=!1,r=ke;else if(a>=200){var c=e?null:Jr(t);if(c)return pn(c);o=!1,r=tn,u=new Qn}else u=e?[]:s;t:for(;++i<a;){var l=t[i],p=e?e(l):l;if(l=n||0!==l?l:0,o&&p==p){for(var d=u.length;d--;)if(u[d]===p)continue t;e&&u.push(p),s.push(l)}else r(u,p,n)||(u!==s&&u.push(p),s.push(l))}return s}function dr(t,e){return null==(t=Ra(t,e=Er(e,t)))||delete t[xa(Ja(e))]}function fr(t,e,n,i){return tr(t,e,n(Ai(t,e)),i)}function hr(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?rr(t,i?0:a,i?a+1:r):rr(t,i?a+1:0,i?r:a)}function yr(t,e){var n=t;return n instanceof Kn&&(n=n.value()),Pe(e,(function(t,e){return e.func.apply(e.thisArg,Ue([t],e.args))}),n)}function mr(t,e,n){var i=t.length;if(i<2)return i?pr(t[0]):[];for(var r=-1,a=ot(i);++r<i;)for(var o=t[r],s=-1;++s<i;)s!=r&&(a[r]=di(a[r]||o,t[s],e,n));return pr(vi(a,1),e,n)}function gr(t,e,n){for(var r=-1,a=t.length,o=e.length,s={};++r<a;){var u=r<o?e[r]:i;n(s,t[r],u)}return s}function vr(t){return zo(t)?t:[]}function Tr(t){return"function"==typeof t?t:ru}function Er(t,e){return Ko(t)?t:ba(t,e)?[t]:Pa(Ts(t))}var br=Xi;function Sr(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:rr(t,e,n)}var _r=ce||function(t){return he.clearTimeout(t)};function Ar(t,e){if(e)return t.slice();var n=t.length,i=Gt?Gt(n):new t.constructor(n);return t.copy(i),i}function wr(t){var e=new t.constructor(t.byteLength);return new Kt(e).set(new Kt(t)),e}function Ir(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Dr(t,e){if(t!==e){var n=t!==i,r=null===t,a=t==t,o=cs(t),s=e!==i,u=null===e,c=e==e,l=cs(e);if(!u&&!l&&!o&&t>e||o&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!l&&t<e||l&&n&&a&&!r&&!o||u&&n&&a||!s&&a||!c)return-1}return 0}function Rr(t,e,n,i){for(var r=-1,a=t.length,o=n.length,s=-1,u=e.length,c=Tn(a-o,0),l=ot(u+c),p=!i;++s<u;)l[s]=e[s];for(;++r<o;)(p||r<a)&&(l[n[r]]=t[r]);for(;c--;)l[s++]=t[r++];return l}function Nr(t,e,n,i){for(var r=-1,a=t.length,o=-1,s=n.length,u=-1,c=e.length,l=Tn(a-s,0),p=ot(l+c),d=!i;++r<l;)p[r]=t[r];for(var f=r;++u<c;)p[f+u]=e[u];for(;++o<s;)(d||r<a)&&(p[f+n[o]]=t[r++]);return p}function Or(t,e){var n=-1,i=t.length;for(e||(e=ot(i));++n<i;)e[n]=t[n];return e}function Cr(t,e,n,r){var a=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var u=e[o],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),a?oi(n,u,c):ni(n,u,c)}return n}function Mr(t,e){return function(n,i){var r=Ko(n)?De:ri,a=e?e():{};return r(n,t,ca(i,2),a)}}function kr(t){return Xi((function(e,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=t.length>3&&"function"==typeof o?(a--,o):i,s&&Ea(n[0],n[1],s)&&(o=a<3?i:o,a=1),e=Dt(e);++r<a;){var u=n[r];u&&t(e,u,r,o)}return e}))}function Lr(t,e){return function(n,i){if(null==n)return n;if(!qo(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=Dt(n);(e?a--:++a<r)&&!1!==i(o[a],a,o););return n}}function Ur(t){return function(e,n,i){for(var r=-1,a=Dt(e),o=i(e),s=o.length;s--;){var u=o[t?s:++r];if(!1===n(a[u],u,a))break}return e}}function Pr(t){return function(e){var n=sn(e=Ts(e))?hn(e):i,r=n?n[0]:e.charAt(0),a=n?Sr(n,1).join(""):e.slice(1);return r[t]()+a}}function xr(t){return function(e){return Pe($s(Bs(e).replace(Zt,"")),t,"")}}function Fr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Yn(t.prototype),i=t.apply(n,e);return es(i)?i:n}}function Wr(t){return function(e,n,r){var a=Dt(e);if(!qo(e)){var o=ca(n,3);e=Ms(e),n=function(t){return o(a[t],t,a)}}var s=t(e,n,r);return s>-1?a[o?e[s]:s]:i}}function Vr(t){return ia((function(e){var n=e.length,a=n,o=Bn.prototype.thru;for(t&&e.reverse();a--;){var s=e[a];if("function"!=typeof s)throw new Ot(r);if(o&&!u&&"wrapper"==sa(s))var u=new Bn([],!0)}for(a=u?a:n;++a<n;){var c=sa(s=e[a]),l="wrapper"==c?oa(s):i;u=l&&Sa(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[sa(l[0])].apply(u,l[3]):1==s.length&&Sa(s)?u[c]():u.thru(s)}return function(){var t=arguments,i=t[0];if(u&&1==t.length&&Ko(i))return u.plant(i).value();for(var r=0,a=n?e[r].apply(this,t):i;++r<n;)a=e[r].call(this,a);return a}}))}function jr(t,e,n,r,a,o,s,u,c,p){var d=e&l,f=1&e,h=2&e,y=24&e,m=512&e,g=h?i:Fr(t);return function l(){for(var v=arguments.length,T=ot(v),E=v;E--;)T[E]=arguments[E];if(y)var b=ua(l),S=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(T,b);if(r&&(T=Rr(T,r,a,y)),o&&(T=Nr(T,o,s,y)),v-=S,y&&v<p){var _=ln(T,b);return zr(t,e,jr,l.placeholder,n,T,_,u,c,p-v)}var A=f?n:this,w=h?A[t]:t;return v=T.length,u?T=function(t,e){var n=t.length,r=En(e.length,n),a=Or(t);for(;r--;){var o=e[r];t[r]=Ta(o,n)?a[o]:i}return t}(T,u):m&&v>1&&T.reverse(),d&&c<v&&(T.length=c),this&&this!==he&&this instanceof l&&(w=g||Fr(w)),w.apply(A,T)}}function Yr(t,e){return function(n,i){return function(t,e,n,i){return bi(t,(function(t,r,a){e(i,n(t),r,a)})),i}(n,t,e(i),{})}}function Hr(t,e){return function(n,r){var a;if(n===i&&r===i)return e;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=lr(n),r=lr(r)):(n=cr(n),r=cr(r)),a=t(n,r)}return a}}function Br(t){return ia((function(e){return e=Le(e,$e(ca())),Xi((function(n){var i=this;return t(e,(function(t){return Ie(t,i,n)}))}))}))}function Kr(t,e){var n=(e=e===i?" ":lr(e)).length;if(n<2)return n?Ji(e,t):e;var r=Ji(e,ye(t/fn(e)));return sn(e)?Sr(hn(r),0,t).join(""):r.slice(0,t)}function Gr(t){return function(e,n,r){return r&&"number"!=typeof r&&Ea(e,n,r)&&(n=r=i),e=hs(e),n===i?(n=e,e=0):n=hs(n),function(t,e,n,i){for(var r=-1,a=Tn(ye((e-t)/(n||1)),0),o=ot(a);a--;)o[i?a:++r]=t,t+=n;return o}(e,n,r=r===i?e<n?1:-1:hs(r),t)}}function qr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=gs(e),n=gs(n)),t(e,n)}}function zr(t,e,n,r,a,o,s,l,p,d){var f=8&e;e|=f?u:c,4&(e&=~(f?c:u))||(e&=-4);var h=[t,e,a,f?o:i,f?s:i,f?i:o,f?i:s,l,p,d],y=n.apply(i,h);return Sa(t)&&Oa(y,h),y.placeholder=r,ka(y,t,e)}function Qr(t){var e=It[t];return function(t,n){if(t=gs(t),(n=null==n?0:En(ys(n),292))&&We(t)){var i=(Ts(t)+"e").split("e");return+((i=(Ts(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Jr=Rn&&1/pn(new Rn([,-0]))[1]==d?function(t){return new Rn(t)}:cu;function Xr(t){return function(e){var n=ya(e);return n==A?un(e):n==N?dn(e):function(t,e){return Le(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function $r(t,e,n,a,d,f,h,y){var m=2&e;if(!m&&"function"!=typeof t)throw new Ot(r);var g=a?a.length:0;if(g||(e&=-97,a=d=i),h=h===i?h:Tn(ys(h),0),y=y===i?y:ys(y),g-=d?d.length:0,e&c){var v=a,T=d;a=d=i}var E=m?i:oa(t),b=[t,e,n,a,d,v,T,f,h,y];if(E&&function(t,e){var n=t[1],i=e[1],r=n|i,a=r<131,s=i==l&&8==n||i==l&&n==p&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!a&&!s)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?Rr(c,u,e[4]):u,t[4]=c?ln(t[3],o):e[4]}u=e[5],u&&(c=t[5],t[5]=c?Nr(c,u,e[6]):u,t[6]=c?ln(t[5],o):e[6]);u=e[7],u&&(t[7]=u);i&l&&(t[8]=null==t[8]?e[8]:En(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=r}(b,E),t=b[0],e=b[1],n=b[2],a=b[3],d=b[4],!(y=b[9]=b[9]===i?m?0:t.length:Tn(b[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)S=8==e||e==s?function(t,e,n){var r=Fr(t);return function a(){for(var o=arguments.length,s=ot(o),u=o,c=ua(a);u--;)s[u]=arguments[u];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:ln(s,c);return(o-=l.length)<n?zr(t,e,jr,a.placeholder,i,s,l,i,i,n-o):Ie(this&&this!==he&&this instanceof a?r:t,this,s)}}(t,e,y):e!=u&&33!=e||d.length?jr.apply(i,b):function(t,e,n,i){var r=1&e,a=Fr(t);return function e(){for(var o=-1,s=arguments.length,u=-1,c=i.length,l=ot(c+s),p=this&&this!==he&&this instanceof e?a:t;++u<c;)l[u]=i[u];for(;s--;)l[u++]=arguments[++o];return Ie(p,r?n:this,l)}}(t,e,n,a);else var S=function(t,e,n){var i=1&e,r=Fr(t);return function e(){return(this&&this!==he&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return ka((E?er:Oa)(S,b),t,e)}function Zr(t,e,n,r){return t===i||jo(t,kt[n])&&!Pt.call(r,n)?e:t}function ta(t,e,n,r,a,o){return es(t)&&es(e)&&(o.set(e,t),Hi(t,e,i,ta,o),o.delete(e)),t}function ea(t){return as(t)?i:t}function na(t,e,n,r,a,o){var s=1&n,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(t),p=o.get(e);if(l&&p)return l==e&&p==t;var d=-1,f=!0,h=2&n?new Qn:i;for(o.set(t,e),o.set(e,t);++d<u;){var y=t[d],m=e[d];if(r)var g=s?r(m,y,d,e,t,o):r(y,m,d,t,e,o);if(g!==i){if(g)continue;f=!1;break}if(h){if(!Fe(e,(function(t,e){if(!tn(h,e)&&(y===t||a(y,t,n,r,o)))return h.push(e)}))){f=!1;break}}else if(y!==m&&!a(y,m,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function ia(t){return Ma(Da(t,i,Ka),t+"")}function ra(t){return wi(t,Ms,fa)}function aa(t){return wi(t,ks,ha)}var oa=Cn?function(t){return Cn.get(t)}:cu;function sa(t){for(var e=t.name+"",n=Mn[e],i=Pt.call(Mn,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function ua(t){return(Pt.call(jn,"placeholder")?jn:t).placeholder}function ca(){var t=jn.iteratee||au;return t=t===au?Pi:t,arguments.length?t(arguments[0],arguments[1]):t}function la(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function pa(t){for(var e=Ms(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,wa(r)]}return e}function da(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Ui(n)?n:i}var fa=ve?function(t){return null==t?[]:(t=Dt(t),Ce(ve(t),(function(e){return Qt.call(t,e)})))}:mu,ha=ve?function(t){for(var e=[];t;)Ue(e,fa(t)),t=qt(t);return e}:mu,ya=Ii;function ma(t,e,n){for(var i=-1,r=(e=Er(e,t)).length,a=!1;++i<r;){var o=xa(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&ts(r)&&Ta(o,r)&&(Ko(t)||Bo(t))}function ga(t){return"function"!=typeof t.constructor||Aa(t)?{}:Yn(qt(t))}function va(t){return Ko(t)||Bo(t)||!!(Xt&&t&&t[Xt])}function Ta(t,e){var n=typeof t;return!!(e=null==e?f:e)&&("number"==n||"symbol"!=n&&Tt.test(t))&&t>-1&&t%1==0&&t<e}function Ea(t,e,n){if(!es(n))return!1;var i=typeof e;return!!("number"==i?qo(n)&&Ta(e,n.length):"string"==i&&e in n)&&jo(n[e],t)}function ba(t,e){if(Ko(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!cs(t))||(et.test(t)||!tt.test(t)||null!=e&&t in Dt(e))}function Sa(t){var e=sa(t),n=jn[e];if("function"!=typeof n||!(e in Kn.prototype))return!1;if(t===n)return!0;var i=oa(n);return!!i&&t===i[0]}(wn&&ya(new wn(new ArrayBuffer(1)))!=L||In&&ya(new In)!=A||Dn&&ya(Dn.resolve())!=D||Rn&&ya(new Rn)!=N||Nn&&ya(new Nn)!=M)&&(ya=function(t){var e=Ii(t),n=e==I?t.constructor:i,r=n?Fa(n):"";if(r)switch(r){case kn:return L;case Ln:return A;case Un:return D;case Pn:return N;case xn:return M}return e});var _a=Lt?$o:gu;function Aa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||kt)}function wa(t){return t==t&&!es(t)}function Ia(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==i||t in Dt(n)))}}function Da(t,e,n){return e=Tn(e===i?t.length-1:e,0),function(){for(var i=arguments,r=-1,a=Tn(i.length-e,0),o=ot(a);++r<a;)o[r]=i[e+r];r=-1;for(var s=ot(e+1);++r<e;)s[r]=i[r];return s[e]=n(o),Ie(t,this,s)}}function Ra(t,e){return e.length<2?t:Ai(t,rr(e,0,-1))}function Na(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Oa=La(er),Ca=fe||function(t,e){return he.setTimeout(t,e)},Ma=La(nr);function ka(t,e,n){var i=e+"";return Ma(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(st,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Re(m,(function(n){var i="_."+n[0];e&n[1]&&!Me(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(ut);return e?e[1].split(ct):[]}(i),n)))}function La(t){var e=0,n=0;return function(){var r=bn(),a=16-(r-n);if(n=r,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Ua(t,e){var n=-1,r=t.length,a=r-1;for(e=e===i?r:e;++n<e;){var o=Qi(n,a),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var Pa=function(t){var e=Uo(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(nt,(function(t,n,i,r){e.push(i?r.replace(dt,"$1"):n||t)})),e}));function xa(t){if("string"==typeof t||cs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Fa(t){if(null!=t){try{return Ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Wa(t){if(t instanceof Kn)return t.clone();var e=new Bn(t.__wrapped__,t.__chain__);return e.__actions__=Or(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Va=Xi((function(t,e){return zo(t)?di(t,vi(e,1,zo,!0)):[]})),ja=Xi((function(t,e){var n=Ja(e);return zo(n)&&(n=i),zo(t)?di(t,vi(e,1,zo,!0),ca(n,2)):[]})),Ya=Xi((function(t,e){var n=Ja(e);return zo(n)&&(n=i),zo(t)?di(t,vi(e,1,zo,!0),i,n):[]}));function Ha(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ys(n);return r<0&&(r=Tn(i+r,0)),je(t,ca(e,3),r)}function Ba(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ys(n),a=n<0?Tn(r+a,0):En(a,r-1)),je(t,ca(e,3),a,!0)}function Ka(t){return(null==t?0:t.length)?vi(t,1):[]}function Ga(t){return t&&t.length?t[0]:i}var qa=Xi((function(t){var e=Le(t,vr);return e.length&&e[0]===t[0]?Oi(e):[]})),za=Xi((function(t){var e=Ja(t),n=Le(t,vr);return e===Ja(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Oi(n,ca(e,2)):[]})),Qa=Xi((function(t){var e=Ja(t),n=Le(t,vr);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Oi(n,i,e):[]}));function Ja(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Xa=Xi($a);function $a(t,e){return t&&t.length&&e&&e.length?qi(t,e):t}var Za=ia((function(t,e){var n=null==t?0:t.length,i=si(t,e);return zi(t,Le(e,(function(t){return Ta(t,n)?+t:t})).sort(Dr)),i}));function to(t){return null==t?t:An.call(t)}var eo=Xi((function(t){return pr(vi(t,1,zo,!0))})),no=Xi((function(t){var e=Ja(t);return zo(e)&&(e=i),pr(vi(t,1,zo,!0),ca(e,2))})),io=Xi((function(t){var e=Ja(t);return e="function"==typeof e?e:i,pr(vi(t,1,zo,!0),i,e)}));function ro(t){if(!t||!t.length)return[];var e=0;return t=Ce(t,(function(t){if(zo(t))return e=Tn(t.length,e),!0})),Je(e,(function(e){return Le(t,Ge(e))}))}function ao(t,e){if(!t||!t.length)return[];var n=ro(t);return null==e?n:Le(n,(function(t){return Ie(e,i,t)}))}var oo=Xi((function(t,e){return zo(t)?di(t,e):[]})),so=Xi((function(t){return mr(Ce(t,zo))})),uo=Xi((function(t){var e=Ja(t);return zo(e)&&(e=i),mr(Ce(t,zo),ca(e,2))})),co=Xi((function(t){var e=Ja(t);return e="function"==typeof e?e:i,mr(Ce(t,zo),i,e)})),lo=Xi(ro);var po=Xi((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ao(t,n)}));function fo(t){var e=jn(t);return e.__chain__=!0,e}function ho(t,e){return e(t)}var yo=ia((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,a=function(e){return si(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Kn&&Ta(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ho,args:[a],thisArg:i}),new Bn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(a)}));var mo=Mr((function(t,e,n){Pt.call(t,n)?++t[n]:oi(t,n,1)}));var go=Wr(Ha),vo=Wr(Ba);function To(t,e){return(Ko(t)?Re:fi)(t,ca(e,3))}function Eo(t,e){return(Ko(t)?Ne:hi)(t,ca(e,3))}var bo=Mr((function(t,e,n){Pt.call(t,n)?t[n].push(e):oi(t,n,[e])}));var So=Xi((function(t,e,n){var i=-1,r="function"==typeof e,a=qo(t)?ot(t.length):[];return fi(t,(function(t){a[++i]=r?Ie(e,t,n):Ci(t,e,n)})),a})),_o=Mr((function(t,e,n){oi(t,n,e)}));function Ao(t,e){return(Ko(t)?Le:Vi)(t,ca(e,3))}var wo=Mr((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Io=Xi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ea(t,e[0],e[1])?e=[]:n>2&&Ea(e[0],e[1],e[2])&&(e=[e[0]]),Ki(t,vi(e,1),[])})),Do=de||function(){return he.Date.now()};function Ro(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,$r(t,l,i,i,i,i,e)}function No(t,e){var n;if("function"!=typeof e)throw new Ot(r);return t=ys(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Oo=Xi((function(t,e,n){var i=1;if(n.length){var r=ln(n,ua(Oo));i|=u}return $r(t,i,e,n,r)})),Co=Xi((function(t,e,n){var i=3;if(n.length){var r=ln(n,ua(Co));i|=u}return $r(e,i,t,n,r)}));function Mo(t,e,n){var a,o,s,u,c,l,p=0,d=!1,f=!1,h=!0;if("function"!=typeof t)throw new Ot(r);function y(e){var n=a,r=o;return a=o=i,p=e,u=t.apply(r,n)}function m(t){var n=t-l;return l===i||n>=e||n<0||f&&t-p>=s}function g(){var t=Do();if(m(t))return v(t);c=Ca(g,function(t){var n=e-(t-l);return f?En(n,s-(t-p)):n}(t))}function v(t){return c=i,h&&a?y(t):(a=o=i,u)}function T(){var t=Do(),n=m(t);if(a=arguments,o=this,l=t,n){if(c===i)return function(t){return p=t,c=Ca(g,e),d?y(t):u}(l);if(f)return _r(c),c=Ca(g,e),y(l)}return c===i&&(c=Ca(g,e)),u}return e=gs(e)||0,es(n)&&(d=!!n.leading,s=(f="maxWait"in n)?Tn(gs(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h),T.cancel=function(){c!==i&&_r(c),p=0,a=l=o=c=i},T.flush=function(){return c===i?u:v(Do())},T}var ko=Xi((function(t,e){return pi(t,1,e)})),Lo=Xi((function(t,e,n){return pi(t,gs(e)||0,n)}));function Uo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ot(r);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(Uo.Cache||zn),n}function Po(t){if("function"!=typeof t)throw new Ot(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Uo.Cache=zn;var xo=br((function(t,e){var n=(e=1==e.length&&Ko(e[0])?Le(e[0],$e(ca())):Le(vi(e,1),$e(ca()))).length;return Xi((function(i){for(var r=-1,a=En(i.length,n);++r<a;)i[r]=e[r].call(this,i[r]);return Ie(t,this,i)}))})),Fo=Xi((function(t,e){var n=ln(e,ua(Fo));return $r(t,u,i,e,n)})),Wo=Xi((function(t,e){var n=ln(e,ua(Wo));return $r(t,c,i,e,n)})),Vo=ia((function(t,e){return $r(t,p,i,i,i,e)}));function jo(t,e){return t===e||t!=t&&e!=e}var Yo=qr(Di),Ho=qr((function(t,e){return t>=e})),Bo=Mi(function(){return arguments}())?Mi:function(t){return ns(t)&&Pt.call(t,"callee")&&!Qt.call(t,"callee")},Ko=ot.isArray,Go=Ee?$e(Ee):function(t){return ns(t)&&Ii(t)==k};function qo(t){return null!=t&&ts(t.length)&&!$o(t)}function zo(t){return ns(t)&&qo(t)}var Qo=Te||gu,Jo=be?$e(be):function(t){return ns(t)&&Ii(t)==E};function Xo(t){if(!ns(t))return!1;var e=Ii(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!as(t)}function $o(t){if(!es(t))return!1;var e=Ii(t);return e==S||e==_||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Zo(t){return"number"==typeof t&&t==ys(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=f}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var is=Se?$e(Se):function(t){return ns(t)&&ya(t)==A};function rs(t){return"number"==typeof t||ns(t)&&Ii(t)==w}function as(t){if(!ns(t)||Ii(t)!=I)return!1;var e=qt(t);if(null===e)return!0;var n=Pt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ut.call(n)==Vt}var os=_e?$e(_e):function(t){return ns(t)&&Ii(t)==R};var ss=Ae?$e(Ae):function(t){return ns(t)&&ya(t)==N};function us(t){return"string"==typeof t||!Ko(t)&&ns(t)&&Ii(t)==O}function cs(t){return"symbol"==typeof t||ns(t)&&Ii(t)==C}var ls=we?$e(we):function(t){return ns(t)&&ts(t.length)&&!!se[Ii(t)]};var ps=qr(Wi),ds=qr((function(t,e){return t<=e}));function fs(t){if(!t)return[];if(qo(t))return us(t)?hn(t):Or(t);if($t&&t[$t])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[$t]());var e=ya(t);return(e==A?un:e==N?pn:js)(t)}function hs(t){return t?(t=gs(t))===d||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ys(t){var e=hs(t),n=e%1;return e==e?n?e-n:e:0}function ms(t){return t?ui(ys(t),0,y):0}function gs(t){if("number"==typeof t)return t;if(cs(t))return h;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Xe(t);var n=mt.test(t);return n||vt.test(t)?pe(t.slice(2),n?2:8):yt.test(t)?h:+t}function vs(t){return Cr(t,ks(t))}function Ts(t){return null==t?"":lr(t)}var Es=kr((function(t,e){if(Aa(e)||qo(e))Cr(e,Ms(e),t);else for(var n in e)Pt.call(e,n)&&ni(t,n,e[n])})),bs=kr((function(t,e){Cr(e,ks(e),t)})),Ss=kr((function(t,e,n,i){Cr(e,ks(e),t,i)})),_s=kr((function(t,e,n,i){Cr(e,Ms(e),t,i)})),As=ia(si);var ws=Xi((function(t,e){t=Dt(t);var n=-1,r=e.length,a=r>2?e[2]:i;for(a&&Ea(e[0],e[1],a)&&(r=1);++n<r;)for(var o=e[n],s=ks(o),u=-1,c=s.length;++u<c;){var l=s[u],p=t[l];(p===i||jo(p,kt[l])&&!Pt.call(t,l))&&(t[l]=o[l])}return t})),Is=Xi((function(t){return t.push(i,ta),Ie(Us,i,t)}));function Ds(t,e,n){var r=null==t?i:Ai(t,e);return r===i?n:r}function Rs(t,e){return null!=t&&ma(t,e,Ni)}var Ns=Yr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),t[e]=n}),eu(ru)),Os=Yr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),Pt.call(t,e)?t[e].push(n):t[e]=[n]}),ca),Cs=Xi(Ci);function Ms(t){return qo(t)?Xn(t):xi(t)}function ks(t){return qo(t)?Xn(t,!0):Fi(t)}var Ls=kr((function(t,e,n){Hi(t,e,n)})),Us=kr((function(t,e,n,i){Hi(t,e,n,i)})),Ps=ia((function(t,e){var n={};if(null==t)return n;var i=!1;e=Le(e,(function(e){return e=Er(e,t),i||(i=e.length>1),e})),Cr(t,aa(t),n),i&&(n=ci(n,7,ea));for(var r=e.length;r--;)dr(n,e[r]);return n}));var xs=ia((function(t,e){return null==t?{}:function(t,e){return Gi(t,e,(function(e,n){return Rs(t,n)}))}(t,e)}));function Fs(t,e){if(null==t)return{};var n=Le(aa(t),(function(t){return[t]}));return e=ca(e),Gi(t,n,(function(t,n){return e(t,n[0])}))}var Ws=Xr(Ms),Vs=Xr(ks);function js(t){return null==t?[]:Ze(t,Ms(t))}var Ys=xr((function(t,e,n){return e=e.toLowerCase(),t+(n?Hs(e):e)}));function Hs(t){return Xs(Ts(t).toLowerCase())}function Bs(t){return(t=Ts(t))&&t.replace(Et,rn).replace(te,"")}var Ks=xr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Gs=xr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),qs=Pr("toLowerCase");var zs=xr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Qs=xr((function(t,e,n){return t+(n?" ":"")+Xs(e)}));var Js=xr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xs=Pr("toUpperCase");function $s(t,e,n){return t=Ts(t),(e=n?i:e)===i?function(t){return re.test(t)}(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var Zs=Xi((function(t,e){try{return Ie(t,i,e)}catch(t){return Xo(t)?t:new At(t)}})),tu=ia((function(t,e){return Re(e,(function(e){e=xa(e),oi(t,e,Oo(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Vr(),iu=Vr(!0);function ru(t){return t}function au(t){return Pi("function"==typeof t?t:ci(t,1))}var ou=Xi((function(t,e){return function(n){return Ci(n,t,e)}})),su=Xi((function(t,e){return function(n){return Ci(t,n,e)}}));function uu(t,e,n){var i=Ms(e),r=_i(e,i);null!=n||es(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=_i(e,Ms(e)));var a=!(es(n)&&"chain"in n&&!n.chain),o=$o(t);return Re(r,(function(n){var i=e[n];t[n]=i,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=Or(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Ue([this.value()],arguments))})})),t}function cu(){}var lu=Br(Le),pu=Br(Oe),du=Br(Fe);function fu(t){return ba(t)?Ge(xa(t)):function(t){return function(e){return Ai(e,t)}}(t)}var hu=Gr(),yu=Gr(!0);function mu(){return[]}function gu(){return!1}var vu=Hr((function(t,e){return t+e}),0),Tu=Qr("ceil"),Eu=Hr((function(t,e){return t/e}),1),bu=Qr("floor");var Su,_u=Hr((function(t,e){return t*e}),1),Au=Qr("round"),wu=Hr((function(t,e){return t-e}),0);return jn.after=function(t,e){if("function"!=typeof e)throw new Ot(r);return t=ys(t),function(){if(--t<1)return e.apply(this,arguments)}},jn.ary=Ro,jn.assign=Es,jn.assignIn=bs,jn.assignInWith=Ss,jn.assignWith=_s,jn.at=As,jn.before=No,jn.bind=Oo,jn.bindAll=tu,jn.bindKey=Co,jn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ko(t)?t:[t]},jn.chain=fo,jn.chunk=function(t,e,n){e=(n?Ea(t,e,n):e===i)?1:Tn(ys(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var a=0,o=0,s=ot(ye(r/e));a<r;)s[o++]=rr(t,a,a+=e);return s},jn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r},jn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=ot(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ue(Ko(n)?Or(n):[n],vi(e,1))},jn.cond=function(t){var e=null==t?0:t.length,n=ca();return t=e?Le(t,(function(t){if("function"!=typeof t[1])throw new Ot(r);return[n(t[0]),t[1]]})):[],Xi((function(n){for(var i=-1;++i<e;){var r=t[i];if(Ie(r[0],this,n))return Ie(r[1],this,n)}}))},jn.conforms=function(t){return function(t){var e=Ms(t);return function(n){return li(n,t,e)}}(ci(t,1))},jn.constant=eu,jn.countBy=mo,jn.create=function(t,e){var n=Yn(t);return null==e?n:ai(n,e)},jn.curry=function t(e,n,r){var a=$r(e,8,i,i,i,i,i,n=r?i:n);return a.placeholder=t.placeholder,a},jn.curryRight=function t(e,n,r){var a=$r(e,s,i,i,i,i,i,n=r?i:n);return a.placeholder=t.placeholder,a},jn.debounce=Mo,jn.defaults=ws,jn.defaultsDeep=Is,jn.defer=ko,jn.delay=Lo,jn.difference=Va,jn.differenceBy=ja,jn.differenceWith=Ya,jn.drop=function(t,e,n){var r=null==t?0:t.length;return r?rr(t,(e=n||e===i?1:ys(e))<0?0:e,r):[]},jn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?rr(t,0,(e=r-(e=n||e===i?1:ys(e)))<0?0:e):[]},jn.dropRightWhile=function(t,e){return t&&t.length?hr(t,ca(e,3),!0,!0):[]},jn.dropWhile=function(t,e){return t&&t.length?hr(t,ca(e,3),!0):[]},jn.fill=function(t,e,n,r){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&Ea(t,e,n)&&(n=0,r=a),function(t,e,n,r){var a=t.length;for((n=ys(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ys(r))<0&&(r+=a),r=n>r?0:ms(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},jn.filter=function(t,e){return(Ko(t)?Ce:gi)(t,ca(e,3))},jn.flatMap=function(t,e){return vi(Ao(t,e),1)},jn.flatMapDeep=function(t,e){return vi(Ao(t,e),d)},jn.flatMapDepth=function(t,e,n){return n=n===i?1:ys(n),vi(Ao(t,e),n)},jn.flatten=Ka,jn.flattenDeep=function(t){return(null==t?0:t.length)?vi(t,d):[]},jn.flattenDepth=function(t,e){return(null==t?0:t.length)?vi(t,e=e===i?1:ys(e)):[]},jn.flip=function(t){return $r(t,512)},jn.flow=nu,jn.flowRight=iu,jn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},jn.functions=function(t){return null==t?[]:_i(t,Ms(t))},jn.functionsIn=function(t){return null==t?[]:_i(t,ks(t))},jn.groupBy=bo,jn.initial=function(t){return(null==t?0:t.length)?rr(t,0,-1):[]},jn.intersection=qa,jn.intersectionBy=za,jn.intersectionWith=Qa,jn.invert=Ns,jn.invertBy=Os,jn.invokeMap=So,jn.iteratee=au,jn.keyBy=_o,jn.keys=Ms,jn.keysIn=ks,jn.map=Ao,jn.mapKeys=function(t,e){var n={};return e=ca(e,3),bi(t,(function(t,i,r){oi(n,e(t,i,r),t)})),n},jn.mapValues=function(t,e){var n={};return e=ca(e,3),bi(t,(function(t,i,r){oi(n,i,e(t,i,r))})),n},jn.matches=function(t){return ji(ci(t,1))},jn.matchesProperty=function(t,e){return Yi(t,ci(e,1))},jn.memoize=Uo,jn.merge=Ls,jn.mergeWith=Us,jn.method=ou,jn.methodOf=su,jn.mixin=uu,jn.negate=Po,jn.nthArg=function(t){return t=ys(t),Xi((function(e){return Bi(e,t)}))},jn.omit=Ps,jn.omitBy=function(t,e){return Fs(t,Po(ca(e)))},jn.once=function(t){return No(2,t)},jn.orderBy=function(t,e,n,r){return null==t?[]:(Ko(e)||(e=null==e?[]:[e]),Ko(n=r?i:n)||(n=null==n?[]:[n]),Ki(t,e,n))},jn.over=lu,jn.overArgs=xo,jn.overEvery=pu,jn.overSome=du,jn.partial=Fo,jn.partialRight=Wo,jn.partition=wo,jn.pick=xs,jn.pickBy=Fs,jn.property=fu,jn.propertyOf=function(t){return function(e){return null==t?i:Ai(t,e)}},jn.pull=Xa,jn.pullAll=$a,jn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?qi(t,e,ca(n,2)):t},jn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?qi(t,e,i,n):t},jn.pullAt=Za,jn.range=hu,jn.rangeRight=yu,jn.rearg=Vo,jn.reject=function(t,e){return(Ko(t)?Ce:gi)(t,Po(ca(e,3)))},jn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=ca(e,3);++i<a;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return zi(t,r),n},jn.rest=function(t,e){if("function"!=typeof t)throw new Ot(r);return Xi(t,e=e===i?e:ys(e))},jn.reverse=to,jn.sampleSize=function(t,e,n){return e=(n?Ea(t,e,n):e===i)?1:ys(e),(Ko(t)?Zn:Zi)(t,e)},jn.set=function(t,e,n){return null==t?t:tr(t,e,n)},jn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:tr(t,e,n,r)},jn.shuffle=function(t){return(Ko(t)?ti:ir)(t)},jn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Ea(t,e,n)?(e=0,n=r):(e=null==e?0:ys(e),n=n===i?r:ys(n)),rr(t,e,n)):[]},jn.sortBy=Io,jn.sortedUniq=function(t){return t&&t.length?ur(t):[]},jn.sortedUniqBy=function(t,e){return t&&t.length?ur(t,ca(e,2)):[]},jn.split=function(t,e,n){return n&&"number"!=typeof n&&Ea(t,e,n)&&(e=n=i),(n=n===i?y:n>>>0)?(t=Ts(t))&&("string"==typeof e||null!=e&&!os(e))&&!(e=lr(e))&&sn(t)?Sr(hn(t),0,n):t.split(e,n):[]},jn.spread=function(t,e){if("function"!=typeof t)throw new Ot(r);return e=null==e?0:Tn(ys(e),0),Xi((function(n){var i=n[e],r=Sr(n,0,e);return i&&Ue(r,i),Ie(t,this,r)}))},jn.tail=function(t){var e=null==t?0:t.length;return e?rr(t,1,e):[]},jn.take=function(t,e,n){return t&&t.length?rr(t,0,(e=n||e===i?1:ys(e))<0?0:e):[]},jn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?rr(t,(e=r-(e=n||e===i?1:ys(e)))<0?0:e,r):[]},jn.takeRightWhile=function(t,e){return t&&t.length?hr(t,ca(e,3),!1,!0):[]},jn.takeWhile=function(t,e){return t&&t.length?hr(t,ca(e,3)):[]},jn.tap=function(t,e){return e(t),t},jn.throttle=function(t,e,n){var i=!0,a=!0;if("function"!=typeof t)throw new Ot(r);return es(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),Mo(t,e,{leading:i,maxWait:e,trailing:a})},jn.thru=ho,jn.toArray=fs,jn.toPairs=Ws,jn.toPairsIn=Vs,jn.toPath=function(t){return Ko(t)?Le(t,xa):cs(t)?[t]:Or(Pa(Ts(t)))},jn.toPlainObject=vs,jn.transform=function(t,e,n){var i=Ko(t),r=i||Qo(t)||ls(t);if(e=ca(e,4),null==n){var a=t&&t.constructor;n=r?i?new a:[]:es(t)&&$o(a)?Yn(qt(t)):{}}return(r?Re:bi)(t,(function(t,i,r){return e(n,t,i,r)})),n},jn.unary=function(t){return Ro(t,1)},jn.union=eo,jn.unionBy=no,jn.unionWith=io,jn.uniq=function(t){return t&&t.length?pr(t):[]},jn.uniqBy=function(t,e){return t&&t.length?pr(t,ca(e,2)):[]},jn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?pr(t,i,e):[]},jn.unset=function(t,e){return null==t||dr(t,e)},jn.unzip=ro,jn.unzipWith=ao,jn.update=function(t,e,n){return null==t?t:fr(t,e,Tr(n))},jn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:fr(t,e,Tr(n),r)},jn.values=js,jn.valuesIn=function(t){return null==t?[]:Ze(t,ks(t))},jn.without=oo,jn.words=$s,jn.wrap=function(t,e){return Fo(Tr(e),t)},jn.xor=so,jn.xorBy=uo,jn.xorWith=co,jn.zip=lo,jn.zipObject=function(t,e){return gr(t||[],e||[],ni)},jn.zipObjectDeep=function(t,e){return gr(t||[],e||[],tr)},jn.zipWith=po,jn.entries=Ws,jn.entriesIn=Vs,jn.extend=bs,jn.extendWith=Ss,uu(jn,jn),jn.add=vu,jn.attempt=Zs,jn.camelCase=Ys,jn.capitalize=Hs,jn.ceil=Tu,jn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=gs(n))==n?n:0),e!==i&&(e=(e=gs(e))==e?e:0),ui(gs(t),e,n)},jn.clone=function(t){return ci(t,4)},jn.cloneDeep=function(t){return ci(t,5)},jn.cloneDeepWith=function(t,e){return ci(t,5,e="function"==typeof e?e:i)},jn.cloneWith=function(t,e){return ci(t,4,e="function"==typeof e?e:i)},jn.conformsTo=function(t,e){return null==e||li(t,e,Ms(e))},jn.deburr=Bs,jn.defaultTo=function(t,e){return null==t||t!=t?e:t},jn.divide=Eu,jn.endsWith=function(t,e,n){t=Ts(t),e=lr(e);var r=t.length,a=n=n===i?r:ui(ys(n),0,r);return(n-=e.length)>=0&&t.slice(n,a)==e},jn.eq=jo,jn.escape=function(t){return(t=Ts(t))&&J.test(t)?t.replace(z,an):t},jn.escapeRegExp=function(t){return(t=Ts(t))&&rt.test(t)?t.replace(it,"\\$&"):t},jn.every=function(t,e,n){var r=Ko(t)?Oe:yi;return n&&Ea(t,e,n)&&(e=i),r(t,ca(e,3))},jn.find=go,jn.findIndex=Ha,jn.findKey=function(t,e){return Ve(t,ca(e,3),bi)},jn.findLast=vo,jn.findLastIndex=Ba,jn.findLastKey=function(t,e){return Ve(t,ca(e,3),Si)},jn.floor=bu,jn.forEach=To,jn.forEachRight=Eo,jn.forIn=function(t,e){return null==t?t:Ti(t,ca(e,3),ks)},jn.forInRight=function(t,e){return null==t?t:Ei(t,ca(e,3),ks)},jn.forOwn=function(t,e){return t&&bi(t,ca(e,3))},jn.forOwnRight=function(t,e){return t&&Si(t,ca(e,3))},jn.get=Ds,jn.gt=Yo,jn.gte=Ho,jn.has=function(t,e){return null!=t&&ma(t,e,Ri)},jn.hasIn=Rs,jn.head=Ga,jn.identity=ru,jn.includes=function(t,e,n,i){t=qo(t)?t:js(t),n=n&&!i?ys(n):0;var r=t.length;return n<0&&(n=Tn(r+n,0)),us(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Ye(t,e,n)>-1},jn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ys(n);return r<0&&(r=Tn(i+r,0)),Ye(t,e,r)},jn.inRange=function(t,e,n){return e=hs(e),n===i?(n=e,e=0):n=hs(n),function(t,e,n){return t>=En(e,n)&&t<Tn(e,n)}(t=gs(t),e,n)},jn.invoke=Cs,jn.isArguments=Bo,jn.isArray=Ko,jn.isArrayBuffer=Go,jn.isArrayLike=qo,jn.isArrayLikeObject=zo,jn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Ii(t)==T},jn.isBuffer=Qo,jn.isDate=Jo,jn.isElement=function(t){return ns(t)&&1===t.nodeType&&!as(t)},jn.isEmpty=function(t){if(null==t)return!0;if(qo(t)&&(Ko(t)||"string"==typeof t||"function"==typeof t.splice||Qo(t)||ls(t)||Bo(t)))return!t.length;var e=ya(t);if(e==A||e==N)return!t.size;if(Aa(t))return!xi(t).length;for(var n in t)if(Pt.call(t,n))return!1;return!0},jn.isEqual=function(t,e){return ki(t,e)},jn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?ki(t,e,i,n):!!r},jn.isError=Xo,jn.isFinite=function(t){return"number"==typeof t&&We(t)},jn.isFunction=$o,jn.isInteger=Zo,jn.isLength=ts,jn.isMap=is,jn.isMatch=function(t,e){return t===e||Li(t,e,pa(e))},jn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Li(t,e,pa(e),n)},jn.isNaN=function(t){return rs(t)&&t!=+t},jn.isNative=function(t){if(_a(t))throw new At("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ui(t)},jn.isNil=function(t){return null==t},jn.isNull=function(t){return null===t},jn.isNumber=rs,jn.isObject=es,jn.isObjectLike=ns,jn.isPlainObject=as,jn.isRegExp=os,jn.isSafeInteger=function(t){return Zo(t)&&t>=-9007199254740991&&t<=f},jn.isSet=ss,jn.isString=us,jn.isSymbol=cs,jn.isTypedArray=ls,jn.isUndefined=function(t){return t===i},jn.isWeakMap=function(t){return ns(t)&&ya(t)==M},jn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Ii(t)},jn.join=function(t,e){return null==t?"":qe.call(t,e)},jn.kebabCase=Ks,jn.last=Ja,jn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ys(n))<0?Tn(r+a,0):En(a,r-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,a):je(t,Be,a,!0)},jn.lowerCase=Gs,jn.lowerFirst=qs,jn.lt=ps,jn.lte=ds,jn.max=function(t){return t&&t.length?mi(t,ru,Di):i},jn.maxBy=function(t,e){return t&&t.length?mi(t,ca(e,2),Di):i},jn.mean=function(t){return Ke(t,ru)},jn.meanBy=function(t,e){return Ke(t,ca(e,2))},jn.min=function(t){return t&&t.length?mi(t,ru,Wi):i},jn.minBy=function(t,e){return t&&t.length?mi(t,ca(e,2),Wi):i},jn.stubArray=mu,jn.stubFalse=gu,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=_u,jn.nth=function(t,e){return t&&t.length?Bi(t,ys(e)):i},jn.noConflict=function(){return he._===this&&(he._=jt),this},jn.noop=cu,jn.now=Do,jn.pad=function(t,e,n){t=Ts(t);var i=(e=ys(e))?fn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Kr(me(r),n)+t+Kr(ye(r),n)},jn.padEnd=function(t,e,n){t=Ts(t);var i=(e=ys(e))?fn(t):0;return e&&i<e?t+Kr(e-i,n):t},jn.padStart=function(t,e,n){t=Ts(t);var i=(e=ys(e))?fn(t):0;return e&&i<e?Kr(e-i,n)+t:t},jn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Sn(Ts(t).replace(at,""),e||0)},jn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Ea(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=hs(t),e===i?(e=t,t=0):e=hs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var a=_n();return En(t+a*(e-t+le("1e-"+((a+"").length-1))),e)}return Qi(t,e)},jn.reduce=function(t,e,n){var i=Ko(t)?Pe:ze,r=arguments.length<3;return i(t,ca(e,4),n,r,fi)},jn.reduceRight=function(t,e,n){var i=Ko(t)?xe:ze,r=arguments.length<3;return i(t,ca(e,4),n,r,hi)},jn.repeat=function(t,e,n){return e=(n?Ea(t,e,n):e===i)?1:ys(e),Ji(Ts(t),e)},jn.replace=function(){var t=arguments,e=Ts(t[0]);return t.length<3?e:e.replace(t[1],t[2])},jn.result=function(t,e,n){var r=-1,a=(e=Er(e,t)).length;for(a||(a=1,t=i);++r<a;){var o=null==t?i:t[xa(e[r])];o===i&&(r=a,o=n),t=$o(o)?o.call(t):o}return t},jn.round=Au,jn.runInContext=t,jn.sample=function(t){return(Ko(t)?$n:$i)(t)},jn.size=function(t){if(null==t)return 0;if(qo(t))return us(t)?fn(t):t.length;var e=ya(t);return e==A||e==N?t.size:xi(t).length},jn.snakeCase=zs,jn.some=function(t,e,n){var r=Ko(t)?Fe:ar;return n&&Ea(t,e,n)&&(e=i),r(t,ca(e,3))},jn.sortedIndex=function(t,e){return or(t,e)},jn.sortedIndexBy=function(t,e,n){return sr(t,e,ca(n,2))},jn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=or(t,e);if(i<n&&jo(t[i],e))return i}return-1},jn.sortedLastIndex=function(t,e){return or(t,e,!0)},jn.sortedLastIndexBy=function(t,e,n){return sr(t,e,ca(n,2),!0)},jn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=or(t,e,!0)-1;if(jo(t[n],e))return n}return-1},jn.startCase=Qs,jn.startsWith=function(t,e,n){return t=Ts(t),n=null==n?0:ui(ys(n),0,t.length),e=lr(e),t.slice(n,n+e.length)==e},jn.subtract=wu,jn.sum=function(t){return t&&t.length?Qe(t,ru):0},jn.sumBy=function(t,e){return t&&t.length?Qe(t,ca(e,2)):0},jn.template=function(t,e,n){var r=jn.templateSettings;n&&Ea(t,e,n)&&(e=i),t=Ts(t),e=Ss({},e,r,Zr);var a,o,s=Ss({},e.imports,r.imports,Zr),u=Ms(s),c=Ze(s,u),l=0,p=e.interpolate||bt,d="__p += '",f=Rt((e.escape||bt).source+"|"+p.source+"|"+(p===Z?ft:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),h="//# sourceURL="+(Pt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++oe+"]")+"\n";t.replace(f,(function(e,n,i,r,s,u){return i||(i=r),d+=t.slice(l,u).replace(St,on),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),d+="';\n";var y=Pt.call(e,"variable")&&e.variable;if(y){if(pt.test(y))throw new At("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(B,""):d).replace(K,"$1").replace(G,"$1;"),d="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Zs((function(){return wt(u,h+"return "+d).apply(i,c)}));if(m.source=d,Xo(m))throw m;return m},jn.times=function(t,e){if((t=ys(t))<1||t>f)return[];var n=y,i=En(t,y);e=ca(e),t-=y;for(var r=Je(i,e);++n<t;)e(n);return r},jn.toFinite=hs,jn.toInteger=ys,jn.toLength=ms,jn.toLower=function(t){return Ts(t).toLowerCase()},jn.toNumber=gs,jn.toSafeInteger=function(t){return t?ui(ys(t),-9007199254740991,f):0===t?t:0},jn.toString=Ts,jn.toUpper=function(t){return Ts(t).toUpperCase()},jn.trim=function(t,e,n){if((t=Ts(t))&&(n||e===i))return Xe(t);if(!t||!(e=lr(e)))return t;var r=hn(t),a=hn(e);return Sr(r,en(r,a),nn(r,a)+1).join("")},jn.trimEnd=function(t,e,n){if((t=Ts(t))&&(n||e===i))return t.slice(0,yn(t)+1);if(!t||!(e=lr(e)))return t;var r=hn(t);return Sr(r,0,nn(r,hn(e))+1).join("")},jn.trimStart=function(t,e,n){if((t=Ts(t))&&(n||e===i))return t.replace(at,"");if(!t||!(e=lr(e)))return t;var r=hn(t);return Sr(r,en(r,hn(e))).join("")},jn.truncate=function(t,e){var n=30,r="...";if(es(e)){var a="separator"in e?e.separator:a;n="length"in e?ys(e.length):n,r="omission"in e?lr(e.omission):r}var o=(t=Ts(t)).length;if(sn(t)){var s=hn(t);o=s.length}if(n>=o)return t;var u=n-fn(r);if(u<1)return r;var c=s?Sr(s,0,u).join(""):t.slice(0,u);if(a===i)return c+r;if(s&&(u+=c.length-u),os(a)){if(t.slice(u).search(a)){var l,p=c;for(a.global||(a=Rt(a.source,Ts(ht.exec(a))+"g")),a.lastIndex=0;l=a.exec(p);)var d=l.index;c=c.slice(0,d===i?u:d)}}else if(t.indexOf(lr(a),u)!=u){var f=c.lastIndexOf(a);f>-1&&(c=c.slice(0,f))}return c+r},jn.unescape=function(t){return(t=Ts(t))&&Q.test(t)?t.replace(q,mn):t},jn.uniqueId=function(t){var e=++xt;return Ts(t)+e},jn.upperCase=Js,jn.upperFirst=Xs,jn.each=To,jn.eachRight=Eo,jn.first=Ga,uu(jn,(Su={},bi(jn,(function(t,e){Pt.call(jn.prototype,e)||(Su[e]=t)})),Su),{chain:!1}),jn.VERSION="4.17.21",Re(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){jn[t].placeholder=jn})),Re(["drop","take"],(function(t,e){Kn.prototype[t]=function(n){n=n===i?1:Tn(ys(n),0);var r=this.__filtered__&&!e?new Kn(this):this.clone();return r.__filtered__?r.__takeCount__=En(n,r.__takeCount__):r.__views__.push({size:En(n,y),type:t+(r.__dir__<0?"Right":"")}),r},Kn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Re(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Kn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ca(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),Re(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Kn.prototype[t]=function(){return this[n](1).value()[0]}})),Re(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Kn.prototype[t]=function(){return this.__filtered__?new Kn(this):this[n](1)}})),Kn.prototype.compact=function(){return this.filter(ru)},Kn.prototype.find=function(t){return this.filter(t).head()},Kn.prototype.findLast=function(t){return this.reverse().find(t)},Kn.prototype.invokeMap=Xi((function(t,e){return"function"==typeof t?new Kn(this):this.map((function(n){return Ci(n,t,e)}))})),Kn.prototype.reject=function(t){return this.filter(Po(ca(t)))},Kn.prototype.slice=function(t,e){t=ys(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Kn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ys(e))<0?n.dropRight(-e):n.take(e-t)),n)},Kn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Kn.prototype.toArray=function(){return this.take(y)},bi(Kn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),a=jn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);a&&(jn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Kn,c=s[0],l=u||Ko(e),p=function(t){var e=a.apply(jn,Ue([t],s));return r&&d?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var d=this.__chain__,f=!!this.__actions__.length,h=o&&!d,y=u&&!f;if(!o&&l){e=y?e:new Kn(this);var m=t.apply(e,s);return m.__actions__.push({func:ho,args:[p],thisArg:i}),new Bn(m,d)}return h&&y?t.apply(this,s):(m=this.thru(p),h?r?m.value()[0]:m.value():m)})})),Re(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ct[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);jn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Ko(r)?r:[],t)}return this[n]((function(n){return e.apply(Ko(n)?n:[],t)}))}})),bi(Kn.prototype,(function(t,e){var n=jn[e];if(n){var i=n.name+"";Pt.call(Mn,i)||(Mn[i]=[]),Mn[i].push({name:e,func:n})}})),Mn[jr(i,2).name]=[{name:"wrapper",func:i}],Kn.prototype.clone=function(){var t=new Kn(this.__wrapped__);return t.__actions__=Or(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Or(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Or(this.__views__),t},Kn.prototype.reverse=function(){if(this.__filtered__){var t=new Kn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Kn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ko(t),i=e<0,r=n?t.length:0,a=function(t,e,n){var i=-1,r=n.length;for(;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=En(e,t+o);break;case"takeRight":t=Tn(t,e-o)}}return{start:t,end:e}}(0,r,this.__views__),o=a.start,s=a.end,u=s-o,c=i?s:o-1,l=this.__iteratees__,p=l.length,d=0,f=En(u,this.__takeCount__);if(!n||!i&&r==u&&f==u)return yr(t,this.__actions__);var h=[];t:for(;u--&&d<f;){for(var y=-1,m=t[c+=e];++y<p;){var g=l[y],v=g.iteratee,T=g.type,E=v(m);if(2==T)m=E;else if(!E){if(1==T)continue t;break t}}h[d++]=m}return h},jn.prototype.at=yo,jn.prototype.chain=function(){return fo(this)},jn.prototype.commit=function(){return new Bn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===i&&(this.__values__=fs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},jn.prototype.plant=function(t){for(var e,n=this;n instanceof Hn;){var r=Wa(n);r.__index__=0,r.__values__=i,e?a.__wrapped__=r:e=r;var a=r;n=n.__wrapped__}return a.__wrapped__=t,e},jn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Kn){var e=t;return this.__actions__.length&&(e=new Kn(this)),(e=e.reverse()).__actions__.push({func:ho,args:[to],thisArg:i}),new Bn(e,this.__chain__)}return this.thru(to)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return yr(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,$t&&(jn.prototype[$t]=function(){return this}),jn}();me?((me.exports=gn)._=gn,ye._=gn):he._=gn}).call(e)}(ar,ar.exports);var or,sr,ur=ar.exports,cr="13814000-1dd2-11b2-8080-808080808080";!function(t){t.TENANT="TENANT",t.TENANT_PROFILE="TENANT_PROFILE",t.CUSTOMER="CUSTOMER",t.USER="USER",t.DASHBOARD="DASHBOARD",t.ASSET="ASSET",t.DEVICE="DEVICE",t.DEVICE_PROFILE="DEVICE_PROFILE",t.ASSET_PROFILE="ASSET_PROFILE",t.ALARM="ALARM",t.RULE_CHAIN="RULE_CHAIN",t.RULE_NODE="RULE_NODE",t.EDGE="EDGE",t.ENTITY_VIEW="ENTITY_VIEW",t.WIDGETS_BUNDLE="WIDGETS_BUNDLE",t.WIDGET_TYPE="WIDGET_TYPE",t.API_USAGE_STATE="API_USAGE_STATE",t.TB_RESOURCE="TB_RESOURCE",t.OTA_PACKAGE="OTA_PACKAGE",t.RPC="RPC",t.QUEUE="QUEUE",t.QUEUE_STATS="QUEUE_STATS",t.NOTIFICATION="NOTIFICATION",t.NOTIFICATION_REQUEST="NOTIFICATION_REQUEST",t.NOTIFICATION_RULE="NOTIFICATION_RULE",t.NOTIFICATION_TARGET="NOTIFICATION_TARGET",t.NOTIFICATION_TEMPLATE="NOTIFICATION_TEMPLATE"}(or||(or={})),function(t){t.CURRENT_CUSTOMER="CURRENT_CUSTOMER",t.CURRENT_TENANT="CURRENT_TENANT",t.CURRENT_USER="CURRENT_USER",t.CURRENT_USER_OWNER="CURRENT_USER_OWNER"}(sr||(sr={}));var lr,pr,dr=new Map([[or.TENANT,{type:"entity.type-tenant",typePlural:"entity.type-tenants",list:"entity.list-of-tenants",nameStartsWith:"entity.tenant-name-starts-with",details:"tenant.tenant-details",add:"tenant.add",noEntities:"tenant.no-tenants-text",search:"tenant.search",selectedEntities:"tenant.selected-tenants"}],[or.TENANT_PROFILE,{type:"entity.type-tenant-profile",typePlural:"entity.type-tenant-profiles",list:"entity.list-of-tenant-profiles",nameStartsWith:"entity.tenant-profile-name-starts-with",details:"tenant-profile.tenant-profile-details",add:"tenant-profile.add",noEntities:"tenant-profile.no-tenant-profiles-text",search:"tenant-profile.search",selectedEntities:"tenant-profile.selected-tenant-profiles"}],[or.CUSTOMER,{type:"entity.type-customer",typePlural:"entity.type-customers",list:"entity.list-of-customers",nameStartsWith:"entity.customer-name-starts-with",details:"customer.customer-details",add:"customer.add",noEntities:"customer.no-customers-text",search:"customer.search",selectedEntities:"customer.selected-customers"}],[or.USER,{type:"entity.type-user",typePlural:"entity.type-users",list:"entity.list-of-users",nameStartsWith:"entity.user-name-starts-with",details:"user.user-details",add:"user.add",noEntities:"user.no-users-text",search:"user.search",selectedEntities:"user.selected-users"}],[or.DEVICE,{type:"entity.type-device",typePlural:"entity.type-devices",list:"entity.list-of-devices",nameStartsWith:"entity.device-name-starts-with",details:"device.device-details",add:"device.add",noEntities:"device.no-devices-text",search:"device.search",selectedEntities:"device.selected-devices"}],[or.DEVICE_PROFILE,{type:"entity.type-device-profile",typePlural:"entity.type-device-profiles",list:"entity.list-of-device-profiles",nameStartsWith:"entity.device-profile-name-starts-with",details:"device-profile.device-profile-details",add:"device-profile.add",noEntities:"device-profile.no-device-profiles-text",search:"device-profile.search",selectedEntities:"device-profile.selected-device-profiles"}],[or.ASSET_PROFILE,{type:"entity.type-asset-profile",typePlural:"entity.type-asset-profiles",list:"entity.list-of-asset-profiles",nameStartsWith:"entity.asset-profile-name-starts-with",details:"asset-profile.asset-profile-details",add:"asset-profile.add",noEntities:"asset-profile.no-asset-profiles-text",search:"asset-profile.search",selectedEntities:"asset-profile.selected-asset-profiles"}],[or.ASSET,{type:"entity.type-asset",typePlural:"entity.type-assets",list:"entity.list-of-assets",nameStartsWith:"entity.asset-name-starts-with",details:"asset.asset-details",add:"asset.add",noEntities:"asset.no-assets-text",search:"asset.search",selectedEntities:"asset.selected-assets"}],[or.EDGE,{type:"entity.type-edge",typePlural:"entity.type-edges",list:"entity.list-of-edges",nameStartsWith:"entity.edge-name-starts-with",details:"edge.edge-details",add:"edge.add",noEntities:"edge.no-edges-text",search:"edge.search",selectedEntities:"edge.selected-edges"}],[or.ENTITY_VIEW,{type:"entity.type-entity-view",typePlural:"entity.type-entity-views",list:"entity.list-of-entity-views",nameStartsWith:"entity.entity-view-name-starts-with",details:"entity-view.entity-view-details",add:"entity-view.add",noEntities:"entity-view.no-entity-views-text",search:"entity-view.search",selectedEntities:"entity-view.selected-entity-views"}],[or.RULE_CHAIN,{type:"entity.type-rulechain",typePlural:"entity.type-rulechains",list:"entity.list-of-rulechains",nameStartsWith:"entity.rulechain-name-starts-with",details:"rulechain.rulechain-details",add:"rulechain.add",noEntities:"rulechain.no-rulechains-text",search:"rulechain.search",selectedEntities:"rulechain.selected-rulechains"}],[or.RULE_NODE,{type:"entity.type-rulenode",typePlural:"entity.type-rulenodes",list:"entity.list-of-rulenodes",nameStartsWith:"entity.rulenode-name-starts-with"}],[or.DASHBOARD,{type:"entity.type-dashboard",typePlural:"entity.type-dashboards",list:"entity.list-of-dashboards",nameStartsWith:"entity.dashboard-name-starts-with",details:"dashboard.dashboard-details",add:"dashboard.add",noEntities:"dashboard.no-dashboards-text",search:"dashboard.search",selectedEntities:"dashboard.selected-dashboards"}],[or.ALARM,{type:"entity.type-alarm",typePlural:"entity.type-alarms",list:"entity.list-of-alarms",nameStartsWith:"entity.alarm-name-starts-with",details:"alarm.alarm-details",noEntities:"alarm.no-alarms-prompt",search:"alarm.search",selectedEntities:"alarm.selected-alarms"}],[or.API_USAGE_STATE,{type:"entity.type-api-usage-state"}],[or.WIDGET_TYPE,{type:"entity.type-widget",typePlural:"entity.type-widgets",list:"entity.list-of-widgets",details:"widget.details",add:"dashboard.add-widget",noEntities:"widget.no-widgets-text",search:"widget.search-widgets",selectedEntities:"widget.selected-widgets"}],[or.WIDGETS_BUNDLE,{type:"entity.type-widgets-bundle",typePlural:"entity.type-widgets-bundles",list:"entity.list-of-widgets-bundles",details:"widgets-bundle.widgets-bundle-details",add:"widgets-bundle.add",noEntities:"widgets-bundle.no-widgets-bundles-text",search:"widgets-bundle.search",selectedEntities:"widgets-bundle.selected-widgets-bundles"}],[sr.CURRENT_CUSTOMER,{type:"entity.type-current-customer",list:"entity.type-current-customer"}],[sr.CURRENT_TENANT,{type:"entity.type-current-tenant",list:"entity.type-current-tenant"}],[sr.CURRENT_USER,{type:"entity.type-current-user",list:"entity.type-current-user"}],[sr.CURRENT_USER_OWNER,{type:"entity.type-current-user-owner",list:"entity.type-current-user-owner"}],[or.TB_RESOURCE,{type:"entity.type-tb-resource",typePlural:"entity.type-tb-resources",list:"entity.list-of-tb-resources",details:"resource.resource-library-details",add:"resource.add",noEntities:"resource.no-resource-text",search:"resource.search",selectedEntities:"resource.selected-resources"}],[or.OTA_PACKAGE,{type:"entity.type-ota-package",details:"ota-update.ota-update-details",add:"ota-update.add",noEntities:"ota-update.no-packages-text",search:"ota-update.search",selectedEntities:"ota-update.selected-package"}],[or.RPC,{type:"entity.type-rpc"}],[or.QUEUE,{type:"entity.type-queue",add:"queue.add",search:"queue.search",details:"queue.details",selectedEntities:"queue.selected-queues"}],[or.QUEUE_STATS,{type:"entity.type-queue-stats",typePlural:"entity.type-queues-stats",list:"queue-statistics.list-of-queue-statistics",noEntities:"queue-statistics.no-queue-statistics-text",selectedEntities:"queue-statistics.selected-queue-statistics",nameStartsWith:"queue-statistics.queue-statistics-starts-with"}],[or.NOTIFICATION,{type:"entity.type-notification",noEntities:"notification.no-inbox-notification",search:"notification.search-notification",selectedEntities:"notification.selected-notifications"}],[or.NOTIFICATION_REQUEST,{type:"entity.type-notification-request",noEntities:"notification.no-notification-request",selectedEntities:"notification.selected-requests"}],[or.NOTIFICATION_RULE,{type:"entity.type-notification-rule",typePlural:"entity.type-notification-rules",list:"entity.list-of-notification-rules",noEntities:"notification.no-rules-notification",search:"notification.search-rules",selectedEntities:"notification.selected-rules"}],[or.NOTIFICATION_TARGET,{type:"entity.type-notification-target",typePlural:"entity.type-notification-targets",list:"entity.list-of-notification-targets",noEntities:"notification.no-recipients-notification",search:"notification.search-recipients",selectedEntities:"notification.selected-recipients"}],[or.NOTIFICATION_TEMPLATE,{type:"entity.type-notification-template",typePlural:"entity.type-notification-templates",list:"entity.list-of-notification-templates",noEntities:"notification.no-notification-templates",search:"notification.search-templates",selectedEntities:"notification.selected-template"}]]),fr=new Map([[or.TENANT,{helpLinkId:"tenants"}],[or.TENANT_PROFILE,{helpLinkId:"tenantProfiles"}],[or.CUSTOMER,{helpLinkId:"customers"}],[or.USER,{helpLinkId:"users"}],[or.DEVICE,{helpLinkId:"devices"}],[or.DEVICE_PROFILE,{helpLinkId:"deviceProfiles"}],[or.ASSET_PROFILE,{helpLinkId:"assetProfiles"}],[or.ASSET,{helpLinkId:"assets"}],[or.EDGE,{helpLinkId:"edges"}],[or.ENTITY_VIEW,{helpLinkId:"entityViews"}],[or.RULE_CHAIN,{helpLinkId:"rulechains"}],[or.DASHBOARD,{helpLinkId:"dashboards"}],[or.WIDGET_TYPE,{helpLinkId:"widgetTypes"}],[or.WIDGETS_BUNDLE,{helpLinkId:"widgetsBundles"}],[or.TB_RESOURCE,{helpLinkId:"lwm2mResourceLibrary"}],[or.OTA_PACKAGE,{helpLinkId:"otaUpdates"}],[or.QUEUE,{helpLinkId:"queue"}]]),hr=new Map([[or.TENANT,"/tenants"],[or.TENANT_PROFILE,"/tenantProfiles"],[or.CUSTOMER,"/customers"],[or.USER,"/users"],[or.DASHBOARD,"/dashboards"],[or.ASSET,"/entities/assets"],[or.DEVICE,"/entities/devices"],[or.DEVICE_PROFILE,"/profiles/deviceProfiles"],[or.ASSET_PROFILE,"/profiles/assetProfiles"],[or.RULE_CHAIN,"/ruleChains"],[or.EDGE,"/edgeManagement/instances"],[or.ENTITY_VIEW,"/entities/entityViews"],[or.TB_RESOURCE,"/resources/resources-library"],[or.OTA_PACKAGE,"/features/otaUpdates"],[or.QUEUE,"/settings/queues"],[or.WIDGETS_BUNDLE,"/resources/widgets-library/widgets-bundles/details"],[or.WIDGET_TYPE,"/resources/widgets-library/widget-types/details"]]),yr={serverErrorCode:{general:2,authentication:10,jwtTokenExpired:11,tenantTrialExpired:12,credentialsExpired:15,permissionDenied:20,invalidArguments:30,badRequestParams:31,itemNotFound:32,tooManyRequests:33,tooManyUpdates:34,passwordViolation:45},entryPoints:{login:"/api/auth/login",tokenRefresh:"/api/auth/token",nonTokenBased:"/api/noauth"}},mr=new Map([[yr.serverErrorCode.general,"server-error.general"],[yr.serverErrorCode.authentication,"server-error.authentication"],[yr.serverErrorCode.jwtTokenExpired,"server-error.jwt-token-expired"],[yr.serverErrorCode.tenantTrialExpired,"server-error.tenant-trial-expired"],[yr.serverErrorCode.credentialsExpired,"server-error.credentials-expired"],[yr.serverErrorCode.permissionDenied,"server-error.permission-denied"],[yr.serverErrorCode.invalidArguments,"server-error.invalid-arguments"],[yr.serverErrorCode.badRequestParams,"server-error.bad-request-params"],[yr.serverErrorCode.itemNotFound,"server-error.item-not-found"],[yr.serverErrorCode.tooManyRequests,"server-error.too-many-requests"],[yr.serverErrorCode.tooManyUpdates,"server-error.too-many-updates"]]),gr={xs:"screen and (max-width: 599px)",sm:"screen and (min-width: 600px) and (max-width: 959px)",md:"screen and (min-width: 960px) and (max-width: 1279px)",lg:"screen and (min-width: 1280px) and (max-width: 1919px)",xl:"screen and (min-width: 1920px) and (max-width: 5000px)","lt-sm":"screen and (max-width: 599px)","lt-md":"screen and (max-width: 959px)","lt-lg":"screen and (max-width: 1279px)","lt-xl":"screen and (max-width: 1919px)","gt-xs":"screen and (min-width: 600px)","gt-sm":"screen and (min-width: 960px)","gt-md":"screen and (min-width: 1280px)","gt-lg":"screen and (min-width: 1920px)","gt-xl":"screen and (min-width: 5001px)","md-lg":"screen and (min-width: 960px) and (max-width: 1819px)"},vr="https://thingsboard.io",Tr="",Er={linksMap:{outgoingMailSettings:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/mail-settings"),smsProviderSettings:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/sms-provider-settings"),slackSettings:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/slack-settings"),securitySettings:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/security-settings"),oauth2Settings:"".concat(vr,"/docs").concat(Tr,"/user-guide/oauth-2-support/"),ruleEngine:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/overview/"),ruleNodeCheckRelation:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#check-relation-filter-node"),ruleNodeCheckExistenceFields:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#check-existence-fields-node"),ruleNodeGpsGeofencingFilter:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#gps-geofencing-filter-node"),ruleNodeJsFilter:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#script-filter-node"),ruleNodeJsSwitch:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#switch-node"),ruleNodeAssetProfileSwitch:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#asset-profile-switch"),ruleNodeDeviceProfileSwitch:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#device-profile-switch"),ruleNodeCheckAlarmStatus:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#check-alarm-status"),ruleNodeMessageTypeFilter:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#message-type-filter-node"),ruleNodeMessageTypeSwitch:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#message-type-switch-node"),ruleNodeOriginatorTypeFilter:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#originator-type-filter-node"),ruleNodeOriginatorTypeSwitch:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/filter-nodes/#originator-type-switch-node"),ruleNodeOriginatorAttributes:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/enrichment-nodes/#originator-attributes"),ruleNodeOriginatorFields:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/enrichment-nodes/#originator-fields"),ruleNodeOriginatorTelemetry:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/enrichment-nodes/#originator-telemetry"),ruleNodeCustomerAttributes:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/enrichment-nodes/#customer-attributes"),ruleNodeCustomerDetails:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/enrichment-nodes/#customer-details"),ruleNodeDeviceAttributes:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/enrichment-nodes/#device-attributes"),ruleNodeRelatedAttributes:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/enrichment-nodes/#related-attributes"),ruleNodeTenantAttributes:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/enrichment-nodes/#tenant-attributes"),ruleNodeTenantDetails:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/enrichment-nodes/#tenant-details"),ruleNodeChangeOriginator:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/transformation-nodes/#change-originator"),ruleNodeTransformMsg:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/transformation-nodes/#script-transformation-node"),ruleNodeMsgToEmail:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/transformation-nodes/#to-email-node"),ruleNodeAssignToCustomer:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/transformation-nodes/#assign-to-customer-node"),ruleNodeUnassignFromCustomer:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/transformation-nodes/#unassign-from-customer-node"),ruleNodeClearAlarm:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#clear-alarm-node"),ruleNodeCreateAlarm:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#create-alarm-node"),ruleNodeCreateRelation:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#create-relation-node"),ruleNodeDeleteRelation:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#delete-relation-node"),ruleNodeMsgDelay:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#delay-node"),ruleNodeMsgGenerator:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#generator-node"),ruleNodeGpsGeofencingEvents:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#gps-geofencing-events-node"),ruleNodeLog:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#log-node"),ruleNodeRpcCallReply:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#rpc-call-reply-node"),ruleNodeRpcCallRequest:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#rpc-call-request-node"),ruleNodeSaveAttributes:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#save-attributes-node"),ruleNodeSaveTimeseries:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#save-timeseries-node"),ruleNodeSaveToCustomTable:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#save-to-custom-table"),ruleNodeRuleChain:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/flow-nodes/#rule-chain-node"),ruleNodeOutputNode:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/flow-nodes/#output-node"),ruleNodeAwsSns:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/external-nodes/#aws-sns-node"),ruleNodeAwsSqs:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/external-nodes/#aws-sqs-node"),ruleNodeKafka:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/external-nodes/#kafka-node"),ruleNodeMqtt:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/external-nodes/#mqtt-node"),ruleNodeAzureIotHub:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/external-nodes/#azure-iot-hub-node"),ruleNodeRabbitMq:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/external-nodes/#rabbitmq-node"),ruleNodeRestApiCall:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/external-nodes/#rest-api-call-node"),ruleNodeSendEmail:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/external-nodes/#send-email-node"),ruleNodeSendSms:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/external-nodes/#send-sms-node"),ruleNodeMath:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#math-function-node"),ruleNodeCalculateDelta:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/enrichment-nodes/#calculate-delta"),ruleNodeRestCallReply:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#rest-call-reply-node"),ruleNodePushToCloud:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#push-to-cloud"),ruleNodePushToEdge:"".concat(vr,"/docs").concat(Tr,"/user-guide/rule-engine-2-0/action-nodes/#push-to-edge"),tenants:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/tenants"),tenantProfiles:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/tenant-profiles"),customers:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/customers"),users:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/users"),devices:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/devices"),deviceProfiles:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/device-profiles"),assetProfiles:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/asset-profiles"),edges:"".concat(vr,"/docs/edge/getting-started-guides/what-is-edge"),assets:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/assets"),entityViews:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/entity-views"),entitiesImport:"".concat(vr,"/docs").concat(Tr,"/user-guide/bulk-provisioning"),rulechains:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/rule-chains"),lwm2mResourceLibrary:"".concat(vr,"/docs").concat(Tr,"/reference/lwm2m-api"),dashboards:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/dashboards"),otaUpdates:"".concat(vr,"/docs").concat(Tr,"/user-guide/ota-updates"),widgetTypes:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/widget-library/#widget-types"),widgetsBundles:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/widget-library/#widgets-library-bundles"),widgetsConfig:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/widget-library"),widgetsConfigTimeseries:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/widget-library#time-series"),widgetsConfigLatest:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/widget-library#latest-values"),widgetsConfigRpc:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/widget-library#control-widget"),widgetsConfigAlarm:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/widget-library#alarm-widget"),widgetsConfigStatic:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/widget-library#static"),queue:"".concat(vr,"/docs").concat(Tr,"/user-guide/queue"),repositorySettings:"".concat(vr,"/docs").concat(Tr,"/user-guide/version-control/#git-settings-configuration"),autoCommitSettings:"".concat(vr,"/docs").concat(Tr,"/user-guide/version-control/#auto-commit"),twoFactorAuthentication:"".concat(vr,"/docs").concat(Tr,"/user-guide/two-factor-authentication"),sentNotification:"".concat(vr,"/docs").concat(Tr,"/user-guide/notifications/#send-notification"),templateNotifications:"".concat(vr,"/docs").concat(Tr,"/user-guide/notifications/#templates"),recipientNotifications:"".concat(vr,"/docs").concat(Tr,"/user-guide/notifications/#recipients"),ruleNotifications:"".concat(vr,"/docs").concat(Tr,"/user-guide/notifications/#rules"),jwtSecuritySettings:"".concat(vr,"/docs").concat(Tr,"/user-guide/ui/jwt-security-settings/"),gatewayInstall:"".concat(vr,"/docs/iot-gateway/install/docker-installation/")}};!function(t){t.STRING="STRING",t.INTEGER="INTEGER",t.DOUBLE="DOUBLE",t.BOOLEAN="BOOLEAN",t.JSON="JSON"}(lr||(lr={})),function(t){t.STRING="STRING",t.LONG="LONG",t.BOOLEAN="BOOLEAN",t.DOUBLE="DOUBLE",t.JSON="JSON"}(pr||(pr={}));var br,Sr=new Map([[pr.STRING,"value.string"],[pr.LONG,"value.integer"],[pr.BOOLEAN,"value.boolean"],[pr.DOUBLE,"value.double"],[pr.JSON,"value.json"]]),_r=new Map([[lr.STRING,{name:"value.string",icon:"mdi:format-text"}],[lr.INTEGER,{name:"value.integer",icon:"mdi:numeric"}],[lr.DOUBLE,{name:"value.double",icon:"mdi:numeric"}],[lr.BOOLEAN,{name:"value.boolean",icon:"mdi:checkbox-marked-outline"}],[lr.JSON,{name:"value.json",icon:"mdi:code-json"}]]);!function(t){t.JSON="JSON",t.TEXT="TEXT",t.BINARY="BINARY"}(br||(br={}));var Ar=new Map([[br.JSON,{name:"content-type.json",code:"json"}],[br.TEXT,{name:"content-type.text",code:"text"}],[br.BINARY,{name:"content-type.binary",code:"text"}]]),wr="custom.",Ir="i18n",Dr=/\${([^}]*)}/g;function Rr(t){return void 0===t}function Nr(t){return null==t}function Or(t){return void 0!==t}function Cr(t){return null!=t}function Mr(t){return""===t}function kr(t){return"string"==typeof t&&t.trim().length>0}function Lr(t){return null!==t&&"object"==typeof t}function Ur(t){return"number"==typeof t}function Pr(t){return t-parseFloat(t)+1>=0}function xr(t){return"string"==typeof t}var Fr=function(t,e,n,i){if(Cr(t)&&Pr(t)&&(Cr(e)||Cr(n)||Number(t).toString()===t)){var r=Number(t);return Cr(e)&&(r=r.toFixed(e)),i||(r=Number(r)),r=r.toString(),Cr(n)&&n.length>0&&(r+=" "+n),r}return null!==t?t:""};function Wr(t){var e=JSON.stringify(t);return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})))}function Vr(t){return decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function jr(t){return encodeURIComponent(Wr(t))}function Yr(t){var e=decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(e)}var Hr=function(t){return Ln(new Promise((function(e){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.readAsDataURL(t)})))},Br=/(auto|scroll)/;function Kr(t,e){return null===t.parentNode?e:Kr(t.parentNode,e.concat([t]))}function Gr(t,e){return getComputedStyle(t,null).getPropertyValue(e)}function qr(t){var e,n=0;if(0===t.length)return n;for(e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n}function zr(t){var e=0;t&&(e=qr(JSON.stringify(t)));return e}function Qr(t,e){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var n=[];return t.forEach((function(t){n.push(t)})),n.map((function(t){return Qr(t)}))}if("object"==typeof t){var i=de({},t);return Object.keys(i).forEach((function(t){e&&-1!==e.indexOf(t)||(i[t]=Qr(i[t]))})),i}return t}var Jr=function(t,e){return ur.isEqual(t,e)},Xr=function(t){return ur.isEmpty(t)},$r=function(t,e){return t===e||(Cr(t)&&Cr(e)?Jr(t,e):(Nr(t)||!t)&&(Nr(e)||!e))},Zr=function(t,e){var n=$r(t,e);return n||(Nr(t)||!(null==t?void 0:t.length))&&(Nr(e)||!(null==e?void 0:e.length))};function ta(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}var ea=/[A-Z]/g;function na(t,e){return t.hasOwnProperty(e)?t[e]:e.split(".").reduce((function(t,e){return t&&t[e]}),t)}var ia=function(t,e){var n=e;if(!t)return n;for(var i=Dr.exec(e);null!==i;){var r=i[0],a=i[1];"dsName"===a?n=n.replace(r,t.name):"entityName"===a||"deviceName"===a?n=n.replace(r,t.entityName):"entityLabel"===a?n=n.replace(r,t.entityLabel||t.entityName):"aliasName"===a?n=n.replace(r,t.aliasName):"entityDescription"===a&&(n=n.replace(r,t.entityDescription)),i=Dr.exec(e)}return n};function ra(t,e,n){return ur(t).groupBy((function(t){return t.datasource.entityName+t.datasource.entityType})).values().value().map((function(t,i){var r=aa(t[0].datasource,i);return t.filter((function(t){return t.data.length})).forEach((function(t){var i=Or(e)?e:t.data.length-1,a=Or(n)?t.data.find((function(t){return t[0]===n})):t.data[i];void 0===a||r.hasOwnProperty(t.dataKey.label)&&""===a[1]||(r[t.dataKey.label]=a[1],r[t.dataKey.label+"|ts"]=a[0],"type"===t.dataKey.label.toLowerCase()&&(r.deviceType=a[1]))})),r}))}function aa(t,e){return{entityName:t.entityName,deviceName:t.entityName,entityId:t.entityId,entityType:t.entityType,entityLabel:t.entityLabel||t.entityName,entityDescription:t.entityDescription,aliasName:t.aliasName,$datasource:t,dsIndex:e,dsName:t.name,deviceType:null}}function oa(t){var e,n,i={};if(t.length){try{for(var r=ve(t),a=r.next();!a.done;a=r.next()){var o=a.value;i=de(de({},i),o)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}var s=t[0];i.entityName=s.entityName,i.deviceName=s.deviceName,i.entityId=s.entityId,i.entityType=s.entityType,i.entityLabel=s.entityLabel,i.entityDescription=s.entityDescription,i.aliasName=s.aliasName,i.$datasource=s.$datasource,i.dsIndex=s.dsIndex,i.dsName=s.dsName,i.deviceType=s.deviceType}return i}function sa(t,e){var n=[];try{for(var i=/\${([^}]*)}/g,r=i.exec(t);null!==r;){var a={dataKeyName:"",valDec:2,variable:""},o=r[0],s=r[1],u=2,c=s.split(":");if(c.length>1&&(s=c[0],u=parseFloat(c[1])),a.variable=o,a.valDec=u,s.startsWith("#")){var l=s.substring(1),p=Math.floor(Number(l));String(p)===l&&p>=0&&(a.dataKeyName=e.$datasource.dataKeys[p].label)}else a.dataKeyName=s;n.push(a),r=i.exec(t)}}catch(e){console.log(e,t)}return n}function ua(t,e,n){var i,r,a=ia(n.$datasource,t);if(e)try{for(var o=ve(e),s=o.next();!s.done;s=o.next()){var u=s.value,c="";if(u.dataKeyName&&Cr(n[u.dataKeyName])){var l=n[u.dataKeyName];c=Ur(l)?la(l,u.valDec):l}a=a.replace(u.variable,c)}}catch(t){i={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function ca(t,e){return ua(t,sa(t,e),e)}function la(t,e){var n;return n=(t=parseFloat(t))<0,t=Math.abs(t),(n?"-":"")+(e>0?t.toFixed(e):Math.round(t).toString())}function pa(){var t=window.location.protocol+"//"+window.location.hostname,e=window.location.port;return e&&e.length>0&&"80"!==e&&"443"!==e&&(t+=":"+e),t}function da(t){(Rr(t)||null==t)&&(t=1);var e=t>10?10:t,n=Math.random().toString(36).substr(2,e);return n.length>=t?n:n.concat(da(t-n.length))}var fa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function ha(t,e){return hr.has(e)?"".concat(hr.get(e),"/").concat(t):""}function ya(t,e,n){var i,r=null,a=0;if("text"===n)try{r=t.error?JSON.parse(t.error):null}catch(t){}else r=t.error;if(r&&!r.message?i=function(t){if("object"!=typeof t||t.constructor!==ArrayBuffer)return t;var e=String.fromCharCode.apply(null,new Uint8Array(t));try{var n=JSON.parse(e);return n.message?n.message:e}catch(t){return e}}(r):r&&r.message?(i=r.message,a=r.timeout?r.timeout:0):i="Unhandled error code ".concat(r?r.status:"'Unknown'"),Lr(i)){var o="".concat(t.status,": "),s=null;i.errorCode&&(s=mr.get(i.errorCode)),i=o+=s?e.instant(s):t.statusText}return{message:i,timeout:a}}var ma,ga=function(){function t(t){this.http=t}return t.prototype.getUsers=function(t,e){return this.http.get("/api/users".concat(t.toQuery()),nr(e))},t.prototype.getTenantAdmins=function(t,e,n){return this.http.get("/api/tenant/".concat(t,"/users").concat(e.toQuery()),nr(n))},t.prototype.getCustomerUsers=function(t,e,n){return this.http.get("/api/customer/".concat(t,"/users").concat(e.toQuery()),nr(n))},t.prototype.getUsersForAssign=function(t,e,n){return this.http.get("/api/users/assign/".concat(t).concat(e.toQuery()),nr(n))},t.prototype.getUser=function(t,e){return this.http.get("/api/user/".concat(t),nr(e))},t.prototype.saveUser=function(t,e,n){void 0===e&&(e=!1);var i="/api/user";return i+="?sendActivationMail="+e,this.http.post(i,t,nr(n))},t.prototype.deleteUser=function(t,e){return this.http.delete("/api/user/".concat(t),nr(e))},t.prototype.getActivationLink=function(t,e){return this.http.get("/api/user/".concat(t,"/activationLink"),de({responseType:"text"},nr(e)))},t.prototype.sendActivationEmail=function(t,e){var n=encodeURIComponent(t);return this.http.post("/api/user/sendActivationMail?email=".concat(n),null,nr(e))},t.prototype.setUserCredentialsEnabled=function(t,e,n){var i="/api/user/".concat(t,"/userCredentialsEnabled");return Or(e)&&(i+="?userCredentialsEnabled=".concat(e)),this.http.post(i,null,nr(n))},t.prototype.findUsersByQuery=function(t,e){return this.http.get("/api/users/info".concat(t.toQuery()),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();!function(t){t.SYS_ADMIN="SYS_ADMIN",t.TENANT_ADMIN="TENANT_ADMIN",t.CUSTOMER_USER="CUSTOMER_USER",t.REFRESH_TOKEN="REFRESH_TOKEN",t.ANONYMOUS="ANONYMOUS",t.PRE_VERIFICATION_TOKEN="PRE_VERIFICATION_TOKEN"}(ma||(ma={}));var va,Ta=function(){function t(){}return t.prototype.runOutsideAngular=function(t){return t()},t=fe([ae(),ye("design:paramtypes",[])],t)}(),Ea=function(){function t(){}return t.prototype.instant=function(t,e){return t},t=fe([ae(),ye("design:paramtypes",[])],t)}(),ba={exports:{}};(va=ba).exports=function(){var t;function e(){return t.apply(null,arguments)}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;for(var e in t)if(r(t,e))return;return 1}function o(t){return void 0===t}function s(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function u(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function c(t,e){for(var n=[],i=t.length,r=0;r<i;++r)n.push(e(t[r],r));return n}function l(t,e){for(var n in e)r(e,n)&&(t[n]=e[n]);return r(e,"toString")&&(t.toString=e.toString),r(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,n,i){return Re(t,e,n,i,!0).utc()}function d(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function f(t){if(null==t._isValid){var e=d(t),n=y.call(e.parsedDateParts,(function(t){return null!=t}));if(n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function h(t){var e=p(NaN);return null!=t?l(d(e),t):d(e).userInvalidated=!0,e}var y=Array.prototype.some||function(t){for(var e=Object(this),n=e.length>>>0,i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1},m=e.momentProperties=[],g=!1;function v(t,e){var n,i,r,a=m.length;if(o(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),o(e._i)||(t._i=e._i),o(e._f)||(t._f=e._f),o(e._l)||(t._l=e._l),o(e._strict)||(t._strict=e._strict),o(e._tzm)||(t._tzm=e._tzm),o(e._isUTC)||(t._isUTC=e._isUTC),o(e._offset)||(t._offset=e._offset),o(e._pf)||(t._pf=d(e)),o(e._locale)||(t._locale=e._locale),0<a)for(n=0;n<a;n++)o(r=e[i=m[n]])||(t[i]=r);return t}function T(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===g&&(g=!0,e.updateOffset(this),g=!1)}function E(t){return t instanceof T||null!=t&&null!=t._isAMomentObject}function b(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function S(t,n){var i=!0;return l((function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),i){for(var a,o,s=[],u=arguments.length,c=0;c<u;c++){if(a="","object"==typeof arguments[c]){for(o in a+="\n["+c+"] ",arguments[0])r(arguments[0],o)&&(a+=o+": "+arguments[0][o]+", ");a=a.slice(0,-2)}else a=arguments[c];s.push(a)}b(t+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),i=!1}return n.apply(this,arguments)}),n)}var _={};function A(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),_[t]||(b(n),_[t]=!0)}function w(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function I(t,e){var n,a=l({},t);for(n in e)r(e,n)&&(i(t[n])&&i(e[n])?(a[n]={},l(a[n],t[n]),l(a[n],e[n])):null!=e[n]?a[n]=e[n]:delete a[n]);for(n in t)r(t,n)&&!r(e,n)&&i(t[n])&&(a[n]=l({},a[n]));return a}function D(t){null!=t&&this.set(t)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var R=Object.keys||function(t){var e,n=[];for(e in t)r(t,e)&&n.push(e);return n};function N(t,e,n){var i=""+Math.abs(t);return(0<=t?n?"+":"":"-")+Math.pow(10,Math.max(0,e-i.length)).toString().substr(1)+i}var O=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,C=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,M={},k={};function L(t,e,n,i){var r="string"==typeof i?function(){return this[i]()}:i;t&&(k[t]=r),e&&(k[e[0]]=function(){return N(r.apply(this,arguments),e[1],e[2])}),n&&(k[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function U(t,e){return t.isValid()?(e=P(e,t.localeData()),M[e]=M[e]||function(t){for(var e,n=t.match(O),i=0,r=n.length;i<r;i++)k[n[i]]?n[i]=k[n[i]]:n[i]=(e=n[i]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var i="",a=0;a<r;a++)i+=w(n[a])?n[a].call(e,t):n[a];return i}}(e),M[e](t)):t.localeData().invalidDate()}function P(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(C.lastIndex=0;0<=n&&C.test(t);)t=t.replace(C,i),C.lastIndex=0,--n;return t}var x={};function F(t,e){var n=t.toLowerCase();x[n]=x[n+"s"]=x[e]=t}function W(t){return"string"==typeof t?x[t]||x[t.toLowerCase()]:void 0}function V(t){var e,n,i={};for(n in t)r(t,n)&&(e=W(n))&&(i[e]=t[n]);return i}var j={};function Y(t,e){j[t]=e}function H(t){return t%4==0&&t%100!=0||t%400==0}function B(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function K(t){var e=0;return 0!=(t=+t)&&isFinite(t)?B(t):e}function G(t,n){return function(i){return null!=i?(z(this,t,i),e.updateOffset(this,n),this):q(this,t)}}function q(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function z(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&H(t.year())&&1===t.month()&&29===t.date()?(n=K(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Rt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}var Q=/\d/,J=/\d\d/,X=/\d{3}/,$=/\d{4}/,Z=/[+-]?\d{6}/,tt=/\d\d?/,et=/\d\d\d\d?/,nt=/\d\d\d\d\d\d?/,it=/\d{1,3}/,rt=/\d{1,4}/,at=/[+-]?\d{1,6}/,ot=/\d+/,st=/[+-]?\d+/,ut=/Z|[+-]\d\d:?\d\d/gi,ct=/Z|[+-]\d\d(?::?\d\d)?/gi,lt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function pt(t,e,n){ht[t]=w(e)?e:function(t,i){return t&&n?n:e}}function dt(t,e){return r(ht,t)?ht[t](e._strict,e._locale):new RegExp(ft(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,i,r){return e||n||i||r}))))}function ft(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ht={},yt={};function mt(t,e){var n,i,r=e;for("string"==typeof t&&(t=[t]),s(e)&&(r=function(t,n){n[e]=K(t)}),i=t.length,n=0;n<i;n++)yt[t[n]]=r}function gt(t,e){mt(t,(function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)}))}var vt,Tt=0,Et=1,bt=2,St=3,_t=4,At=5,wt=6,It=7,Dt=8;function Rt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=(e%(n=12)+n)%n;return t+=(e-n)/12,1==n?H(t)?29:28:31-n%7%2}vt=Array.prototype.indexOf||function(t){for(var e=0;e<this.length;++e)if(this[e]===t)return e;return-1},L("M",["MM",2],"Mo",(function(){return this.month()+1})),L("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),L("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),F("month","M"),Y("month",8),pt("M",tt),pt("MM",tt,J),pt("MMM",(function(t,e){return e.monthsShortRegex(t)})),pt("MMMM",(function(t,e){return e.monthsRegex(t)})),mt(["M","MM"],(function(t,e){e[Et]=K(t)-1})),mt(["MMM","MMMM"],(function(t,e,n,i){null!=(i=n._locale.monthsParse(t,i,n._strict))?e[Et]=i:d(n).invalidMonth=t}));var Nt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ot="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ct=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Mt=lt,kt=lt;function Lt(t,e){var n;if(t.isValid()){if("string"==typeof e)if(/^\d+$/.test(e))e=K(e);else if(!s(e=t.localeData().monthsParse(e)))return;n=Math.min(t.date(),Rt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n)}}function Ut(t){return null!=t?(Lt(this,t),e.updateOffset(this,!0),this):q(this,"Month")}function Pt(){function t(t,e){return e.length-t.length}for(var e,n=[],i=[],r=[],a=0;a<12;a++)e=p([2e3,a]),n.push(this.monthsShort(e,"")),i.push(this.months(e,"")),r.push(this.months(e,"")),r.push(this.monthsShort(e,""));for(n.sort(t),i.sort(t),r.sort(t),a=0;a<12;a++)n[a]=ft(n[a]),i[a]=ft(i[a]);for(a=0;a<24;a++)r[a]=ft(r[a]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function xt(t){return H(t)?366:365}L("Y",0,0,(function(){var t=this.year();return t<=9999?N(t,4):"+"+t})),L(0,["YY",2],0,(function(){return this.year()%100})),L(0,["YYYY",4],0,"year"),L(0,["YYYYY",5],0,"year"),L(0,["YYYYYY",6,!0],0,"year"),F("year","y"),Y("year",1),pt("Y",st),pt("YY",tt,J),pt("YYYY",rt,$),pt("YYYYY",at,Z),pt("YYYYYY",at,Z),mt(["YYYYY","YYYYYY"],Tt),mt("YYYY",(function(t,n){n[Tt]=2===t.length?e.parseTwoDigitYear(t):K(t)})),mt("YY",(function(t,n){n[Tt]=e.parseTwoDigitYear(t)})),mt("Y",(function(t,e){e[Tt]=parseInt(t,10)})),e.parseTwoDigitYear=function(t){return K(t)+(68<K(t)?1900:2e3)};var Ft=G("FullYear",!0);function Wt(t,e,n,i,r,a,o){var s;return t<100&&0<=t?(s=new Date(t+400,e,n,i,r,a,o),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,i,r,a,o),s}function Vt(t){var e;return t<100&&0<=t?((e=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,e)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function jt(t,e,n){return(n=7+e-n)-(7+Vt(t,0,n).getUTCDay()-e)%7-1}function Yt(t,e,n,i,r){var a;return n=(e=1+7*(e-1)+(7+n-i)%7+jt(t,i,r))<=0?xt(a=t-1)+e:e>xt(t)?(a=t+1,e-xt(t)):(a=t,e),{year:a,dayOfYear:n}}function Ht(t,e,n){var i,r,a=jt(t.year(),e,n);return(a=Math.floor((t.dayOfYear()-a-1)/7)+1)<1?i=a+Bt(r=t.year()-1,e,n):a>Bt(t.year(),e,n)?(i=a-Bt(t.year(),e,n),r=t.year()+1):(r=t.year(),i=a),{week:i,year:r}}function Bt(t,e,n){var i=jt(t,e,n);return e=jt(t+1,e,n),(xt(t)-i+e)/7}function Kt(t,e){return t.slice(e,7).concat(t.slice(0,e))}L("w",["ww",2],"wo","week"),L("W",["WW",2],"Wo","isoWeek"),F("week","w"),F("isoWeek","W"),Y("week",5),Y("isoWeek",5),pt("w",tt),pt("ww",tt,J),pt("W",tt),pt("WW",tt,J),gt(["w","ww","W","WW"],(function(t,e,n,i){e[i.substr(0,1)]=K(t)})),L("d",0,"do","day"),L("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),L("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),L("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),L("e",0,0,"weekday"),L("E",0,0,"isoWeekday"),F("day","d"),F("weekday","e"),F("isoWeekday","E"),Y("day",11),Y("weekday",11),Y("isoWeekday",11),pt("d",tt),pt("e",tt),pt("E",tt),pt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),pt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),pt("dddd",(function(t,e){return e.weekdaysRegex(t)})),gt(["dd","ddd","dddd"],(function(t,e,n,i){null!=(i=n._locale.weekdaysParse(t,i,n._strict))?e.d=i:d(n).invalidWeekday=t})),gt(["d","e","E"],(function(t,e,n,i){e[i]=K(t)}));var Gt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),qt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),zt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Qt=lt,Jt=lt,Xt=lt;function $t(){function t(t,e){return e.length-t.length}for(var e,n,i,r=[],a=[],o=[],s=[],u=0;u<7;u++)i=p([2e3,1]).day(u),e=ft(this.weekdaysMin(i,"")),n=ft(this.weekdaysShort(i,"")),i=ft(this.weekdays(i,"")),r.push(e),a.push(n),o.push(i),s.push(e),s.push(n),s.push(i);r.sort(t),a.sort(t),o.sort(t),s.sort(t),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Zt(){return this.hours()%12||12}function te(t,e){L(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function ee(t,e){return e._meridiemParse}L("H",["HH",2],0,"hour"),L("h",["hh",2],0,Zt),L("k",["kk",2],0,(function(){return this.hours()||24})),L("hmm",0,0,(function(){return""+Zt.apply(this)+N(this.minutes(),2)})),L("hmmss",0,0,(function(){return""+Zt.apply(this)+N(this.minutes(),2)+N(this.seconds(),2)})),L("Hmm",0,0,(function(){return""+this.hours()+N(this.minutes(),2)})),L("Hmmss",0,0,(function(){return""+this.hours()+N(this.minutes(),2)+N(this.seconds(),2)})),te("a",!0),te("A",!1),F("hour","h"),Y("hour",13),pt("a",ee),pt("A",ee),pt("H",tt),pt("h",tt),pt("k",tt),pt("HH",tt,J),pt("hh",tt,J),pt("kk",tt,J),pt("hmm",et),pt("hmmss",nt),pt("Hmm",et),pt("Hmmss",nt),mt(["H","HH"],St),mt(["k","kk"],(function(t,e,n){t=K(t),e[St]=24===t?0:t})),mt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),mt(["h","hh"],(function(t,e,n){e[St]=K(t),d(n).bigHour=!0})),mt("hmm",(function(t,e,n){var i=t.length-2;e[St]=K(t.substr(0,i)),e[_t]=K(t.substr(i)),d(n).bigHour=!0})),mt("hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[St]=K(t.substr(0,i)),e[_t]=K(t.substr(i,2)),e[At]=K(t.substr(r)),d(n).bigHour=!0})),mt("Hmm",(function(t,e,n){var i=t.length-2;e[St]=K(t.substr(0,i)),e[_t]=K(t.substr(i))})),mt("Hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[St]=K(t.substr(0,i)),e[_t]=K(t.substr(i,2)),e[At]=K(t.substr(r))})),lt=G("Hours",!0);var ne,ie={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Nt,monthsShort:Ot,week:{dow:0,doy:6},weekdays:Gt,weekdaysMin:zt,weekdaysShort:qt,meridiemParse:/[ap]\.?m?\.?/i},re={},ae={};function oe(t){return t&&t.toLowerCase().replace("_","-")}function se(t){for(var e,n,i,r,a=0;a<t.length;){for(e=(r=oe(t[a]).split("-")).length,n=(n=oe(t[a+1]))?n.split("-"):null;0<e;){if(i=ue(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i+=1)if(t[i]!==e[i])return i;return n}(r,n)>=e-1)break;e--}a++}return ne}function ue(t){var e;if(void 0===re[t]&&va&&va.exports&&null!=t.match("^[^/\\\\]*$"))try{e=ne._abbr,function(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */("./locale/"+t),ce(e)}catch(e){re[t]=null}return re[t]}function ce(t,e){return t&&((e=o(e)?pe(t):le(t,e))?ne=e:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ne._abbr}function le(t,e){if(null===e)return delete re[t],null;var n,i=ie;if(e.abbr=t,null!=re[t])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=re[t]._config;else if(null!=e.parentLocale)if(null!=re[e.parentLocale])i=re[e.parentLocale]._config;else{if(null==(n=ue(e.parentLocale)))return ae[e.parentLocale]||(ae[e.parentLocale]=[]),ae[e.parentLocale].push({name:t,config:e}),null;i=n._config}return re[t]=new D(I(i,e)),ae[t]&&ae[t].forEach((function(t){le(t.name,t.config)})),ce(t),re[t]}function pe(t){var e;if(!(t=t&&t._locale&&t._locale._abbr?t._locale._abbr:t))return ne;if(!n(t)){if(e=ue(t))return e;t=[t]}return se(t)}function de(t){var e=t._a;return e&&-2===d(t).overflow&&(e=e[Et]<0||11<e[Et]?Et:e[bt]<1||e[bt]>Rt(e[Tt],e[Et])?bt:e[St]<0||24<e[St]||24===e[St]&&(0!==e[_t]||0!==e[At]||0!==e[wt])?St:e[_t]<0||59<e[_t]?_t:e[At]<0||59<e[At]?At:e[wt]<0||999<e[wt]?wt:-1,d(t)._overflowDayOfYear&&(e<Tt||bt<e)&&(e=bt),d(t)._overflowWeeks&&-1===e&&(e=It),d(t)._overflowWeekday&&-1===e&&(e=Dt),d(t).overflow=e),t}var fe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,he=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ye=/Z|[+-]\d\d(?::?\d\d)?/,me=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ge=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ve=/^\/?Date\((-?\d+)/i,Te=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ee={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function be(t){var e,n,i,r,a,o,s=t._i,u=fe.exec(s)||he.exec(s),c=(s=me.length,ge.length);if(u){for(d(t).iso=!0,e=0,n=s;e<n;e++)if(me[e][1].exec(u[1])){r=me[e][0],i=!1!==me[e][2];break}if(null==r)t._isValid=!1;else{if(u[3]){for(e=0,n=c;e<n;e++)if(ge[e][1].exec(u[3])){a=(u[2]||" ")+ge[e][0];break}if(null==a)return void(t._isValid=!1)}if(i||null==a){if(u[4]){if(!ye.exec(u[4]))return void(t._isValid=!1);o="Z"}t._f=r+(a||"")+(o||""),Ie(t)}else t._isValid=!1}}else t._isValid=!1}function Se(t,e,n,i,r,a){return t=[function(t){return(t=parseInt(t,10))<=49?2e3+t:t<=999?1900+t:t}(t),Ot.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(r,10)],a&&t.push(parseInt(a,10)),t}function _e(t){var e,n,i,r,a=Te.exec(t._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));a?(i=e=Se(a[4],a[3],a[2],a[5],a[6],a[7]),r=t,(n=a[1])&&qt.indexOf(n)!==new Date(i[0],i[1],i[2]).getDay()?(d(r).weekdayMismatch=!0,r._isValid=!1):(t._a=e,t._tzm=(n=a[8],i=a[9],r=a[10],n?Ee[n]:i?0:((n=parseInt(r,10))-(i=n%100))/100*60+i),t._d=Vt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),d(t).rfc2822=!0)):t._isValid=!1}function Ae(t,e,n){return null!=t?t:null!=e?e:n}function we(t){var n,i,r,a,o,s,u,c,l,p,f,h=[];if(!t._d){for(r=t,a=new Date(e.now()),i=r._useUTC?[a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()]:[a.getFullYear(),a.getMonth(),a.getDate()],t._w&&null==t._a[bt]&&null==t._a[Et]&&(null!=(a=(r=t)._w).GG||null!=a.W||null!=a.E?(c=1,l=4,o=Ae(a.GG,r._a[Tt],Ht(Ne(),1,4).year),s=Ae(a.W,1),((u=Ae(a.E,1))<1||7<u)&&(p=!0)):(c=r._locale._week.dow,l=r._locale._week.doy,f=Ht(Ne(),c,l),o=Ae(a.gg,r._a[Tt],f.year),s=Ae(a.w,f.week),null!=a.d?((u=a.d)<0||6<u)&&(p=!0):null!=a.e?(u=a.e+c,(a.e<0||6<a.e)&&(p=!0)):u=c),s<1||s>Bt(o,c,l)?d(r)._overflowWeeks=!0:null!=p?d(r)._overflowWeekday=!0:(f=Yt(o,s,u,c,l),r._a[Tt]=f.year,r._dayOfYear=f.dayOfYear)),null!=t._dayOfYear&&(a=Ae(t._a[Tt],i[Tt]),(t._dayOfYear>xt(a)||0===t._dayOfYear)&&(d(t)._overflowDayOfYear=!0),p=Vt(a,0,t._dayOfYear),t._a[Et]=p.getUTCMonth(),t._a[bt]=p.getUTCDate()),n=0;n<3&&null==t._a[n];++n)t._a[n]=h[n]=i[n];for(;n<7;n++)t._a[n]=h[n]=null==t._a[n]?2===n?1:0:t._a[n];24===t._a[St]&&0===t._a[_t]&&0===t._a[At]&&0===t._a[wt]&&(t._nextDay=!0,t._a[St]=0),t._d=(t._useUTC?Vt:Wt).apply(null,h),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[St]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(d(t).weekdayMismatch=!0)}}function Ie(t){if(t._f===e.ISO_8601)be(t);else if(t._f===e.RFC_2822)_e(t);else{t._a=[],d(t).empty=!0;for(var n,i,a,o,s,u=""+t._i,c=u.length,l=0,p=P(t._f,t._locale).match(O)||[],f=p.length,h=0;h<f;h++)i=p[h],(n=(u.match(dt(i,t))||[])[0])&&(0<(a=u.substr(0,u.indexOf(n))).length&&d(t).unusedInput.push(a),u=u.slice(u.indexOf(n)+n.length),l+=n.length),k[i]?(n?d(t).empty=!1:d(t).unusedTokens.push(i),a=i,s=t,null!=(o=n)&&r(yt,a)&&yt[a](o,s._a,s,a)):t._strict&&!n&&d(t).unusedTokens.push(i);d(t).charsLeftOver=c-l,0<u.length&&d(t).unusedInput.push(u),t._a[St]<=12&&!0===d(t).bigHour&&0<t._a[St]&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[St]=function(t,e,n){return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((t=t.isPM(n))&&e<12&&(e+=12),e=t||12!==e?e:0):e}(t._locale,t._a[St],t._meridiem),null!==(c=d(t).era)&&(t._a[Tt]=t._locale.erasConvertYear(c,t._a[Tt])),we(t),de(t)}}function De(t){var r,a,p,y=t._i,m=t._f;return t._locale=t._locale||pe(t._l),null===y||void 0===m&&""===y?h({nullInput:!0}):("string"==typeof y&&(t._i=y=t._locale.preparse(y)),E(y)?new T(de(y)):(u(y)?t._d=y:n(m)?function(t){var e,n,i,r,a,o,s=!1,u=t._f.length;if(0===u)return d(t).invalidFormat=!0,t._d=new Date(NaN);for(r=0;r<u;r++)a=0,o=!1,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Ie(e),f(e)&&(o=!0),a=(a+=d(e).charsLeftOver)+10*d(e).unusedTokens.length,d(e).score=a,s?a<i&&(i=a,n=e):(null==i||a<i||o)&&(i=a,n=e,o&&(s=!0));l(t,n||e)}(t):m?Ie(t):o(m=(y=t)._i)?y._d=new Date(e.now()):u(m)?y._d=new Date(m.valueOf()):"string"==typeof m?(a=y,null!==(r=ve.exec(a._i))?a._d=new Date(+r[1]):(be(a),!1===a._isValid&&(delete a._isValid,_e(a),!1===a._isValid&&(delete a._isValid,a._strict?a._isValid=!1:e.createFromInputFallback(a))))):n(m)?(y._a=c(m.slice(0),(function(t){return parseInt(t,10)})),we(y)):i(m)?(r=y)._d||(p=void 0===(a=V(r._i)).day?a.date:a.day,r._a=c([a.year,a.month,p,a.hour,a.minute,a.second,a.millisecond],(function(t){return t&&parseInt(t,10)})),we(r)):s(m)?y._d=new Date(m):e.createFromInputFallback(y),f(t)||(t._d=null),t))}function Re(t,e,r,o,s){var u={};return!0!==e&&!1!==e||(o=e,e=void 0),!0!==r&&!1!==r||(o=r,r=void 0),(i(t)&&a(t)||n(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=r,u._i=t,u._f=e,u._strict=o,(s=new T(de(De(s=u))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Ne(t,e,n,i){return Re(t,e,n,i,!1)}function Oe(t,e){var i,r;if(!(e=1===e.length&&n(e[0])?e[0]:e).length)return Ne();for(i=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](i)||(i=e[r]);return i}e.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),e.ISO_8601=function(){},e.RFC_2822=function(){},et=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Ne.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:h()})),nt=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Ne.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:h()}));var Ce=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Me(t){var e=(t=V(t)).year||0,n=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,o=t.day||0,s=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=function(t){var e,n,i=!1,a=Ce.length;for(e in t)if(r(t,e)&&(-1===vt.call(Ce,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<a;++n)if(t[Ce[n]]){if(i)return!1;parseFloat(t[Ce[n]])!==K(t[Ce[n]])&&(i=!0)}return!0}(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*s*60*60,this._days=+o+7*a,this._months=+i+3*n+12*e,this._data={},this._locale=pe(),this._bubble()}function ke(t){return t instanceof Me}function Le(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ue(t,e){L(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+N(~~(t/60),2)+e+N(~~t%60,2)}))}Ue("Z",":"),Ue("ZZ",""),pt("Z",ct),pt("ZZ",ct),mt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=xe(ct,t)}));var Pe=/([\+\-]|\d\d)/gi;function xe(t,e){return null===(e=(e||"").match(t))?null:0===(e=60*(t=((e[e.length-1]||[])+"").match(Pe)||["-",0,0])[1]+K(t[2]))?0:"+"===t[0]?e:-e}function Fe(t,n){var i;return n._isUTC?(n=n.clone(),i=(E(t)||u(t)?t:Ne(t)).valueOf()-n.valueOf(),n._d.setTime(n._d.valueOf()+i),e.updateOffset(n,!1),n):Ne(t).local()}function We(t){return-Math.round(t._d.getTimezoneOffset())}function Ve(){return!!this.isValid()&&this._isUTC&&0===this._offset}e.updateOffset=function(){};var je=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ye=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function He(t,e){var n,i=t,a=null;return ke(t)?i={ms:t._milliseconds,d:t._days,M:t._months}:s(t)||!isNaN(+t)?(i={},e?i[e]=+t:i.milliseconds=+t):(a=je.exec(t))?(n="-"===a[1]?-1:1,i={y:0,d:K(a[bt])*n,h:K(a[St])*n,m:K(a[_t])*n,s:K(a[At])*n,ms:K(Le(1e3*a[wt]))*n}):(a=Ye.exec(t))?(n="-"===a[1]?-1:1,i={y:Be(a[2],n),M:Be(a[3],n),w:Be(a[4],n),d:Be(a[5],n),h:Be(a[6],n),m:Be(a[7],n),s:Be(a[8],n)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(e=function(t,e){var n;return t.isValid()&&e.isValid()?(e=Fe(e,t),t.isBefore(e)?n=Ke(t,e):((n=Ke(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(Ne(i.from),Ne(i.to)),(i={}).ms=e.milliseconds,i.M=e.months),a=new Me(i),ke(t)&&r(t,"_locale")&&(a._locale=t._locale),ke(t)&&r(t,"_isValid")&&(a._isValid=t._isValid),a}function Be(t,e){return t=t&&parseFloat(t.replace(",",".")),(isNaN(t)?0:t)*e}function Ke(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ge(t,e){return function(n,i){var r;return null===i||isNaN(+i)||(A(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),qe(this,He(n,i),t),this}}function qe(t,n,i,r){var a=n._milliseconds,o=Le(n._days);n=Le(n._months),t.isValid()&&(r=null==r||r,n&&Lt(t,q(t,"Month")+n*i),o&&z(t,"Date",q(t,"Date")+o*i),a&&t._d.setTime(t._d.valueOf()+a*i),r&&e.updateOffset(t,o||n))}function ze(t){return"string"==typeof t||t instanceof String}function Qe(t){return E(t)||u(t)||ze(t)||s(t)||function(t){var e=n(t),i=!1;return e&&(i=0===t.filter((function(e){return!s(e)&&ze(t)})).length),e&&i}(t)||function(t){var e,n,o=i(t)&&!a(t),s=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=u.length;for(e=0;e<c;e+=1)n=u[e],s=s||r(t,n);return o&&s}(t)||null==t}function Je(t,e){if(t.date()<e.date())return-Je(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,"months");return-(n+(e=e-i<0?(e-i)/(i-t.clone().add(n-1,"months")):(e-i)/(t.clone().add(1+n,"months")-i)))||0}function Xe(t){return void 0===t?this._locale._abbr:(null!=(t=pe(t))&&(this._locale=t),this)}function $e(){return this._locale}He.fn=Me.prototype,He.invalid=function(){return He(NaN)},Nt=Ge(1,"add"),Gt=Ge(-1,"subtract"),e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",zt=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));var Ze,tn=126227808e5;function en(t,e){return(t%e+e)%e}function nn(t,e,n){return t<100&&0<=t?new Date(t+400,e,n)-tn:new Date(t,e,n).valueOf()}function rn(t,e,n){return t<100&&0<=t?Date.UTC(t+400,e,n)-tn:Date.UTC(t,e,n)}function an(t,e){return e.erasAbbrRegex(t)}function on(){for(var t=[],e=[],n=[],i=[],r=this.eras(),a=0,o=r.length;a<o;++a)e.push(ft(r[a].name)),t.push(ft(r[a].abbr)),n.push(ft(r[a].narrow)),i.push(ft(r[a].name)),i.push(ft(r[a].abbr)),i.push(ft(r[a].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function sn(t,e){L(0,[t,t.length],0,e)}function un(t,e,n,i,r){var a;return null==t?Ht(this,i,r).year:(a=Bt(t,i,r),function(t,e,n,i,r){return e=Vt((t=Yt(t,e,n,i,r)).year,0,t.dayOfYear),this.year(e.getUTCFullYear()),this.month(e.getUTCMonth()),this.date(e.getUTCDate()),this}.call(this,t,e=a<e?a:e,n,i,r))}for(L("N",0,0,"eraAbbr"),L("NN",0,0,"eraAbbr"),L("NNN",0,0,"eraAbbr"),L("NNNN",0,0,"eraName"),L("NNNNN",0,0,"eraNarrow"),L("y",["y",1],"yo","eraYear"),L("y",["yy",2],0,"eraYear"),L("y",["yyy",3],0,"eraYear"),L("y",["yyyy",4],0,"eraYear"),pt("N",an),pt("NN",an),pt("NNN",an),pt("NNNN",(function(t,e){return e.erasNameRegex(t)})),pt("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),mt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,i){(i=n._locale.erasParse(t,i,n._strict))?d(n).era=i:d(n).invalidEra=t})),pt("y",ot),pt("yy",ot),pt("yyy",ot),pt("yyyy",ot),pt("yo",(function(t,e){return e._eraYearOrdinalRegex||ot})),mt(["y","yy","yyy","yyyy"],Tt),mt(["yo"],(function(t,e,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Tt]=n._locale.eraYearOrdinalParse(t,r):e[Tt]=parseInt(t,10)})),L(0,["gg",2],0,(function(){return this.weekYear()%100})),L(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),sn("gggg","weekYear"),sn("ggggg","weekYear"),sn("GGGG","isoWeekYear"),sn("GGGGG","isoWeekYear"),F("weekYear","gg"),F("isoWeekYear","GG"),Y("weekYear",1),Y("isoWeekYear",1),pt("G",st),pt("g",st),pt("GG",tt,J),pt("gg",tt,J),pt("GGGG",rt,$),pt("gggg",rt,$),pt("GGGGG",at,Z),pt("ggggg",at,Z),gt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,i){e[i.substr(0,2)]=K(t)})),gt(["gg","GG"],(function(t,n,i,r){n[r]=e.parseTwoDigitYear(t)})),L("Q",0,"Qo","quarter"),F("quarter","Q"),Y("quarter",7),pt("Q",Q),mt("Q",(function(t,e){e[Et]=3*(K(t)-1)})),L("D",["DD",2],"Do","date"),F("date","D"),Y("date",9),pt("D",tt),pt("DD",tt,J),pt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),mt(["D","DD"],bt),mt("Do",(function(t,e){e[bt]=K(t.match(tt)[0])})),rt=G("Date",!0),L("DDD",["DDDD",3],"DDDo","dayOfYear"),F("dayOfYear","DDD"),Y("dayOfYear",4),pt("DDD",it),pt("DDDD",X),mt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=K(t)})),L("m",["mm",2],0,"minute"),F("minute","m"),Y("minute",14),pt("m",tt),pt("mm",tt,J),mt(["m","mm"],_t),$=G("Minutes",!1),L("s",["ss",2],0,"second"),F("second","s"),Y("second",15),pt("s",tt),pt("ss",tt,J),mt(["s","ss"],At),at=G("Seconds",!1),L("S",0,0,(function(){return~~(this.millisecond()/100)})),L(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),L(0,["SSS",3],0,"millisecond"),L(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),L(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),L(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),L(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),L(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),L(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),F("millisecond","ms"),Y("millisecond",16),pt("S",it,Q),pt("SS",it,J),pt("SSS",it,X),Ze="SSSS";Ze.length<=9;Ze+="S")pt(Ze,ot);function cn(t,e){e[wt]=K(1e3*("0."+t))}for(Ze="S";Ze.length<=9;Ze+="S")mt(Ze,cn);function ln(t){return t}function pn(t,e,n,i){var r=pe();return i=p().set(i,e),r[n](i,t)}function dn(t,e,n){if(s(t)&&(e=t,t=void 0),t=t||"",null!=e)return pn(t,e,n,"month");for(var i=[],r=0;r<12;r++)i[r]=pn(t,r,n,"month");return i}function fn(t,e,n,i){"boolean"==typeof t?s(e)&&(n=e,e=void 0):(e=t,t=!1,s(n=e)&&(n=e,e=void 0)),e=e||"";var r,a=pe(),o=t?a._week.dow:0,u=[];if(null!=n)return pn(e,(n+o)%7,i,"day");for(r=0;r<7;r++)u[r]=pn(e,(r+o)%7,i,"day");return u}Z=G("Milliseconds",!1),L("z",0,0,"zoneAbbr"),L("zz",0,0,"zoneName"),(Q=T.prototype).add=Nt,Q.calendar=function(t,n){1===arguments.length&&(arguments[0]?Qe(arguments[0])?(t=arguments[0],n=void 0):function(t){for(var e=i(t)&&!a(t),n=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s=0;s<o.length;s+=1)n=n||r(t,o[s]);return e&&n}(arguments[0])&&(n=arguments[0],t=void 0):n=t=void 0);var o=Fe(t=t||Ne(),this).startOf("day");return o=e.calendarFormat(this,o)||"sameElse",n=n&&(w(n[o])?n[o].call(this,t):n[o]),this.format(n||this.localeData().calendar(o,this,Ne(t)))},Q.clone=function(){return new T(this)},Q.diff=function(t,e,n){var i,r,a;if(!this.isValid())return NaN;if(!(i=Fe(t,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),e=W(e)){case"year":a=Je(this,i)/12;break;case"month":a=Je(this,i);break;case"quarter":a=Je(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-r)/864e5;break;case"week":a=(this-i-r)/6048e5;break;default:a=this-i}return n?a:B(a)},Q.endOf=function(t){var n,i;if(void 0===(t=W(t))||"millisecond"===t||!this.isValid())return this;switch(i=this._isUTC?rn:nn,t){case"year":n=i(this.year()+1,0,1)-1;break;case"quarter":n=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":n=i(this.year(),this.month()+1,1)-1;break;case"week":n=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":n=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":n=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":n=this._d.valueOf(),n+=36e5-en(n+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":n=this._d.valueOf(),n+=6e4-en(n,6e4)-1;break;case"second":n=this._d.valueOf(),n+=1e3-en(n,1e3)-1}return this._d.setTime(n),e.updateOffset(this,!0),this},Q.format=function(t){return t=U(this,t=t||(this.isUtc()?e.defaultFormatUtc:e.defaultFormat)),this.localeData().postformat(t)},Q.from=function(t,e){return this.isValid()&&(E(t)&&t.isValid()||Ne(t).isValid())?He({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Q.fromNow=function(t){return this.from(Ne(),t)},Q.to=function(t,e){return this.isValid()&&(E(t)&&t.isValid()||Ne(t).isValid())?He({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Q.toNow=function(t){return this.to(Ne(),t)},Q.get=function(t){return w(this[t=W(t)])?this[t]():this},Q.invalidAt=function(){return d(this).overflow},Q.isAfter=function(t,e){return t=E(t)?t:Ne(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=W(e)||"millisecond")?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf())},Q.isBefore=function(t,e){return t=E(t)?t:Ne(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=W(e)||"millisecond")?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf())},Q.isBetween=function(t,e,n,i){return t=E(t)?t:Ne(t),e=E(e)?e:Ne(e),!!(this.isValid()&&t.isValid()&&e.isValid())&&("("===(i=i||"()")[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===i[1]?this.isBefore(e,n):!this.isAfter(e,n))},Q.isSame=function(t,e){return t=E(t)?t:Ne(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=W(e)||"millisecond")?this.valueOf()===t.valueOf():(t=t.valueOf(),this.clone().startOf(e).valueOf()<=t&&t<=this.clone().endOf(e).valueOf()))},Q.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},Q.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},Q.isValid=function(){return f(this)},Q.lang=zt,Q.locale=Xe,Q.localeData=$e,Q.max=nt,Q.min=et,Q.parsingFlags=function(){return l({},d(this))},Q.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e,n=[];for(e in t)r(t,e)&&n.push({unit:e,priority:j[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=V(t)),i=n.length,a=0;a<i;a++)this[n[a].unit](t[n[a].unit]);else if(w(this[t=W(t)]))return this[t](e);return this},Q.startOf=function(t){var n,i;if(void 0===(t=W(t))||"millisecond"===t||!this.isValid())return this;switch(i=this._isUTC?rn:nn,t){case"year":n=i(this.year(),0,1);break;case"quarter":n=i(this.year(),this.month()-this.month()%3,1);break;case"month":n=i(this.year(),this.month(),1);break;case"week":n=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":n=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":n=i(this.year(),this.month(),this.date());break;case"hour":n=this._d.valueOf(),n-=en(n+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":n=this._d.valueOf(),n-=en(n,6e4);break;case"second":n=this._d.valueOf(),n-=en(n,1e3)}return this._d.setTime(n),e.updateOffset(this,!0),this},Q.subtract=Gt,Q.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},Q.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},Q.toDate=function(){return new Date(this.valueOf())},Q.toISOString=function(t){if(!this.isValid())return null;var e=(t=!0!==t)?this.clone().utc():this;return e.year()<0||9999<e.year()?U(e,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):w(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(e,"Z")):U(e,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Q.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e="moment",n="";return this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),e="["+e+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n+'[")]')},"undefined"!=typeof Symbol&&null!=Symbol.for&&(Q[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Q.toJSON=function(){return this.isValid()?this.toISOString():null},Q.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Q.unix=function(){return Math.floor(this.valueOf()/1e3)},Q.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Q.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Q.eraName=function(){for(var t,e=this.localeData().eras(),n=0,i=e.length;n<i;++n){if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until)return e[n].name;if(e[n].until<=t&&t<=e[n].since)return e[n].name}return""},Q.eraNarrow=function(){for(var t,e=this.localeData().eras(),n=0,i=e.length;n<i;++n){if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until)return e[n].narrow;if(e[n].until<=t&&t<=e[n].since)return e[n].narrow}return""},Q.eraAbbr=function(){for(var t,e=this.localeData().eras(),n=0,i=e.length;n<i;++n){if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until)return e[n].abbr;if(e[n].until<=t&&t<=e[n].since)return e[n].abbr}return""},Q.eraYear=function(){for(var t,n,i=this.localeData().eras(),r=0,a=i.length;r<a;++r)if(t=i[r].since<=i[r].until?1:-1,n=this.clone().startOf("day").valueOf(),i[r].since<=n&&n<=i[r].until||i[r].until<=n&&n<=i[r].since)return(this.year()-e(i[r].since).year())*t+i[r].offset;return this.year()},Q.year=Ft,Q.isLeapYear=function(){return H(this.year())},Q.weekYear=function(t){return un.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Q.isoWeekYear=function(t){return un.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},Q.quarter=Q.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},Q.month=Ut,Q.daysInMonth=function(){return Rt(this.year(),this.month())},Q.week=Q.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},Q.isoWeek=Q.isoWeeks=function(t){var e=Ht(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},Q.weeksInYear=function(){var t=this.localeData()._week;return Bt(this.year(),t.dow,t.doy)},Q.weeksInWeekYear=function(){var t=this.localeData()._week;return Bt(this.weekYear(),t.dow,t.doy)},Q.isoWeeksInYear=function(){return Bt(this.year(),1,4)},Q.isoWeeksInISOWeekYear=function(){return Bt(this.isoWeekYear(),1,4)},Q.date=rt,Q.day=Q.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,n,i=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,n=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=n.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-i,"d")):i},Q.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},Q.isoWeekday=function(t){return this.isValid()?null!=t?(e=t,n=this.localeData(),n="string"==typeof e?n.weekdaysParse(e)%7||7:isNaN(e)?null:e,this.day(this.day()%7?n:n-7)):this.day()||7:null!=t?this:NaN;var e,n},Q.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},Q.hour=Q.hours=lt,Q.minute=Q.minutes=$,Q.second=Q.seconds=at,Q.millisecond=Q.milliseconds=Z,Q.utcOffset=function(t,n,i){var r,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?a:We(this);if("string"==typeof t){if(null===(t=xe(ct,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&n&&(r=We(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),a!==t&&(!n||this._changeInProgress?qe(this,He(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this},Q.utc=function(t){return this.utcOffset(0,t)},Q.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(We(this),"m")),this},Q.parseZone=function(){var t;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(t=xe(ut,this._i))?this.utcOffset(t):this.utcOffset(0,!0)),this},Q.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Ne(t).utcOffset():0,(this.utcOffset()-t)%60==0)},Q.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Q.isLocal=function(){return!!this.isValid()&&!this._isUTC},Q.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Q.isUtc=Ve,Q.isUTC=Ve,Q.zoneAbbr=function(){return this._isUTC?"UTC":""},Q.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Q.dates=S("dates accessor is deprecated. Use date instead.",rt),Q.months=S("months accessor is deprecated. Use month instead",Ut),Q.years=S("years accessor is deprecated. Use year instead",Ft),Q.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?(this.utcOffset(t="string"!=typeof t?-t:t,e),this):-this.utcOffset()})),Q.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var t,e={};return v(e,this),(e=De(e))._a?(t=(e._isUTC?p:Ne)(e._a),this._isDSTShifted=this.isValid()&&0<function(t,e,n){for(var i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),a=0,o=0;o<i;o++)(n&&t[o]!==e[o]||!n&&K(t[o])!==K(e[o]))&&a++;return a+r}(e._a,t.toArray())):this._isDSTShifted=!1,this._isDSTShifted})),(J=D.prototype).calendar=function(t,e,n){return w(t=this._calendar[t]||this._calendar.sameElse)?t.call(e,n):t},J.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(O).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},J.invalidDate=function(){return this._invalidDate},J.ordinal=function(t){return this._ordinal.replace("%d",t)},J.preparse=ln,J.postformat=ln,J.relativeTime=function(t,e,n,i){var r=this._relativeTime[n];return w(r)?r(t,e,n,i):r.replace(/%d/i,t)},J.pastFuture=function(t,e){return w(t=this._relativeTime[0<t?"future":"past"])?t(e):t.replace(/%s/i,e)},J.set=function(t){var e,n;for(n in t)r(t,n)&&(w(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},J.eras=function(t,n){for(var i,r=this._eras||pe("en")._eras,a=0,o=r.length;a<o;++a)switch("string"==typeof r[a].since&&(i=e(r[a].since).startOf("day"),r[a].since=i.valueOf()),typeof r[a].until){case"undefined":r[a].until=1/0;break;case"string":i=e(r[a].until).startOf("day").valueOf(),r[a].until=i.valueOf()}return r},J.erasParse=function(t,e,n){var i,r,a,o,s,u=this.eras();for(t=t.toUpperCase(),i=0,r=u.length;i<r;++i)if(a=u[i].name.toUpperCase(),o=u[i].abbr.toUpperCase(),s=u[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(o===t)return u[i];break;case"NNNN":if(a===t)return u[i];break;case"NNNNN":if(s===t)return u[i]}else if(0<=[a,o,s].indexOf(t))return u[i]},J.erasConvertYear=function(t,n){var i=t.since<=t.until?1:-1;return void 0===n?e(t.since).year():e(t.since).year()+(n-t.offset)*i},J.erasAbbrRegex=function(t){return r(this,"_erasAbbrRegex")||on.call(this),t?this._erasAbbrRegex:this._erasRegex},J.erasNameRegex=function(t){return r(this,"_erasNameRegex")||on.call(this),t?this._erasNameRegex:this._erasRegex},J.erasNarrowRegex=function(t){return r(this,"_erasNarrowRegex")||on.call(this),t?this._erasNarrowRegex:this._erasRegex},J.months=function(t,e){return t?(n(this._months)?this._months:this._months[(this._months.isFormat||Ct).test(e)?"format":"standalone"])[t.month()]:n(this._months)?this._months:this._months.standalone},J.monthsShort=function(t,e){return t?(n(this._monthsShort)?this._monthsShort:this._monthsShort[Ct.test(e)?"format":"standalone"])[t.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},J.monthsParse=function(t,e,n){var i,r;if(this._monthsParseExact)return function(t,e,n){var i,r,a;if(t=t.toLocaleLowerCase(),!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=p([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(r=vt.call(this._shortMonthsParse,t))?r:null:-1!==(r=vt.call(this._longMonthsParse,t))?r:null:"MMM"===e?-1!==(r=vt.call(this._shortMonthsParse,t))||-1!==(r=vt.call(this._longMonthsParse,t))?r:null:-1!==(r=vt.call(this._longMonthsParse,t))||-1!==(r=vt.call(this._shortMonthsParse,t))?r:null}.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=p([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},J.monthsRegex=function(t){return this._monthsParseExact?(r(this,"_monthsRegex")||Pt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(r(this,"_monthsRegex")||(this._monthsRegex=kt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},J.monthsShortRegex=function(t){return this._monthsParseExact?(r(this,"_monthsRegex")||Pt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(r(this,"_monthsShortRegex")||(this._monthsShortRegex=Mt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},J.week=function(t){return Ht(t,this._week.dow,this._week.doy).week},J.firstDayOfYear=function(){return this._week.doy},J.firstDayOfWeek=function(){return this._week.dow},J.weekdays=function(t,e){return e=n(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"],!0===t?Kt(e,this._week.dow):t?e[t.day()]:e},J.weekdaysMin=function(t){return!0===t?Kt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},J.weekdaysShort=function(t){return!0===t?Kt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},J.weekdaysParse=function(t,e,n){var i,r;if(this._weekdaysParseExact)return function(t,e,n){var i,r,a;if(t=t.toLocaleLowerCase(),!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=p([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(r=vt.call(this._weekdaysParse,t))?r:null:"ddd"===e?-1!==(r=vt.call(this._shortWeekdaysParse,t))?r:null:-1!==(r=vt.call(this._minWeekdaysParse,t))?r:null:"dddd"===e?-1!==(r=vt.call(this._weekdaysParse,t))||-1!==(r=vt.call(this._shortWeekdaysParse,t))||-1!==(r=vt.call(this._minWeekdaysParse,t))?r:null:"ddd"===e?-1!==(r=vt.call(this._shortWeekdaysParse,t))||-1!==(r=vt.call(this._weekdaysParse,t))||-1!==(r=vt.call(this._minWeekdaysParse,t))?r:null:-1!==(r=vt.call(this._minWeekdaysParse,t))||-1!==(r=vt.call(this._weekdaysParse,t))||-1!==(r=vt.call(this._shortWeekdaysParse,t))?r:null}.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=p([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},J.weekdaysRegex=function(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||$t.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(r(this,"_weekdaysRegex")||(this._weekdaysRegex=Qt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},J.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||$t.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(r(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Jt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},J.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||$t.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(r(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Xt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},J.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},J.meridiem=function(t,e,n){return 11<t?n?"pm":"PM":n?"am":"AM"},ce("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===K(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),e.lang=S("moment.lang is deprecated. Use moment.locale instead.",ce),e.langData=S("moment.langData is deprecated. Use moment.localeData instead.",pe);var hn=Math.abs;function yn(t,e,n,i){return e=He(e,n),t._milliseconds+=i*e._milliseconds,t._days+=i*e._days,t._months+=i*e._months,t._bubble()}function mn(t){return t<0?Math.floor(t):Math.ceil(t)}function gn(t){return 4800*t/146097}function vn(t){return 146097*t/4800}function Tn(t){return function(){return this.as(t)}}function En(t){return function(){return this.isValid()?this._data[t]:NaN}}it=Tn("ms"),X=Tn("s"),Nt=Tn("m"),nt=Tn("h"),et=Tn("d"),Gt=Tn("w"),lt=Tn("M"),$=Tn("Q"),at=Tn("y"),Z=En("milliseconds"),rt=En("seconds"),Ft=En("minutes"),J=En("hours");var bn=En("days"),Sn=En("months"),_n=En("years"),An=Math.round,wn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function In(t,e,n,i){var r=He(t).abs(),a=An(r.as("s")),o=An(r.as("m")),s=An(r.as("h")),u=An(r.as("d")),c=An(r.as("M")),l=An(r.as("w"));return r=An(r.as("y")),a=(a<=n.ss?["s",a]:a<n.s&&["ss",a])||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u],(a=(a=null!=n.w?a||l<=1&&["w"]||l<n.w&&["ww",l]:a)||c<=1&&["M"]||c<n.M&&["MM",c]||r<=1&&["y"]||["yy",r])[2]=e,a[3]=0<+t,a[4]=i,function(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}.apply(null,a)}var Dn=Math.abs;function Rn(t){return(0<t)-(t<0)||+t}function Nn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,i,r,a,o,s=Dn(this._milliseconds)/1e3,u=Dn(this._days),c=Dn(this._months),l=this.asSeconds();return l?(t=B(s/60),e=B(t/60),s%=60,t%=60,n=B(c/12),c%=12,i=s?s.toFixed(3).replace(/\.?0+$/,""):"",r=Rn(this._months)!==Rn(l)?"-":"",a=Rn(this._days)!==Rn(l)?"-":"",o=Rn(this._milliseconds)!==Rn(l)?"-":"",(l<0?"-":"")+"P"+(n?r+n+"Y":"")+(c?r+c+"M":"")+(u?a+u+"D":"")+(e||t||s?"T":"")+(e?o+e+"H":"")+(t?o+t+"M":"")+(s?o+i+"S":"")):"P0D"}var On=Me.prototype;return On.isValid=function(){return this._isValid},On.abs=function(){var t=this._data;return this._milliseconds=hn(this._milliseconds),this._days=hn(this._days),this._months=hn(this._months),t.milliseconds=hn(t.milliseconds),t.seconds=hn(t.seconds),t.minutes=hn(t.minutes),t.hours=hn(t.hours),t.months=hn(t.months),t.years=hn(t.years),this},On.add=function(t,e){return yn(this,t,e,1)},On.subtract=function(t,e){return yn(this,t,e,-1)},On.as=function(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=W(t))||"quarter"===t||"year"===t)switch(e=this._days+i/864e5,n=this._months+gn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(vn(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},On.asMilliseconds=it,On.asSeconds=X,On.asMinutes=Nt,On.asHours=nt,On.asDays=et,On.asWeeks=Gt,On.asMonths=lt,On.asQuarters=$,On.asYears=at,On.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*K(this._months/12):NaN},On._bubble=function(){var t=this._milliseconds,e=this._days,n=this._months,i=this._data;return 0<=t&&0<=e&&0<=n||t<=0&&e<=0&&n<=0||(t+=864e5*mn(vn(n)+e),n=e=0),i.milliseconds=t%1e3,t=B(t/1e3),i.seconds=t%60,t=B(t/60),i.minutes=t%60,t=B(t/60),i.hours=t%24,e+=B(t/24),n+=t=B(gn(e)),e-=mn(vn(t)),t=B(n/12),n%=12,i.days=e,i.months=n,i.years=t,this},On.clone=function(){return He(this)},On.get=function(t){return t=W(t),this.isValid()?this[t+"s"]():NaN},On.milliseconds=Z,On.seconds=rt,On.minutes=Ft,On.hours=J,On.days=bn,On.weeks=function(){return B(this.days()/7)},On.months=Sn,On.years=_n,On.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=wn;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(n=t),"object"==typeof e&&(i=Object.assign({},wn,e),null!=e.s&&null==e.ss&&(i.ss=e.s-1)),e=In(this,!n,i,t=this.localeData()),n&&(e=t.pastFuture(+this,e)),t.postformat(e)},On.toISOString=Nn,On.toString=Nn,On.toJSON=Nn,On.locale=Xe,On.localeData=$e,On.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Nn),On.lang=zt,L("X",0,0,"unix"),L("x",0,0,"valueOf"),pt("x",st),pt("X",/[+-]?\d+(\.\d{1,3})?/),mt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),mt("x",(function(t,e,n){n._d=new Date(K(t))})),e.version="2.29.4",t=Ne,e.fn=Q,e.min=function(){return Oe("isBefore",[].slice.call(arguments,0))},e.max=function(){return Oe("isAfter",[].slice.call(arguments,0))},e.now=function(){return Date.now?Date.now():+new Date},e.utc=p,e.unix=function(t){return Ne(1e3*t)},e.months=function(t,e){return dn(t,e,"months")},e.isDate=u,e.locale=ce,e.invalid=h,e.duration=He,e.isMoment=E,e.weekdays=function(t,e,n){return fn(t,e,n,"weekdays")},e.parseZone=function(){return Ne.apply(null,arguments).parseZone()},e.localeData=pe,e.isDuration=ke,e.monthsShort=function(t,e){return dn(t,e,"monthsShort")},e.weekdaysMin=function(t,e,n){return fn(t,e,n,"weekdaysMin")},e.defineLocale=le,e.updateLocale=function(t,e){var n,i;return null!=e?(i=ie,null!=re[t]&&null!=re[t].parentLocale?re[t].set(I(re[t]._config,e)):(e=I(i=null!=(n=ue(t))?n._config:i,e),null==n&&(e.abbr=t),(i=new D(e)).parentLocale=re[t],re[t]=i),ce(t)):null!=re[t]&&(null!=re[t].parentLocale?(re[t]=re[t].parentLocale,t===ce()&&ce(t)):null!=re[t]&&delete re[t]),re[t]},e.locales=function(){return R(re)},e.weekdaysShort=function(t,e,n){return fn(t,e,n,"weekdaysShort")},e.normalizeUnits=W,e.relativeTimeRounding=function(t){return void 0===t?An:"function"==typeof t&&(An=t,!0)},e.relativeTimeThreshold=function(t,e){return void 0!==wn[t]&&(void 0===e?wn[t]:(wn[t]=e,"s"===t&&(wn.ss=e-1),!0))},e.calendarFormat=function(t,e){return(t=t.diff(e,"days",!0))<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"},e.prototype=Q,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e}();var Sa=ba.exports,_a={exports:{}},Aa={exports:{}};!function(t){
//! moment-timezone.js
//! version : 0.5.45
//! Copyright (c) JS Foundation and other contributors
//! license : MIT
//! github.com/moment/moment-timezone
var n,i;n=e,i=function(t){void 0===t.version&&t.default&&(t=t.default);var e,n={},i={},r={},a={},o={};t&&"string"==typeof t.version||N("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var s=t.version.split("."),u=+s[0],c=+s[1];function l(t){return t>96?t-87:t>64?t-29:t-48}function p(t){var e=0,n=t.split("."),i=n[0],r=n[1]||"",a=1,o=0,s=1;for(45===t.charCodeAt(0)&&(e=1,s=-1);e<i.length;e++)o=60*o+l(i.charCodeAt(e));for(e=0;e<r.length;e++)a/=60,o+=l(r.charCodeAt(e))*a;return o*s}function d(t){for(var e=0;e<t.length;e++)t[e]=p(t[e])}function f(t,e){var n,i=[];for(n=0;n<e.length;n++)i[n]=t[e[n]];return i}function h(t){var e=t.split("|"),n=e[2].split(" "),i=e[3].split(""),r=e[4].split(" ");return d(n),d(i),d(r),function(t,e){for(var n=0;n<e;n++)t[n]=Math.round((t[n-1]||0)+6e4*t[n]);t[e-1]=1/0}(r,i.length),{name:e[0],abbrs:f(e[1].split(" "),i),offsets:f(n,i),untils:r,population:0|e[5]}}function y(t){t&&this._set(h(t))}function m(t,e){this.name=t,this.zones=e}function g(t){var e=t.toTimeString(),n=e.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=e.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+t,this.abbr=n,this.offset=t.getTimezoneOffset()}function v(t){this.zone=t,this.offsetScore=0,this.abbrScore=0}function T(t,e){for(var n,i;i=6e4*((e.at-t.at)/12e4|0);)(n=new g(new Date(t.at+i))).offset===t.offset?t=n:e=n;return t}function E(t,e){return t.offsetScore!==e.offsetScore?t.offsetScore-e.offsetScore:t.abbrScore!==e.abbrScore?t.abbrScore-e.abbrScore:t.zone.population!==e.zone.population?e.zone.population-t.zone.population:e.zone.name.localeCompare(t.zone.name)}function b(t,e){var n,i;for(d(e),n=0;n<e.length;n++)i=e[n],o[i]=o[i]||{},o[i][t]=!0}function S(t){var e,n,i,r,s=t.length,u={},c=[],l={};for(e=0;e<s;e++)if(i=t[e].offset,!l.hasOwnProperty(i)){for(n in r=o[i]||{})r.hasOwnProperty(n)&&(u[n]=!0);l[i]=!0}for(e in u)u.hasOwnProperty(e)&&c.push(a[e]);return c}function _(){try{var t=Intl.DateTimeFormat().resolvedOptions().timeZone;if(t&&t.length>3){var e=a[A(t)];if(e)return e;N("Moment Timezone found "+t+" from the Intl api, but did not have that data loaded.")}}catch(t){}var n,i,r,o=function(){var t,e,n,i,r=(new Date).getFullYear()-2,a=new g(new Date(r,0,1)),o=a.offset,s=[a];for(i=1;i<48;i++)(n=new Date(r,i,1).getTimezoneOffset())!==o&&(t=T(a,e=new g(new Date(r,i,1))),s.push(t),s.push(new g(new Date(t.at+6e4))),a=e,o=n);for(i=0;i<4;i++)s.push(new g(new Date(r+i,0,1))),s.push(new g(new Date(r+i,6,1)));return s}(),s=o.length,u=S(o),c=[];for(i=0;i<u.length;i++){for(n=new v(I(u[i])),r=0;r<s;r++)n.scoreOffsetAt(o[r]);c.push(n)}return c.sort(E),c.length>0?c[0].zone.name:void 0}function A(t){return(t||"").toLowerCase().replace(/\//g,"_")}function w(t){var e,i,r,o;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)o=A(i=(r=t[e].split("|"))[0]),n[o]=t[e],a[o]=i,b(o,r[2].split(" "))}function I(t,e){t=A(t);var r,o=n[t];return o instanceof y?o:"string"==typeof o?(o=new y(o),n[t]=o,o):i[t]&&e!==I&&(r=I(i[t],I))?((o=n[t]=new y)._set(r),o.name=a[t],o):null}function D(t){var e,n,r,o;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)r=A((n=t[e].split("|"))[0]),o=A(n[1]),i[r]=o,a[r]=n[0],i[o]=r,a[o]=n[1]}function R(t){var e="X"===t._f||"x"===t._f;return!(!t._a||void 0!==t._tzm||e)}function N(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}function O(e){var n,i=Array.prototype.slice.call(arguments,0,-1),r=arguments[arguments.length-1],a=t.utc.apply(null,i);return!t.isMoment(e)&&R(a)&&(n=I(r))&&a.add(n.parse(a),"minutes"),a.tz(r),a}(u<2||2===u&&c<6)&&N("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+t.version+". See momentjs.com"),y.prototype={_set:function(t){this.name=t.name,this.abbrs=t.abbrs,this.untils=t.untils,this.offsets=t.offsets,this.population=t.population},_index:function(t){var e;if((e=function(t,e){var n,i=e.length;if(t<e[0])return 0;if(i>1&&e[i-1]===1/0&&t>=e[i-2])return i-1;if(t>=e[i-1])return-1;for(var r=0,a=i-1;a-r>1;)e[n=Math.floor((r+a)/2)]<=t?r=n:a=n;return a}(+t,this.untils))>=0)return e},countries:function(){var t=this.name;return Object.keys(r).filter((function(e){return-1!==r[e].zones.indexOf(t)}))},parse:function(t){var e,n,i,r,a=+t,o=this.offsets,s=this.untils,u=s.length-1;for(r=0;r<u;r++)if(e=o[r],n=o[r+1],i=o[r?r-1:r],e<n&&O.moveAmbiguousForward?e=n:e>i&&O.moveInvalidForward&&(e=i),a<s[r]-6e4*e)return o[r];return o[u]},abbr:function(t){return this.abbrs[this._index(t)]},offset:function(t){return N("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(t)]},utcOffset:function(t){return this.offsets[this._index(t)]}},v.prototype.scoreOffsetAt=function(t){this.offsetScore+=Math.abs(this.zone.utcOffset(t.at)-t.offset),this.zone.abbr(t.at).replace(/[^A-Z]/g,"")!==t.abbr&&this.abbrScore++},O.version="0.5.45",O.dataVersion="",O._zones=n,O._links=i,O._names=a,O._countries=r,O.add=w,O.link=D,O.load=function(t){w(t.zones),D(t.links),function(t){var e,n,i,a;if(t&&t.length)for(e=0;e<t.length;e++)n=(a=t[e].split("|"))[0].toUpperCase(),i=a[1].split(" "),r[n]=new m(n,i)}(t.countries),O.dataVersion=t.version},O.zone=I,O.zoneExists=function t(e){return t.didShowError||(t.didShowError=!0,N("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!I(e)},O.guess=function(t){return e&&!t||(e=_()),e},O.names=function(){var t,e=[];for(t in a)a.hasOwnProperty(t)&&(n[t]||n[i[t]])&&a[t]&&e.push(a[t]);return e.sort()},O.Zone=y,O.unpack=h,O.unpackBase60=p,O.needsOffset=R,O.moveInvalidForward=!0,O.moveAmbiguousForward=!1,O.countries=function(){return Object.keys(r)},O.zonesForCountry=function(t,e){var n;if(n=(n=t).toUpperCase(),!(t=r[n]||null))return null;var i=t.zones.sort();return e?i.map((function(t){return{name:t,offset:I(t).utcOffset(new Date)}})):i};var C,M=t.fn;function k(t){return function(){return this._z?this._z.abbr(this):t.call(this)}}function L(t){return function(){return this._z=null,t.apply(this,arguments)}}t.tz=O,t.defaultZone=null,t.updateOffset=function(e,n){var i,r=t.defaultZone;if(void 0===e._z&&(r&&R(e)&&!e._isUTC&&e.isValid()&&(e._d=t.utc(e._a)._d,e.utc().add(r.parse(e),"minutes")),e._z=r),e._z)if(i=e._z.utcOffset(e),Math.abs(i)<16&&(i/=60),void 0!==e.utcOffset){var a=e._z;e.utcOffset(-i,n),e._z=a}else e.zone(i,n)},M.tz=function(e,n){if(e){if("string"!=typeof e)throw new Error("Time zone name must be a string, got "+e+" ["+typeof e+"]");return this._z=I(e),this._z?t.updateOffset(this,n):N("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},M.zoneName=k(M.zoneName),M.zoneAbbr=k(M.zoneAbbr),M.utc=L(M.utc),M.local=L(M.local),M.utcOffset=(C=M.utcOffset,function(){return arguments.length>0&&(this._z=null),C.apply(this,arguments)}),t.tz.setDefault=function(e){return(u<2||2===u&&c<9)&&N("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+t.version+"."),t.defaultZone=e?I(e):null,t};var U=t.momentProperties;return"[object Array]"===Object.prototype.toString.call(U)?(U.push("_z"),U.push("_a")):U&&(U._z=null),t},t.exports?t.exports=i(ba.exports):i(n.moment)}(Aa);var wa={version:"2021e",zones:["Asia/Shanghai|CST CDT|-80 -90|01010101010101010101010101010|-23uw0 18n0 OjB0 Rz0 11d0 1wL0 A10 8HX0 1G10 Tz0 1ip0 1jX0 1cN0 11b0 1oN0 aL0 1tU30 Rb0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0|23e6"],links:["Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|PRC"],countries:["CN|Asia/Shanghai Asia/Urumqi"]};(_a.exports=Aa.exports).tz.load(wa);var Ia,Da,Ra,Na,Oa=function(t){this.entityType=or.TENANT,this.id=t},Ca=function(t){this.entityType=or.ALARM,this.id=t},Ma=function(t){this.entityType=or.CUSTOMER,this.id=t},ka=function(t){this.entityType=or.USER,this.id=t};!function(t){t[t.ALL=0]="ALL",t[t.ENTITY=1]="ENTITY"}(Ia||(Ia={})),function(t){t.CRITICAL="CRITICAL",t.MAJOR="MAJOR",t.MINOR="MINOR",t.WARNING="WARNING",t.INDETERMINATE="INDETERMINATE"}(Da||(Da={})),function(t){t.ACTIVE_UNACK="ACTIVE_UNACK",t.ACTIVE_ACK="ACTIVE_ACK",t.CLEARED_UNACK="CLEARED_UNACK",t.CLEARED_ACK="CLEARED_ACK"}(Ra||(Ra={})),function(t){t.ANY="ANY",t.ACTIVE="ACTIVE",t.CLEARED="CLEARED",t.ACK="ACK",t.UNACK="UNACK"}(Na||(Na={}));var La,Ua,Pa=new Map([[Da.CRITICAL,"alarm.severity-critical"],[Da.MAJOR,"alarm.severity-major"],[Da.MINOR,"alarm.severity-minor"],[Da.WARNING,"alarm.severity-warning"],[Da.INDETERMINATE,"alarm.severity-indeterminate"]]),xa=new Map([[Ra.ACTIVE_UNACK,"alarm.display-status.ACTIVE_UNACK"],[Ra.ACTIVE_ACK,"alarm.display-status.ACTIVE_ACK"],[Ra.CLEARED_UNACK,"alarm.display-status.CLEARED_UNACK"],[Ra.CLEARED_ACK,"alarm.display-status.CLEARED_ACK"]]),Fa=new Map([[Na.ANY,"alarm.search-status.ANY"],[Na.ACTIVE,"alarm.search-status.ACTIVE"],[Na.CLEARED,"alarm.search-status.CLEARED"],[Na.ACK,"alarm.search-status.ACK"],[Na.UNACK,"alarm.search-status.UNACK"]]),Wa=new Map([[Da.CRITICAL,"red"],[Da.MAJOR,"orange"],[Da.MINOR,"#ffca3d"],[Da.WARNING,"#abab00"],[Da.INDETERMINATE,"green"]]);!function(t){t.SYSTEM="SYSTEM",t.OTHER="OTHER"}(La||(La={})),function(t){t.noAssignee="noAssignee",t.currentUser="currentUser"}(Ua||(Ua={}));var Va,ja,Ya,Ha,Ba={id:new Ca(cr),tenantId:new Oa(cr),customerId:new Ma(cr),assigneeId:new ka(cr),createdTime:(new Date).getTime(),startTs:(new Date).getTime(),endTs:0,ackTs:0,clearTs:0,assignTs:0,originatorName:"Simulated",originatorLabel:"Simulated",assignee:{firstName:"",lastName:"",email:"test@example.com"},originator:{entityType:or.DEVICE,id:"1"},type:"TEMPERATURE",severity:Da.MAJOR,status:Ra.ACTIVE_UNACK,acknowledged:!1,cleared:!1,details:{message:"Temperature is high!"},propagate:!1},Ka={createdTime:{keyName:"createdTime",value:"createdTime",name:"alarm.created-time",time:!0},startTime:{keyName:"startTime",value:"startTs",name:"alarm.start-time",time:!0},endTime:{keyName:"endTime",value:"endTs",name:"alarm.end-time",time:!0},ackTime:{keyName:"ackTime",value:"ackTs",name:"alarm.ack-time",time:!0},clearTime:{keyName:"clearTime",value:"clearTs",name:"alarm.clear-time",time:!0},assignTime:{keyName:"assignTime",value:"assignTs",name:"alarm.assign-time",time:!0},originator:{keyName:"originator",value:"originatorName",name:"alarm.originator"},originatorLabel:{keyName:"originatorLabel",value:"originatorLabel",name:"alarm.originator-label"},originatorType:{keyName:"originatorType",value:"originator.entityType",name:"alarm.originator-type"},type:{keyName:"type",value:"type",name:"alarm.type"},severity:{keyName:"severity",value:"severity",name:"alarm.severity"},status:{keyName:"status",value:"status",name:"alarm.status"},assignee:{keyName:"assignee",value:"assignee",name:"alarm.assignee"}},Ga=function(){function t(t,e,n,i,r,a){this.affectedEntityId=t,this.pageLink=e,this.searchStatus=n,this.status=i,this.fetchOriginator=r,this.assigneeId=a}return t.prototype.toQuery=function(){var t=this.affectedEntityId?"/".concat(this.affectedEntityId.entityType,"/").concat(this.affectedEntityId.id):"";return t+=this.pageLink.toQuery(),this.searchStatus?t+="&searchStatus=".concat(this.searchStatus):this.status&&(t+="&status=".concat(this.status)),void 0!==this.fetchOriginator&&null!==this.fetchOriginator&&(t+="&fetchOriginator=".concat(this.fetchOriginator)),void 0!==this.assigneeId&&null!==this.assigneeId&&(t+="&assigneeId=".concat(this.assigneeId.id)),t},t}(),qa=function(){function t(t,e,n){this.affectedEntityId=t,this.pageLink=e,this.typeList=n.typeList,this.statusList=n.statusList,this.severityList=n.severityList,this.assigneeId=n.assigneeId}return t.prototype.toQuery=function(){var t=this.affectedEntityId?"/".concat(this.affectedEntityId.entityType,"/").concat(this.affectedEntityId.id):"";return t+=this.pageLink.toQuery(),this.typeList&&this.typeList.length&&(t+="&typeList=".concat(this.typeList.map((function(t){return encodeURIComponent(t)})).join(","))),this.statusList&&this.statusList.length&&(t+="&statusList=".concat(this.statusList.join(","))),this.severityList&&this.severityList.length&&(t+="&severityList=".concat(this.severityList.join(","))),void 0!==this.assigneeId&&null!==this.assigneeId&&(t+="&assigneeId=".concat(this.assigneeId.id)),t},t}(),za={createdTime:{keyName:"createdTime",name:"entity-field.created-time",value:"createdTime",time:!0},name:{keyName:"name",name:"entity-field.name",value:"name"},type:{keyName:"type",name:"entity-field.type",value:"type"},firstName:{keyName:"firstName",name:"entity-field.first-name",value:"firstName"},lastName:{keyName:"lastName",name:"entity-field.last-name",value:"lastName"},email:{keyName:"email",name:"entity-field.email",value:"email"},title:{keyName:"title",name:"entity-field.title",value:"title"},country:{keyName:"country",name:"entity-field.country",value:"country"},state:{keyName:"state",name:"entity-field.state",value:"state"},city:{keyName:"city",name:"entity-field.city",value:"city"},address:{keyName:"address",name:"entity-field.address",value:"address"},address2:{keyName:"address2",name:"entity-field.address2",value:"address2"},zip:{keyName:"zip",name:"entity-field.zip",value:"zip"},phone:{keyName:"phone",name:"entity-field.phone",value:"phone"},label:{keyName:"label",name:"entity-field.label",value:"label"},queueName:{keyName:"queueName",name:"entity-field.queue-name",value:"queueName"},serviceId:{keyName:"serviceId",name:"entity-field.service-id",value:"serviceId"},ownerName:{keyName:"ownerName",name:"entity-field.owner-name",value:"ownerName"},ownerType:{keyName:"ownerType",name:"entity-field.owner-type",value:"ownerType"}},Qa=function(){},Ja=function(){function t(t,e){this.wsService=t,this.zone=e,this.reconnectSubject=new nn,this.reconnect$=this.reconnectSubject.asObservable(),this.subscriptionCommands=[]}return t.prototype.subscribe=function(){this.wsService.subscribe(this)},t.prototype.update=function(){this.wsService.update(this)},t.prototype.unsubscribe=function(){this.wsService.unsubscribe(this),this.complete()},t.prototype.complete=function(){this.reconnectSubject.complete()},t.prototype.onReconnected=function(){this.reconnectSubject.next()},t}(),Xa="Not supported!";!function(t){t.timeseries="timeseries",t.attribute="attribute",t.function="function",t.alarm="alarm",t.entityField="entityField",t.count="count"}(Va||(Va={})),function(t){t.LATEST_TELEMETRY="LATEST_TELEMETRY"}(ja||(ja={})),function(t){t.CLIENT_SCOPE="CLIENT_SCOPE",t.SERVER_SCOPE="SERVER_SCOPE",t.SHARED_SCOPE="SHARED_SCOPE"}(Ya||(Ya={})),function(t){t.DELETE_ALL_DATA="DELETE_ALL_DATA",t.DELETE_ALL_DATA_EXCEPT_LATEST_VALUE="DELETE_ALL_DATA_EXCEPT_LATEST_VALUE",t.DELETE_LATEST_VALUE="DELETE_LATEST_VALUE",t.DELETE_ALL_DATA_FOR_TIME_PERIOD="DELETE_ALL_DATA_FOR_TIME_PERIOD"}(Ha||(Ha={}));var $a,Za,to=new Map([[ja.LATEST_TELEMETRY,"attribute.scope-telemetry"],[Ya.CLIENT_SCOPE,"attribute.scope-client"],[Ya.SERVER_SCOPE,"attribute.scope-server"],[Ya.SHARED_SCOPE,"attribute.scope-shared"]]),eo=new Map([[ja.LATEST_TELEMETRY,"attribute.scope-telemetry-short"],[Ya.CLIENT_SCOPE,"attribute.scope-client-short"],[Ya.SERVER_SCOPE,"attribute.scope-server-short"],[Ya.SHARED_SCOPE,"attribute.scope-shared-short"]]),no=new Map([[ja.LATEST_TELEMETRY,!0],[Ya.CLIENT_SCOPE,!0],[Ya.SERVER_SCOPE,!1],[Ya.SHARED_SCOPE,!1]]),io=new Map([[Ha.DELETE_ALL_DATA,"attribute.delete-timeseries.all-data"],[Ha.DELETE_ALL_DATA_EXCEPT_LATEST_VALUE,"attribute.delete-timeseries.all-data-except-latest-value"],[Ha.DELETE_LATEST_VALUE,"attribute.delete-timeseries.latest-value"],[Ha.DELETE_ALL_DATA_FOR_TIME_PERIOD,"attribute.delete-timeseries.all-data-for-time-period"]]);!function(t){t.ASC="ASC",t.DESC="DESC"}($a||($a={})),function(t){t.AUTH="AUTH",t.ATTRIBUTES="ATTRIBUTES",t.TIMESERIES="TIMESERIES",t.TIMESERIES_HISTORY="TIMESERIES_HISTORY",t.ENTITY_DATA="ENTITY_DATA",t.ENTITY_COUNT="ENTITY_COUNT",t.ALARM_DATA="ALARM_DATA",t.ALARM_COUNT="ALARM_COUNT",t.NOTIFICATIONS="NOTIFICATIONS",t.NOTIFICATIONS_COUNT="NOTIFICATIONS_COUNT",t.MARK_NOTIFICATIONS_AS_READ="MARK_NOTIFICATIONS_AS_READ",t.MARK_ALL_NOTIFICATIONS_AS_READ="MARK_ALL_NOTIFICATIONS_AS_READ",t.ALARM_DATA_UNSUBSCRIBE="ALARM_DATA_UNSUBSCRIBE",t.ALARM_COUNT_UNSUBSCRIBE="ALARM_COUNT_UNSUBSCRIBE",t.ENTITY_DATA_UNSUBSCRIBE="ENTITY_DATA_UNSUBSCRIBE",t.ENTITY_COUNT_UNSUBSCRIBE="ENTITY_COUNT_UNSUBSCRIBE",t.NOTIFICATIONS_UNSUBSCRIBE="NOTIFICATIONS_UNSUBSCRIBE"}(Za||(Za={}));var ro,ao=function(){},oo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Za.ATTRIBUTES,e}return pe(e,t),e}(ao);!function(t){t.MILLISECONDS="MILLISECONDS",t.WEEK="WEEK",t.WEEK_ISO="WEEK_ISO",t.MONTH="MONTH",t.QUARTER="QUARTER"}(ro||(ro={}));var so,uo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Za.TIMESERIES,e}return pe(e,t),e}(ao),co=function(){this.type=Za.TIMESERIES_HISTORY},lo=function(){function t(){this.type=Za.ENTITY_DATA}return t.prototype.isEmpty=function(){return!(this.query||this.historyCmd||this.latestCmd||this.tsCmd||this.aggTsCmd||this.aggHistoryCmd)},t}(),po=function(){this.type=Za.ENTITY_COUNT},fo=function(){function t(){this.type=Za.ALARM_DATA}return t.prototype.isEmpty=function(){return!this.query},t}(),ho=function(){this.type=Za.ALARM_COUNT},yo=function(){this.type=Za.NOTIFICATIONS_COUNT},mo=function(t){void 0===t&&(t=10),this.type=Za.NOTIFICATIONS,this.limit=t},go=function(t){this.type=Za.MARK_NOTIFICATIONS_AS_READ,this.notifications=t},vo=function(){this.type=Za.MARK_ALL_NOTIFICATIONS_AS_READ},To=function(){this.type=Za.ENTITY_DATA_UNSUBSCRIBE},Eo=function(){this.type=Za.ENTITY_COUNT_UNSUBSCRIBE},bo=function(){this.type=Za.ALARM_DATA_UNSUBSCRIBE},So=function(){this.type=Za.ALARM_COUNT_UNSUBSCRIBE},_o=function(){this.type=Za.NOTIFICATIONS_UNSUBSCRIBE},Ao=function(t){this.cmdId=0,this.token=t},wo=function(){function t(){this.cmds=[]}return t.popCmds=function(t,e){var n=Math.min(t.length,e);return n>0?t.splice(0,n):[]},t.prototype.setAuth=function(t){this.authCmd=new Ao(t)},t.prototype.hasCommands=function(){return this.cmds.length>0},t.prototype.clear=function(){this.cmds.length=0},t.prototype.preparePublishCommands=function(e){var n=new t;return this.authCmd&&(n.authCmd=this.authCmd,this.authCmd=null),n.cmds=t.popCmds(this.cmds,e),n},t}();!function(t){t.ENTITY_DATA="ENTITY_DATA",t.ALARM_DATA="ALARM_DATA",t.ALARM_COUNT_DATA="ALARM_COUNT_DATA",t.COUNT_DATA="COUNT_DATA",t.NOTIFICATIONS_COUNT="NOTIFICATIONS_COUNT",t.NOTIFICATIONS="NOTIFICATIONS"}(so||(so={}));var Io,Do,Ro,No=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===so.ENTITY_DATA},Oo=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===so.ALARM_DATA},Co=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===so.COUNT_DATA},Mo=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===so.ALARM_COUNT_DATA},ko=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===so.NOTIFICATIONS_COUNT},Lo=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===so.NOTIFICATIONS},Uo=function(){function t(t){this.subscriptionId=t.subscriptionId,this.errorCode=t.errorCode,this.errorMsg=t.errorMsg,this.data=t.data}return t.prototype.prepareData=function(t){var e=this;this.data||(this.data={}),t&&t.forEach((function(t){e.data[t]||(e.data[t]=[])}))},t.prototype.updateAttributeData=function(t){var e,n,i=function(e){var n=r.data[e];if(n.length){var i=t.find((function(t){return t.key===e}));i?(i.lastUpdateTs=n[0][0],i.value=n[0][1]):t.push({key:e,lastUpdateTs:n[0][0],value:n[0][1]})}},r=this;try{for(var a=ve(Object.keys(this.data)),o=a.next();!o.done;o=a.next()){i(o.value)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return t},t}(),Po=function(t){this.cmdId=t.cmdId,this.errorCode=t.errorCode,this.errorMsg=t.errorMsg,this.cmdUpdateType=t.cmdUpdateType},xo=function(t){function e(e){var n=t.call(this,e)||this;return n.data=e.data,n.update=e.update,n}return pe(e,t),e}(Po),Fo=function(t){function e(e){return t.call(this,e)||this}return pe(e,t),e.processEntityData=function(t,e){var n,i,r,a,o,s,u,c,l,p;try{for(var d=ve(t),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.timeseries)try{for(var y=(r=void 0,ve(Object.keys(h.timeseries))),m=y.next();!m.done;m=y.next()){var g=m.value,v=h.timeseries[g];try{for(var T=(o=void 0,ve(v)),E=T.next();!E.done;E=T.next()){(D=E.value).ts&&(D.ts+=e)}}catch(t){o={error:t}}finally{try{E&&!E.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}}}catch(t){r={error:t}}finally{try{m&&!m.done&&(a=y.return)&&a.call(y)}finally{if(r)throw r.error}}if(h.latest)try{for(var b=(u=void 0,ve(Object.keys(h.latest))),S=b.next();!S.done;S=b.next()){var _=S.value,A=h.latest[_];try{for(var w=(l=void 0,ve(Object.keys(A))),I=w.next();!I.done;I=w.next()){var D;(D=A[g=I.value]).ts&&(D.ts+=e),g===za.createdTime.keyName&&D.value&&(D.value=Number(D.value)+e+"")}}catch(t){l={error:t}}finally{try{I&&!I.done&&(p=w.return)&&p.call(w)}finally{if(l)throw l.error}}}}catch(t){u={error:t}}finally{try{S&&!S.done&&(c=b.return)&&c.call(b)}finally{if(u)throw u.error}}}}catch(t){n={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}},e.prototype.prepareData=function(t){this.data&&e.processEntityData(this.data.data,t),this.update&&e.processEntityData(this.update,t)},e}(xo),Wo=function(t){function e(e){var n=t.call(this,e)||this;return n.allowedEntities=e.allowedEntities,n.totalEntities=e.totalEntities,n}return pe(e,t),e.processAlarmData=function(t,e){var n,i,r,a,o,s;try{for(var u=ve(t),c=u.next();!c.done;c=u.next()){var l=c.value;if(l.createdTime+=e,l.ackTs&&(l.ackTs+=e),l.clearTs&&(l.clearTs+=e),l.endTs&&(l.endTs+=e),l.latest)try{for(var p=(r=void 0,ve(Object.keys(l.latest))),d=p.next();!d.done;d=p.next()){var f=d.value,h=l.latest[f];try{for(var y=(o=void 0,ve(Object.keys(h))),m=y.next();!m.done;m=y.next()){var g=m.value,v=h[g];v.ts&&(v.ts+=e),g in[za.createdTime.keyName,Ka.startTime.keyName,Ka.endTime.keyName,Ka.ackTime.keyName,Ka.clearTime.keyName]&&v.value&&(v.value=Number(v.value)+e+"")}}catch(t){o={error:t}}finally{try{m&&!m.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}}}catch(t){r={error:t}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(r)throw r.error}}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},e.prototype.prepareData=function(t){this.data&&e.processAlarmData(this.data.data,t),this.update&&e.processAlarmData(this.update,t)},e}(xo),Vo=function(t){function e(e){var n=t.call(this,e)||this;return n.count=e.count,n}return pe(e,t),e}(Po),jo=function(t){function e(e){var n=t.call(this,e)||this;return n.count=e.count,n}return pe(e,t),e}(Po),Yo=function(t){function e(e){var n=t.call(this,e)||this;return n.totalUnreadCount=e.totalUnreadCount,n.sequenceNumber=e.sequenceNumber,n}return pe(e,t),e}(Po),Ho=function(t){function e(e){var n=t.call(this,e)||this;return n.totalUnreadCount=e.totalUnreadCount,n.sequenceNumber=e.sequenceNumber,n.update=e.update,n.notifications=e.notifications,n}return pe(e,t),e}(Po),Bo=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.telemetryService=e,i.zone=n,i.dataSubject=new sn(1),i.entityDataSubject=new sn(1),i.alarmDataSubject=new sn(1),i.entityCountSubject=new sn(1),i.alarmCountSubject=new sn(1),i.tsOffset=void 0,i.data$=i.dataSubject.asObservable(),i.entityData$=i.entityDataSubject.asObservable(),i.alarmData$=i.alarmDataSubject.asObservable(),i.entityCount$=i.entityCountSubject.asObservable(),i.alarmCount$=i.alarmCountSubject.asObservable(),i}return pe(e,t),e.createEntityAttributesSubscription=function(t,n,i,r,a){var o;void 0===a&&(a=null),(o=i===ja.LATEST_TELEMETRY?new uo:new oo).entityType=n.entityType,o.entityId=n.id,o.scope=i,a&&(o.keys=a.join(","));var s=new e(t,r);return s.subscriptionCommands.push(o),s},e.createEntityFilterLatestSubscription=function(t,n,i,r){void 0===r&&(r=null);var a={entityFilter:n,pageLink:{pageSize:1,page:0},latestValues:r||[]},o=new lo;o.query=a,o.latestCmd={keys:r||[]};var s=new e(t,i);return s.subscriptionCommands.push(o),s},e.prototype.complete=function(){this.dataSubject.complete(),this.entityDataSubject.complete(),this.alarmDataSubject.complete(),this.entityCountSubject.complete(),this.alarmCountSubject.complete(),t.prototype.complete.call(this)},e.prototype.setTsOffset=function(t){if(this.tsOffset!==t){var e=!Rr(this.tsOffset);return this.tsOffset=t,e}return!1},e.prototype.onData=function(t){var e,n=this,i=t.subscriptionId,r=this.subscriptionCommands.find((function(t){return t.cmdId===i}));if(r){var a=r;a.keys&&a.keys.length&&(e=a.keys.split(","))}t.prepareData(e),this.zone?this.zone.run((function(){n.dataSubject.next(t)})):this.dataSubject.next(t)},e.prototype.onEntityData=function(t){var e=this;this.tsOffset&&t.prepareData(this.tsOffset),this.zone?this.zone.run((function(){e.entityDataSubject.next(t)})):this.entityDataSubject.next(t)},e.prototype.onAlarmData=function(t){var e=this;this.tsOffset&&t.prepareData(this.tsOffset),this.zone?this.zone.run((function(){e.alarmDataSubject.next(t)})):this.alarmDataSubject.next(t)},e.prototype.onEntityCount=function(t){var e=this;this.zone?this.zone.run((function(){e.entityCountSubject.next(t)})):this.entityCountSubject.next(t)},e.prototype.onAlarmCount=function(t){var e=this;this.zone?this.zone.run((function(){e.alarmCountSubject.next(t)})):this.alarmCountSubject.next(t)},e.prototype.attributeData$=function(){var t=new Array;return this.data$.pipe(xn((function(e){return e.updateAttributeData(t)})))},e}(Ja),Ko=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.websocketService=e,i.zone=n,i.notificationCountSubject=new an({cmdId:0,cmdUpdateType:void 0,errorCode:0,errorMsg:"",totalUnreadCount:0,sequenceNumber:0}),i.notificationsSubject=new an({cmdId:0,cmdUpdateType:void 0,errorCode:0,errorMsg:"",notifications:null,totalUnreadCount:0,sequenceNumber:0}),i.messageLimit=10,i.notificationCount$=i.notificationCountSubject.asObservable().pipe(xn((function(t){return t.totalUnreadCount}))),i.notifications$=i.notificationsSubject.asObservable().pipe(xn((function(t){return t.notifications}))),i}return pe(e,t),e.createNotificationCountSubscription=function(t,n){var i=new yo,r=new e(t,n);return r.subscriptionCommands.push(i),r},e.createNotificationsSubscription=function(t,n,i){void 0===i&&(i=10);var r=new mo(i),a=new e(t,n);return a.messageLimit=i,a.subscriptionCommands.push(r),a},e.createMarkAsReadCommand=function(t,n){var i=new go(n),r=new e(t);return r.subscriptionCommands.push(i),r},e.createMarkAllAsReadCommand=function(t){var n=new vo,i=new e(t);return i.subscriptionCommands.push(n),i},e.prototype.onNotificationCountUpdate=function(t){var e=this,n=this.notificationCountSubject.value;t.sequenceNumber<=n.sequenceNumber||(this.zone?this.zone.run((function(){e.notificationCountSubject.next(t)})):this.notificationCountSubject.next(t))},e.prototype.complete=function(){this.notificationCountSubject.complete(),this.notificationsSubject.complete(),t.prototype.complete.call(this)},e.prototype.onNotificationsUpdate=function(t){var e=this,n=this.notificationsSubject.value;t.sequenceNumber<=n.sequenceNumber&&(t.totalUnreadCount=n.totalUnreadCount);var i=t;Cr(n)&&t.update&&(n.notifications.unshift(t.update),n.notifications.length>this.messageLimit&&n.notifications.pop(),(i=n).totalUnreadCount=t.totalUnreadCount),this.zone?this.zone.run((function(){e.notificationsSubject.next(i),e.notificationCountSubject.next(i)})):(this.notificationsSubject.next(i),this.notificationCountSubject.next(i))},e}(Ja),Go=Sa,qo=1e3,zo=6e4,Qo=36e5,Jo=24*Qo,Xo=7*Jo,$o=Math.floor(30.44*Jo),Zo=Math.floor(7889238e3),ts=365*Jo;!function(t){t[t.REALTIME=0]="REALTIME",t[t.HISTORY=1]="HISTORY"}(Io||(Io={})),function(t){t[t.LAST_INTERVAL=0]="LAST_INTERVAL",t[t.INTERVAL=1]="INTERVAL"}(Do||(Do={})),function(t){t[t.LAST_INTERVAL=0]="LAST_INTERVAL",t[t.FIXED=1]="FIXED",t[t.INTERVAL=2]="INTERVAL",t[t.FOR_ALL_TIME=3]="FOR_ALL_TIME"}(Ro||(Ro={}));var es,ns=function(){function t(){}return t.max=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e.map((function(e){return t.numberValue(e)}));return e[i.indexOf(Math.max.apply(Math,Ee([],Te(i),!1)))]},t.min=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e.map((function(e){return t.numberValue(e)}));return e[i.indexOf(Math.min.apply(Math,Ee([],Te(i),!1)))]},t.numberValue=function(t){return"number"==typeof t?t:us.get(t)},t}();!function(t){t.MIN="MIN",t.MAX="MAX",t.AVG="AVG",t.SUM="SUM",t.COUNT="COUNT",t.NONE="NONE"}(es||(es={}));var is,rs=new Map([[es.MIN,"aggregation.min"],[es.MAX,"aggregation.max"],[es.AVG,"aggregation.avg"],[es.SUM,"aggregation.sum"],[es.COUNT,"aggregation.count"],[es.NONE,"aggregation.none"]]);!function(t){t.YESTERDAY="YESTERDAY",t.DAY_BEFORE_YESTERDAY="DAY_BEFORE_YESTERDAY",t.THIS_DAY_LAST_WEEK="THIS_DAY_LAST_WEEK",t.PREVIOUS_WEEK="PREVIOUS_WEEK",t.PREVIOUS_WEEK_ISO="PREVIOUS_WEEK_ISO",t.PREVIOUS_MONTH="PREVIOUS_MONTH",t.PREVIOUS_QUARTER="PREVIOUS_QUARTER",t.PREVIOUS_HALF_YEAR="PREVIOUS_HALF_YEAR",t.PREVIOUS_YEAR="PREVIOUS_YEAR",t.CURRENT_HOUR="CURRENT_HOUR",t.CURRENT_DAY="CURRENT_DAY",t.CURRENT_DAY_SO_FAR="CURRENT_DAY_SO_FAR",t.CURRENT_WEEK="CURRENT_WEEK",t.CURRENT_WEEK_ISO="CURRENT_WEEK_ISO",t.CURRENT_WEEK_SO_FAR="CURRENT_WEEK_SO_FAR",t.CURRENT_WEEK_ISO_SO_FAR="CURRENT_WEEK_ISO_SO_FAR",t.CURRENT_MONTH="CURRENT_MONTH",t.CURRENT_MONTH_SO_FAR="CURRENT_MONTH_SO_FAR",t.CURRENT_QUARTER="CURRENT_QUARTER",t.CURRENT_QUARTER_SO_FAR="CURRENT_QUARTER_SO_FAR",t.CURRENT_HALF_YEAR="CURRENT_HALF_YEAR",t.CURRENT_HALF_YEAR_SO_FAR="CURRENT_HALF_YEAR_SO_FAR",t.CURRENT_YEAR="CURRENT_YEAR",t.CURRENT_YEAR_SO_FAR="CURRENT_YEAR_SO_FAR"}(is||(is={}));var as,os,ss=new Map([[is.YESTERDAY,"timeinterval.predefined.yesterday"],[is.DAY_BEFORE_YESTERDAY,"timeinterval.predefined.day-before-yesterday"],[is.THIS_DAY_LAST_WEEK,"timeinterval.predefined.this-day-last-week"],[is.PREVIOUS_WEEK,"timeinterval.predefined.previous-week"],[is.PREVIOUS_WEEK_ISO,"timeinterval.predefined.previous-week-iso"],[is.PREVIOUS_MONTH,"timeinterval.predefined.previous-month"],[is.PREVIOUS_QUARTER,"timeinterval.predefined.previous-quarter"],[is.PREVIOUS_HALF_YEAR,"timeinterval.predefined.previous-half-year"],[is.PREVIOUS_YEAR,"timeinterval.predefined.previous-year"],[is.CURRENT_HOUR,"timeinterval.predefined.current-hour"],[is.CURRENT_DAY,"timeinterval.predefined.current-day"],[is.CURRENT_DAY_SO_FAR,"timeinterval.predefined.current-day-so-far"],[is.CURRENT_WEEK,"timeinterval.predefined.current-week"],[is.CURRENT_WEEK_ISO,"timeinterval.predefined.current-week-iso"],[is.CURRENT_WEEK_SO_FAR,"timeinterval.predefined.current-week-so-far"],[is.CURRENT_WEEK_ISO_SO_FAR,"timeinterval.predefined.current-week-iso-so-far"],[is.CURRENT_MONTH,"timeinterval.predefined.current-month"],[is.CURRENT_MONTH_SO_FAR,"timeinterval.predefined.current-month-so-far"],[is.CURRENT_QUARTER,"timeinterval.predefined.current-quarter"],[is.CURRENT_QUARTER_SO_FAR,"timeinterval.predefined.current-quarter-so-far"],[is.CURRENT_HALF_YEAR,"timeinterval.predefined.current-half-year"],[is.CURRENT_HALF_YEAR_SO_FAR,"timeinterval.predefined.current-half-year-so-far"],[is.CURRENT_YEAR,"timeinterval.predefined.current-year"],[is.CURRENT_YEAR_SO_FAR,"timeinterval.predefined.current-year-so-far"]]),us=new Map([[ro.WEEK,Xo],[ro.WEEK_ISO,Xo],[ro.MONTH,$o],[ro.QUARTER,Zo]]),cs=function(t){var e=Go().valueOf();return{displayValue:"",hideInterval:!1,hideLastInterval:!1,hideQuickInterval:!1,hideAggregation:!1,hideAggInterval:!1,hideTimezone:!1,selectedTab:Io.REALTIME,realtime:{realtimeType:Do.LAST_INTERVAL,interval:qo,timewindowMs:zo,quickInterval:is.CURRENT_DAY},history:{historyType:Ro.LAST_INTERVAL,interval:qo,timewindowMs:zo,fixedTimewindow:{startTimeMs:e-Jo,endTimeMs:e},quickInterval:is.CURRENT_DAY},aggregation:{type:es.AVG,limit:Math.floor(t.getMaxDatapointsLimit()/2)}}},ls=function(t){return Rr(t.selectedTab)?Or(t.realtime)?Io.REALTIME:Io.HISTORY:t.selectedTab},ps=function(t,e,n,i,r){var a,o;return i=t.history?Or(i)?i:t.history.interval:t.realtime?t.realtime.interval:0,t.aggregation?(a=t.aggregation.type||es.AVG,o=t.aggregation.limit||r.getMaxDatapointsLimit()):(a=es.AVG,o=r.getMaxDatapointsLimit()),{hideInterval:t.hideInterval||!1,hideLastInterval:t.hideLastInterval||!1,hideQuickInterval:t.hideQuickInterval||!1,hideAggregation:t.hideAggregation||!1,hideAggInterval:t.hideAggInterval||!1,hideTimezone:t.hideTimezone||!1,selectedTab:Io.HISTORY,history:{historyType:Ro.FIXED,fixedTimewindow:{startTimeMs:e,endTimeMs:n},interval:r.boundIntervalToTimewindow(n-e,i,es.AVG)},aggregation:{type:a,limit:o},timezone:t.timezone}},ds=function(t,e){return!(!t||!e)&&ls(t)!==ls(e)},fs=function(t){return Go.tz(t)},hs=function(t){if(t){var e=fs(t),n=Go().utcOffset();return 60*(e.utcOffset()-n)*1e3}return 0},ys=function(t){return ls(t)===Io.HISTORY},ms=function(t){return t?Go().tz(t):Go()},gs=function(t,e){switch(t){case is.YESTERDAY:return e.subtract(1,"days"),e.startOf("day");case is.DAY_BEFORE_YESTERDAY:return e.subtract(2,"days"),e.startOf("day");case is.THIS_DAY_LAST_WEEK:return e.subtract(1,"weeks"),e.startOf("day");case is.PREVIOUS_WEEK:return e.subtract(1,"weeks"),e.startOf("week");case is.PREVIOUS_WEEK_ISO:return e.subtract(1,"weeks"),e.startOf("isoWeek");case is.PREVIOUS_MONTH:return e.subtract(1,"months"),e.startOf("month");case is.PREVIOUS_QUARTER:return e.subtract(1,"quarter"),e.startOf("quarter");case is.PREVIOUS_HALF_YEAR:return e.get("quarter")<3?e.startOf("year").subtract(2,"quarters"):e.startOf("year");case is.PREVIOUS_YEAR:return e.subtract(1,"years"),e.startOf("year");case is.CURRENT_HOUR:return e.startOf("hour");case is.CURRENT_DAY:case is.CURRENT_DAY_SO_FAR:return e.startOf("day");case is.CURRENT_WEEK:case is.CURRENT_WEEK_SO_FAR:return e.startOf("week");case is.CURRENT_WEEK_ISO:case is.CURRENT_WEEK_ISO_SO_FAR:return e.startOf("isoWeek");case is.CURRENT_MONTH:case is.CURRENT_MONTH_SO_FAR:return e.startOf("month");case is.CURRENT_QUARTER:case is.CURRENT_QUARTER_SO_FAR:return e.startOf("quarter");case is.CURRENT_HALF_YEAR:case is.CURRENT_HALF_YEAR_SO_FAR:return e.get("quarter")<3?e.startOf("year"):e.clone().set("quarter",3).startOf("quarter");case is.CURRENT_YEAR:case is.CURRENT_YEAR_SO_FAR:return e.startOf("year")}},vs=function(t,e,n){switch(t){case is.YESTERDAY:case is.DAY_BEFORE_YESTERDAY:case is.THIS_DAY_LAST_WEEK:case is.CURRENT_DAY:return e.add(1,"day").valueOf();case is.PREVIOUS_WEEK:case is.PREVIOUS_WEEK_ISO:case is.CURRENT_WEEK:case is.CURRENT_WEEK_ISO:return e.add(1,"week").valueOf();case is.PREVIOUS_MONTH:case is.CURRENT_MONTH:return e.add(1,"month").valueOf();case is.PREVIOUS_QUARTER:case is.CURRENT_QUARTER:return e.add(1,"quarter").valueOf();case is.PREVIOUS_HALF_YEAR:case is.CURRENT_HALF_YEAR:return e.add(2,"quarters").valueOf();case is.PREVIOUS_YEAR:case is.CURRENT_YEAR:return e.add(1,"year").valueOf();case is.CURRENT_HOUR:return e.add(1,"hour").valueOf();case is.CURRENT_DAY_SO_FAR:case is.CURRENT_WEEK_SO_FAR:case is.CURRENT_WEEK_ISO_SO_FAR:case is.CURRENT_MONTH_SO_FAR:case is.CURRENT_QUARTER_SO_FAR:case is.CURRENT_HALF_YEAR_SO_FAR:case is.CURRENT_YEAR_SO_FAR:return ms(n).valueOf()}},Ts=function(t,e){var n=[0,0],i=ms(e),r=gs(t,i);n[0]=r.valueOf();var a=vs(t,r,e);return n[1]=a.valueOf(),n},Es=function(t,e,n,i){var r,a={fixedWindow:null,realtimeWindowMs:null,aggregation:{interval:qo,limit:i.getMaxDatapointsLimit(),type:es.AVG},timezone:t.timezone||Os(),tsOffset:hs(t.timezone)};if(n&&(a.aggregation.type=es.NONE,a.aggregation.stateData=!0),Or(t.aggregation)&&!n&&(a.aggregation={type:t.aggregation.type||es.AVG,limit:t.aggregation.limit||i.getMaxDatapointsLimit()}),ls(t)===Io.REALTIME){var o=t.realtime.realtimeType;if(Rr(o)&&(o=Or(t.realtime.quickInterval)?Do.INTERVAL:Do.LAST_INTERVAL),o===Do.INTERVAL){a.realtimeWindowMs=function(t,e){var n;switch(t){case is.CURRENT_HOUR:return Qo;case is.CURRENT_DAY:case is.CURRENT_DAY_SO_FAR:return Jo;case is.CURRENT_WEEK:case is.CURRENT_WEEK_ISO:case is.CURRENT_WEEK_SO_FAR:case is.CURRENT_WEEK_ISO_SO_FAR:return Xo;case is.CURRENT_MONTH:case is.CURRENT_MONTH_SO_FAR:return(n=ms(e)).clone().endOf("month").add(1,"milliseconds").diff(n.clone().startOf("month"));case is.CURRENT_QUARTER:case is.CURRENT_QUARTER_SO_FAR:return(n=ms(e)).clone().endOf("quarter").add(1,"milliseconds").diff(n.clone().startOf("quarter"));case is.CURRENT_HALF_YEAR:case is.CURRENT_HALF_YEAR_SO_FAR:return(n=ms(e)).get("quarter")<3?n.clone().set("quarter",2).endOf("quarter").add(1,"milliseconds").diff(n.clone().startOf("year")):n.clone().endOf("year").add(1,"milliseconds").diff(n.clone().set("quarter",3).startOf("quarter"));case is.CURRENT_YEAR:case is.CURRENT_YEAR_SO_FAR:return(n=ms(e)).clone().endOf("year").add(1,"milliseconds").diff(n.clone().startOf("year"))}}(t.realtime.quickInterval,t.timezone),a.quickInterval=t.realtime.quickInterval;var s=ms(t.timezone);a.startTs=gs(t.realtime.quickInterval,s).valueOf()}else{a.realtimeWindowMs=t.realtime.timewindowMs;s=ms(t.timezone);a.startTs=s.valueOf()+e-a.realtimeWindowMs}a.aggregation.interval=a.aggregation.type===es.NONE?qo:t.realtime.interval?t.realtime.interval:i.boundIntervalToTimewindow(a.realtimeWindowMs,t.realtime.interval,a.aggregation.type),r=a.realtimeWindowMs}else{var u=t.history.historyType;if(Rr(u)&&(u=Or(t.history.timewindowMs)?Ro.LAST_INTERVAL:Or(t.history.quickInterval)?Ro.INTERVAL:Ro.FIXED),u===Ro.LAST_INTERVAL){var c=(s=ms(t.timezone)).valueOf();a.fixedWindow={startTimeMs:c-t.history.timewindowMs,endTimeMs:c},r=t.history.timewindowMs}else if(u===Ro.INTERVAL){var l=Ts(t.history.quickInterval,t.timezone);a.fixedWindow={startTimeMs:l[0],endTimeMs:l[1]},r=a.fixedWindow.endTimeMs-a.fixedWindow.startTimeMs,a.quickInterval=t.history.quickInterval}else a.fixedWindow={startTimeMs:t.history.fixedTimewindow.startTimeMs-a.tsOffset,endTimeMs:t.history.fixedTimewindow.endTimeMs-a.tsOffset},r=a.fixedWindow.endTimeMs-a.fixedWindow.startTimeMs;a.startTs=a.fixedWindow.startTimeMs,a.aggregation.interval=a.aggregation.type===es.NONE?qo:t.history.interval?t.history.interval:i.boundIntervalToTimewindow(r,t.history.interval,a.aggregation.type)}var p=a.aggregation;return p.timeWindow=r,p.type!==es.NONE&&(p.limit=ks(a.startTs,r,a.aggregation.interval,t.timezone)),a},bs=function(t,e){switch(t){case is.YESTERDAY:case is.DAY_BEFORE_YESTERDAY:case is.CURRENT_DAY:case is.CURRENT_DAY_SO_FAR:return e.subtract(1,"days"),e.startOf("day");case is.THIS_DAY_LAST_WEEK:return e.subtract(1,"weeks"),e.startOf("day");case is.PREVIOUS_WEEK:case is.CURRENT_WEEK:case is.CURRENT_WEEK_SO_FAR:return e.subtract(1,"weeks"),e.startOf("week");case is.PREVIOUS_WEEK_ISO:case is.CURRENT_WEEK_ISO:case is.CURRENT_WEEK_ISO_SO_FAR:return e.subtract(1,"weeks"),e.startOf("isoWeek");case is.PREVIOUS_MONTH:case is.CURRENT_MONTH:case is.CURRENT_MONTH_SO_FAR:return e.subtract(1,"months"),e.startOf("month");case is.PREVIOUS_QUARTER:case is.CURRENT_QUARTER:case is.CURRENT_QUARTER_SO_FAR:return e.subtract(1,"quarters"),e.startOf("quarter");case is.PREVIOUS_HALF_YEAR:case is.CURRENT_HALF_YEAR:case is.CURRENT_HALF_YEAR_SO_FAR:return e.subtract(2,"quarters"),e.get("quarter")<3?e.startOf("year"):e.clone().set("quarter",3).startOf("quarter");case is.PREVIOUS_YEAR:case is.CURRENT_YEAR:case is.CURRENT_YEAR_SO_FAR:return e.subtract(1,"years"),e.startOf("year");case is.CURRENT_HOUR:return e.subtract(1,"hour"),e.startOf("hour")}},Ss=function(t,e,n){switch(t){case is.CURRENT_DAY_SO_FAR:return n.subtract(1,"days").valueOf();case is.CURRENT_WEEK_SO_FAR:case is.CURRENT_WEEK_ISO_SO_FAR:return n.subtract(1,"week").valueOf();case is.CURRENT_MONTH_SO_FAR:return n.subtract(1,"month").valueOf();case is.CURRENT_QUARTER_SO_FAR:return n.subtract(1,"quarter").valueOf();case is.CURRENT_HALF_YEAR_SO_FAR:return n.subtract(2,"quarters").valueOf();case is.CURRENT_YEAR_SO_FAR:return n.subtract(1,"year").valueOf();default:return vs(t,e)}},_s=function(t,e,n){var i={fixedWindow:null,realtimeWindowMs:null,aggregation:t.aggregation,tsOffset:t.tsOffset,timezone:t.timezone};if(t.fixedWindow){var r=void 0,a=void 0;if("previousInterval"===e)if(t.quickInterval){var o=Go(t.fixedWindow.startTimeMs),s=Go(t.fixedWindow.endTimeMs);t.timezone&&(o.tz(t.timezone),s.tz(t.timezone));var u=bs(t.quickInterval,o);r=u.valueOf(),a=Ss(t.quickInterval,u,s)}else{var c=t.fixedWindow.endTimeMs-t.fixedWindow.startTimeMs;r=(a=t.fixedWindow.startTimeMs)-c}else if("customInterval"===e)if(Pr(n)&&isFinite(n)&&n>0){c=t.fixedWindow.endTimeMs-t.fixedWindow.startTimeMs;r=(a=t.fixedWindow.endTimeMs-Math.round(n))-c}else a=t.fixedWindow.endTimeMs,r=t.fixedWindow.startTimeMs;else{c=t.fixedWindow.endTimeMs-t.fixedWindow.startTimeMs;r=(a=Go(t.fixedWindow.endTimeMs).subtract(1,e).valueOf())-c}i.startTs=r,i.fixedWindow={startTimeMs:i.startTs,endTimeMs:a}}return i},As=new Array({name:"timeinterval.seconds-interval",translateParams:{seconds:1},value:qo},{name:"timeinterval.seconds-interval",translateParams:{seconds:5},value:5e3},{name:"timeinterval.seconds-interval",translateParams:{seconds:10},value:1e4},{name:"timeinterval.seconds-interval",translateParams:{seconds:15},value:15e3},{name:"timeinterval.seconds-interval",translateParams:{seconds:30},value:3e4},{name:"timeinterval.minutes-interval",translateParams:{minutes:1},value:zo},{name:"timeinterval.minutes-interval",translateParams:{minutes:2},value:12e4},{name:"timeinterval.minutes-interval",translateParams:{minutes:5},value:3e5},{name:"timeinterval.minutes-interval",translateParams:{minutes:10},value:6e5},{name:"timeinterval.minutes-interval",translateParams:{minutes:15},value:9e5},{name:"timeinterval.minutes-interval",translateParams:{minutes:30},value:18e5},{name:"timeinterval.hours-interval",translateParams:{hours:1},value:Qo},{name:"timeinterval.hours-interval",translateParams:{hours:2},value:2*Qo},{name:"timeinterval.hours-interval",translateParams:{hours:5},value:5*Qo},{name:"timeinterval.hours-interval",translateParams:{hours:10},value:10*Qo},{name:"timeinterval.hours-interval",translateParams:{hours:12},value:12*Qo},{name:"timeinterval.days-interval",translateParams:{days:1},value:Jo},{name:"timeinterval.days-interval",translateParams:{days:7},value:7*Jo},{name:"timeinterval.type.week",translateParams:{},value:ro.WEEK},{name:"timeinterval.type.week-iso",translateParams:{},value:ro.WEEK_ISO},{name:"timeinterval.days-interval",translateParams:{days:30},value:30*Jo},{name:"timeinterval.type.month",translateParams:{},value:ro.MONTH},{name:"timeinterval.type.quarter",translateParams:{},value:ro.QUARTER});!function(t){t.SECONDS="SECONDS",t.MINUTES="MINUTES",t.HOURS="HOURS",t.DAYS="DAYS"}(as||(as={})),function(t){t.MILLISECONDS="MILLISECONDS"}(os||(os={}));var ws,Is=new Map([[os.MILLISECONDS,"timeunit.milliseconds"],[as.SECONDS,"timeunit.seconds"],[as.MINUTES,"timeunit.minutes"],[as.HOURS,"timeunit.hours"],[as.DAYS,"timeunit.days"]]),Ds=null,Rs=null,Ns=function(){return Ds||(Ds=_a.exports.tz.names().map((function(t){var e=_a.exports.tz(t);return{id:t,name:t.replace(/_/g," "),offset:"UTC".concat(e.format("Z")),nOffset:e.utcOffset(),abbr:e.zoneAbbr()}}))),Ds},Os=function(){return Rs||(Rs=_a.exports.tz.guess()),Rs},Cs=function(t,e,n){var i=Ns(),r=t?i.find((function(e){return e.id===t})):null;if(!r)if(n){var a=Os();r=i.find((function(t){return t.id===a}))}else e&&(r=i.find((function(t){return t.id===e})));return r},Ms=function(t,e){return e?Go(t).tz(e):Go(t)},ks=function(t,e,n,i){if("number"==typeof n)return Math.ceil(e/n);for(var r=Ms(t,i),a=Ms(t+e,i),o=Ls(r,n),s=Us(r,n),u=0;o.isBefore(a);)u++,s.add(1,"milliseconds"),o=Ls(s,n),s=Us(s,n);return u},Ls=function(t,e){switch(e){case ro.WEEK:return t.clone().startOf("week");case ro.WEEK_ISO:return t.clone().startOf("isoWeek");case ro.MONTH:return t.clone().startOf("month");case ro.QUARTER:return t.clone().startOf("quarter")}},Us=function(t,e){switch(e){case ro.WEEK:return t.clone().endOf("week");case ro.WEEK_ISO:return t.clone().endOf("isoWeek");case ro.MONTH:return t.clone().endOf("month");case ro.QUARTER:return t.clone().endOf("quarter")}},Ps=function(t,e,n,i){return(i||t.aggregation.type)===es.NONE?[n,n]:xs(t.startTs,e,t.aggregation.interval,t.tsOffset,t.timezone,n)},xs=function(t,e,n,i,r,a){var o,s;if("number"==typeof n){var u=t+i;s=(o=u+Math.floor((a-u)/n)*n)+n}else{var c=Ms(a,r),l=Ls(c,n),p=Ms(t,r);p.isAfter(l)&&(l=p);var d=Us(c,n).add(1,"milliseconds");o=l.valueOf()+i,s=d.valueOf()+i}return[o,s=Math.min(s,e)]};!function(t){t.timeseries="timeseries",t.latest="latest",t.rpc="rpc",t.alarm="alarm",t.static="static"}(ws||(ws={}));var Fs,Ws,Vs=new Map([[ws.timeseries,{name:"widget.timeseries",icon:"timeline",configHelpLinkId:"widgetsConfigTimeseries",template:{fullFqn:"system.time_series_chart"}}],[ws.latest,{name:"widget.latest",icon:"track_changes",configHelpLinkId:"widgetsConfigLatest",template:{fullFqn:"system.cards.attributes_card"}}],[ws.rpc,{name:"widget.rpc",icon:"mdi:developer-board",configHelpLinkId:"widgetsConfigRpc",template:{fullFqn:"system.gpio_widgets.basic_gpio_control"}}],[ws.alarm,{name:"widget.alarm",icon:"error",configHelpLinkId:"widgetsConfigAlarm",template:{fullFqn:"system.alarm_widgets.alarms_table"}}],[ws.static,{name:"widget.static",icon:"font_download",configHelpLinkId:"widgetsConfigStatic",template:{fullFqn:"system.cards.html_card"}}]]);!function(t){t.ALL="ALL",t.ACTUAL="ACTUAL",t.DEPRECATED="DEPRECATED"}(Fs||(Fs={})),function(t){t.column="column",t.row="row"}(Ws||(Ws={}));var js,Ys=new Map([[Ws.column,"direction.column"],[Ws.row,"direction.row"]]);!function(t){t.top="top",t.bottom="bottom",t.left="left",t.right="right"}(js||(js={}));var Hs,Bs=Object.keys(js),Ks=new Map([[js.top,"position.top"],[js.bottom,"position.bottom"],[js.left,"position.left"],[js.right,"position.right"]]);!function(t){t.PREVIOUS_VALUE="PREVIOUS_VALUE",t.DELTA_ABSOLUTE="DELTA_ABSOLUTE",t.DELTA_PERCENT="DELTA_PERCENT"}(Hs||(Hs={}));var Gs,qs,zs=new Map([[Hs.PREVIOUS_VALUE,"datakey.delta-calculation-result-previous-value"],[Hs.DELTA_ABSOLUTE,"datakey.delta-calculation-result-delta-absolute"],[Hs.DELTA_PERCENT,"datakey.delta-calculation-result-delta-percent"]]),Qs=new Map([[es.MIN,"datakey.aggregation-type-min-hint"],[es.MAX,"datakey.aggregation-type-max-hint"],[es.AVG,"datakey.aggregation-type-avg-hint"],[es.SUM,"datakey.aggregation-type-sum-hint"],[es.COUNT,"datakey.aggregation-type-count-hint"],[es.NONE,"datakey.aggregation-type-none-hint"]]);!function(t){t.general="general",t.advanced="advanced"}(Gs||(Gs={})),function(t){t.function="function",t.device="device",t.entity="entity",t.entityCount="entityCount",t.alarmCount="alarmCount"}(qs||(qs={}));var Js,Xs=new Map([[qs.function,"function.function"],[qs.device,"device.device"],[qs.entity,"entity.entity"],[qs.entityCount,"entity.entities-count"],[qs.alarmCount,"entity.alarms-count"]]);!function(t){t.device="device",t.entity="entity"}(Js||(Js={}));var $s,Zs,tu=function(t){return!!t&&!!t.type&&(t.type===Js.device&&!!t.deviceId||t.type===Js.entity&&!!t.entityAliasId)},eu=function(t){if(t){var e=t.find((function(t){var e=t.dataKeys&&t.dataKeys.find((function(t){return(null==t?void 0:t.type)===Va.timeseries&&(null==t?void 0:t.aggregationType)&&t.aggregationType!==es.NONE}));return!!e}));if(e)return!0}return!1};!function(t){t.openDashboardState="openDashboardState",t.updateDashboardState="updateDashboardState",t.openDashboard="openDashboard",t.custom="custom",t.customPretty="customPretty",t.mobileAction="mobileAction",t.openURL="openURL"}($s||($s={})),function(t){t.takePictureFromGallery="takePictureFromGallery",t.takePhoto="takePhoto",t.mapDirection="mapDirection",t.mapLocation="mapLocation",t.scanQrCode="scanQrCode",t.makePhoneCall="makePhoneCall",t.getLocation="getLocation",t.takeScreenshot="takeScreenshot"}(Zs||(Zs={}));var nu,iu=Object.keys($s),ru=new Map([[$s.openDashboardState,"widget-action.open-dashboard-state"],[$s.updateDashboardState,"widget-action.update-dashboard-state"],[$s.openDashboard,"widget-action.open-dashboard"],[$s.custom,"widget-action.custom"],[$s.customPretty,"widget-action.custom-pretty"],[$s.mobileAction,"widget-action.mobile-action"],[$s.openURL,"widget-action.open-URL"]]),au=new Map([[Zs.takePictureFromGallery,"widget-action.mobile.take-picture-from-gallery"],[Zs.takePhoto,"widget-action.mobile.take-photo"],[Zs.mapDirection,"widget-action.mobile.map-direction"],[Zs.mapLocation,"widget-action.mobile.map-location"],[Zs.scanQrCode,"widget-action.mobile.scan-qr-code"],[Zs.makePhoneCall,"widget-action.mobile.make-phone-call"],[Zs.getLocation,"widget-action.mobile.get-location"],[Zs.takeScreenshot,"widget-action.mobile.take-screenshot"]]),ou=function(t){return"comparisonSettings"in t};function su(t){return su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(t)}!function(t){t.basic="basic",t.advanced="advanced"}(nu||(nu={}));var uu=/^\s+/,cu=/\s+$/;function lu(t,e){if(e=e||{},(t=t||"")instanceof lu)return t;if(!(this instanceof lu))return new lu(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,i=null,r=null,a=null,o=!1,s=!1;"string"==typeof t&&(t=function(t){t=t.replace(uu,"").replace(cu,"").toLowerCase();var e,n=!1;if(Du[t])t=Du[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=Bu.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=Bu.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=Bu.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=Bu.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=Bu.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=Bu.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=Bu.hex8.exec(t))return{r:Mu(e[1]),g:Mu(e[2]),b:Mu(e[3]),a:Pu(e[4]),format:n?"name":"hex8"};if(e=Bu.hex6.exec(t))return{r:Mu(e[1]),g:Mu(e[2]),b:Mu(e[3]),format:n?"name":"hex"};if(e=Bu.hex4.exec(t))return{r:Mu(e[1]+""+e[1]),g:Mu(e[2]+""+e[2]),b:Mu(e[3]+""+e[3]),a:Pu(e[4]+""+e[4]),format:n?"name":"hex8"};if(e=Bu.hex3.exec(t))return{r:Mu(e[1]+""+e[1]),g:Mu(e[2]+""+e[2]),b:Mu(e[3]+""+e[3]),format:n?"name":"hex"};return!1}(t));"object"==su(t)&&(Ku(t.r)&&Ku(t.g)&&Ku(t.b)?(u=t.r,c=t.g,l=t.b,e={r:255*Ou(u,255),g:255*Ou(c,255),b:255*Ou(l,255)},o=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):Ku(t.h)&&Ku(t.s)&&Ku(t.v)?(i=Lu(t.s),r=Lu(t.v),e=function(t,e,n){t=6*Ou(t,360),e=Ou(e,100),n=Ou(n,100);var i=Math.floor(t),r=t-i,a=n*(1-e),o=n*(1-r*e),s=n*(1-(1-r)*e),u=i%6,c=[n,o,a,a,s,n][u],l=[s,n,n,o,a,a][u],p=[a,a,s,n,n,o][u];return{r:255*c,g:255*l,b:255*p}}(t.h,i,r),o=!0,s="hsv"):Ku(t.h)&&Ku(t.s)&&Ku(t.l)&&(i=Lu(t.s),a=Lu(t.l),e=function(t,e,n){var i,r,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=Ou(t,360),e=Ou(e,100),n=Ou(n,100),0===e)i=r=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;i=o(u,s,t+1/3),r=o(u,s,t),a=o(u,s,t-1/3)}return{r:255*i,g:255*r,b:255*a}}(t.h,i,a),o=!0,s="hsl"),t.hasOwnProperty("a")&&(n=t.a));var u,c,l;return n=Nu(n),{ok:o,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function pu(t,e,n){t=Ou(t,255),e=Ou(e,255),n=Ou(n,255);var i,r,a=Math.max(t,e,n),o=Math.min(t,e,n),s=(a+o)/2;if(a==o)i=r=0;else{var u=a-o;switch(r=s>.5?u/(2-a-o):u/(a+o),a){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,l:s}}function du(t,e,n){t=Ou(t,255),e=Ou(e,255),n=Ou(n,255);var i,r,a=Math.max(t,e,n),o=Math.min(t,e,n),s=a,u=a-o;if(r=0===a?0:u/a,a==o)i=0;else{switch(a){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,v:s}}function fu(t,e,n,i){var r=[ku(Math.round(t).toString(16)),ku(Math.round(e).toString(16)),ku(Math.round(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function hu(t,e,n,i){return[ku(Uu(i)),ku(Math.round(t).toString(16)),ku(Math.round(e).toString(16)),ku(Math.round(n).toString(16))].join("")}function yu(t,e){e=0===e?0:e||10;var n=lu(t).toHsl();return n.s-=e/100,n.s=Cu(n.s),lu(n)}function mu(t,e){e=0===e?0:e||10;var n=lu(t).toHsl();return n.s+=e/100,n.s=Cu(n.s),lu(n)}function gu(t){return lu(t).desaturate(100)}function vu(t,e){e=0===e?0:e||10;var n=lu(t).toHsl();return n.l+=e/100,n.l=Cu(n.l),lu(n)}function Tu(t,e){e=0===e?0:e||10;var n=lu(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),lu(n)}function Eu(t,e){e=0===e?0:e||10;var n=lu(t).toHsl();return n.l-=e/100,n.l=Cu(n.l),lu(n)}function bu(t,e){var n=lu(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,lu(n)}function Su(t){var e=lu(t).toHsl();return e.h=(e.h+180)%360,lu(e)}function _u(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=lu(t).toHsl(),i=[lu(t)],r=360/e,a=1;a<e;a++)i.push(lu({h:(n.h+a*r)%360,s:n.s,l:n.l}));return i}function Au(t){var e=lu(t).toHsl(),n=e.h;return[lu(t),lu({h:(n+72)%360,s:e.s,l:e.l}),lu({h:(n+216)%360,s:e.s,l:e.l})]}function wu(t,e,n){e=e||6,n=n||30;var i=lu(t).toHsl(),r=360/n,a=[lu(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,a.push(lu(i));return a}function Iu(t,e){e=e||6;for(var n=lu(t).toHsv(),i=n.h,r=n.s,a=n.v,o=[],s=1/e;e--;)o.push(lu({h:i,s:r,v:a})),a=(a+s)%1;return o}lu.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,i=this.toRgb();return t=i.r/255,e=i.g/255,n=i.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=Nu(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=du(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=du(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),i=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=pu(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=pu(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),i=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return fu(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,i,r){var a=[ku(Math.round(t).toString(16)),ku(Math.round(e).toString(16)),ku(Math.round(n).toString(16)),ku(Uu(i))];if(r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Ou(this._r,255))+"%",g:Math.round(100*Ou(this._g,255))+"%",b:Math.round(100*Ou(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Ou(this._r,255))+"%, "+Math.round(100*Ou(this._g,255))+"%, "+Math.round(100*Ou(this._b,255))+"%)":"rgba("+Math.round(100*Ou(this._r,255))+"%, "+Math.round(100*Ou(this._g,255))+"%, "+Math.round(100*Ou(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Ru[fu(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+hu(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=lu(t);n="#"+hu(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return e||!i||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return lu(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(vu,arguments)},brighten:function(){return this._applyModification(Tu,arguments)},darken:function(){return this._applyModification(Eu,arguments)},desaturate:function(){return this._applyModification(yu,arguments)},saturate:function(){return this._applyModification(mu,arguments)},greyscale:function(){return this._applyModification(gu,arguments)},spin:function(){return this._applyModification(bu,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(wu,arguments)},complement:function(){return this._applyCombination(Su,arguments)},monochromatic:function(){return this._applyCombination(Iu,arguments)},splitcomplement:function(){return this._applyCombination(Au,arguments)},triad:function(){return this._applyCombination(_u,[3])},tetrad:function(){return this._applyCombination(_u,[4])}},lu.fromRatio=function(t,e){if("object"==su(t)){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:Lu(t[i]));t=n}return lu(t,e)},lu.equals=function(t,e){return!(!t||!e)&&lu(t).toRgbString()==lu(e).toRgbString()},lu.random=function(){return lu.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},lu.mix=function(t,e,n){n=0===n?0:n||50;var i=lu(t).toRgb(),r=lu(e).toRgb(),a=n/100;return lu({r:(r.r-i.r)*a+i.r,g:(r.g-i.g)*a+i.g,b:(r.b-i.b)*a+i.b,a:(r.a-i.a)*a+i.a})},lu.readability=function(t,e){var n=lu(t),i=lu(e);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)},lu.isReadable=function(t,e,n){var i,r,a=lu.readability(t,e);switch(r=!1,(i=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n)).level+i.size){case"AAsmall":case"AAAlarge":r=a>=4.5;break;case"AAlarge":r=a>=3;break;case"AAAsmall":r=a>=7}return r},lu.mostReadable=function(t,e,n){var i,r,a,o,s=null,u=0;r=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var c=0;c<e.length;c++)(i=lu.readability(t,e[c]))>u&&(u=i,s=lu(e[c]));return lu.isReadable(t,s,{level:a,size:o})||!r?s:(n.includeFallbackColors=!1,lu.mostReadable(t,["#fff","#000"],n))};var Du=lu.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ru=lu.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(Du);function Nu(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Ou(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Cu(t){return Math.min(1,Math.max(0,t))}function Mu(t){return parseInt(t,16)}function ku(t){return 1==t.length?"0"+t:""+t}function Lu(t){return t<=1&&(t=100*t+"%"),t}function Uu(t){return Math.round(255*parseFloat(t)).toString(16)}function Pu(t){return Mu(t)/255}var xu,Fu,Wu,Vu,ju,Yu,Hu,Bu=(Fu="[\\s|\\(]+("+(xu="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+xu+")[,|\\s]+("+xu+")\\s*\\)?",Wu="[\\s|\\(]+("+xu+")[,|\\s]+("+xu+")[,|\\s]+("+xu+")[,|\\s]+("+xu+")\\s*\\)?",{CSS_UNIT:new RegExp(xu),rgb:new RegExp("rgb"+Fu),rgba:new RegExp("rgba"+Wu),hsl:new RegExp("hsl"+Fu),hsla:new RegExp("hsla"+Wu),hsv:new RegExp("hsv"+Fu),hsva:new RegExp("hsva"+Wu),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Ku(t){return!!Bu.CSS_UNIT.exec(t)}var Gu,qu,zu={red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},"deep-purple":{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},"light-blue":{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},"light-green":{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},"deep-orange":{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#ffffff",A200:"#000000",A400:"#303030",A700:"#616161"},"blue-grey":{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64"}},Qu=new Array,Ju=["blue","green","red","amber","blue-grey","purple","light-green","indigo","pink","yellow","light-blue","orange","deep-purple","lime","teal","brown","cyan","deep-orange","grey"],Xu=["500","A700","600","700","800","900","300","400","A200","A400"];try{for(var $u=ve(Object.keys(zu)),Zu=$u.next();!Zu.done;Zu=$u.next()){var tc=Zu.value,ec=zu[tc];try{for(var nc=(Yu=void 0,ve(Object.keys(ec))),ic=nc.next();!ic.done;ic=nc.next()){var rc=ic.value;if(Xu.indexOf(rc)>-1){var ac=lu(ec[rc]),oc=ac.isDark(),sc={value:ac.toHexString(),group:tc,label:rc,isDark:oc};Qu.push(sc)}}}catch(t){Yu={error:t}}finally{try{ic&&!ic.done&&(Hu=nc.return)&&Hu.call(nc)}finally{if(Yu)throw Yu.error}}}}catch(t){Vu={error:t}}finally{try{Zu&&!Zu.done&&(ju=$u.return)&&ju.call($u)}finally{if(Vu)throw Vu.error}}Qu.sort((function(t,e){var n=Xu.indexOf(t.label)-Xu.indexOf(e.label);0===n&&(n=Ju.indexOf(t.group)-Ju.indexOf(e.group));return n}));var uc=new RegExp("{".concat(Ir,":[^{}]+}"),"g"),cc={Sin:"return Math.round(1000*Math.sin(time/5000));",Cos:"return Math.round(1000*Math.cos(time/5000));",Random:"var value = prevValue + Math.random() * 100 - 50;\nvar multiplier = Math.pow(10, 2 || 0);\nvar value = Math.round(value * multiplier) / multiplier;\nif (value < -1000) {\n\tvalue = -1000;\n} else if (value > 1000) {\n\tvalue = 1000;\n}\nreturn value;"},lc=[];try{for(var pc=ve(Object.keys(cc)),dc=pc.next();!dc.done;dc=pc.next()){var fc=dc.value;lc.push(fc)}}catch(t){Gu={error:t}}finally{try{dc&&!dc.done&&(qu=pc.return)&&qu.call(pc)}finally{if(Gu)throw Gu.error}}var hc,yc=[Ka.createdTime.keyName,Ka.originator.keyName,Ka.type.keyName,Ka.severity.keyName,Ka.status.keyName],mc=function(){function t(t,e){this.window=t,this.translate=e,this.iframeMode=!1,this.widgetEditMode=!1,this.defaultDataKey={name:"f(x)",type:Va.function,label:"Sin",color:this.getMaterialColor(0),funcBody:this.getPredefinedFunctionBody("Sin"),settings:{},_hash:Math.random()},this.defaultDatasource={type:qs.function,name:qs.function,dataKeys:[Qr(this.defaultDataKey)]},this.defaultAlarmDataKeys=[]}return t.prototype.getPredefinedFunctionsList=function(){return lc},t.prototype.getPredefinedFunctionBody=function(t){return cc[t]},t.prototype.initDefaultAlarmDataKeys=function(){for(var t=0;t<yc.length;t++){var e=yc[t],n={name:e,type:Va.alarm,label:this.translate.instant(Ka[e].name),color:this.getMaterialColor(t),settings:{},_hash:Math.random()};this.defaultAlarmDataKeys.push(n)}},t.prototype.getDefaultAlarmDataKeys=function(){return this.defaultAlarmDataKeys.length||this.initDefaultAlarmDataKeys(),Qr(this.defaultAlarmDataKeys)},t.prototype.defaultAlarmFieldContent=function(t,e){if(Or(e)){var n=Ka[t.name];if(n){if(n.time)return e?Sa(e).format("YYYY-MM-DD HH:mm:ss"):"";if(n===Ka.severity)return this.translate.instant(Pa.get(e));if(n===Ka.status)return xa.get(e)?this.translate.instant(xa.get(e)):e;if(n===Ka.originatorType)return this.translate.instant(dr.get(e).type);if(n.value===Ka.assignee.value)return""}return e}return""},t.prototype.processWidgetException=function(t){var e,n=this.parseException(t,-6);if((null===(e=n.message)||void 0===e?void 0:e.startsWith("NG0"))&&(n.message="".concat(this.translate.instant("widget.widget-template-error"),"<br/>\n                       <br/><i>").concat(this.translate.instant("dialog.error-message-title"),"</i><br/><br/>").concat(n.message)),this.widgetEditMode){var i={type:"widgetException",data:n};this.window.parent.postMessage(JSON.stringify(i),"*")}return n},t.prototype.parseException=function(t,e){var n={};if(t)if("string"==typeof t)n.message=t;else if(t instanceof String)n.message=t.toString();else if(t.name?n.name=t.name:n.name="UnknownError",t.message&&(n.message=t.message),t.lineNumber)n.lineNumber=t.lineNumber,t.columnNumber&&(n.columnNumber=t.columnNumber);else if(t.stack){var i=/(.*<anonymous>):(\d*)(:)?(\d*)?/g.exec(t.stack);null!=i&&i.length>=3&&(Rr(e)&&(e=-2),n.lineNumber=Number(i[2])+e,i.length>=5&&(n.columnNumber=Number(i[4])))}return n},t.prototype.customTranslation=function(t,e){var n,i;if(t&&xr(t)){if(t.includes("{".concat(Ir))){var r=t.match(uc),a=t;try{for(var o=ve(r),s=o.next();!s.done;s=o.next()){var u=s.value,c=u.substring(6,u.length-1);a=a.replace(u,this.doTranslate(c,u))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}return this.doTranslate(t,e,wr)}return t},t.prototype.doTranslate=function(t,e,n){var i;i=n?n+t:t;var r=this.translate.instant(i);return r!==i?r+"":e},t.prototype.guid=function(){return ta()},t.prototype.validateAndUpdateDatasources=function(t){return t||(t=[]),t.forEach((function(t){t.deviceAliasId&&(t.type=qs.entity,t.entityAliasId=t.deviceAliasId,delete t.deviceAliasId),t.deviceName&&(t.entityName=t.deviceName,delete t.deviceName),t.type===qs.entity&&t.entityId&&(t.name=t.entityName),t.dataKeys||(t.dataKeys=[]),t.dataKeys.forEach((function(t){Rr(t.label)&&(t.label=t.name)}))})),t},t.prototype.getMaterialColor=function(t){var e=t%Qu.length;return Qu[e].value},t.prototype.createKey=function(t,e,n){var i;if(void 0===n&&(n=-1),e===Va.alarm&&!t.label){var r=Ka[t.name];r&&(i=this.translate.instant(r.name))}i||(i=t.label||t.name);var a={name:t.name,type:e,label:i,funcBody:t.funcBody,settings:{},_hash:Math.random()};return t.units&&(a.units=t.units),Or(t.decimals)&&(a.decimals=t.decimals),t.color?a.color=t.color:n>-1&&(a.color=this.getMaterialColor(n)),t.postFuncBody&&t.postFuncBody.length&&(a.usePostProcessing=!0,a.postFuncBody=t.postFuncBody),a},t.prototype.createLabelFromDatasource=function(t,e){return ia(t,e)},t.prototype.generateColors=function(t){var e=this,n=0;t.forEach((function(t){t.dataKeys.forEach((function(t){t.color||(t.color=e.getMaterialColor(n)),n++}))}))},t.prototype.stringToHslColor=function(t,e,n){if(t&&t.length){var i=qr(t)%360;return"hsl(".concat(i,", ").concat(e,"%, ").concat(n,"%)")}},t.prototype.currentPerfTime=function(){return this.window.performance&&this.window.performance.now?this.window.performance.now():Date.now()},t.prototype.getQueryParam=function(t,e){void 0===e&&(e=this.window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},t.prototype.removeQueryParams=function(t){var e,n,i=this.window.location.search;try{for(var r=ve(t),a=r.next();!a.done;a=r.next()){var o=a.value;i=this.updateUrlQueryString(i,o,null)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}var s=[pa(),this.window.location.pathname].join("");this.window.history.replaceState({},"",s+i)},t.prototype.updateQueryParam=function(t,e){var n=[pa(),this.window.location.pathname].join(""),i=this.window.location.search,r=this.updateUrlQueryString(i,t,e);this.window.history.replaceState({},"",n+r)},t.prototype.updateUrlQueryString=function(t,e,n){var i="",r="";if(null!==n&&(i=e+"="+n),t){var a=new RegExp("([?&])"+e+"[^&]*");null!==t.match(a)?(i&&(i="$1"+i),(r=t.replace(a,i)).startsWith("&")&&(r="?"+r.substring(1))):i&&(r=t+"&"+i)}else i&&(r="?"+i);return r},t.prototype.baseUrl=function(){return pa()},t.prototype.deepClone=function(t,e){return Qr(t,e)},t.prototype.isUndefined=function(t){return Rr(t)},t.prototype.isDefined=function(t){return Or(t)},t.prototype.defaultValue=function(t,e){return Cr(t)?t:e},t.prototype.getEntityIdFromDatasource=function(t){return{id:t.entityId,entityType:t.entityType}},t.prototype.objToBase64=function(t){return Wr(t)},t.prototype.base64toString=function(t){return Vr(t)},t.prototype.objToBase64URI=function(t){return jr(t)},t.prototype.base64toObj=function(t){return Yr(t)},t=fe([ae(),he(0,se(Zi.Window)),he(1,se(Zi.TranslateService)),ye("design:paramtypes",[Window,Ea])],t)}(),gc="TB-",vc=function(){function t(){}return t.loadInitialState=function(){return Object.keys(localStorage).reduce((function(t,e){if(e.includes(gc)){var n=e.replace(gc,"").toLowerCase().split(".").map((function(t){return t.split("-").map((function(t,e){return 0===e?t:t.charAt(0).toUpperCase()+t.slice(1)})).join("")})),i=t;n.forEach((function(t,r){r!==n.length-1?(i[t]=i[t]||{},i=i[t]):i[t]=JSON.parse(localStorage.getItem(e))}))}return t}),{})},t.prototype.setItem=function(t,e){localStorage.setItem("".concat(gc).concat(t),JSON.stringify(e))},t.prototype.getItem=function(t){return JSON.parse(localStorage.getItem("".concat(gc).concat(t)))},t.prototype.removeItem=function(t){localStorage.removeItem("".concat(gc).concat(t))},t=fe([ae(),ye("design:paramtypes",[])],t)}(),Tc=function(){function t(t,e,n){this.http=t,this.userService=e,this.utils=n,this.twoFactorAuthProviders=null,this.refreshTokenSubject=null,this.jwtHelper=new $i,this.authenticatedListeners=[],this.isAuthenticated=!1}var e;return e=t,t._storeGet=function(t){return e.localStorage.getItem(t)},t.isTokenValid=function(t){var n=e._storeGet(t+"_expiration");return n&&Number(n)>(new Date).valueOf()+2e3},t.isJwtTokenValid=function(){return e.isTokenValid("jwt_token")},t.clearTokenData=function(){e.localStorage.removeItem("jwt_token"),e.localStorage.removeItem("jwt_token_expiration"),e.localStorage.removeItem("refresh_token"),e.localStorage.removeItem("refresh_token_expiration")},t.getJwtToken=function(){return e._storeGet("jwt_token")},t.prototype.login=function(t){var e=this;return this.http.post("/api/auth/login",t,ir()).pipe(Gn((function(t){return e.setUserFromJwtToken(t.token,t.refreshToken,!0).pipe(xn((function(){return Object.assign(t,e.userInfo)})))})))},t.prototype.checkTwoFaVerificationCode=function(t,e){var n=this;return this.http.post("/api/auth/2fa/verification/check?providerType=".concat(t,"&verificationCode=").concat(e),null,ir(!1,!0)).pipe(pi((function(t){n.setUserFromJwtToken(t.token,t.refreshToken,!0)})))},t.prototype.publicLogin=function(t){var e={publicId:t};return this.http.post("/api/auth/login/public",e,ir())},t.prototype.sendResetPasswordLink=function(t){return this.http.post("/api/noauth/resetPasswordByEmail",{email:t},ir())},t.prototype.activate=function(t,e,n){var i=this;return this.http.post("/api/noauth/activate?sendActivationMail=".concat(n),{activateToken:t,password:e},ir()).pipe(pi((function(t){i.setUserFromJwtToken(t.token,t.refreshToken,!0)})))},t.prototype.resetPassword=function(t,e){var n=this;return this.http.post("/api/noauth/resetPassword",{resetToken:t,password:e},ir()).pipe(pi((function(t){n.setUserFromJwtToken(t.token,t.refreshToken,!0)})))},t.prototype.changePassword=function(t,e,n){var i=this;return this.http.post("/api/auth/changePassword",{currentPassword:t,newPassword:e},nr(n)).pipe(pi((function(t){i.setUserFromJwtToken(t.token,t.refreshToken,!1)})))},t.prototype.getUserPasswordPolicy=function(){return this.http.get("/api/noauth/userPasswordPolicy",ir())},t.prototype.activateByEmailCode=function(t){return this.http.post("/api/noauth/activateByEmailCode?emailCode=".concat(t),null,ir())},t.prototype.resendEmailActivation=function(t){var e=encodeURIComponent(t);return this.http.post("/api/noauth/resendEmailActivation?email=".concat(e),null,ir())},t.prototype.loginAsUser=function(t){var e=this;return this.http.get("/api/user/".concat(t,"/token"),ir()).pipe(pi((function(t){e.setUserFromJwtToken(t.token,t.refreshToken,!0)})))},t.prototype.logout=function(){var t=this;this.http.post("/api/auth/logout",null,ir(!0,!0)).pipe(Gn((function(){return t.clearJwtToken(),Un({status:200,message:"退出登录成功"})})),Xn((function(){return t.clearJwtToken(),Un({status:200,message:"退出登录成功"})})))},t.prototype.getAvailableTwoFaLoginProviders=function(){var t=this;return this.http.get("/api/auth/2fa/providers",ir()).pipe(Xn((function(){return Un([])})),pi((function(e){t.twoFactorAuthProviders=e})))},t.prototype.loadUser=function(t){var n=this,i=this.utils.getQueryParam("publicId"),r=this.utils.getQueryParam("accessToken"),a=this.utils.getQueryParam("refreshToken"),o=this.utils.getQueryParam("username"),s=this.utils.getQueryParam("password"),u=this.utils.getQueryParam("loginError");if(i)return this.publicLogin(i).pipe(Gn((function(t){return n.updateAndValidateTokens(t.token,t.refreshToken,!1),n.procceedJwtTokenValidate()})),Xn((function(t){throw n.utils.updateQueryParam("publicId",null),Error()})));if(r){var c=["accessToken"];a&&c.push("refreshToken"),this.utils.removeQueryParams(c);try{this.updateAndValidateToken(r,"jwt_token",!1),a?this.updateAndValidateToken(a,"refresh_token",!1):(e.localStorage.removeItem("refresh_token"),e.localStorage.removeItem("refresh_token_expiration"))}catch(t){return Pn(t)}return this.procceedJwtTokenValidate()}if(o&&s){this.utils.updateQueryParam("username",null),this.utils.updateQueryParam("password",null);var l={username:o,password:s};return this.http.post("/api/auth/login",l,ir()).pipe(Gn((function(t){return n.updateAndValidateTokens(t.token,t.refreshToken,!1),n.procceedJwtTokenValidate()})))}return u?(this.utils.updateQueryParam("loginError",null),Pn(Error())):this.procceedJwtTokenValidate(t)},t.prototype.procceedJwtTokenValidate=function(t){var n=this,i=new sn;return this.validateJwtToken(t).subscribe((function(){var t,r,a,o={},s=e._storeGet("jwt_token");o.authUser=n.jwtHelper.decodeToken(s),o.authUser&&o.authUser.scopes&&o.authUser.scopes.length?o.authUser.authority=ma[o.authUser.scopes[0]]:o.authUser&&(o.authUser.authority=ma.ANONYMOUS),(null===(t=o.authUser)||void 0===t?void 0:t.isPublic)&&(o.forceFullscreen=!0),(null===(r=o.authUser)||void 0===r?void 0:r.authority)===ma.PRE_VERIFICATION_TOKEN?(i.next(o),i.complete()):(null===(a=o.authUser)||void 0===a?void 0:a.userId)?n.userService.getUser(o.authUser.userId).subscribe((function(t){o.userDetails=t,n.userInfo=t,o.forceFullscreen=!1,i.next(o),i.complete()}),(function(t){i.error(t),n.logout()})):i.error(null)}),(function(t){i.error(t)})),i},t.prototype.refreshJwtToken=function(t){var n=this;void 0===t&&(t=!0);var i=this.refreshTokenSubject;if(null===this.refreshTokenSubject){this.refreshTokenSubject=new sn(1),i=this.refreshTokenSubject;var r=e._storeGet("refresh_token"),a=e.isTokenValid("refresh_token");if(this.setUserFromJwtToken(null,null,!1),a){var o={refreshToken:r};this.http.post("/api/auth/token",o,ir()).subscribe((function(e){t?n.setUserFromJwtToken(e.token,e.refreshToken,!1):n.updateAndValidateTokens(e.token,e.refreshToken,!0),n.refreshTokenSubject.next(e),n.refreshTokenSubject.complete(),n.refreshTokenSubject=null}),(function(){n.clearJwtToken(),n.refreshTokenSubject=null}))}else;}return i},t.prototype.notifyUnauthenticated=function(){this.isAuthenticated=!1,this.notifyAuthenticationChange()},t.prototype.notifyAuthenticated=function(t){this.isAuthenticated=!0,this.notifyAuthenticationChange()},t.prototype.notifyAuthenticationChange=function(){var t=this;this.authenticatedListeners.forEach((function(e){e(t.isAuthenticated)}))},t.prototype.listenAuthenticationChange=function(t){this.authenticatedListeners.find((function(e){return e===t}))||this.authenticatedListeners.push(t)},t.prototype.validateJwtToken=function(t){var n=new sn;return e.isTokenValid("jwt_token")?(n.next(),n.complete()):t?this.refreshJwtToken(!t).subscribe((function(){n.next(),n.complete()}),(function(t){n.error(t)})):(this.clearJwtToken(),n.error(null)),n},t.prototype.refreshTokenPending=function(){return null!==this.refreshTokenSubject},t.prototype.setUserFromJwtToken=function(t,n,i){var r=this,a=new sn;return t?(this.updateAndValidateTokens(t,n,!0),i?this.loadUser(!1).subscribe((function(t){r.notifyAuthenticated(t),a.next(!0),a.complete()}),(function(){r.notifyUnauthenticated(),a.next(!1),a.complete()})):this.loadUser(!1).subscribe((function(){a.next(!0),a.complete()}),(function(){a.next(!1),a.complete()}))):(e.clearTokenData(),i&&this.notifyUnauthenticated(),a.next(!1),a.complete()),a},t.prototype.updateAndValidateTokens=function(t,e,n){this.updateAndValidateToken(t,"jwt_token",n),this.updateAndValidateToken(e,"refresh_token",n)},t.prototype.parsePublicId=function(){var t=e.getJwtToken();if(t){var n=this.jwtHelper.decodeToken(t);if(n&&n.isPublic)return n.sub}return null},t.prototype.updateAndValidateToken=function(t,n,i){var r=!1,a=this.jwtHelper.decodeToken(t),o=null==a?void 0:a.iat,s=null==a?void 0:a.exp;if(o&&s){var u=s-o;if(u>0){var c=(new Date).valueOf()+1e3*u;e.localStorage.setItem(n,t),e.localStorage.setItem(n+"_expiration",""+c),r=!0}}!r&&i&&this.notifyUnauthenticated()},t.prototype.clearJwtToken=function(){this.setUserFromJwtToken(null,null,!0)},t.localStorage=new vc,t=e=fe([ae(),he(0,se(Zi.HttpClient)),he(1,se(Zi.UserService)),he(2,se(Zi.UtilsService)),ye("design:paramtypes",[Ci,ga,mc])],t)}(),Ec=function(){function t(t){this.http=t}return t.prototype.getAlarm=function(t,e){return this.http.get("/api/alarm/".concat(t),nr(e))},t.prototype.getAlarmInfo=function(t,e){return this.http.get("/api/alarm/info/".concat(t),nr(e))},t.prototype.saveAlarm=function(t,e){return this.http.post("/api/alarm",t,nr(e))},t.prototype.ackAlarm=function(t,e){return this.http.post("/api/alarm/".concat(t,"/ack"),null,nr(e))},t.prototype.clearAlarm=function(t,e){return this.http.post("/api/alarm/".concat(t,"/clear"),null,nr(e))},t.prototype.assignAlarm=function(t,e,n){return this.http.post("/api/alarm/".concat(t,"/assign/").concat(e),null,nr(n))},t.prototype.unassignAlarm=function(t,e){return this.http.delete("/api/alarm/".concat(t,"/assign"),nr(e))},t.prototype.deleteAlarm=function(t,e){return this.http.delete("/api/alarm/".concat(t),nr(e))},t.prototype.getAlarms=function(t,e){return this.http.get("/api/alarm".concat(t.toQuery()),nr(e))},t.prototype.getAlarmsV2=function(t,e){return this.http.get("/api/v2/alarm".concat(t.toQuery()),nr(e))},t.prototype.getAllAlarms=function(t,e){return this.http.get("/api/alarms".concat(t.toQuery()),nr(e))},t.prototype.getAllAlarmsV2=function(t,e){return this.http.get("/api/v2/alarms".concat(t.toQuery()),nr(e))},t.prototype.getHighestAlarmSeverity=function(t,e,n,i){var r="/api/alarm/highestSeverity/".concat(t.entityType,"/").concat(t.id);return e?r+="?searchStatus=".concat(e):n&&(r+="?status=".concat(n)),this.http.get(r,nr(i))},t.prototype.getAlarmTypes=function(t,e){return this.http.get("/api/alarm/types".concat(t.toQuery()),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),bc=function(){function t(t){this.http=t}return t.prototype.getTenantAssetInfos=function(t,e,n){return void 0===e&&(e=""),this.http.get("/api/tenant/assetInfos".concat(t.toQuery(),"&type=").concat(e),nr(n))},t.prototype.getTenantAssetInfosByAssetProfileId=function(t,e,n){return void 0===e&&(e=""),this.http.get("/api/tenant/assetInfos".concat(t.toQuery(),"&assetProfileId=").concat(e),nr(n))},t.prototype.getCustomerAssetInfos=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/customer/".concat(t,"/assetInfos").concat(e.toQuery(),"&type=").concat(n),nr(i))},t.prototype.getCustomerAssetInfosByAssetProfileId=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/customer/".concat(t,"/assetInfos").concat(e.toQuery(),"&assetProfileId=").concat(n),nr(i))},t.prototype.getAsset=function(t,e){return this.http.get("/api/asset/".concat(t),nr(e))},t.prototype.getAssets=function(t,e){return this.http.get("/api/assets?assetIds=".concat(t.join(",")),nr(e))},t.prototype.getAssetInfo=function(t,e){return this.http.get("/api/asset/info/".concat(t),nr(e))},t.prototype.saveAsset=function(t,e){return this.http.post("/api/asset",t,nr(e))},t.prototype.deleteAsset=function(t,e){return this.http.delete("/api/asset/".concat(t),nr(e))},t.prototype.getAssetTypes=function(t){return this.http.get("/api/asset/types",nr(t))},t.prototype.makeAssetPublic=function(t,e){return this.http.post("/api/customer/public/asset/".concat(t),null,nr(e))},t.prototype.assignAssetToCustomer=function(t,e,n){return this.http.post("/api/customer/".concat(t,"/asset/").concat(e),null,nr(n))},t.prototype.unassignAssetFromCustomer=function(t,e){return this.http.delete("/api/customer/asset/".concat(t),nr(e))},t.prototype.findByQuery=function(t,e){return this.http.post("/api/assets",t,nr(e))},t.prototype.findByName=function(t,e){return this.http.get("/api/tenant/assets?assetName=".concat(t),nr(e))},t.prototype.assignAssetToEdge=function(t,e,n){return this.http.post("/api/edge/".concat(t,"/asset/").concat(e),null,nr(n))},t.prototype.unassignAssetFromEdge=function(t,e,n){return this.http.delete("/api/edge/".concat(t,"/asset/").concat(e),nr(n))},t.prototype.getEdgeAssets=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/edge/".concat(t,"/assets").concat(e.toQuery(),"&type=").concat(n),nr(i))},t.prototype.bulkImportAssets=function(t,e){return this.http.post("/api/asset/bulk_import",t,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Sc=function(){function t(t){this.http=t}return t.prototype.getEntityAttributes=function(t,e,n,i){var r="/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/values/attributes");return e&&(r+="/".concat(e)),n&&n.length&&(r+="?keys=".concat(n.join(","))),this.http.get(r,nr(i))},t.prototype.deleteEntityAttributes=function(t,e,n,i){var r=n.map((function(t){return encodeURIComponent(t.key)})).join(",");return this.http.delete("/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/").concat(e)+"?keys=".concat(r),nr(i))},t.prototype.deleteEntityTimeseries=function(t,e,n,i,r,a,o,s){void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===o&&(o=!0);var u=e.map((function(t){return encodeURIComponent(t.key)})).join(","),c="/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/timeseries/delete?keys=").concat(u);return Cr(n)&&(c+="&deleteAllDataForKeys=".concat(n)),Cr(a)&&(c+="&rewriteLatestIfDeleted=".concat(a)),Cr(o)&&(c+="&deleteLatest=".concat(o)),Cr(i)&&(c+="&startTs=".concat(i)),Cr(r)&&(c+="&endTs=".concat(r)),this.http.delete(c,nr(s))},t.prototype.saveEntityAttributes=function(t,e,n,i){var r,a={},o=[];return n.forEach((function(t){Cr(t.value)?a[t.key]=t.value:o.push(t)})),r=o.length?this.deleteEntityAttributes(t,e,o,i):Un(null),zn([Object.keys(a).length?this.http.post("/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/").concat(e),a,nr(i)):Un(null),r])},t.prototype.saveEntityTimeseries=function(t,e,n,i){var r,a={},o=[];return n.forEach((function(t){Cr(t.value)?a[t.key]=t.value:o.push(t)})),r=o.length?this.deleteEntityTimeseries(t,o,!0,null,null,!1,!0,i):Un(null),zn([Object.keys(a).length?this.http.post("/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/timeseries/").concat(e),a,nr(i)):Un(null),r])},t.prototype.getEntityTimeseries=function(t,e,n,i,r,a,o,s,u,c){void 0===r&&(r=100),void 0===a&&(a=es.NONE),void 0===s&&(s=$a.DESC),void 0===u&&(u=!1);var l="/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/values/timeseries?keys=").concat(e.join(","),"&startTs=").concat(n,"&endTs=").concat(i);return Cr(r)&&(l+="&limit=".concat(r)),Cr(a)&&(l+="&agg=".concat(a)),Cr(o)&&(l+="&interval=".concat(o)),Cr(s)&&(l+="&orderBy=".concat(s)),Cr(u)&&(l+="&useStrictDataTypes=".concat(u)),this.http.get(l,nr(c))},t.prototype.getEntityTimeseriesLatest=function(t,e,n,i){void 0===n&&(n=!1);var r="/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/values/timeseries?useStrictDataTypes=").concat(n);return Cr(e)&&e.length&&(r+="&keys=".concat(e.join(","))),this.http.get(r,nr(i))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),_c=function(){function t(t){this.http=t}return t.prototype.getAuditLogs=function(t,e){return this.http.get("/api/audit/logs".concat(t.toQuery()),nr(e))},t.prototype.getAuditLogsByCustomerId=function(t,e,n){return this.http.get("/api/audit/logs/customer/".concat(t).concat(e.toQuery()),nr(n))},t.prototype.getAuditLogsByUserId=function(t,e,n){return this.http.get("/api/audit/logs/user/".concat(t).concat(e.toQuery()),nr(n))},t.prototype.getAuditLogsByEntityId=function(t,e,n){return this.http.get("/api/audit/logs/entity/".concat(t.entityType,"/").concat(t.id).concat(e.toQuery()),nr(n))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Ac=function(){function t(t){this.http=t}return t.prototype.getCustomers=function(t,e){return this.http.get("/api/customers".concat(t.toQuery()),nr(e))},t.prototype.getCustomer=function(t,e){return this.http.get("/api/customer/".concat(t),nr(e))},t.prototype.saveCustomer=function(t,e){return this.http.post("/api/customer",t,nr(e))},t.prototype.deleteCustomer=function(t,e){return this.http.delete("/api/customer/".concat(t),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),wc=function(){function t(t){this.http=t}return t.prototype.getDeviceInfosByQuery=function(t,e){return this.http.get("/api".concat(t.toQuery()),nr(e))},t.prototype.getTenantDeviceInfos=function(t,e,n){return void 0===e&&(e=""),this.http.get("/api/tenant/deviceInfos".concat(t.toQuery(),"&type=").concat(e),nr(n))},t.prototype.getTenantDeviceInfosByDeviceProfileId=function(t,e,n){return void 0===e&&(e=""),this.http.get("/api/tenant/deviceInfos".concat(t.toQuery(),"&deviceProfileId=").concat(e),nr(n))},t.prototype.getCustomerDeviceInfos=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/customer/".concat(t,"/deviceInfos").concat(e.toQuery(),"&type=").concat(n),nr(i))},t.prototype.getCustomerDeviceInfosByDeviceProfileId=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/customer/".concat(t,"/deviceInfos").concat(e.toQuery(),"&deviceProfileId=").concat(n),nr(i))},t.prototype.getDevice=function(t,e){return this.http.get("/api/device/".concat(t),nr(e))},t.prototype.getDevices=function(t,e){return this.http.get("/api/devices?deviceIds=".concat(t.join(",")),nr(e))},t.prototype.getDeviceInfo=function(t,e){return this.http.get("/api/device/info/".concat(t),nr(e))},t.prototype.saveDevice=function(t,e){return this.http.post("/api/device",t,nr(e))},t.prototype.saveDeviceWithCredentials=function(t,e,n){return this.http.post("/api/device-with-credentials",{device:t,credentials:e},nr(n))},t.prototype.deleteDevice=function(t,e){return this.http.delete("/api/device/".concat(t),nr(e))},t.prototype.getDeviceTypes=function(t){return this.http.get("/api/device/types",nr(t))},t.prototype.getDeviceCredentials=function(t,e,n){void 0===e&&(e=!1);var i="/api/device/".concat(t,"/credentials");if(e){var r=new sn,a=new XMLHttpRequest;a.open("GET",i,!1),a.setRequestHeader("Accept","application/json, text/plain, */*");var o=Tc.getJwtToken();if(o&&a.setRequestHeader("X-Authorization","Bearer "+o),a.send(null),200===a.status){var s=JSON.parse(a.responseText);r.next(s)}else r.error(null);return r.asObservable()}return this.http.get(i,nr(n))},t.prototype.saveDeviceCredentials=function(t,e){return this.http.post("/api/device/credentials",t,nr(e))},t.prototype.makeDevicePublic=function(t,e){return this.http.post("/api/customer/public/device/".concat(t),null,nr(e))},t.prototype.assignDeviceToCustomer=function(t,e,n){return this.http.post("/api/customer/".concat(t,"/device/").concat(e),null,nr(n))},t.prototype.unassignDeviceFromCustomer=function(t,e){return this.http.delete("/api/customer/device/".concat(t),nr(e))},t.prototype.sendOneWayRpcCommand=function(t,e,n){return this.http.post("/api/rpc/oneway/".concat(t),e,nr(n))},t.prototype.sendTwoWayRpcCommand=function(t,e,n){return this.http.post("/api/rpc/twoway/".concat(t),e,nr(n))},t.prototype.getPersistedRpc=function(t,e,n){return this.http.get("/api/rpc/persistent/".concat(t),nr(n))},t.prototype.deletePersistedRpc=function(t,e){return this.http.delete("/api/rpc/persistent/".concat(t),nr(e))},t.prototype.getPersistedRpcRequests=function(t,e,n,i){var r="/api/rpc/persistent/device/".concat(t).concat(e.toQuery());return n&&n.length&&(r+="&rpcStatus=".concat(n)),this.http.get(r,nr(i))},t.prototype.findByQuery=function(t,e){return this.http.post("/api/devices",t,nr(e))},t.prototype.findByName=function(t,e){return this.http.get("/api/tenant/devices?deviceName=".concat(t),nr(e))},t.prototype.claimDevice=function(t,e,n){return this.http.post("/api/customer/device/".concat(t,"/claim"),e,nr(n))},t.prototype.unclaimDevice=function(t,e){return this.http.delete("/api/customer/device/".concat(t,"/claim"),nr(e))},t.prototype.assignDeviceToEdge=function(t,e,n){return this.http.post("/api/edge/".concat(t,"/device/").concat(e),nr(n))},t.prototype.unassignDeviceFromEdge=function(t,e,n){return this.http.delete("/api/edge/".concat(t,"/device/").concat(e),nr(n))},t.prototype.getEdgeDevices=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/edge/".concat(t,"/devices").concat(e.toQuery(),"&type=").concat(n),nr(i))},t.prototype.bulkImportDevices=function(t,e){return this.http.post("/api/device/bulk_import",t,nr(e))},t.prototype.getDevicePublishTelemetryCommands=function(t,e){return this.http.get("/api/device-connectivity/".concat(t),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Ic=function(){function t(t){this.http=t}return t.prototype.saveRelation=function(t,e){return this.http.post("/api/relation",t,nr(e))},t.prototype.deleteRelation=function(t,e,n,i){return this.http.delete("/api/relation?fromId=".concat(t.id,"&fromType=").concat(t.entityType)+"&relationType=".concat(e,"&toId=").concat(n.id,"&toType=").concat(n.entityType),nr(i))},t.prototype.deleteRelations=function(t,e){return this.http.delete("/api/relations?entityId=".concat(t.id,"&entityType=").concat(t.entityType),nr(e))},t.prototype.getRelation=function(t,e,n,i){return this.http.get("/api/relation?fromId=".concat(t.id,"&fromType=").concat(t.entityType)+"&relationType=".concat(e,"&toId=").concat(n.id,"&toType=").concat(n.entityType),nr(i))},t.prototype.findByFrom=function(t,e){return this.http.get("/api/relations?fromId=".concat(t.id,"&fromType=").concat(t.entityType),nr(e))},t.prototype.findInfoByFrom=function(t,e){return this.http.get("/api/relations/info?fromId=".concat(t.id,"&fromType=").concat(t.entityType),nr(e))},t.prototype.findByFromAndType=function(t,e,n){return this.http.get("/api/relations?fromId=".concat(t.id,"&fromType=").concat(t.entityType,"&relationType=").concat(e),nr(n))},t.prototype.findByTo=function(t,e){return this.http.get("/api/relations?toId=".concat(t.id,"&toType=").concat(t.entityType),nr(e))},t.prototype.findInfoByTo=function(t,e){return this.http.get("/api/relations/info?toId=".concat(t.id,"&toType=").concat(t.entityType),nr(e))},t.prototype.findByToAndType=function(t,e,n){return this.http.get("/api/relations?toId=".concat(t.id,"&toType=").concat(t.entityType,"&relationType=").concat(e),nr(n))},t.prototype.findByQuery=function(t,e){return this.http.post("/api/relations",t,nr(e))},t.prototype.findInfoByQuery=function(t,e){return this.http.post("/api/relations/info",t,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Dc=function(){function t(t){this.http=t}return t.prototype.getTenantEntityViewInfos=function(t,e,n){return void 0===e&&(e=""),this.http.get("/api/tenant/entityViewInfos".concat(t.toQuery(),"&type=").concat(e),nr(n))},t.prototype.getCustomerEntityViewInfos=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/customer/".concat(t,"/entityViewInfos").concat(e.toQuery(),"&type=").concat(n),nr(i))},t.prototype.getEntityView=function(t,e){return this.http.get("/api/entityView/".concat(t),nr(e))},t.prototype.getEntityViewInfo=function(t,e){return this.http.get("/api/entityView/info/".concat(t),nr(e))},t.prototype.saveEntityView=function(t,e){return this.http.post("/api/entityView",t,nr(e))},t.prototype.deleteEntityView=function(t,e){return this.http.delete("/api/entityView/".concat(t),nr(e))},t.prototype.getEntityViewTypes=function(t){return this.http.get("/api/entityView/types",nr(t))},t.prototype.makeEntityViewPublic=function(t,e){return this.http.post("/api/customer/public/entityView/".concat(t),null,nr(e))},t.prototype.assignEntityViewToCustomer=function(t,e,n){return this.http.post("/api/customer/".concat(t,"/entityView/").concat(e),null,nr(n))},t.prototype.unassignEntityViewFromCustomer=function(t,e){return this.http.delete("/api/customer/entityView/".concat(t),nr(e))},t.prototype.findByQuery=function(t,e){return this.http.post("/api/entityViews",t,nr(e))},t.prototype.assignEntityViewToEdge=function(t,e,n){return this.http.post("/api/edge/".concat(t,"/entityView/").concat(e),null,nr(n))},t.prototype.unassignEntityViewFromEdge=function(t,e,n){return this.http.delete("/api/edge/".concat(t,"/entityView/").concat(e),nr(n))},t.prototype.getEdgeEntityViews=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/edge/".concat(t,"/entityViews").concat(e.toQuery(),"&type=").concat(n),nr(i))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();function Rc(){return{data:[],totalPages:0,totalElements:0,hasNext:!1}}!function(t){t.ASC="ASC",t.DESC="DESC"}(hc||(hc={}));function Nc(t){return function(e,n){return Oc(e,n,t)}}var Oc=function(t,e,n){var i,r;if(null===e||!e.length)return!0;var a=(""+e).toLowerCase();if(n&&n.length){if(Object.prototype.hasOwnProperty.call(t,n)&&null!==(u=t[n])&&u!==Object(u)&&-1!==(""+u).toLowerCase().indexOf(a))return!0}else try{for(var o=ve(Object.keys(t)),s=o.next();!s.done;s=o.next()){var u;if(null!==(u=t[s.value]))if(u!==Object(u)){if(-1!==(""+u).toLowerCase().indexOf(a))return!0}else if(Lr(u)&&Oc(u,e))return!0}}catch(t){i={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return!1};function Cc(t,e,n,i){var r=na(t,n),a=na(e,n),o=0;if(r!==a){var s=typeof r,u=typeof a;"number"===s&&"number"===u?o=r-a:"string"===s&&"string"===u?o=r.localeCompare(a):("boolean"===s&&"boolean"===u||s!==u)&&(r&&!a?o=1:!r&&a&&(o=-1))}return i?o:-1*o}var Mc,kc=function(){function t(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=null),void 0===i&&(i=null),this.textSearch=n,this.pageSize=t,this.page=e,this.sortOrder=i}return t.prototype.nextPageLink=function(){return new t(this.pageSize,this.page+1,this.textSearch,this.sortOrder)},t.prototype.toQuery=function(){var t,e="?pageSize=".concat(this.pageSize,"&page=").concat(this.page),n=null===(t=this.textSearch)||void 0===t?void 0:t.trim();if(null==n?void 0:n.length){var i=encodeURIComponent(n);e+="&textSearch=".concat(i)}return this.sortOrder&&(e+="&sortProperty=".concat(this.sortOrder.property,"&sortOrder=").concat(this.sortOrder.direction)),e},t.prototype.sort=function(t,e){return this.sortOrder?Cc(t,e,this.sortOrder.property,this.sortOrder.direction===hc.ASC):0},t.prototype.filterData=function(t,e){var n=this;void 0===e&&(e=Nc());var i={data:[],totalPages:0,totalElements:0,hasNext:!1};if(i.data=Ee([],Te(t),!1),this.textSearch&&this.textSearch.length&&(i.data=i.data.filter((function(t){return e(t,n.textSearch)}))),i.totalElements=i.data.length,i.totalPages=this.pageSize===Number.POSITIVE_INFINITY?1:Math.ceil(i.totalElements/this.pageSize),this.sortOrder){var r=this.sortOrder.property,a=this.sortOrder.direction===hc.ASC;i.data=i.data.sort((function(t,e){return Cc(t,e,r,a)}))}if(this.pageSize!==Number.POSITIVE_INFINITY){var o=this.pageSize*this.page;i.data=i.data.slice(o,o+this.pageSize),i.hasNext=i.totalElements>o+i.data.length}return i},t.prototype.sortDirection=function(){return this.sortOrder?(this.sortOrder.direction+"").toLowerCase():""},t}(),Lc=function(t){function e(e,n,i,r,a,o){void 0===n&&(n=0),void 0===i&&(i=null),void 0===r&&(r=null),void 0===a&&(a=null),void 0===o&&(o=null);var s=t.call(this,e,n,i,r)||this;return s.startTime=a,s.endTime=o,s}return pe(e,t),e.prototype.nextPageLink=function(){return new e(this.pageSize,this.page+1,this.textSearch,this.sortOrder,this.startTime,this.endTime)},e.prototype.toQuery=function(){var e=t.prototype.toQuery.call(this);return this.startTime&&(e+="&startTime=".concat(this.startTime)),this.endTime&&(e+="&endTime=".concat(this.endTime)),e},e}(kc),Uc=function(){function t(t){this.http=t}return t.prototype.getTenants=function(t,e){return this.http.get("/api/tenants".concat(t.toQuery()),nr(e))},t.prototype.getTenantInfos=function(t,e){return this.http.get("/api/tenantInfos".concat(t.toQuery()),nr(e))},t.prototype.getTenant=function(t,e){return this.http.get("/api/tenant/".concat(t),nr(e))},t.prototype.getTenantInfo=function(t,e){return this.http.get("/api/tenant/info/".concat(t),nr(e))},t.prototype.saveTenant=function(t,e){return this.http.post("/api/tenant",t,nr(e))},t.prototype.deleteTenant=function(t,e){return this.http.delete("/api/tenant/".concat(t),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();!function(t){t.singleEntity="singleEntity",t.entityList="entityList",t.entityName="entityName",t.entityType="entityType",t.stateEntity="stateEntity",t.assetType="assetType",t.deviceType="deviceType",t.edgeType="edgeType",t.entityViewType="entityViewType",t.apiUsageState="apiUsageState",t.relationsQuery="relationsQuery",t.assetSearchQuery="assetSearchQuery",t.deviceSearchQuery="deviceSearchQuery",t.edgeSearchQuery="edgeSearchQuery",t.entityViewSearchQuery="entityViewSearchQuery"}(Mc||(Mc={}));var Pc,xc,Fc,Wc,Vc,jc,Yc,Hc=new Array(Mc.edgeType,Mc.edgeSearchQuery),Bc=new Map([[Mc.singleEntity,"alias.filter-type-single-entity"],[Mc.entityList,"alias.filter-type-entity-list"],[Mc.entityName,"alias.filter-type-entity-name"],[Mc.entityType,"alias.filter-type-entity-type"],[Mc.stateEntity,"alias.filter-type-state-entity"],[Mc.assetType,"alias.filter-type-asset-type"],[Mc.deviceType,"alias.filter-type-device-type"],[Mc.edgeType,"alias.filter-type-edge-type"],[Mc.entityViewType,"alias.filter-type-entity-view-type"],[Mc.apiUsageState,"alias.filter-type-apiUsageState"],[Mc.relationsQuery,"alias.filter-type-relations-query"],[Mc.assetSearchQuery,"alias.filter-type-asset-search-query"],[Mc.deviceSearchQuery,"alias.filter-type-device-search-query"],[Mc.edgeSearchQuery,"alias.filter-type-edge-search-query"],[Mc.entityViewSearchQuery,"alias.filter-type-entity-view-search-query"]]);!function(t){t.PSM="PSM",t.DRX="DRX",t.E_DRX="E_DRX"}(Pc||(Pc={})),function(t){t.DEFAULT="DEFAULT",t.SNMP="SNMP"}(xc||(xc={})),function(t){t.DEFAULT="DEFAULT",t.MQTT="MQTT",t.COAP="COAP",t.LWM2M="LWM2M",t.SNMP="SNMP"}(Fc||(Fc={})),function(t){t.HTTP="HTTP"}(Wc||(Wc={})),function(t){t.JSON="JSON",t.PROTOBUF="PROTOBUF"}(Vc||(Vc={})),function(t){t.DEFAULT="DEFAULT",t.EFENTO="EFENTO"}(jc||(jc={})),function(t){t.DISABLED="DISABLED",t.ALLOW_CREATE_NEW_DEVICES="ALLOW_CREATE_NEW_DEVICES",t.CHECK_PRE_PROVISIONED_DEVICES="CHECK_PRE_PROVISIONED_DEVICES",t.X509_CERTIFICATE_CHAIN="X509_CERTIFICATE_CHAIN"}(Yc||(Yc={}));var Kc,Gc=new Map([[xc.DEFAULT,"device-profile.type-default"]]),qc=new Map([[xc.DEFAULT,{hasProfileConfiguration:!1,hasDeviceConfiguration:!1}],[xc.SNMP,{hasProfileConfiguration:!0,hasDeviceConfiguration:!0}]]),zc=new Map([[Fc.DEFAULT,"device-profile.transport-type-default"],[Fc.MQTT,"device-profile.transport-type-mqtt"],[Fc.COAP,"device-profile.transport-type-coap"],[Fc.LWM2M,"device-profile.transport-type-lwm2m"],[Fc.SNMP,"device-profile.transport-type-snmp"],[Wc.HTTP,"device-profile.transport-type-http"]]),Qc=new Map([[Yc.DISABLED,"device-profile.provision-strategy-disabled"],[Yc.ALLOW_CREATE_NEW_DEVICES,"device-profile.provision-strategy-created-new"],[Yc.CHECK_PRE_PROVISIONED_DEVICES,"device-profile.provision-strategy-check-pre-provisioned"],[Yc.X509_CERTIFICATE_CHAIN,"device-profile.provision-strategy-x509.certificate-chain"]]),Jc=new Map([[Fc.DEFAULT,"device-profile.transport-type-default-hint"],[Fc.MQTT,"device-profile.transport-type-mqtt-hint"],[Fc.COAP,"device-profile.transport-type-coap-hint"],[Fc.LWM2M,"device-profile.transport-type-lwm2m-hint"],[Fc.SNMP,"device-profile.transport-type-snmp-hint"],[Wc.HTTP,""]]),Xc=new Map([[Vc.JSON,"device-profile.transport-device-payload-type-json"],[Vc.PROTOBUF,"device-profile.transport-device-payload-type-proto"]]),$c=new Map([[jc.DEFAULT,"device-profile.coap-device-type-default"],[jc.EFENTO,"device-profile.coap-device-type-efento"]]),Zc=new Map([[Fc.DEFAULT,{hasProfileConfiguration:!1,hasDeviceConfiguration:!1}],[Fc.MQTT,{hasProfileConfiguration:!0,hasDeviceConfiguration:!1}],[Fc.LWM2M,{hasProfileConfiguration:!0,hasDeviceConfiguration:!0}],[Fc.COAP,{hasProfileConfiguration:!0,hasDeviceConfiguration:!0}],[Fc.SNMP,{hasProfileConfiguration:!0,hasDeviceConfiguration:!0}]]);!function(t){t.TELEMETRY_QUERYING="TELEMETRY_QUERYING",t.CLIENT_ATTRIBUTES_QUERYING="CLIENT_ATTRIBUTES_QUERYING",t.SHARED_ATTRIBUTES_SETTING="SHARED_ATTRIBUTES_SETTING",t.TO_DEVICE_RPC_REQUEST="TO_DEVICE_RPC_REQUEST",t.TO_SERVER_RPC_REQUEST="TO_SERVER_RPC_REQUEST"}(Kc||(Kc={}));var tl,el=new Map([[Kc.TELEMETRY_QUERYING," Telemetry (SNMP GET)"],[Kc.CLIENT_ATTRIBUTES_QUERYING,"Client attributes (SNMP GET)"],[Kc.SHARED_ATTRIBUTES_SETTING,"Shared attributes (SNMP SET)"],[Kc.TO_DEVICE_RPC_REQUEST,"To-device RPC request (SNMP GET/SET)"],[Kc.TO_SERVER_RPC_REQUEST,"From-device RPC request (SNMP TRAP)"]]);!function(t){t.SIMPLE="SIMPLE",t.DURATION="DURATION",t.REPEATING="REPEATING"}(tl||(tl={}));var nl,il=new Map([[tl.SIMPLE,"device-profile.condition-type-simple"],[tl.DURATION,"device-profile.condition-type-duration"],[tl.REPEATING,"device-profile.condition-type-repeating"]]);!function(t){t.ANY_TIME="ANY_TIME",t.SPECIFIC_TIME="SPECIFIC_TIME",t.CUSTOM="CUSTOM"}(nl||(nl={}));var rl,al,ol=new Map([[nl.ANY_TIME,"device-profile.schedule-any-time"],[nl.SPECIFIC_TIME,"device-profile.schedule-specific-time"],[nl.CUSTOM,"device-profile.schedule-custom"]]),sl=function(t){return!!(t&&t.condition&&t.condition.condition&&t.condition.condition.length)};!function(t){t.V1="V1",t.V2C="V2C",t.V3="V3"}(rl||(rl={})),function(t){t.SHA_1="SHA_1",t.SHA_224="SHA_224",t.SHA_256="SHA_256",t.SHA_384="SHA_384",t.SHA_512="SHA_512",t.MD5="MD%"}(al||(al={}));var ul,cl=new Map([[al.SHA_1,"SHA-1"],[al.SHA_224,"SHA-224"],[al.SHA_256,"SHA-256"],[al.SHA_384,"SHA-384"],[al.SHA_512,"SHA-512"],[al.MD5,"MD5"]]);!function(t){t.DES="DES",t.AES_128="AES_128",t.AES_192="AES_192",t.AES_256="AES_256"}(ul||(ul={}));var ll,pl=new Map([[ul.DES,"DES"],[ul.AES_128,"AES-128"],[ul.AES_192,"AES-192"],[ul.AES_256,"AES-256"]]),dl=function(){function t(t,e){this.pageLink=t,this.deviceInfoFilter=e}return t.prototype.toQuery=function(){var t;return t=this.deviceInfoFilter.customerId?"/customer/".concat(this.deviceInfoFilter.customerId.id,"/deviceInfos"):this.deviceInfoFilter.edgeId?"/edge/".concat(this.deviceInfoFilter.edgeId.id,"/devices"):"/tenant/deviceInfos",t+=this.pageLink.toQuery(),kr(this.deviceInfoFilter.type)?t+="&type=".concat(this.deviceInfoFilter.type):this.deviceInfoFilter.deviceProfileId&&(t+="&deviceProfileId=".concat(this.deviceInfoFilter.deviceProfileId.id)),Cr(this.deviceInfoFilter.active)&&(t+="&active=".concat(this.deviceInfoFilter.active)),t},t}();!function(t){t.ACCESS_TOKEN="ACCESS_TOKEN",t.X509_CERTIFICATE="X509_CERTIFICATE",t.MQTT_BASIC="MQTT_BASIC",t.LWM2M_CREDENTIALS="LWM2M_CREDENTIALS"}(ll||(ll={}));var fl,hl=new Map([[ll.ACCESS_TOKEN,"Access token"],[ll.X509_CERTIFICATE,"X.509"],[ll.MQTT_BASIC,"MQTT Basic"],[ll.LWM2M_CREDENTIALS,"LwM2M Credentials"]]),yl=new Map([[Fc.DEFAULT,[ll.ACCESS_TOKEN,ll.X509_CERTIFICATE,ll.MQTT_BASIC]],[Fc.MQTT,[ll.ACCESS_TOKEN,ll.X509_CERTIFICATE,ll.MQTT_BASIC]],[Fc.COAP,[ll.ACCESS_TOKEN,ll.X509_CERTIFICATE]],[Fc.LWM2M,[ll.LWM2M_CREDENTIALS]],[Fc.SNMP,[ll.ACCESS_TOKEN]]]);!function(t){t.SUCCESS="SUCCESS",t.FAILURE="FAILURE",t.CLAIMED="CLAIMED"}(fl||(fl={}));var ml,gl=new Array("device-profile.schedule-day.monday","device-profile.schedule-day.tuesday","device-profile.schedule-day.wednesday","device-profile.schedule-day.thursday","device-profile.schedule-day.friday","device-profile.schedule-day.saturday","device-profile.schedule-day.sunday"),vl=function(t){return Sa("number"==typeof t||null===t?[1970,0,1,0,0,0,0]:[1970,0,1,t.getHours(),t.getMinutes(),0,0])};!function(t){t.ATTRIBUTE="ATTRIBUTE",t.CLIENT_ATTRIBUTE="CLIENT_ATTRIBUTE",t.SHARED_ATTRIBUTE="SHARED_ATTRIBUTE",t.SERVER_ATTRIBUTE="SERVER_ATTRIBUTE",t.TIME_SERIES="TIME_SERIES",t.ENTITY_FIELD="ENTITY_FIELD",t.ALARM_FIELD="ALARM_FIELD",t.CONSTANT="CONSTANT",t.COUNT="COUNT"}(ml||(ml={}));var Tl,El=new Map([[ml.ATTRIBUTE,"filter.key-type.attribute"],[ml.TIME_SERIES,"filter.key-type.timeseries"],[ml.ENTITY_FIELD,"filter.key-type.entity-field"],[ml.CONSTANT,"filter.key-type.constant"],[ml.CLIENT_ATTRIBUTE,"filter.key-type.client-attribute"],[ml.SERVER_ATTRIBUTE,"filter.key-type.server-attribute"],[ml.SHARED_ATTRIBUTE,"filter.key-type.shared-attribute"]]);function bl(t){switch(t){case ml.ATTRIBUTE:case ml.CLIENT_ATTRIBUTE:case ml.SHARED_ATTRIBUTE:case ml.SERVER_ATTRIBUTE:return Va.attribute;case ml.TIME_SERIES:return Va.timeseries;case ml.ENTITY_FIELD:return Va.entityField;case ml.ALARM_FIELD:return Va.alarm;case ml.COUNT:return Va.count}}function Sl(t){switch(t){case Va.timeseries:return ml.TIME_SERIES;case Va.attribute:return ml.ATTRIBUTE;case Va.function:return ml.ENTITY_FIELD;case Va.alarm:return ml.ALARM_FIELD;case Va.entityField:return ml.ENTITY_FIELD;case Va.count:return ml.COUNT}}function _l(t){return{key:t.name,type:Sl(t.type)}}!function(t){t.STRING="STRING",t.NUMERIC="NUMERIC",t.BOOLEAN="BOOLEAN",t.DATE_TIME="DATE_TIME"}(Tl||(Tl={}));var Al,wl,Il=new Map([[Tl.STRING,{name:"filter.value-type.string",icon:"mdi:format-text"}],[Tl.NUMERIC,{name:"filter.value-type.numeric",icon:"mdi:numeric"}],[Tl.BOOLEAN,{name:"filter.value-type.boolean",icon:"mdi:checkbox-marked-outline"}],[Tl.DATE_TIME,{name:"filter.value-type.date-time",icon:"mdi:calendar-clock"}]]);function Dl(t){switch(t){case Tl.STRING:return Al.STRING;case Tl.NUMERIC:case Tl.DATE_TIME:return Al.NUMERIC;case Tl.BOOLEAN:return Al.BOOLEAN}}function Rl(){return{editable:!0,label:"",autogeneratedLabel:!0,order:0}}function Nl(t,e){var n={type:e?Al.COMPLEX:Dl(t)};switch(n.type){case Al.STRING:n.operation=wl.STARTS_WITH,n.value={defaultValue:""},n.ignoreCase=!1;break;case Al.NUMERIC:n.operation=Ol.EQUAL,n.value={defaultValue:t===Tl.DATE_TIME?Date.now():0};break;case Al.BOOLEAN:n.operation=Ml.EQUAL,n.value={defaultValue:!1};break;case Al.COMPLEX:n.operation=Ll.AND,n.predicates=[]}return n}!function(t){t.STRING="STRING",t.NUMERIC="NUMERIC",t.BOOLEAN="BOOLEAN",t.COMPLEX="COMPLEX"}(Al||(Al={})),function(t){t.EQUAL="EQUAL",t.NOT_EQUAL="NOT_EQUAL",t.STARTS_WITH="STARTS_WITH",t.ENDS_WITH="ENDS_WITH",t.CONTAINS="CONTAINS",t.NOT_CONTAINS="NOT_CONTAINS",t.IN="IN",t.NOT_IN="NOT_IN"}(wl||(wl={}));var Ol,Cl=new Map([[wl.EQUAL,"filter.operation.equal"],[wl.NOT_EQUAL,"filter.operation.not-equal"],[wl.STARTS_WITH,"filter.operation.starts-with"],[wl.ENDS_WITH,"filter.operation.ends-with"],[wl.CONTAINS,"filter.operation.contains"],[wl.NOT_CONTAINS,"filter.operation.not-contains"],[wl.IN,"filter.operation.in"],[wl.NOT_IN,"filter.operation.not-in"]]);!function(t){t.EQUAL="EQUAL",t.NOT_EQUAL="NOT_EQUAL",t.GREATER="GREATER",t.LESS="LESS",t.GREATER_OR_EQUAL="GREATER_OR_EQUAL",t.LESS_OR_EQUAL="LESS_OR_EQUAL"}(Ol||(Ol={}));var Ml,kl=new Map([[Ol.EQUAL,"filter.operation.equal"],[Ol.NOT_EQUAL,"filter.operation.not-equal"],[Ol.GREATER,"filter.operation.greater"],[Ol.LESS,"filter.operation.less"],[Ol.GREATER_OR_EQUAL,"filter.operation.greater-or-equal"],[Ol.LESS_OR_EQUAL,"filter.operation.less-or-equal"]]);!function(t){t.EQUAL="EQUAL",t.NOT_EQUAL="NOT_EQUAL"}(Ml||(Ml={}));var Ll,Ul=new Map([[Ml.EQUAL,"filter.operation.equal"],[Ml.NOT_EQUAL,"filter.operation.not-equal"]]);!function(t){t.AND="AND",t.OR="OR"}(Ll||(Ll={}));var Pl,xl=new Map([[Ll.AND,"filter.operation.and"],[Ll.OR,"filter.operation.or"]]);!function(t){t.CURRENT_TENANT="CURRENT_TENANT",t.CURRENT_CUSTOMER="CURRENT_CUSTOMER",t.CURRENT_USER="CURRENT_USER",t.CURRENT_DEVICE="CURRENT_DEVICE"}(Pl||(Pl={}));var Fl=new Map([[Pl.CURRENT_TENANT,"filter.current-tenant"],[Pl.CURRENT_CUSTOMER,"filter.current-customer"],[Pl.CURRENT_USER,"filter.current-user"],[Pl.CURRENT_DEVICE,"filter.current-device"]]),Wl=[Pl.CURRENT_CUSTOMER,Pl.CURRENT_DEVICE];function Vl(t,e,n,i){return jl(t,e,n,n.predicate,i)}function jl(t,e,n,i,r){if(i.type===Al.COMPLEX){var a=i,o=a.operation,s=a.predicates.map((function(i){return jl(t,e,n,i,o)}));if(s.length>1){var u=t.instant(xl.get(o)),c=s.join(' <span class="tb-filter-complex-operation">'+u+"</span> ");return o===Ll.OR&&r&&Ll.OR!==r&&(c='<span class="tb-filter-bracket"><span class="tb-left-bracket">(</span>'.concat(c,'<span class="tb-right-bracket">)</span></span>')),c}return s[0]}return function(t,e,n,i){var r,a,o=n.key.key,s=i.value,u=!!s.dynamicValue&&!!s.dynamicValue.sourceType;u&&(a='<span class="tb-filter-dynamic-value"><span class="tb-filter-dynamic-source">'+t.instant(Fl.get(s.dynamicValue.sourceType))+"</span>",a+='.<span class="tb-filter-value">'+s.dynamicValue.sourceAttribute+"</span></span>");switch(i.type){case Al.STRING:r=t.instant(Cl.get(i.operation)),i.ignoreCase&&(r+=" "+t.instant("filter.ignore-case")),u||(a="'".concat(i.value.defaultValue,"'"));break;case Al.NUMERIC:r=t.instant(kl.get(i.operation)),u||(a=n.valueType===Tl.DATE_TIME?e.transform(i.value.defaultValue,"yyyy-MM-dd HH:mm"):i.value.defaultValue+"");break;case Al.BOOLEAN:r=t.instant(Ul.get(i.operation)),u||(a=t.instant(i.value.defaultValue?"value.true":"value.false"))}u||(a='<span class="tb-filter-value">'.concat(a,"</span>"));return'<span class="tb-filter-predicate"><span class="tb-filter-entity-key">'.concat(o,'</span> <span class="tb-filter-simple-operation">').concat(r,"</span> ").concat(a,"</span>")}(t,e,n,i)}function Yl(t){var e,n,i,r,a=t.keyFilters,o=[];try{for(var s=ve(a),u=s.next();!u.done;u=s.next()){var c=u.value,l=c.key;try{for(var p=(i=void 0,ve(c.predicates)),d=p.next();!d.done;d=p.next()){var f=d.value,h={key:l,valueType:c.valueType,value:c.value,predicate:Hl(f)};o.push(h)}}catch(t){i={error:t}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o}function Hl(t){var e=t.keyFilterPredicate;if(e.type===Al.COMPLEX){var n=e,i=n.predicates.map((function(t){return Hl(t)}));e={type:Al.COMPLEX,operation:n.operation,predicates:i}}return e}function Bl(t){var e={keyFilterPredicate:null,userInfo:null};if(t.type===Al.COMPLEX){var n=t,i=n.predicates.map((function(t){return Bl(t)}));e.keyFilterPredicate={predicates:i,operation:n.operation,type:Al.COMPLEX}}else e.keyFilterPredicate=t;return e}function Kl(t){return t.predicates.some((function(t){return Gl(t)}))}function Gl(t){return t.keyFilterPredicate.type===Al.COMPLEX?t.keyFilterPredicate.predicates.some((function(t){return Gl(t)})):t.userInfo.editable}function ql(t,e){var n=t.predicates.map((function(n){return zl(t.key,t.valueType,n,e)}));return[].concat.apply([],n)}function zl(t,e,n,i){if(n.keyFilterPredicate.type===Al.COMPLEX){var r=n.keyFilterPredicate.predicates.map((function(n){return zl(t,e,n,i)}));return[].concat.apply([],r)}if(n.userInfo.editable){var a={info:n,label:n.userInfo.label,valueType:e};return n.userInfo.autogeneratedLabel&&(a.label=Ql(t.key,e,n.keyFilterPredicate.operation,i)),[a]}return[]}function Ql(t,e,n,i){var r,a=t;switch(e){case Tl.STRING:r=Cl.get(n);break;case Tl.NUMERIC:case Tl.DATE_TIME:r=kl.get(n);break;case Tl.BOOLEAN:r=Ul.get(n)}return a+=" "+i.instant(r)}function Jl(t){return{pageSize:t,page:0,sortOrder:{key:{type:ml.ENTITY_FIELD,key:"createdTime"},direction:hc.DESC}}}var Xl=Jl(1),$l=function(t){return{type:Mc.singleEntity,singleEntity:{entityType:or.DEVICE,id:t}}};function Zl(t,e){var n=t.data.map((function(t){return t.entityId.id})),i=e.data.map((function(t){return t.entityId.id}));return!Jr(n,i)}var tp,ep,np,ip=[{type:ml.ENTITY_FIELD,key:"name"},{type:ml.ENTITY_FIELD,key:"label"},{type:ml.ENTITY_FIELD,key:"additionalInfo"}];function rp(t){var e={id:t.entityId.id,entityType:t.entityId.entityType};if(t.latest&&t.latest[ml.ENTITY_FIELD]){var n=t.latest[ml.ENTITY_FIELD];if(n.name?e.name=n.name.value:e.name="",n.label?e.label=n.label.value:e.label="",e.entityDescription="",n.additionalInfo){var i=n.additionalInfo.value;if(i&&i.length)try{var r=JSON.parse(i);r&&r.description&&(e.entityDescription=r.description)}catch(t){}}n.queueName&&n.serviceId&&(e.name=n.queueName.value+"_"+n.serviceId.value)}return e}function ap(t,e,n){void 0===n&&(n=!1),t.entity={id:{entityType:e.entityType,id:e.id}},t.entityId=e.id,t.entityType=e.entityType,t.type!==qs.entity&&t.type!==qs.entityCount&&t.type!==qs.alarmCount||(t.type===qs.entity&&(t.entityName=e.name,t.entityLabel=e.label,t.name=e.name,t.entityDescription=e.entityDescription,t.entity.label=e.label,t.entity.name=e.name),n&&(t.entityFilter={type:Mc.singleEntity,singleEntity:{id:e.id,entityType:e.entityType}}))}!function(t){t.DASHBOARD="DASHBOARD",t.ASSET="ASSET",t.DEVICE="DEVICE",t.DEVICE_PROFILE="DEVICE_PROFILE",t.ASSET_PROFILE="ASSET_PROFILE",t.ENTITY_VIEW="ENTITY_VIEW",t.ALARM="ALARM",t.RULE_CHAIN="RULE_CHAIN",t.RULE_CHAIN_METADATA="RULE_CHAIN_METADATA",t.EDGE="EDGE",t.USER="USER",t.CUSTOMER="CUSTOMER",t.RELATION="RELATION",t.TENANT="TENANT",t.TENANT_PROFILE="TENANT_PROFILE",t.WIDGETS_BUNDLE="WIDGETS_BUNDLE",t.WIDGET_TYPE="WIDGET_TYPE",t.ADMIN_SETTINGS="ADMIN_SETTINGS",t.OTA_PACKAGE="OTA_PACKAGE",t.QUEUE="QUEUE"}(tp||(tp={})),function(t){t.ADDED="ADDED",t.DELETED="DELETED",t.UPDATED="UPDATED",t.POST_ATTRIBUTES="POST_ATTRIBUTES",t.ATTRIBUTES_UPDATED="ATTRIBUTES_UPDATED",t.ATTRIBUTES_DELETED="ATTRIBUTES_DELETED",t.TIMESERIES_UPDATED="TIMESERIES_UPDATED",t.CREDENTIALS_UPDATED="CREDENTIALS_UPDATED",t.ASSIGNED_TO_CUSTOMER="ASSIGNED_TO_CUSTOMER",t.UNASSIGNED_FROM_CUSTOMER="UNASSIGNED_FROM_CUSTOMER",t.RELATION_ADD_OR_UPDATE="RELATION_ADD_OR_UPDATE",t.RELATION_DELETED="RELATION_DELETED",t.RPC_CALL="RPC_CALL",t.ALARM_ACK="ALARM_ACK",t.ALARM_CLEAR="ALARM_CLEAR",t.ALARM_ASSIGNED="ALARM_ASSIGNED",t.ALARM_UNASSIGNED="ALARM_UNASSIGNED",t.ASSIGNED_TO_EDGE="ASSIGNED_TO_EDGE",t.UNASSIGNED_FROM_EDGE="UNASSIGNED_FROM_EDGE",t.CREDENTIALS_REQUEST="CREDENTIALS_REQUEST",t.ENTITY_MERGE_REQUEST="ENTITY_MERGE_REQUEST"}(ep||(ep={})),function(t){t.DEPLOYED="DEPLOYED",t.PENDING="PENDING"}(np||(np={}));var op,sp=new Map([[tp.DASHBOARD,"edge-event.type-dashboard"],[tp.ASSET,"edge-event.type-asset"],[tp.DEVICE,"edge-event.type-device"],[tp.DEVICE_PROFILE,"edge-event.type-device-profile"],[tp.ASSET_PROFILE,"edge-event.type-asset-profile"],[tp.ENTITY_VIEW,"edge-event.type-entity-view"],[tp.ALARM,"edge-event.type-alarm"],[tp.RULE_CHAIN,"edge-event.type-rule-chain"],[tp.RULE_CHAIN_METADATA,"edge-event.type-rule-chain-metadata"],[tp.EDGE,"edge-event.type-edge"],[tp.USER,"edge-event.type-user"],[tp.CUSTOMER,"edge-event.type-customer"],[tp.RELATION,"edge-event.type-relation"],[tp.TENANT,"edge-event.type-tenant"],[tp.TENANT_PROFILE,"edge-event.type-tenant-profile"],[tp.WIDGETS_BUNDLE,"edge-event.type-widgets-bundle"],[tp.WIDGET_TYPE,"edge-event.type-widgets-type"],[tp.ADMIN_SETTINGS,"edge-event.type-admin-settings"],[tp.OTA_PACKAGE,"edge-event.type-ota-package"],[tp.QUEUE,"edge-event.type-queue"]]),up=new Map([[ep.ADDED,"edge-event.action-type-added"],[ep.DELETED,"edge-event.action-type-deleted"],[ep.UPDATED,"edge-event.action-type-updated"],[ep.POST_ATTRIBUTES,"edge-event.action-type-post-attributes"],[ep.ATTRIBUTES_UPDATED,"edge-event.action-type-attributes-updated"],[ep.ATTRIBUTES_DELETED,"edge-event.action-type-attributes-deleted"],[ep.TIMESERIES_UPDATED,"edge-event.action-type-timeseries-updated"],[ep.CREDENTIALS_UPDATED,"edge-event.action-type-credentials-updated"],[ep.ASSIGNED_TO_CUSTOMER,"edge-event.action-type-assigned-to-customer"],[ep.UNASSIGNED_FROM_CUSTOMER,"edge-event.action-type-unassigned-from-customer"],[ep.RELATION_ADD_OR_UPDATE,"edge-event.action-type-relation-add-or-update"],[ep.RELATION_DELETED,"edge-event.action-type-relation-deleted"],[ep.RPC_CALL,"edge-event.action-type-rpc-call"],[ep.ALARM_ACK,"edge-event.action-type-alarm-ack"],[ep.ALARM_CLEAR,"edge-event.action-type-alarm-clear"],[ep.ALARM_ASSIGNED,"edge-event.action-type-alarm-assigned"],[ep.ALARM_UNASSIGNED,"edge-event.action-type-alarm-unassigned"],[ep.ASSIGNED_TO_EDGE,"edge-event.action-type-assigned-to-edge"],[ep.UNASSIGNED_FROM_EDGE,"edge-event.action-type-unassigned-from-edge"],[ep.CREDENTIALS_REQUEST,"edge-event.action-type-credentials-request"],[ep.ENTITY_MERGE_REQUEST,"edge-event.action-type-entity-merge-request"]]),cp=[ep.POST_ATTRIBUTES,ep.ATTRIBUTES_UPDATED,ep.ATTRIBUTES_DELETED,ep.TIMESERIES_UPDATED,ep.RPC_CALL],lp=new Map([[np.DEPLOYED,"#000000"],[np.PENDING,"#9e9e9e"]]);!function(t){t[t.ubuntu=0]="ubuntu",t[t.centos=1]="centos",t[t.docker=2]="docker"}(op||(op={}));var pp;!function(t){t.CONNECTED="CONNECTED",t.DISCONNECTED="DISCONNECTED"}(pp||(pp={}));var dp,fp=new Map([[pp.CONNECTED,"edge.connected"],[pp.DISCONNECTED,"edge.disconnected"]]);!function(t){t.PSK="PSK",t.RPK="RPK",t.X509="X509",t.NO_SEC="NO_SEC"}(dp||(dp={})),new Map([[dp.PSK,"Pre-Shared Key"],[dp.RPK,"Raw Public Key"],[dp.X509,"X.509 Certificate"],[dp.NO_SEC,"No Security"]]),new Map([[dp.PSK,"device.lwm2m-security-config.client-publicKey-or-id-tooltip-psk"],[dp.RPK,"device.lwm2m-security-config.client-publicKey-or-id-tooltip-rpk"],[dp.X509,"device.lwm2m-security-config.client-publicKey-or-id-tooltip-x509"]]),new Map([[dp.PSK,"device.lwm2m-security-config.client-secret-key-tooltip-psk"],[dp.RPK,"device.lwm2m-security-config.client-secret-key-tooltip-prk"],[dp.X509,"device.lwm2m-security-config.client-secret-key-tooltip-x509"]]),new Map([[dp.PSK,"device.lwm2m-security-config.client-secret-key-tooltip-psk"],[dp.RPK,"device.lwm2m-security-config.client-secret-key-tooltip-prk"]]);var hp=function(){function t(t){this.http=t,this.lwm2mBootstrapSecurityInfoInMemoryCache=new Map}return t.prototype.getDeviceProfiles=function(t,e){return this.http.get("/api/deviceProfiles".concat(t.toQuery()),nr(e))},t.prototype.getDeviceProfile=function(t,e){return this.http.get("/api/deviceProfile/".concat(t),nr(e))},t.prototype.exportDeviceProfile=function(t,e){return this.http.get("/api/deviceProfile/".concat(t,"?inlineImages=true"),nr(e))},t.prototype.getLwm2mObjects=function(t,e,n,i){var r="/api/resource/lwm2m?sortProperty=".concat(t.property,"&sortOrder=").concat(t.direction);return Cr(e)&&e.length>0&&(r+="&objectIds=".concat(e)),Cr(n)&&!Mr(n)&&(r+="&searchText=".concat(n)),this.http.get(r,nr(i))},t.prototype.getLwm2mBootstrapSecurityInfo=function(t,e){var n=this,i=this.lwm2mBootstrapSecurityInfoInMemoryCache.get(t);return i?Un(i):this.http.get("/api/lwm2m/deviceProfile/bootstrap/".concat(t),nr(e)).pipe(pi((function(e){return n.lwm2mBootstrapSecurityInfoInMemoryCache.set(t,e)})))},t.prototype.getLwm2mBootstrapSecurityInfoBySecurityType=function(t,e,n){return void 0===e&&(e=dp.NO_SEC),this.getLwm2mBootstrapSecurityInfo(t,n).pipe(xn((function(t){var n=Qr(t);if(n)switch(e){case dp.PSK:n.port=n.securityPort,n.host=n.securityHost,n.serverPublicKey="";break;case dp.RPK:case dp.X509:n.port=n.securityPort,n.host=n.securityHost;break;case dp.NO_SEC:n.serverPublicKey=""}return n})))},t.prototype.getLwm2mObjectsPage=function(t,e){return this.http.get("/api/resource/lwm2m/page".concat(t.toQuery()),nr(e))},t.prototype.saveDeviceProfile=function(t,e){return this.http.post("/api/deviceProfile",t,nr(e))},t.prototype.deleteDeviceProfile=function(t,e){return this.http.delete("/api/deviceProfile/".concat(t),nr(e))},t.prototype.setDefaultDeviceProfile=function(t,e){return this.http.post("/api/deviceProfile/".concat(t,"/default"),nr(e))},t.prototype.getDefaultDeviceProfileInfo=function(t){return this.http.get("/api/deviceProfileInfo/default",nr(t))},t.prototype.getDeviceProfileInfo=function(t,e){return this.http.get("/api/deviceProfileInfo/".concat(t),nr(e))},t.prototype.getDeviceProfileInfos=function(t,e,n){var i="/api/deviceProfileInfos".concat(t.toQuery());return Cr(e)&&(i+="&transportType=".concat(e)),this.http.get(i,nr(n))},t.prototype.getDeviceProfileDevicesAttributesKeys=function(t,e){var n="/api/deviceProfile/devices/keys/attributes";return Cr(t)&&(n+="?deviceProfileId=".concat(t)),this.http.get(n,nr(e))},t.prototype.getDeviceProfileDevicesTimeseriesKeys=function(t,e){var n="/api/deviceProfile/devices/keys/timeseries";return Cr(t)&&(n+="?deviceProfileId=".concat(t)),this.http.get(n,nr(e))},t.prototype.getDeviceProfileNames=function(t,e){void 0===t&&(t=!1);var n="/api/deviceProfile/names";return Cr(t)&&(n+="?activeOnly=".concat(t)),this.http.get(n,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),yp=function(){function t(t){this.http=t,this.parseQueueStatName=function(t){return Object.defineProperty(t,"name",{get:function(){return"".concat(this.queueName," (").concat(this.serviceId,")")}})}}return t.prototype.getQueueById=function(t,e){return this.http.get("/api/queues/".concat(t),nr(e))},t.prototype.getQueueByName=function(t,e){return this.http.get("/api/queues/name/".concat(t),nr(e))},t.prototype.getTenantQueuesByServiceType=function(t,e,n){return this.http.get("/api/queues".concat(t.toQuery(),"&serviceType=").concat(e),nr(n))},t.prototype.saveQueue=function(t,e,n){return this.http.post("/api/queues?serviceType=".concat(e),t,nr(n))},t.prototype.deleteQueue=function(t){return this.http.delete("/api/queues/".concat(t))},t.prototype.getQueueStatistics=function(t,e){var n=this;return this.http.get("/api/queueStats".concat(t.toQuery()),nr(e)).pipe(xn((function(t){return t.data.map((function(t){return n.parseQueueStatName(t)})),t})))},t.prototype.getQueueStatisticsById=function(t,e){var n=this;return this.http.get("/api/queueStats/".concat(t),nr(e)).pipe(xn((function(t){return n.parseQueueStatName(t)})))},t.prototype.getQueueStatisticsByIds=function(t,e){var n=this;return this.http.get("/api/queueStats?QueueStatsIds=".concat(t.join(",")),nr(e)).pipe(xn((function(t){return t.map((function(t){return n.parseQueueStatName(t)}))})))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),mp=function(){function t(t){this.http=t}return t.prototype.getAssetProfiles=function(t,e){return this.http.get("/api/assetProfiles".concat(t.toQuery()),nr(e))},t.prototype.getAssetProfile=function(t,e){return this.http.get("/api/assetProfile/".concat(t),nr(e))},t.prototype.exportAssetProfile=function(t,e){return this.http.get("/api/assetProfile/".concat(t,"?inlineImages=true"),nr(e))},t.prototype.saveAssetProfile=function(t,e){return this.http.post("/api/assetProfile",t,nr(e))},t.prototype.deleteAssetProfile=function(t,e){return this.http.delete("/api/assetProfile/".concat(t),nr(e))},t.prototype.setDefaultAssetProfile=function(t,e){return this.http.post("/api/assetProfile/".concat(t,"/default"),nr(e))},t.prototype.getDefaultAssetProfileInfo=function(t){return this.http.get("/api/assetProfileInfo/default",nr(t))},t.prototype.getAssetProfileInfo=function(t,e){return this.http.get("/api/assetProfileInfo/".concat(t),nr(e))},t.prototype.getAssetProfileInfos=function(t,e){return this.http.get("/api/assetProfileInfos".concat(t.toQuery()),nr(e))},t.prototype.getAssetProfileNames=function(t,e){void 0===t&&(t=!1);var n="/api/assetProfile/names";return Cr(t)&&(n+="?activeOnly=".concat(t)),this.http.get(n,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),gp=function(){function t(t){this.http=t}return t.prototype.getNotifications=function(t,e,n){return void 0===e&&(e=!1),this.http.get("/api/notifications".concat(t.toQuery(),"&unreadOnly=").concat(e),nr(n))},t.prototype.deleteNotification=function(t,e){return this.http.delete("/api/notification/".concat(t),nr(e))},t.prototype.markNotificationAsRead=function(t,e){return this.http.put("/api/notification/".concat(t,"/read"),nr(e))},t.prototype.markAllNotificationsAsRead=function(t){return this.http.put("/api/notifications/read",nr(t))},t.prototype.createNotificationRequest=function(t,e){return this.http.post("/api/notification/request",t,nr(e))},t.prototype.getNotificationRequestById=function(t,e){return this.http.get("/api/notification/request/".concat(t),nr(e))},t.prototype.getAvailableDeliveryMethods=function(t){return this.http.get("/api/notification/deliveryMethods",nr(t))},t.prototype.deleteNotificationRequest=function(t,e){return this.http.delete("/api/notification/request/".concat(t),nr(e))},t.prototype.getNotificationRequestPreview=function(t,e){return this.http.post("/api/notification/request/preview",t,nr(e))},t.prototype.getNotificationRequests=function(t,e){return this.http.get("/api/notification/requests".concat(t.toQuery()),nr(e))},t.prototype.getNotificationSettings=function(t){return this.http.get("/api/notification/settings",nr(t))},t.prototype.saveNotificationSettings=function(t,e){return this.http.post("/api/notification/settings",t,nr(e))},t.prototype.listSlackConversations=function(t,e,n){var i="/api/notification/slack/conversations?type=".concat(t);return kr(e)&&(i+="&token=".concat(e)),this.http.get(i,nr(n))},t.prototype.saveNotificationRule=function(t,e){return this.http.post("/api/notification/rule",t,nr(e))},t.prototype.getNotificationRuleById=function(t,e){return this.http.get("/api/notification/rule/".concat(t),nr(e))},t.prototype.deleteNotificationRule=function(t,e){return this.http.delete("/api/notification/rule/".concat(t),nr(e))},t.prototype.getNotificationRules=function(t,e){return this.http.get("/api/notification/rules".concat(t.toQuery()),nr(e))},t.prototype.saveNotificationTarget=function(t,e){return this.http.post("/api/notification/target",t,nr(e))},t.prototype.getNotificationTargetById=function(t,e){return this.http.get("/api/notification/target/".concat(t),nr(e))},t.prototype.deleteNotificationTarget=function(t,e){return this.http.delete("/api/notification/target/".concat(t),nr(e))},t.prototype.getNotificationTargetsByIds=function(t,e){return this.http.get("/api/notification/targets?ids=".concat(t.join(",")),nr(e))},t.prototype.getNotificationTargets=function(t,e,n){var i="/api/notification/targets".concat(t.toQuery());return kr(e)&&(i+="&notificationType=".concat(e)),this.http.get(i,nr(n))},t.prototype.getRecipientsForNotificationTargetConfig=function(t,e,n){return this.http.post("/api/notification/target/recipients".concat(e.toQuery()),t,nr(n))},t.prototype.saveNotificationTemplate=function(t,e){return this.http.post("/api/notification/template",t,nr(e))},t.prototype.getNotificationTemplateById=function(t,e){return this.http.get("/api/notification/template/".concat(t),nr(e))},t.prototype.deleteNotificationTemplate=function(t,e){return this.http.delete("/api/notification/template/".concat(t),nr(e))},t.prototype.getNotificationTemplates=function(t,e,n){var i="/api/notification/templates".concat(t.toQuery());return kr(e)&&(i+="&notificationTypes=".concat(e)),this.http.get(i,nr(n))},t.prototype.getNotificationUserSettings=function(t){return this.http.get("/api/notification/settings/user",nr(t))},t.prototype.saveNotificationUserSettings=function(t,e){return this.http.post("/api/notification/settings/user",t,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();function vp(t,e){return t.sort((function(t,n){var i=t.id.id,r=n.id.id;return e.indexOf(i)-e.indexOf(r)})),t}var Tp=function(){function t(t){this.http=t}return t.prototype.getTenantProfiles=function(t,e){return this.http.get("/api/tenantProfiles".concat(t.toQuery()),nr(e))},t.prototype.getTenantProfile=function(t,e){return this.http.get("/api/tenantProfile/".concat(t),nr(e))},t.prototype.saveTenantProfile=function(t,e){return this.http.post("/api/tenantProfile",t,nr(e))},t.prototype.deleteTenantProfile=function(t,e){return this.http.delete("/api/tenantProfile/".concat(t),nr(e))},t.prototype.setDefaultTenantProfile=function(t,e){return this.http.post("/api/tenantProfile/".concat(t,"/default"),nr(e))},t.prototype.getDefaultTenantProfileInfo=function(t){return this.http.get("/api/tenantProfileInfo/default",nr(t))},t.prototype.getTenantProfileInfo=function(t,e){return this.http.get("/api/tenantProfileInfo/".concat(t),nr(e))},t.prototype.getTenantProfileInfos=function(t,e){return this.http.get("/api/tenantProfileInfos".concat(t.toQuery()),nr(e))},t.prototype.getTenantProfilesByIds=function(t,e){return this.http.get("/api/tenantProfiles?ids=".concat(t.join(",")),nr(e)).pipe(xn((function(e){return vp(e,t)})))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Ep=function(){function t(t){this.http=t}return t.prototype.getResources=function(t,e,n){var i="/api/resource".concat(t.toQuery());return kr(e)&&(i+="&resourceType=".concat(e)),this.http.get(i,nr(n))},t.prototype.getTenantResources=function(t,e){return this.http.get("/api/resource/tenant".concat(t.toQuery()),nr(e))},t.prototype.getResource=function(t,e){return this.http.get("/api/resource/".concat(t),nr(e))},t.prototype.getResourceInfo=function(t,e){return this.http.get("/api/resource/info/".concat(t),nr(e))},t.prototype.saveResources=function(t,e){var n=this,i=100;i=t.length>i?i:t.length;for(var r=[],a=0;a<i;a++)r.push(this.saveResource(t[a],e).pipe(Xn((function(){return Un({})}))));return zn(r).pipe(Gn((function(r){return t.splice(0,i),t.length?n.saveResources(t,e):Un(r)})))},t.prototype.saveResource=function(t,e){return this.http.post("/api/resource",t,nr(e))},t.prototype.deleteResource=function(t,e){return this.http.delete("/api/resource/".concat(t),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();function bp(t){return{tenantId:"000000",customerId:"111112",authority:ma.SYS_ADMIN,userId:"111"}}var Sp=function(){function t(t,e,n,i,r,a,o,s,u,c,l,p,d,f,h,y){this.http=t,this.deviceService=e,this.assetService=n,this.entityViewService=i,this.tenantService=r,this.customerService=a,this.userService=o,this.attributeService=s,this.deviceProfileService=u,this.tenantProfileService=c,this.assetProfileService=l,this.utils=p,this.queueService=d,this.alarmService=f,this.notificationService=h,this.resourceService=y}return t.prototype.getEntityObservable=function(t,e,n){var i;switch(t){case or.DEVICE:i=this.deviceService.getDevice(e,n);break;case or.ASSET:i=this.assetService.getAsset(e,n);break;case or.ENTITY_VIEW:i=this.entityViewService.getEntityView(e,n);break;case or.TENANT:i=this.tenantService.getTenant(e,n);break;case or.CUSTOMER:i=this.customerService.getCustomer(e,n);break;case or.USER:i=this.userService.getUser(e,n);break;case or.ALARM:i=this.alarmService.getAlarm(e,n);break;case or.QUEUE:i=this.queueService.getQueueById(e,n);break;case or.QUEUE_STATS:i=this.queueService.getQueueStatisticsById(e,n)}return i},t.prototype.getEntity=function(t,e,n){var i=this.getEntityObservable(t,e,n);return i||Pn(null)},t.prototype.getEntitiesByIdsObservable=function(t,e){var n=[];return e.forEach((function(e){n.push(t(e))})),zn(n).pipe(xn((function(t){return t?(t.sort((function(t,n){return e.indexOf(t.id.id)-e.indexOf(n.id.id)})),t):[]})))},t.prototype.getEntitiesObservable=function(t,e,n){var i,r=this;switch(t){case or.DEVICE:i=this.deviceService.getDevices(e,n);break;case or.ASSET:i=this.assetService.getAssets(e,n);break;case or.ENTITY_VIEW:i=this.getEntitiesByIdsObservable((function(t){return r.entityViewService.getEntityView(t,n)}),e);break;case or.TENANT:i=this.getEntitiesByIdsObservable((function(t){return r.tenantService.getTenant(t,n)}),e);break;case or.CUSTOMER:i=this.getEntitiesByIdsObservable((function(t){return r.customerService.getCustomer(t,n)}),e);break;case or.USER:i=this.getEntitiesByIdsObservable((function(t){return r.userService.getUser(t,n)}),e);break;case or.ALARM:console.error("Get Alarm Entity is not implemented!");break;case or.DEVICE_PROFILE:i=this.getEntitiesByIdsObservable((function(t){return r.deviceProfileService.getDeviceProfileInfo(t,n)}),e);break;case or.TENANT_PROFILE:i=this.tenantProfileService.getTenantProfilesByIds(e,n);break;case or.ASSET_PROFILE:i=this.getEntitiesByIdsObservable((function(t){return r.assetProfileService.getAssetProfileInfo(t,n)}),e);break;case or.NOTIFICATION_TARGET:i=this.notificationService.getNotificationTargetsByIds(e,n);break;case or.QUEUE_STATS:i=this.queueService.getQueueStatisticsByIds(e,n)}return i},t.prototype.getEntities=function(t,e,n){var i=this.getEntitiesObservable(t,e,n);return i||Pn(null)},t.prototype.getSingleTenantByPageLinkObservable=function(t,e){var n=bp(this.store).tenantId;return this.tenantService.getTenant(n,e).pipe(xn((function(e){var n={data:[],totalPages:0,totalElements:0,hasNext:!1};return e.title.toLowerCase().startsWith(t.textSearch.toLowerCase())&&(n.data.push(e),n.totalPages=1,n.totalElements=1),n})))},t.prototype.getSingleCustomerByPageLinkObservable=function(t,e){var n=bp(this.store).customerId;return this.customerService.getCustomer(n,e).pipe(xn((function(e){var n={data:[],totalPages:0,totalElements:0,hasNext:!1};return e.title.toLowerCase().startsWith(t.textSearch.toLowerCase())&&(n.data.push(e),n.totalPages=1,n.totalElements=1),n})))},t.prototype.getEntitiesByPageLinkObservable=function(t,e,n,i){var r;void 0===n&&(n="");var a=bp(this.store),o=a.customerId;switch(t){case or.DEVICE:e.sortOrder.property="name",r=a.authority===ma.CUSTOMER_USER?this.deviceService.getCustomerDeviceInfos(o,e,n,i):this.deviceService.getTenantDeviceInfos(e,n,i);break;case or.ASSET:e.sortOrder.property="name",r=a.authority===ma.CUSTOMER_USER?this.assetService.getCustomerAssetInfos(o,e,n,i):this.assetService.getTenantAssetInfos(e,n,i);break;case or.EDGE:case or.ENTITY_VIEW:e.sortOrder.property="name",r=a.authority===ma.CUSTOMER_USER?this.entityViewService.getCustomerEntityViewInfos(o,e,n,i):this.entityViewService.getTenantEntityViewInfos(e,n,i);break;case or.TENANT:e.sortOrder.property="title",r=a.authority===ma.TENANT_ADMIN?this.getSingleTenantByPageLinkObservable(e,i):this.tenantService.getTenants(e,i);break;case or.CUSTOMER:e.sortOrder.property="title",r=a.authority===ma.CUSTOMER_USER?this.getSingleCustomerByPageLinkObservable(e,i):this.customerService.getCustomers(e,i);break;case or.USER:e.sortOrder.property="email",r=this.userService.getUsers(e);break;case or.ALARM:console.error("Get Alarm Entities is not implemented!");break;case or.DEVICE_PROFILE:e.sortOrder.property="name",r=this.deviceProfileService.getDeviceProfileInfos(e,null,i);break;case or.TENANT_PROFILE:e.sortOrder.property="name",r=this.tenantProfileService.getTenantProfiles(e,i);break;case or.ASSET_PROFILE:e.sortOrder.property="name",r=this.assetProfileService.getAssetProfileInfos(e,i);break;case or.NOTIFICATION_TARGET:e.sortOrder.property="name",r=this.notificationService.getNotificationTargets(e,n,i);break;case or.NOTIFICATION_TEMPLATE:e.sortOrder.property="name",r=this.notificationService.getNotificationTemplates(e,n,i);break;case or.NOTIFICATION_RULE:e.sortOrder.property="name",r=this.notificationService.getNotificationRules(e,i);break;case or.TB_RESOURCE:e.sortOrder.property="title",r=this.resourceService.getTenantResources(e,i);break;case or.QUEUE_STATS:e.sortOrder.property="createdTime",r=this.queueService.getQueueStatistics(e,i)}return r},t.prototype.getEntitiesByPageLink=function(t,e,n,i){var r=this;void 0===n&&(n="");var a,o,s,u=this.getEntitiesByPageLinkObservable(t,e,n,i);return u?u.pipe((a=function(a){return a.hasNext?(e.page+=1,r.getEntitiesByPageLinkObservable(t,e,n,i)):hn},void 0===o&&(o=1/0),o=(o||0)<1?1/0:o,Je((function(t,e){return Kn(t,e,a,o,void 0,!0,s)}))),xn((function(t){return t.data})),ti((function(t){return t})),Je((function(t,e){$n(Zn,[])(t).subscribe(e)}))):Un(null)},t.prototype.getEntitiesByNameFilter=function(t,e,n,i,r){void 0===i&&(i="");var a=new kc(n,0,e,{property:"name",direction:hc.ASC});if(-1===n)return a.pageSize=100,this.getEntitiesByPageLink(t,a,i,r).pipe(xn((function(t){return t&&t.length?t:null})));var o=this.getEntitiesByPageLinkObservable(t,a,i,r);return o?o.pipe(xn((function(t){return t&&t.data.length?t.data:null}))):Un(null)},t.prototype.findEntityDataByQuery=function(t,e){return this.http.post("/api/entitiesQuery/find",t,nr(e))},t.prototype.findEntityKeysByQuery=function(t,e,n,i,r){void 0===e&&(e=!0),void 0===n&&(n=!0);var a="/api/entitiesQuery/find/keys?attributes=".concat(e,"&timeseries=").concat(n);return i&&(a+="&scope=".concat(i)),this.http.post(a,t,nr(r))},t.prototype.findAlarmDataByQuery=function(t,e){return this.http.post("/api/alarmsQuery/find",t,nr(e))},t.prototype.findEntityInfosByFilterAndName=function(t,e,n){var i={type:ml.ENTITY_FIELD,key:"name"},r={entityFilter:t,pageLink:{pageSize:10,page:0,sortOrder:{key:i,direction:hc.ASC}},entityFields:ip,keyFilters:e&&e.length?[{key:i,valueType:Tl.STRING,value:null,predicate:{type:Al.STRING,operation:wl.STARTS_WITH,ignoreCase:!0,value:{defaultValue:e}}}]:null};return this.findEntityDataByQuery(r,n).pipe(xn((function(t){return{data:t.data.map((function(t){return rp(t)})),hasNext:t.hasNext,totalElements:t.totalElements,totalPages:t.totalPages}})))},t.prototype.findSingleEntityInfoByEntityFilter=function(t,e){var n={entityFilter:t,pageLink:Jl(1),entityFields:ip};return this.findEntityDataByQuery(n,e).pipe(xn((function(t){return t.data.length?rp(t.data[0]):null})))},t.prototype.filterAliasByEntityTypes=function(t,e){var n,i,r,a,o=t.filter;if(this.filterAliasFilterTypeByEntityTypes(o.type,e))switch(o.type){case Mc.singleEntity:return e.indexOf(o.singleEntity.entityType)>-1;case Mc.entityList:case Mc.entityName:case Mc.entityType:return e.indexOf(o.entityType)>-1;case Mc.stateEntity:return!0;case Mc.assetType:return e.indexOf(or.ASSET)>-1;case Mc.deviceType:return e.indexOf(or.DEVICE)>-1;case Mc.edgeType:return e.indexOf(or.EDGE)>-1;case Mc.entityViewType:return e.indexOf(or.ENTITY_VIEW)>-1;case Mc.relationsQuery:if(o.filters&&o.filters.length){var s=!1;try{for(var u=ve(o.filters),c=u.next();!c.done;c=u.next()){var l=c.value;if(!l.entityTypes||!l.entityTypes.length){s=!0;break}try{for(var p=(r=void 0,ve(l.entityTypes)),d=p.next();!d.done;d=p.next()){var f=d.value;if(e.indexOf(f)>-1){s=!0;break}}}catch(t){r={error:t}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(r)throw r.error}}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return s}return!0;case Mc.assetSearchQuery:return e.indexOf(or.ASSET)>-1;case Mc.deviceSearchQuery:return e.indexOf(or.DEVICE)>-1;case Mc.edgeSearchQuery:return e.indexOf(or.EDGE)>-1;case Mc.entityViewSearchQuery:return e.indexOf(or.ENTITY_VIEW)>-1}return!1},t.prototype.filterAliasFilterTypeByEntityTypes=function(t,e){var n=this;if(!e||!e.length)return!0;var i=!1;return e.forEach((function(e){i=i||n.filterAliasFilterTypeByEntityType(t,e)})),i},t.prototype.filterAliasFilterTypeByEntityType=function(t,e){switch(t){case Mc.singleEntity:case Mc.entityList:case Mc.entityName:case Mc.entityType:case Mc.stateEntity:return!0;case Mc.assetType:return e===or.ASSET;case Mc.deviceType:return e===or.DEVICE;case Mc.edgeType:return e===or.EDGE;case Mc.entityViewType:return e===or.ENTITY_VIEW;case Mc.relationsQuery:case Mc.apiUsageState:return!0;case Mc.assetSearchQuery:return e===or.ASSET;case Mc.deviceSearchQuery:return e===or.DEVICE;case Mc.edgeSearchQuery:return e===or.EDGE;case Mc.entityViewSearchQuery:return e===or.ENTITY_VIEW}return!1},t.prototype.getEntityFieldKeys=function(t,e){void 0===e&&(e="");var n=[za.createdTime.keyName],i=e.toLowerCase();switch(t){case or.USER:n.push(za.name.keyName),n.push(za.email.keyName),n.push(za.firstName.keyName),n.push(za.lastName.keyName),n.push(za.phone.keyName),n.push(za.ownerName.keyName),n.push(za.ownerType.keyName);break;case or.TENANT:case or.CUSTOMER:n.push(za.title.keyName),n.push(za.email.keyName),n.push(za.country.keyName),n.push(za.state.keyName),n.push(za.city.keyName),n.push(za.address.keyName),n.push(za.address2.keyName),n.push(za.zip.keyName),n.push(za.phone.keyName);break;case or.ENTITY_VIEW:n.push(za.name.keyName),n.push(za.type.keyName),n.push(za.ownerName.keyName),n.push(za.ownerType.keyName);break;case or.DEVICE:case or.EDGE:case or.ASSET:n.push(za.name.keyName),n.push(za.type.keyName),n.push(za.label.keyName),n.push(za.ownerName.keyName),n.push(za.ownerType.keyName);break;case or.DASHBOARD:n.push(za.title.keyName),n.push(za.ownerName.keyName),n.push(za.ownerType.keyName);break;case or.API_USAGE_STATE:n.push(za.name.keyName);break;case or.QUEUE_STATS:n.push(za.queueName.keyName),n.push(za.serviceId.keyName)}return i?n.filter((function(t){return 0===t.toLowerCase().indexOf(i)})):n},t.prototype.getAlarmKeys=function(t){void 0===t&&(t="");var e=Object.keys(Ka),n=t.toLowerCase();return n?e.filter((function(t){return 0===t.toLowerCase().indexOf(n)})):e},t.prototype.getEntityKeys=function(t,e,n,i){if(n===Va.entityField)return Un(this.getEntityFieldKeys(t.entityType,e));if(n===Va.alarm)return Un(this.getAlarmKeys(e));var r="/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/keys/");return n===Va.timeseries?r+="timeseries":n===Va.attribute&&(r+="attributes"),this.http.get(r,nr(i)).pipe(xn((function(t){if(e){var n=e.toLowerCase();return t.filter((function(t){return 0===t.toLowerCase().indexOf(n)}))}return t})))},t.prototype.getEntityKeysByEntityFilter=function(t,e,n,i){return this.getEntityKeysByEntityFilterAndScope(t,e,n,null,i)},t.prototype.getEntityKeysByEntityFilterAndScope=function(t,e,n,i,r){var a,o=this;if(!e.length)return Un([]);if(null!==t&&e.some((function(t){return[Va.timeseries,Va.attribute].includes(t)}))){var s={entityFilter:t,pageLink:Jl(100)};a=this.findEntityKeysByQuery(s,e.includes(Va.attribute),e.includes(Va.timeseries),i,r)}else a=Un({attribute:[],timeseries:[],entityTypes:n||[]});return a.pipe(xn((function(t){var n=[];return e.forEach((function(e){var i;switch(e){case Va.entityField:if(t.entityTypes.length){var r=[];t.entityTypes.forEach((function(t){return r.push.apply(r,Ee([],Te(o.getEntityFieldKeys(t)),!1))})),i=Array.from(new Set(r))}break;case Va.alarm:i=o.getAlarmKeys();break;case Va.attribute:case Va.timeseries:t[e].length&&(i=t[e])}i&&n.push.apply(n,Ee([],Te(i.map((function(t){return{name:t,type:e}}))),!1))})),n})))},t.prototype.createDatasourcesFromSubscriptionsInfo=function(t){var e=this,n=t.map((function(t){return e.createDatasourceFromSubscriptionInfo(t)}));return this.utils.generateColors(n),n},t.prototype.createAlarmSourceFromSubscriptionInfo=function(t){if(t.entityId&&t.entityType){var e=this.createDatasourceFromSubscriptionInfo(t);return this.utils.generateColors([e]),e}throw new Error("Can't crate alarm source without entityId information!")},t.prototype.resolveAlias=function(t,e){var n=this,i=t.filter;return this.resolveAliasFilter(i,e).pipe(Gn((function(r){var a={alias:t.alias,entityFilter:r.entityFilter,stateEntity:r.stateEntity,entityParamName:r.entityParamName,resolveMultiple:i.resolveMultiple,currentEntity:null};if(!a.resolveMultiple&&a.entityFilter){var o=null;if(r.stateEntity&&a.entityFilter.type===Mc.singleEntity&&e){var s=e;r.entityParamName&&r.entityParamName.length&&(s=e[r.entityParamName]),s&&s.entityId&&s.entityName&&(o={id:s.entityId.id,entityType:s.entityId.entityType,name:s.entityName,label:s.entityLabel})}return(o?Un(o):n.findSingleEntityInfoByEntityFilter(a.entityFilter,{ignoreLoading:!0,ignoreErrors:!0})).pipe(xn((function(t){return a.currentEntity=t,a})))}return Un(a)})))},t.prototype.resolveAliasFilter=function(t,e){var n={entityFilter:null,stateEntity:!1};t.stateEntityParamName&&t.stateEntityParamName.length&&(n.entityParamName=t.stateEntityParamName);var i=this.getStateEntityInfo(t,e).entityId;switch(t.type){case Mc.singleEntity:var r=this.resolveAliasEntityId(t.singleEntity.entityType,t.singleEntity.id);return n.entityFilter={type:Mc.singleEntity,singleEntity:r},Un(n);case Mc.entityList:case Mc.entityName:case Mc.entityType:return n.entityFilter=Qr(t),Un(n);case Mc.stateEntity:return n.stateEntity=!0,i&&(n.entityFilter={type:Mc.singleEntity,singleEntity:i}),Un(n);case Mc.assetType:case Mc.deviceType:case Mc.entityViewType:case Mc.apiUsageState:case Mc.edgeType:return n.entityFilter=Qr(t),Un(n);case Mc.relationsQuery:case Mc.assetSearchQuery:case Mc.deviceSearchQuery:case Mc.edgeSearchQuery:case Mc.entityViewSearchQuery:var a=void 0,o=void 0;if(n.stateEntity=t.rootStateEntity,n.stateEntity&&i?(a=i.entityType,o=i.id):n.stateEntity||(a=t.rootEntity.entityType,o=t.rootEntity.id),a&&o){var s=this.resolveAliasEntityId(a,o);return n.entityFilter=Qr(t),n.entityFilter.rootEntity=s,Un(n)}return Un(n)}},t.prototype.checkEntityAlias=function(t){return this.resolveAliasFilter(t.filter,null).pipe(xn((function(t){return!!t.stateEntity||Cr(t.entityFilter)})),Xn((function(t){return Un(!1)})))},t.prototype.resolveAlarmFilter=function(t,e){void 0===e&&(e=!0);var n={};if(t)if(n.typeList=t.typeList,n.severityList=t.severityList,n.statusList=t.statusList,n.searchPropagatedAlarms=Or(t.searchPropagatedAlarms)?t.searchPropagatedAlarms:e,t.assignedToCurrentUser){var i=bp(this.store);n.assigneeId=new ka(i.userId)}else n.assigneeId=t.assigneeId;return n},t.prototype.saveEntityParameters=function(t,e,n,i){var r=this;return this.getSaveEntityObservable(t,e,i).pipe(Gn((function(t){return r.saveEntityData(t.id,e,i).pipe(xn((function(){return{create:{entity:1}}})),Xn((function(t){return Un({error:{entity:1,errors:t.message}})})))})),Xn((function(a){if(n){var o=void 0;switch(t){case or.DEVICE:o=r.deviceService.findByName(e.name,i);break;case or.ASSET:o=r.assetService.findByName(e.name,i)}return o.pipe(Gn((function(n){return zn(r.getUpdateEntityTasks(t,e,n,i)).pipe(xn((function(){return{update:{entity:1}}})),Xn((function(t){return Un({error:{entity:1,errors:t.message}})})))})),Xn((function(t){return Un({error:{entity:1,errors:"Line: ".concat(e.lineNumber,"; Error: ").concat(t.error.message)}})})))}return Un({error:{entity:1,errors:"Line: ".concat(e.lineNumber,"; Error: ").concat(a.error.message)}})})))},t.prototype.getSaveEntityObservable=function(t,e,n){var i;switch(t){case or.DEVICE:var r={name:e.name,type:e.type,label:e.label,additionalInfo:{description:e.description}};null!==e.gateway&&(r.additionalInfo=de(de({},r.additionalInfo),{gateway:e.gateway})),i=this.deviceService.saveDevice(r,n);break;case or.ASSET:var a={name:e.name,type:e.type,label:e.label,additionalInfo:{description:e.description}};i=this.assetService.saveAsset(a,n);break;case or.EDGE:var o=e;o.name,o.type,o.label,o.description,""!==o.routingKey?o.routingKey:ta(),""!==o.secret?o.secret:da(20)}return i},t.prototype.getUpdateEntityTasks=function(t,e,n,i){var r,a,o=[];switch(t){case or.ASSET:case or.DEVICE:if(a=(r=n).additionalInfo||{},r.label!==e.label||r.type!==e.type||a.description!==e.description||r.id.entityType===or.DEVICE&&a.gateway!==e.gateway)switch(r.label=e.label,r.type=e.type,r.additionalInfo=a,r.additionalInfo.description=e.description,r.id.entityType===or.DEVICE&&(r.additionalInfo.gateway=e.gateway),r.id.entityType){case or.DEVICE:o.push(this.deviceService.saveDevice(r,i));break;case or.ASSET:o.push(this.assetService.saveAsset(r,i))}o.push(this.saveEntityData(n.id,e,i));break;case or.EDGE:a=(r=n).additionalInfo||{};var s=e;(r.label!==s.label||r.type!==s.type||""!==s.routingKey&&r.routingKey!==s.routingKey||""!==s.secret&&r.secret!==s.secret||a.description!==s.description)&&(r.label=s.label,r.type=s.type,r.additionalInfo=a,r.additionalInfo.description=s.description,""!==s.routingKey&&(r.routingKey=s.routingKey),""!==s.secret&&(r.secret=s.secret)),o.push(this.saveEntityData(n.id,s,i))}return o},t.prototype.saveEntityData=function(t,e,n){var i,r=this,a=[];if(Object.keys(e.credential).length){var o,s=null,u=null;Cr(e.credential.mqtt)?(o=ll.MQTT_BASIC,u=JSON.stringify(e.credential.mqtt)):Cr(e.credential.lwm2m)?(o=ll.LWM2M_CREDENTIALS,u=JSON.stringify(e.credential.lwm2m)):kr(e.credential.x509)?(o=ll.X509_CERTIFICATE,u=e.credential.x509):(o=ll.ACCESS_TOKEN,s=e.credential.accessToken),i=this.deviceService.getDeviceCredentials(t.id,!1,n).pipe(Gn((function(t){return t.credentialsId=s,t.credentialsType=o,t.credentialsValue=u,r.deviceService.saveDeviceCredentials(t,n).pipe(xn((function(){return"ok"})),Xn((function(t){return Un("Line: ".concat(e.lineNumber,"; Error: ").concat(t.error.message))})))}))),a.push(i)}return e.attributes.shared&&e.attributes.shared.length&&(i=this.attributeService.saveEntityAttributes(t,Ya.SHARED_SCOPE,e.attributes.shared,n).pipe(xn((function(){return"ok"})),Xn((function(t){return Un("Line: ".concat(e.lineNumber,"; Error: ").concat(t.error.message))}))),a.push(i)),e.attributes.server&&e.attributes.server.length&&(i=this.attributeService.saveEntityAttributes(t,Ya.SERVER_SCOPE,e.attributes.server,n).pipe(xn((function(){return"ok"})),Xn((function(t){return Un("Line: ".concat(e.lineNumber,"; Error: ").concat(t.error.message))}))),a.push(i)),e.timeseries&&e.timeseries.length&&(i=this.attributeService.saveEntityTimeseries(t,"time",e.timeseries,n).pipe(xn((function(){return"ok"})),Xn((function(t){return Un("Line: ".concat(e.lineNumber,"; Error: ").concat(t.error.message))}))),a.push(i)),a.length?zn(a).pipe(xn((function(t){var e=t.filter((function(t){return"ok"!==t}));if(e.length>0)throw Error(e.join("\n"));return t}))):Un(null)},t.prototype.getStateEntityInfo=function(t,e){var n=null;return e&&(t.stateEntityParamName&&t.stateEntityParamName.length?e[t.stateEntityParamName]&&(n=e[t.stateEntityParamName].entityId):n=e.entityId),n||(n=t.defaultStateEntity),n&&(n=this.resolveAliasEntityId(n.entityType,n.id)),{entityId:n}},t.prototype.resolveAliasEntityId=function(t,e){var n={entityType:t,id:e};if(t===sr.CURRENT_CUSTOMER){var i=bp(this.store);n.entityType=or.CUSTOMER,i.authority===ma.CUSTOMER_USER&&(n.id=i.customerId)}else if(t===sr.CURRENT_TENANT){i=bp(this.store);n.entityType=or.TENANT,n.id=i.tenantId}else if(t===sr.CURRENT_USER){i=bp(this.store);n.entityType=or.USER,n.id=i.userId}else if(t===sr.CURRENT_USER_OWNER){(i=bp(this.store)).authority===ma.TENANT_ADMIN?(n.entityType=or.TENANT,n.id=i.tenantId):i.authority===ma.CUSTOMER_USER&&(n.entityType=or.CUSTOMER,n.id=i.customerId)}return n},t.prototype.createDatasourceFromSubscriptionInfo=function(t){var e=null;if((t=this.validateSubscriptionInfo(t)).type===qs.entity?(e={type:t.type,entityName:t.entityName,name:t.entityName,entityType:t.entityType,entityId:t.entityId,dataKeys:[]},this.prepareEntityFilterFromSubscriptionInfo(e,t)):t.type!==qs.function&&t.type!==qs.entityCount&&t.type!==qs.alarmCount||(e={type:t.type,name:t.name||t.type,dataKeys:[]}),null!==e&&(t.timeseries&&this.createDatasourceKeys(t.timeseries,Va.timeseries,e),t.attributes&&this.createDatasourceKeys(t.attributes,Va.attribute,e),t.functions&&this.createDatasourceKeys(t.functions,Va.function,e),t.alarmFields&&this.createDatasourceKeys(t.alarmFields,Va.alarm,e),t.type===qs.entityCount||t.type===qs.alarmCount)){var n=this.utils.createKey({name:"count"},Va.count);e.dataKeys.push(n)}return e},t.prototype.validateSubscriptionInfo=function(t){return"device"===t.type&&(t.type=qs.entity,t.entityType=or.DEVICE,t.deviceId?t.entityId=t.deviceId:t.deviceName?t.entityName=t.deviceName:t.deviceNamePrefix?t.entityNamePrefix=t.deviceNamePrefix:t.deviceIds&&(t.entityIds=t.deviceIds)),t},t.prototype.prepareEntityFilterFromSubscriptionInfo=function(t,e){if(e.entityId)t.entityFilter={type:Mc.singleEntity,singleEntity:{entityType:e.entityType,id:e.entityId}},t.pageLink=Xl;else if(e.entityName||e.entityNamePrefix){var n=void 0,i=void 0;if(Or(e.entityName)&&e.entityName.length)n=e.entityName,i=Qr(Xl);else n=e.entityNamePrefix,i=Jl(r=Cr(e.pageSize)&&e.pageSize>0?e.pageSize:1024);t.entityFilter={type:Mc.entityName,entityType:e.entityType,entityNameFilter:n},t.pageLink=i}else if(e.entityIds){t.entityFilter={type:Mc.entityList,entityType:e.entityType,entityList:e.entityIds};var r=Cr(e.pageSize)&&e.pageSize>0?e.pageSize:1024;t.pageLink=Jl(r)}},t.prototype.createDatasourceKeys=function(t,e,n){var i=this;t.forEach((function(t){var r=i.utils.createKey(t,e);n.dataKeys.push(r)}))},t.prototype.getAssignedToEdgeEntitiesByType=function(t,e,n){var i;switch(e){case or.ASSET:i=this.assetService.getEdgeAssets(t,n);break;case or.DEVICE:i=this.deviceService.getEdgeDevices(t,n);break;case or.ENTITY_VIEW:i=this.entityViewService.getEdgeEntityViews(t,n)}return i},t.prototype.getEdgeEventContent=function(t){var e,n=t.entityId,i=t.type;switch(i){case tp.DASHBOARD:case tp.ALARM:case tp.RULE_CHAIN:case tp.EDGE:case tp.USER:case tp.CUSTOMER:case tp.TENANT:case tp.ASSET:case tp.DEVICE:case tp.ENTITY_VIEW:e=cp.includes(t.action)?Un(t.body):this.getEntity(i,n,{ignoreLoading:!0,ignoreErrors:!0});break;case tp.DEVICE_PROFILE:e=this.deviceProfileService.getDeviceProfile(n);break;case tp.ASSET_PROFILE:e=this.assetProfileService.getAssetProfile(n);break;case tp.RELATION:e=Un(t.body)}return e},t.prototype.getEntitySubtypesObservable=function(t){var e;switch(t){case or.ASSET:e=this.assetProfileService.getAssetProfileNames(!1,{ignoreLoading:!0}).pipe(xn((function(t){return t.map((function(t){return t.name}))})));break;case or.DEVICE:e=this.deviceProfileService.getDeviceProfileNames(!1,{ignoreLoading:!0}).pipe(xn((function(t){return t.map((function(t){return t.name}))})));break;case or.ENTITY_VIEW:e=this.entityViewService.getEntityViewTypes({ignoreLoading:!0}).pipe(xn((function(t){return t.map((function(t){return t.type}))})))}return e},t=fe([ae(),he(0,se(Zi.HttpClient)),he(1,se(Zi.DeviceService)),he(2,se(Zi.AssetService)),he(3,se(Zi.EntityViewService)),he(4,se(Zi.TenantService)),he(5,se(Zi.CustomerService)),he(6,se(Zi.UserService)),he(7,se(Zi.AttributeService)),he(8,se(Zi.DeviceProfileService)),he(9,se(Zi.TenantProfileService)),he(10,se(Zi.AssetProfileService)),he(11,se(Zi.UtilsService)),he(12,se(Zi.QueueService)),he(13,se(Zi.AlarmService)),he(14,se(Zi.NotificationService)),he(15,se(Zi.ResourceService)),ye("design:paramtypes",[Ci,wc,bc,Dc,Uc,Ac,ga,Sc,hp,Tp,mp,mc,yp,Ec,gp,Ep])],t)}(),_p=function(){function t(t){this.http=t}return t.prototype.getEvents=function(t,e,n,i,r){return this.http.get("/api/events/".concat(t.entityType,"/").concat(t.id,"/").concat(e)+"".concat(i.toQuery(),"&tenantId=").concat(n),nr(r))},t.prototype.getFilterEvents=function(t,e,n,i,r,a){return this.http.post("/api/events/".concat(t.entityType,"/").concat(t.id)+"".concat(r.toQuery(),"&tenantId=").concat(n),de(de({},i),{eventType:e}),nr(a))},t.prototype.clearEvents=function(t,e,n,i,r,a){return this.http.post("/api/events/".concat(t.entityType,"/").concat(t.id,"/clear?tenantId=").concat(i)+(r.startTime?"&startTime=".concat(r.startTime):"")+(r.endTime?"&endTime=".concat(r.endTime):""),de(de({},n),{eventType:e}),nr(a))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Ap=function(){function t(t){this.http=t}return t.prototype.getOAuth2Settings=function(t){return this.http.get("/api/oauth2/config",nr(t))},t.prototype.getOAuth2Template=function(t){return this.http.get("/api/oauth2/config/template",nr(t))},t.prototype.saveOAuth2Settings=function(t,e){return this.http.post("/api/oauth2/config",t,nr(e))},t.prototype.getLoginProcessingUrl=function(t){return this.http.get("/api/oauth2/loginProcessingUrl",nr(t))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),wp=function(){function t(t){this.http=t}return t.prototype.getOtaPackages=function(t,e){return this.http.get("/api/otaPackages".concat(t.toQuery()),nr(e))},t.prototype.getOtaPackagesInfoByDeviceProfileId=function(t,e,n,i){var r="/api/otaPackages/".concat(e,"/").concat(n).concat(t.toQuery());return this.http.get(r,nr(i))},t.prototype.getOtaPackage=function(t,e){return this.http.get("/api/otaPackages/".concat(t),nr(e))},t.prototype.getOtaPackageInfo=function(t,e){return this.http.get("/api/otaPackage/info/".concat(t),nr(e))},t.prototype.saveOtaPackage=function(t,e){var n=this;if(!t.file)return this.saveOtaPackageInfo(t,e);var i=Qr(t);return delete i.file,delete i.checksum,delete i.checksumAlgorithm,this.saveOtaPackageInfo(i,e).pipe(Gn((function(e){return n.uploadOtaPackageFile(e.id.id,t.file,t.checksumAlgorithm,t.checksum).pipe(Xn((function(){return n.deleteOtaPackage(e.id.id)})))})))},t.prototype.saveOtaPackageInfo=function(t,e){return this.http.post("/api/otaPackage",t,nr(e))},t.prototype.uploadOtaPackageFile=function(t,e,n,i,r){r||(r={});var a=new FormData;a.append("file",e);var o="/api/otaPackage/".concat(t,"?checksumAlgorithm=").concat(n);return i&&(o+="&checksum=".concat(i)),this.http.post(o,a,rr(r.ignoreLoading,r.ignoreErrors,r.resendRequest))},t.prototype.deleteOtaPackage=function(t,e){return this.http.delete("/api/otaPackage/".concat(t),nr(e))},t.prototype.countUpdateDeviceAfterChangePackage=function(t,e,n){return this.http.get("/api/devices/count/".concat(t,"/").concat(e.id),nr(n))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Ip={url:"",deserializer:function(t){return JSON.parse(t.data)},serializer:function(t){return JSON.stringify(t)}},Dp=function(t){function e(e,n){var i=t.call(this)||this;if(i._socket=null,e instanceof qe)i.destination=n,i.source=e;else{var r=i._config=de({},Ip);if(i._output=new nn,"string"==typeof e)r.url=e;else for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);if(!r.WebSocketCtor&&WebSocket)r.WebSocketCtor=WebSocket;else if(!r.WebSocketCtor)throw new Error("no WebSocket constructor can be found");i.destination=new sn}return i}return pe(e,t),e.prototype.lift=function(t){var n=new e(this._config,this.destination);return n.operator=t,n.source=this,n},e.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new sn),this._output=new nn},e.prototype.multiplex=function(t,e,n){var i=this;return new qe((function(r){try{i.next(t())}catch(t){r.error(t)}var a=i.subscribe({next:function(t){try{n(t)&&r.next(t)}catch(t){r.error(t)}},error:function(t){return r.error(t)},complete:function(){return r.complete()}});return function(){try{i.next(e())}catch(t){r.error(t)}a.unsubscribe()}}))},e.prototype._connectSocket=function(){var t=this,e=this._config,n=e.WebSocketCtor,i=e.protocol,r=e.url,a=e.binaryType,o=this._output,s=null;try{s=i?new n(r,i):new n(r),this._socket=s,a&&(this._socket.binaryType=a)}catch(t){return void o.error(t)}var u=new Re((function(){t._socket=null,s&&1===s.readyState&&s.close()}));s.onopen=function(e){if(!t._socket)return s.close(),void t._resetState();var n=t._config.openObserver;n&&n.next(e);var i=t.destination;t.destination=Fe.create((function(e){if(1===s.readyState)try{var n=t._config.serializer;s.send(n(e))}catch(e){t.destination.error(e)}}),(function(e){var n=t._config.closingObserver;n&&n.next(void 0),e&&e.code?s.close(e.code,e.reason):o.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t._resetState()}),(function(){var e=t._config.closingObserver;e&&e.next(void 0),s.close(),t._resetState()})),i&&i instanceof sn&&u.add(i.subscribe(t.destination))},s.onerror=function(e){t._resetState(),o.error(e)},s.onclose=function(e){s===t._socket&&t._resetState();var n=t._config.closeObserver;n&&n.next(e),e.wasClean?o.complete():o.error(e)},s.onmessage=function(e){try{var n=t._config.deserializer;o.next(n(e))}catch(t){o.error(t)}}},e.prototype._subscribe=function(t){var e=this,n=this.source;return n?n.subscribe(t):(this._socket||this._connectSocket(),this._output.subscribe(t),t.add((function(){var t=e._socket;0===e._output.observers.length&&(!t||1!==t.readyState&&0!==t.readyState||t.close(),e._resetState())})),t)},e.prototype.unsubscribe=function(){var e=this._socket;!e||1!==e.readyState&&0!==e.readyState||e.close(),this._resetState(),t.prototype.unsubscribe.call(this)},e}(rn);var Rp,Np=function(){function t(t,e,n,i,r){this.authService=t,this.ngZone=e,this.apiEndpoint=n,this.cmdWrapper=i,this.window=r,this.isActive=!1,this.isOpening=!1,this.isOpened=!1,this.isReconnect=!1,this.lastCmdId=0,this.subscribersCount=0,this.subscribersMap=new Map,this.reconnectSubscribers=new Set,this.errorName="WebSocket Error";var a=this.window.location.port;"https:"===this.window.location.protocol?(a||(a="443"),this.wsUri="wss:"):(a||(a="80"),this.wsUri="ws:"),this.wsUri+="//".concat(this.window.location.hostname,":").concat(a,"/").concat(n)}return t.prototype.nextCmdId=function(){return this.lastCmdId++,this.lastCmdId},t.prototype.publishCommands=function(){for(;this.isOpened&&this.cmdWrapper.hasCommands();)this.dataStream.next(this.cmdWrapper.preparePublishCommands(10)),this.checkToClose();this.subscribersCount>0&&this.tryOpenSocket()},t.prototype.checkToClose=function(){var t=this;0===this.subscribersCount&&this.isOpened&&(this.socketCloseTimer||(this.socketCloseTimer=setTimeout((function(){return t.closeSocket()}),9e4)))},t.prototype.reset=function(t){this.socketCloseTimer&&(clearTimeout(this.socketCloseTimer),this.socketCloseTimer=null),this.lastCmdId=0,this.subscribersMap.clear(),this.subscribersCount=0,this.cmdWrapper.clear(),t&&this.closeSocket()},t.prototype.closeSocket=function(){this.isActive=!1,this.isOpened&&this.dataStream.unsubscribe()},t.prototype.tryOpenSocket=function(){var t=this;this.isActive&&(this.isOpened||this.isOpening||(this.isOpening=!0,Tc.isJwtTokenValid()?this.openSocket(Tc.getJwtToken()):this.authService.refreshJwtToken().subscribe({next:function(){t.openSocket(Tc.getJwtToken())},error:function(){t.isOpening=!1,t.authService.logout()}})),this.socketCloseTimer&&(clearTimeout(this.socketCloseTimer),this.socketCloseTimer=null))},t.prototype.openSocket=function(t){var e=this,n="".concat(this.wsUri);this.dataStream=new Dp({url:n,openObserver:{next:function(){e.onOpen(t)}},closeObserver:{next:function(t){e.onClose(t)}}}),this.dataStream.subscribe({next:function(t){e.ngZone.runOutsideAngular((function(){e.onMessage(t)}))},error:function(t){e.onError(t)}})},t.prototype.onOpen=function(t){var e=this;this.isOpening=!1,this.isOpened=!0,this.cmdWrapper.setAuth(t),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.isReconnect?(this.isReconnect=!1,this.reconnectSubscribers.forEach((function(t){t.onReconnected(),e.subscribe(t)})),this.reconnectSubscribers.clear()):this.publishCommands()},t.prototype.onMessage=function(t){t.errorCode?this.showWsError(t.errorCode,t.errorMsg):this.processOnMessage(t),this.checkToClose()},t.prototype.onError=function(t){t&&console.warn("WebSocket error event",t),this.isOpening=!1},t.prototype.onClose=function(t){var e=this;t&&t.code>1001&&1006!==t.code&&1011!==t.code&&1012!==t.code&&4500!==t.code&&this.showWsError(t.code,t.reason),this.isOpening=!1,this.isOpened=!1,this.isActive&&(this.isReconnect||(this.reconnectSubscribers.clear(),this.subscribersMap.forEach((function(t){e.reconnectSubscribers.add(t)})),this.reset(!1),this.isReconnect=!0),this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout((function(){return e.tryOpenSocket()}),2e3))},t.prototype.showWsError=function(t,e){var n=e;n||(n+="".concat(this.errorName,": error code - ").concat(t,"."))},t}(),Op=function(t){function e(e,n,i){var r=t.call(this,e,n,"api/ws",new wo,i)||this;return r.authService=e,r.ngZone=n,r.window=i,r}return pe(e,t),e.prototype.subscribe=function(t){var e=this;this.isActive=!0,t.subscriptionCommands.forEach((function(n){var i=e.nextCmdId();n instanceof go||n instanceof vo||e.subscribersMap.set(i,t),n.cmdId=i,e.cmdWrapper.cmds.push(n)})),this.subscribersCount++,this.publishCommands()},e.prototype.update=function(t){var e=this;this.isReconnect||(t.subscriptionCommands.forEach((function(t){t.cmdId&&(t instanceof lo||t instanceof mo)&&e.cmdWrapper.cmds.push(t)})),this.publishCommands())},e.prototype.unsubscribe=function(t){var e=this;this.isActive&&(t.subscriptionCommands.forEach((function(t){if(t instanceof ao)t.unsubscribe=!0,e.cmdWrapper.cmds.push(t);else if(t instanceof lo){var n=new To;n.cmdId=t.cmdId,e.cmdWrapper.cmds.push(n)}else if(t instanceof fo){var i=new bo;i.cmdId=t.cmdId,e.cmdWrapper.cmds.push(i)}else if(t instanceof po){var r=new Eo;r.cmdId=t.cmdId,e.cmdWrapper.cmds.push(r)}else if(t instanceof ho){var a=new So;a.cmdId=t.cmdId,e.cmdWrapper.cmds.push(a)}else if(t instanceof yo||t instanceof mo){var o=new _o;o.cmdId=t.cmdId,e.cmdWrapper.cmds.push(o)}var s=t.cmdId;s&&e.subscribersMap.delete(s)})),this.reconnectSubscribers.delete(t),this.subscribersCount--,this.publishCommands())},e.prototype.processOnMessage=function(t){var e;"cmdId"in t&&t.cmdId?(e=this.subscribersMap.get(t.cmdId))instanceof Ko?ko(t)?e.onNotificationCountUpdate(new Yo(t)):Lo(t)&&e.onNotificationsUpdate(new Ho(t)):e instanceof Bo&&(No(t)?e.onEntityData(new Fo(t)):Oo(t)?e.onAlarmData(new Wo(t)):Co(t)?e.onEntityCount(new Vo(t)):Mo(t)&&e.onAlarmCount(new jo(t))):"subscriptionId"in t&&t.subscriptionId&&(e=this.subscribersMap.get(t.subscriptionId))&&e.onData(new Uo(t))},e=fe([ae(),he(0,se(Zi.AuthService)),he(1,se(Zi.NgZone)),he(2,se(Zi.Window)),ye("design:paramtypes",[Tc,Ta,Window])],e)}(Np),Cp=function(){function t(t,e){this.listener=t,this.telemetryService=e,this.alarmDataSubscriptionOptions=this.listener.alarmDataSubscriptionOptions,this.datasourceType=this.alarmDataSubscriptionOptions.datasourceType}return t.prototype.unsubscribe=function(){this.datasourceType===qs.entity&&this.subscriber&&(this.subscriber.unsubscribe(),this.subscriber=null)},t.prototype.subscribe=function(){var t=this;if(this.subsTw=this.alarmDataSubscriptionOptions.subscriptionTimewindow,this.history=this.alarmDataSubscriptionOptions.subscriptionTimewindow&&Lr(this.alarmDataSubscriptionOptions.subscriptionTimewindow.fixedWindow),this.realtime=this.alarmDataSubscriptionOptions.subscriptionTimewindow&&Cr(this.alarmDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs),this.datasourceType===qs.entity){this.subscriber=new Bo(this.telemetryService),this.alarmDataCommand=new fo;var e=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===Va.alarm})).map((function(t){return{type:ml.ALARM_FIELD,key:t.name}})),n=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===Va.entityField})).map((function(t){return{type:ml.ENTITY_FIELD,key:t.name}})),i=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===Va.attribute})).map((function(t){return{type:ml.ATTRIBUTE,key:t.name}})),r=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===Va.timeseries})).map((function(t){return{type:ml.TIME_SERIES,key:t.name}})),a=i.concat(r),o=this.alarmDataSubscriptionOptions.keyFilters;this.alarmDataSubscriptionOptions.additionalKeyFilters&&(o=o?o.concat(this.alarmDataSubscriptionOptions.additionalKeyFilters):this.alarmDataSubscriptionOptions.additionalKeyFilters),this.alarmDataCommand.query={entityFilter:this.alarmDataSubscriptionOptions.entityFilter,pageLink:Qr(this.alarmDataSubscriptionOptions.pageLink),keyFilters:o,alarmFields:e,entityFields:n,latestValues:a},this.history?(this.alarmDataCommand.query.pageLink.startTs=this.subsTw.fixedWindow.startTimeMs,this.alarmDataCommand.query.pageLink.endTs=this.subsTw.fixedWindow.endTimeMs):this.alarmDataCommand.query.pageLink.timeWindow=this.subsTw.realtimeWindowMs,this.subscriber.setTsOffset(this.subsTw.tsOffset),this.subscriber.subscriptionCommands.push(this.alarmDataCommand),this.subscriber.alarmData$.subscribe((function(e){var n,i;if(e.data){if(t.onPageData(e.data,e.allowedEntities,e.totalEntities),t.prematureUpdates){try{for(var r=ve(t.prematureUpdates),a=r.next();!a.done;a=r.next()){var o=a.value;t.onDataUpdate(o)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.prematureUpdates=null}}else e.update&&(t.pageData?t.onDataUpdate(e.update):(t.prematureUpdates||(t.prematureUpdates=[]),t.prematureUpdates.push(e.update)))})),this.subscriber.subscribe()}else if(this.datasourceType===qs.function){var s=Qr(Ba);s.createdTime+=this.subsTw.tsOffset,s.startTs+=this.subsTw.tsOffset;var u={data:[de(de({},s),{entityId:"1",latest:{}})],hasNext:!1,totalElements:1,totalPages:1};this.onPageData(u,1024,1)}},t.prototype.resetData=function(){this.alarmIdToDataIndex={};for(var t=0;t<this.pageData.data.length;t++){var e=this.pageData.data[t];this.alarmIdToDataIndex[e.id.id]=t}},t.prototype.onPageData=function(t,e,n){this.pageData=t,this.resetData(),this.listener.alarmsLoaded(t,e,n)},t.prototype.onDataUpdate=function(t){var e,n;try{for(var i=ve(t),r=i.next();!r.done;r=i.next()){var a=r.value,o=this.alarmIdToDataIndex[a.id.id];Or(o)&&o>=0&&(this.pageData.data[o]=a)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}this.listener.alarmsUpdated(t,this.pageData)},t}(),Mp=function(){function t(t){this.telemetryService=t}return t.prototype.subscribeForAlarms=function(t,e,n){var i=t.alarmSource;if(t.alarmDataSubscriptionOptions=this.createAlarmSubscriptionOptions(t,e,n),i.type!==qs.entity||i.entityFilter&&e)return t.subscription=new Cp(t,this.telemetryService),t.subscription.subscribe();t.alarmsLoaded({data:[],totalPages:0,totalElements:0,hasNext:!1},0,0)},t.prototype.stopSubscription=function(t){t.subscription&&t.subscription.unsubscribe()},t.prototype.createAlarmSubscriptionOptions=function(t,e,n){var i=t.alarmSource,r=[];i.dataKeys.forEach((function(t){var e={name:t.name,type:t.type};r.push(e)}));var a={datasourceType:i.type,dataKeys:r,subscriptionTimewindow:Qr(t.subscriptionTimewindow)};return a.datasourceType===qs.entity&&(a.entityFilter=i.entityFilter,a.pageLink=e,a.keyFilters=i.keyFilters,a.additionalKeyFilters=n),a},t=fe([ae(),he(0,se(Zi.TelemetryWebsocketService)),ye("design:paramtypes",[Op])],t)}(),kp=function(){function t(t,e,n){this.subsTw=t,this.endTs=e,this.aggType=n,this.map=new Map,this.reusePair=[void 0,void 0]}return t.prototype.set=function(t,e){this.map.set(t,e)},t.prototype.get=function(t){return this.map.get(t)},t.prototype.delete=function(t){this.map.delete(t)},t.prototype.findDataForTs=function(t){t>=this.endTs&&this.updateLastInterval(t+1)},t.prototype.calculateAggInterval=function(t){return Ps(this.subsTw,this.endTs,t,this.aggType)},t.prototype.getMaxTimestampKeyAndValue=function(t){var e,n;if(t instanceof Map){var i=null;try{for(var r=ve(t),a=r.next();!a.done;a=r.next()){var o=Te(a.value,2),s=o[0];o[1];"number"!=typeof s||isNaN(s)||(null===i||s>i)&&(i=s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}},t.prototype.updateLastInterval=function(t){if(t>this.endTs){this.endTs=t;var e=this.getMaxTimestampKeyAndValue(this.map);if(e){var n=this.map.get(e),i=Ps(this.subsTw,t,n.ts,this.aggType);n.interval=i,n.ts=i[0]+Math.floor((i[1]-i[0])/2)}}},t.prototype.forEach=function(t,e){this.map.forEach(t,e)},t.prototype.size=function(){return this.map.size},t}(),Lp=function(){this.aggMap={}},Up=function(t,e){t.count++,Ur(e)?(t.sum=t.aggValue*(t.count-1)+e,t.aggValue=t.sum/t.count):t.aggValue=e},Pp=function(t,e){Ur(e)?t.aggValue=Math.min(t.aggValue,e):t.aggValue=e},xp=function(t,e){Ur(e)?t.aggValue=Math.max(t.aggValue,e):t.aggValue=e},Fp=function(t,e){Ur(e)?t.aggValue=t.aggValue+e:t.aggValue=e},Wp=function(t){t.count++,t.aggValue=t.count},Vp=function(t,e){t.aggValue=e},jp=Math.pow(2,31)-1,Yp=function(){function t(t,e,n,i,r,a){var o=this;this.onDataCb=t,this.tsKeys=e,this.isLatestDataAgg=n,this.subsTw=i,this.utils=r,this.ignoreDataUpdateOnIntervalTick=a,this.dataBuffer=[],this.dataReceived=!1,this.resetPending=!1,this.updatedData=!1,this.aggregationTimeout=this.isLatestDataAgg?1e3:Math.max(ns.numberValue(this.subsTw.aggregation.interval),1e3),this.tsKeys.forEach((function(t){o.dataBuffer[t.id]||(o.dataBuffer[t.id]=[])})),this.subsTw.aggregation.stateData&&(this.lastPrevKvPairData={})}return t.convertValue=function(t,e){return t&&Pr(t)&&(!e||e&&Number(t).toString()===t)?Number(t):t},t.getAggFunction=function(t){switch(t){case es.MIN:return Pp;case es.MAX:return xp;case es.AVG:return Up;case es.SUM:return Fp;case es.COUNT:return Wp;case es.NONE:return Vp;default:return Up}},t.prototype.updateOnDataCb=function(t){var e=this.onDataCb;return this.onDataCb=t,e},t.prototype.reset=function(t){this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null),this.subsTw=t,this.intervalScheduledTime=this.utils.currentPerfTime(),this.calculateStartEndTs(),this.elapsed=0,this.aggregationTimeout=this.isLatestDataAgg?1e3:Math.max(ns.numberValue(this.subsTw.aggregation.interval),1e3),this.resetPending=!0,this.updatedData=!1,this.intervalTimeoutHandle=setTimeout(this.onInterval.bind(this),Math.min(this.aggregationTimeout,jp))},t.prototype.destroy=function(){this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null),this.aggregationMap=null},t.prototype.onData=function(t,e,n,i){if(this.updatedData=!0,!this.dataReceived||this.resetPending){var r=!0;this.dataReceived||(this.elapsed=0,this.dataReceived=!0,this.calculateStartEndTs()),this.resetPending&&(this.resetPending=!1,r=!1),e?(this.aggregationMap=new Lp,this.updateAggregatedData(t)):this.aggregationMap=this.processAggregatedData(t),r&&(this.intervalScheduledTime=this.utils.currentPerfTime()),this.onInterval(n,i)}else this.updateAggregatedData(t),n?(this.intervalScheduledTime=this.utils.currentPerfTime(),this.onInterval(n,i)):this.onInterval(!1,i,!0)},t.prototype.calculateStartEndTs=function(){if(this.startTs=this.subsTw.startTs+this.subsTw.tsOffset,this.subsTw.quickInterval)if("previousInterval"===this.subsTw.timeForComparison){var t=Ms(this.subsTw.startTs,this.subsTw.timezone),e=ms(this.subsTw.timezone);this.endTs=Ss(this.subsTw.quickInterval,t,e)+this.subsTw.tsOffset}else{t=Ms(this.subsTw.startTs,this.subsTw.timezone);this.endTs=vs(this.subsTw.quickInterval,t,this.subsTw.timezone)+this.subsTw.tsOffset}else this.endTs=this.startTs+this.subsTw.aggregation.timeWindow},t.prototype.onInterval=function(t,e,n){var i=this.utils.currentPerfTime();this.elapsed+=i-this.intervalScheduledTime,this.intervalScheduledTime=i,this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null);var r=n?this.aggregationTimeout-this.elapsed:this.aggregationTimeout;if(t)this.data=this.updateData();else{var a=Math.floor(this.elapsed/this.aggregationTimeout);if(a||!this.data||n){var o=a*this.aggregationTimeout;if(this.subsTw.quickInterval){var s=Ts(this.subsTw.quickInterval,this.subsTw.timezone);this.startTs=s[0]+this.subsTw.tsOffset,this.endTs=s[1]+this.subsTw.tsOffset}else this.startTs+=o,this.endTs+=o;this.subsTw.aggregation.type!==es.NONE&&this.updateLastInterval(),this.data=this.updateData(),this.elapsed=this.elapsed-a*this.aggregationTimeout}}!this.onDataCb||this.ignoreDataUpdateOnIntervalTick&&!this.updatedData||(this.onDataCb(this.data,e),this.updatedData=!1),t||(this.intervalTimeoutHandle=setTimeout(this.onInterval.bind(this),Math.min(r,jp)))},t.prototype.updateData=function(){var t,e,n=this;this.dataBuffer=[],this.tsKeys.forEach((function(t){n.dataBuffer[t.id]||(n.dataBuffer[t.id]=[])}));var i=function(t){var e=Number(t),i=r.aggregationMap.aggMap[e],a=r.aggKeyById(e).agg===es.NONE,o=r.dataBuffer[e],s=[];i.forEach((function(t,i){if(i<n.startTs)n.subsTw.aggregation.stateData&&(!n.lastPrevKvPairData[e]||n.lastPrevKvPairData[e][0]<t.ts)&&(n.lastPrevKvPairData[e]=[t.ts,t.aggValue,t.interval]),s.push(i),n.updatedData=!0;else if(t.ts<n.endTs||a){var r=[t.ts,t.aggValue,t.interval];o.push(r)}})),s.forEach((function(t){return i.delete(t)})),o.sort((function(t,e){return t[0]-e[0]})),r.subsTw.aggregation.stateData&&r.updateStateBounds(o,Qr(r.lastPrevKvPairData[e])),o.length>r.subsTw.aggregation.limit&&(o=o.slice(o.length-r.subsTw.aggregation.limit)),r.dataBuffer[e]=o},r=this;try{for(var a=ve(Object.keys(this.aggregationMap.aggMap)),o=a.next();!o.done;o=a.next()){i(o.value)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return this.dataBuffer},t.prototype.updateStateBounds=function(t,e){var n;if(e&&(e[0]=this.startTs,e[2]=[this.startTs,this.startTs]),t.length?n=t[0]:e&&(n=e,t.push(n)),n&&n[0]>this.startTs&&e&&t.unshift(e),t.length){var i=t[t.length-1];i[0]<this.endTs&&((i=Qr(i))[0]=this.endTs,i[2]=[this.endTs,this.endTs],t.push(i))}},t.prototype.processAggregatedData=function(e){var n,i,r=new Lp,a=function(n){var i=Number(n),a=o.aggKeyById(i).agg,s=a===es.COUNT,u=a===es.NONE,c=r.aggMap[i];c||(c=new kp(o.subsTw,o.endTs,a),r.aggMap[i]=c),e[i].forEach((function(e){var n=e[0],i=t.convertValue(e[1],u),r=[n,n];u||(r=c.calculateAggInterval(n));var a=r[0]+Math.floor((r[1]-r[0])/2),o={count:s?i:Cr(e[2])?e[2]:1,sum:i,aggValue:i,ts:a,interval:r};c.set(r[0],o)}))},o=this;try{for(var s=ve(Object.keys(e)),u=s.next();!u.done;u=s.next()){a(u.value)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return r},t.prototype.updateAggregatedData=function(e){var n,i,r=function(n){var i=Number(n),r=a.aggKeyById(i).agg,o=r===es.COUNT,s=r===es.NONE,u=a.aggregationMap.aggMap[i];u||(u=new kp(a.subsTw,a.endTs,r),a.aggregationMap.aggMap[i]=u),e[i].forEach((function(e){var n=e[0],i=t.convertValue(e[1],s),a=u.findDataForTs(n);if(a)t.getAggFunction(r)(a,i);else{var c=[n,n];s||(c=u.calculateAggInterval(n));var l=c[0]+Math.floor((c[1]-c[0])/2);a={count:Cr(e[2])?e[2]:1,sum:i,aggValue:o?1:i,ts:l,interval:c},u.set(c[0],a)}}))},a=this;try{for(var o=ve(Object.keys(e)),s=o.next();!s.done;s=o.next()){r(s.value)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.updateLastInterval=function(){var t,e;try{for(var n=ve(Object.keys(this.aggregationMap.aggMap)),i=n.next();!i.done;i=n.next()){var r=i.value,a=Number(r);this.aggregationMap.aggMap[a].updateLastInterval(this.endTs)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.aggKeyById=function(t){return this.tsKeys.find((function(e){return e.id===t}))},t}(),Hp=function(){function t(t,e,n){this.listener=t,this.telemetryService=e,this.utils=n,this.entityDataSubscriptionOptions=this.listener.subscriptionOptions,this.datasourceType=this.entityDataSubscriptionOptions.datasourceType,this.dataKeys={},this.dataKeysList=[],this.tickScheduledTime=0,this.tickElapsed=0,this.dataResolved=!1,this.started=!1,this.initializeSubscription()}return t.convertValue=function(t){return t&&Pr(t)&&Number(t).toString()===t?Number(t):t},t.calculateComparisonValue=function(e,n){var i,r;switch(e.comparisonResultType){case Hs.PREVIOUS_VALUE:i=n.previous.ts,r=n.previous.value;break;case Hs.DELTA_ABSOLUTE:case Hs.DELTA_PERCENT:i=n.previous.ts;var a=t.convertValue(n.current.value),o=t.convertValue(n.previous.value);r=Pr(a)&&Pr(o)?e.comparisonResultType===Hs.DELTA_ABSOLUTE?a-o:0===o?100:(a-o)/o*100:""}return[[i,r]]},t.prototype.initializeSubscription=function(){for(var t=0;t<this.entityDataSubscriptionOptions.dataKeys.length;t++){var e=Qr(this.entityDataSubscriptionOptions.dataKeys[t]);this.dataKeysList.push(e),e.index=t,this.datasourceType===qs.function?e.func||(e.func=new Function("time","prevValue",e.funcBody)):e.postFuncBody&&!e.postFunc&&(e.postFunc=new Function("time","value","prevValue","timePrev","prevOrigValue",e.postFuncBody));var n=void 0;if(this.datasourceType===qs.entity||this.datasourceType===qs.entityCount||this.datasourceType===qs.alarmCount||this.entityDataSubscriptionOptions.type===ws.timeseries){if(this.datasourceType===qs.function)n="".concat(e.name,"_").concat(e.index,"_").concat(e.type).concat(e.latest?"_latest":"");else{var i=e.aggregationType&&e.aggregationType!==es.NONE?"_".concat(e.index):"";n="".concat(e.name,"_").concat(e.type).concat(i).concat(e.latest?"_latest":"")}var r=this.dataKeys[n];r||(r=[],this.dataKeys[n]=r),r.push(e),e.listIndex=r.length-1}else n=String(zr(e)),this.dataKeys[n]=e;e.key=n}},t.prototype.unsubscribe=function(){this.timeseriesTimer&&(clearTimeout(this.timeseriesTimer),this.timeseriesTimer=null),this.latestTimer&&(clearTimeout(this.latestTimer),this.latestTimer=null),this.datasourceType!==qs.entity&&this.datasourceType!==qs.entityCount&&this.datasourceType!==qs.alarmCount||this.subscriber&&(this.subscriber.unsubscribe(),this.subscriber=null),this.dataAggregators&&(this.dataAggregators.forEach((function(t){t.destroy()})),this.dataAggregators=null),this.tsLatestDataAggregators&&(this.tsLatestDataAggregators.forEach((function(t){t.destroy()})),this.tsLatestDataAggregators=null),this.pageData=null},t.prototype.subscribe=function(){var t=this;if(this.entityDataResolveSubject=new sn(1),this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&(this.started=!0,this.dataResolved=!0,this.prepareSubscriptionTimewindow()),this.datasourceType===qs.entity){var e=this.dataKeysList.filter((function(t){return t.type===Va.entityField})).map((function(t){return{type:ml.ENTITY_FIELD,key:t.name}}));if(e.find((function(t){return"name"===t.key}))||e.push({type:ml.ENTITY_FIELD,key:"name"}),e.find((function(t){return"label"===t.key}))||e.push({type:ml.ENTITY_FIELD,key:"label"}),e.find((function(t){return"additionalInfo"===t.key}))||e.push({type:ml.ENTITY_FIELD,key:"additionalInfo"}),this.attrFields=this.dataKeysList.filter((function(t){return t.type===Va.attribute})).map((function(t){return{type:ml.ATTRIBUTE,key:t.name}})),this.tsFields=this.dataKeysList.filter((function(t){return!(t.type!==Va.timeseries||t.aggregationType&&t.aggregationType!==es.NONE||t.latest)})).map((function(t){return{type:ml.TIME_SERIES,key:t.name}})),this.entityDataSubscriptionOptions.type===ws.timeseries){var n=this.dataKeysList.filter((function(t){return t.type===Va.timeseries&&t.latest&&(!t.aggregationType||t.aggregationType===es.NONE)})).map((function(t){return{type:ml.TIME_SERIES,key:t.name}}));this.latestValues=this.attrFields.concat(n)}else this.latestValues=this.attrFields.concat(this.tsFields);this.aggTsValues=this.dataKeysList.filter((function(t){return t.type===Va.timeseries&&t.aggregationType&&t.aggregationType!==es.NONE&&!t.comparisonEnabled})).map((function(t){return{id:t.index,key:t.name,agg:t.aggregationType}})),this.aggTsComparisonValues=this.dataKeysList.filter((function(t){return t.type===Va.timeseries&&t.aggregationType&&t.aggregationType!==es.NONE&&t.comparisonEnabled})).map((function(t){return{id:t.index,key:t.name,agg:t.aggregationType,previousValueOnly:t.comparisonResultType===Hs.PREVIOUS_VALUE}})),this.subscriber=new Bo(this.telemetryService),this.dataCommand=new lo;var i=this.entityDataSubscriptionOptions.keyFilters;this.entityDataSubscriptionOptions.additionalKeyFilters&&(i=i?i.concat(this.entityDataSubscriptionOptions.additionalKeyFilters):this.entityDataSubscriptionOptions.additionalKeyFilters),this.dataCommand.query={entityFilter:this.entityDataSubscriptionOptions.entityFilter,pageLink:this.entityDataSubscriptionOptions.pageLink,keyFilters:i,entityFields:e,latestValues:this.latestValues},this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&(this.prepareSubscriptionCommands(this.dataCommand),this.entityDataSubscriptionOptions.type===ws.timeseries?this.subscriber.setTsOffset(this.subsTw.tsOffset):this.subscriber.setTsOffset(this.latestTsOffset)),this.subscriber.subscriptionCommands.push(this.dataCommand),this.subscriber.entityData$.subscribe((function(e){var n,i;if(e.data){if(t.onPageData(e.data),t.prematureUpdates){try{for(var r=ve(t.prematureUpdates),a=r.next();!a.done;a=r.next()){var o=a.value;t.onDataUpdate(o)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.prematureUpdates=null}}else e.update&&(t.pageData?t.onDataUpdate(e.update):(t.prematureUpdates||(t.prematureUpdates=[]),t.prematureUpdates.push(e.update)))})),this.subscriber.reconnect$.subscribe((function(){if(t.started){var e=t.entityDataSubscriptionOptions.isPaginatedDataSubscription?t.dataCommand:t.subsCommand;if(!t.history&&(t.entityDataSubscriptionOptions.type===ws.timeseries&&t.tsFields.length||t.aggTsValues.length>0&&!t.isFloatingTimewindow)){var n=t.listener.updateRealtimeSubscription();t.subsTw=n,t.entityDataSubscriptionOptions.type===ws.timeseries&&t.tsFields.length&&(e.tsCmd.startTs=t.subsTw.startTs,e.tsCmd.timeWindow=t.subsTw.aggregation.timeWindow,"number"==typeof t.subsTw.aggregation.interval?(e.tsCmd.interval=t.subsTw.aggregation.interval,e.tsCmd.intervalType=ro.MILLISECONDS):e.tsCmd.intervalType=t.subsTw.aggregation.interval,e.tsCmd.timeZoneId=t.subsTw.timezone,e.tsCmd.limit=t.subsTw.aggregation.limit,e.tsCmd.agg=t.subsTw.aggregation.type,e.tsCmd.fetchLatestPreviousPoint=t.subsTw.aggregation.stateData,t.dataAggregators.forEach((function(t){t.reset(n)}))),t.aggTsValues.length>0&&!t.isFloatingTimewindow&&(e.aggTsCmd.startTs=t.subsTw.startTs,e.aggTsCmd.timeWindow=t.subsTw.aggregation.timeWindow,t.tsLatestDataAggregators.forEach((function(t){t.reset(n)})))}t.entityDataSubscriptionOptions.type===ws.timeseries?t.subscriber.setTsOffset(t.subsTw.tsOffset):t.subscriber.setTsOffset(t.latestTsOffset),e.query=t.dataCommand.query,t.subscriber.subscriptionCommands=[e]}else t.subscriber.subscriptionCommands=[t.dataCommand]})),this.subscriber.subscribe()}else if(this.datasourceType===qs.function){var r=0;this.entityDataSubscriptionOptions.type===ws.latest?r=this.entityDataSubscriptionOptions.latestTsOffset:this.entityDataSubscriptionOptions.subscriptionTimewindow&&(r=this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset);var a={entityId:{id:cr,entityType:or.DEVICE},timeseries:{},latest:{}},o=qs.function;a.latest[ml.ENTITY_FIELD]={name:{ts:Date.now()+r,value:o}};var s={data:[a],hasNext:!1,totalElements:1,totalPages:1};this.onPageData(s)}else if(this.datasourceType===qs.entityCount){this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.subscriber=new Bo(this.telemetryService),this.subscriber.setTsOffset(this.latestTsOffset),this.countCommand=new po;i=this.entityDataSubscriptionOptions.keyFilters;this.entityDataSubscriptionOptions.additionalKeyFilters&&(i=i?i.concat(this.entityDataSubscriptionOptions.additionalKeyFilters):this.entityDataSubscriptionOptions.additionalKeyFilters),this.countCommand.query={entityFilter:this.entityDataSubscriptionOptions.entityFilter,keyFilters:i},this.subscriber.subscriptionCommands.push(this.countCommand);var u={id:cr,entityType:null},c=this.dataKeysList[0],l=!1;this.subscriber.entityCount$.subscribe((function(e){var n,i,r,a;if(l){var o=[{entityId:u,latest:(r={},r[ml.COUNT]=(a={},a[c.name]={ts:Date.now()+t.latestTsOffset,value:e.count+""},a),r),timeseries:{}}];t.onDataUpdate(o)}else{var s={data:[{entityId:u,latest:(n={},n[ml.ENTITY_FIELD]={name:{ts:Date.now()+t.latestTsOffset,value:qs.entityCount}},n[ml.COUNT]=(i={},i[c.name]={ts:Date.now()+t.latestTsOffset,value:e.count+""},i),n),timeseries:{}}],hasNext:!1,totalElements:1,totalPages:1};t.onPageData(s),l=!0}})),this.subscriber.subscribe()}else if(this.datasourceType===qs.alarmCount){this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.subscriber=new Bo(this.telemetryService),this.subscriber.setTsOffset(this.latestTsOffset),this.alarmCountCommand=new ho;i=this.entityDataSubscriptionOptions.keyFilters;this.entityDataSubscriptionOptions.additionalKeyFilters&&(i=i?i.concat(this.entityDataSubscriptionOptions.additionalKeyFilters):this.entityDataSubscriptionOptions.additionalKeyFilters),this.alarmCountCommand.query={entityFilter:this.entityDataSubscriptionOptions.entityFilter,keyFilters:i},this.entityDataSubscriptionOptions.alarmFilter&&(this.alarmCountCommand.query=de(de({},this.alarmCountCommand.query),this.entityDataSubscriptionOptions.alarmFilter)),this.subscriber.subscriptionCommands.push(this.alarmCountCommand);var p={id:cr,entityType:null},d=this.dataKeysList[0],f=!1;this.subscriber.alarmCount$.subscribe((function(e){var n,i,r,a;if(f){var o=[{entityId:p,latest:(r={},r[ml.COUNT]=(a={},a[d.name]={ts:Date.now()+t.latestTsOffset,value:e.count+""},a),r),timeseries:{}}];t.onDataUpdate(o)}else{var s={data:[{entityId:p,latest:(n={},n[ml.ENTITY_FIELD]={name:{ts:Date.now()+t.latestTsOffset,value:qs.alarmCount}},n[ml.COUNT]=(i={},i[d.name]={ts:Date.now()+t.latestTsOffset,value:e.count+""},i),n),timeseries:{}}],hasNext:!1,totalElements:1,totalPages:1};t.onPageData(s),f=!0}})),this.subscriber.subscribe()}return this.entityDataSubscriptionOptions.isPaginatedDataSubscription?Un(null):this.entityDataResolveSubject.asObservable()},t.prototype.start=function(){if(!this.entityDataSubscriptionOptions.isPaginatedDataSubscription){if(this.prepareSubscriptionTimewindow(),this.prepareData(!0),this.datasourceType===qs.entity){this.subsCommand=new lo,this.subsCommand.cmdId=this.dataCommand.cmdId,this.prepareSubscriptionCommands(this.subsCommand);var t=!1;this.entityDataSubscriptionOptions.type===ws.timeseries?this.subscriber.setTsOffset(this.subsTw.tsOffset):t=this.subscriber.setTsOffset(this.latestTsOffset),t?this.listener.forceReInit&&this.listener.forceReInit():this.subsCommand.isEmpty()||(this.subscriber.subscriptionCommands=[this.subsCommand],this.subscriber.update())}else this.datasourceType===qs.entityCount||this.datasourceType===qs.alarmCount?this.subscriber.setTsOffset(this.latestTsOffset)&&this.listener.forceReInit&&this.listener.forceReInit():this.datasourceType===qs.function&&this.startFunction();this.started=!0}},t.prototype.prepareSubscriptionTimewindow=function(){this.subsTw=this.entityDataSubscriptionOptions.subscriptionTimewindow,this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.history=this.entityDataSubscriptionOptions.subscriptionTimewindow&&Lr(this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow),this.realtime=this.entityDataSubscriptionOptions.subscriptionTimewindow&&Cr(this.entityDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs),this.isFloatingTimewindow=this.entityDataSubscriptionOptions.subscriptionTimewindow&&!this.entityDataSubscriptionOptions.subscriptionTimewindow.quickInterval&&!this.history},t.prototype.prepareSubscriptionCommands=function(t){var e,n,i=[];if(this.entityDataSubscriptionOptions.type===ws.timeseries?(this.tsFields.length>0&&(this.history?(t.historyCmd={keys:this.tsFields.map((function(t){return t.key})),startTs:this.subsTw.fixedWindow.startTimeMs,endTs:this.subsTw.fixedWindow.endTimeMs,interval:0,intervalType:ro.MILLISECONDS,limit:this.subsTw.aggregation.limit,timeZoneId:this.subsTw.timezone,agg:this.subsTw.aggregation.type,fetchLatestPreviousPoint:this.subsTw.aggregation.stateData},"number"==typeof this.subsTw.aggregation.interval?t.historyCmd.interval=this.subsTw.aggregation.interval:t.historyCmd.intervalType=this.subsTw.aggregation.interval):(t.tsCmd={keys:this.tsFields.map((function(t){return t.key})),startTs:this.subsTw.startTs,timeWindow:this.subsTw.aggregation.timeWindow,interval:0,intervalType:ro.MILLISECONDS,limit:this.subsTw.aggregation.limit,timeZoneId:this.subsTw.timezone,agg:this.subsTw.aggregation.type,fetchLatestPreviousPoint:this.subsTw.aggregation.stateData},"number"==typeof this.subsTw.aggregation.interval?t.tsCmd.interval=this.subsTw.aggregation.interval:t.tsCmd.intervalType=this.subsTw.aggregation.interval)),i=this.latestValues):this.entityDataSubscriptionOptions.type===ws.latest&&(i=this.latestValues),this.history&&(this.aggTsValues.length>0||this.aggTsComparisonValues.length>0)){try{for(var r=ve(this.aggTsComparisonValues),a=r.next();!a.done;a=r.next()){var o=a.value,s=this.dataKeyByIndex(o.id),u=_s(this.subsTw,s.timeForComparison,s.comparisonCustomIntervalValue);o.previousStartTs=u.fixedWindow.startTimeMs,o.previousEndTs=u.fixedWindow.endTimeMs}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.aggHistoryCmd={keys:Ee(Ee([],Te(this.aggTsValues),!1),Te(this.aggTsComparisonValues),!1),startTs:this.subsTw.fixedWindow.startTimeMs,endTs:this.subsTw.fixedWindow.endTimeMs}}else if(!this.isFloatingTimewindow&&this.aggTsValues.length>0&&(t.aggTsCmd={keys:this.aggTsValues,startTs:this.subsTw.startTs,timeWindow:this.subsTw.aggregation.timeWindow},i.length>0)){var c=this.aggTsValues.map((function(t){return t.key}));i=i.filter((function(t){return t.type!==ml.TIME_SERIES||!c.includes(t.key)}))}i.length>0&&(t.latestCmd={keys:i})},t.prototype.startFunction=function(){this.frequency=1e3,this.latestFrequency=1e3,this.entityDataSubscriptionOptions.type===ws.timeseries&&(this.frequency=Math.min(ns.numberValue(this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.interval),5e3)),this.tickScheduledTime=this.utils.currentPerfTime(),this.generateData(!0)},t.prototype.prepareData=function(t){var e=this;if(this.timeseriesTimer&&(clearTimeout(this.timeseriesTimer),this.timeseriesTimer=null),this.latestTimer&&(clearTimeout(this.latestTimer),this.latestTimer=null),this.dataAggregators&&this.dataAggregators.forEach((function(t){t.destroy()})),this.dataAggregators=[],this.tsLatestDataAggregators&&this.tsLatestDataAggregators.forEach((function(t){t.destroy()})),this.tsLatestDataAggregators=[],this.resetData(),this.entityDataSubscriptionOptions.type===ws.timeseries){var n=void 0;n=this.datasourceType===qs.function?this.dataKeysList.filter((function(t){return!t.latest})).map((function(t){return t.index})):this.dataKeysList.filter((function(t){return!(t.type!==Va.timeseries||t.aggregationType&&t.aggregationType!==es.NONE||t.latest)})).map((function(t){return t.index}));var i=n.map((function(t){return{id:t,key:t+"",agg:e.subsTw.aggregation.type}}));if(i.length)for(var r=0;r<this.pageData.data.length;r++)this.dataAggregators[r]=this.createRealtimeDataAggregator(this.subsTw,i,!1,r,this.notifyListener.bind(this))}if(this.aggTsValues&&this.aggTsValues.length)if(this.isFloatingTimewindow)this.reportNotSupported(this.aggTsValues,t);else{var a=Qr(this.subsTw);a.aggregation.stateData=!1,a.aggregation.interval=a.aggregation.timeWindow;for(r=0;r<this.pageData.data.length;r++)this.tsLatestDataAggregators[r]=this.createRealtimeDataAggregator(a,this.aggTsValues,!0,r,this.notifyListener.bind(this))}!this.history&&this.aggTsComparisonValues&&this.aggTsComparisonValues.length&&this.reportNotSupported(this.aggTsComparisonValues,t)},t.prototype.reportNotSupported=function(t,e){var n,i,r=this,a=[];try{for(var o=ve(t),s=o.next();!s.done;s=o.next()){a[s.value.id]=[[0,Xa,[0,0]]]}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}for(var u=0;u<this.pageData.data.length;u++)this.onIndexedData(a,u,!0,this.entityDataSubscriptionOptions.type===ws.timeseries,(function(t,n,i,a,o){r.data[n]||(r.data[n]=[]),r.data[n][i]=t,e&&r.notifyListener(t,n,i,a,o)}))},t.prototype.resetData=function(){var t,e,n,i,r,a;this.data=[],this.datasourceData=[],this.entityIdToDataIndex={};for(var o=0;o<this.pageData.data.length;o++){var s=this.pageData.data[o];this.entityIdToDataIndex[s.entityId.id]=o,this.datasourceData[o]={};try{for(var u=(t=void 0,ve(Object.keys(this.dataKeys))),c=u.next();!c.done;c=u.next()){var l=c.value,p=this.dataKeys[l];if(this.datasourceType===qs.entity||this.datasourceType===qs.entityCount||this.datasourceType===qs.alarmCount||this.entityDataSubscriptionOptions.type===ws.timeseries)for(var d=p,f=0;f<d.length;f++){var h="".concat(l,"_").concat(f);this.datasourceData[o][h]={data:[]}}else this.datasourceData[o][l]={data:[]}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}}if(this.datasourceOrigData=Qr(this.datasourceData),this.entityDataSubscriptionOptions.type===ws.timeseries)try{for(var y=ve(Object.keys(this.dataKeys)),m=y.next();!m.done;m=y.next()){l=m.value;this.dataKeys[l].forEach((function(t){delete t.lastUpdateTime}))}}catch(t){n={error:t}}finally{try{m&&!m.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}else if(this.entityDataSubscriptionOptions.type===ws.latest)try{for(var g=ve(Object.keys(this.dataKeys)),v=g.next();!v.done;v=g.next()){l=v.value;delete this.dataKeys[l].lastUpdateTime}}catch(t){r={error:t}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(r)throw r.error}}},t.prototype.onPageData=function(t){var e=this,n=!this.pageData;if(n||this.entityDataSubscriptionOptions.isPaginatedDataSubscription||!Zl(this.pageData,t)){this.pageData=t,this.entityDataSubscriptionOptions.isPaginatedDataSubscription?this.prepareData(!1):n&&this.resetData();for(var i=0;i<t.data.length;i++){var r=t.data[i];this.processEntityData(r,i,!1,(function(t,n,i){e.data[n]||(e.data[n]=[]),e.data[n][i]=t}))}this.dataResolved?((n||this.entityDataSubscriptionOptions.isPaginatedDataSubscription)&&this.listener.dataLoaded(t,this.data,this.listener.configDatasourceIndex,this.entityDataSubscriptionOptions.pageLink),this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&n&&(this.datasourceType===qs.function&&this.startFunction(),this.entityDataResolveSubject.next({pageData:t,data:this.data,datasourceIndex:this.listener.configDatasourceIndex,pageLink:this.entityDataSubscriptionOptions.pageLink}),this.entityDataResolveSubject.complete())):(this.dataResolved=!0,this.entityDataResolveSubject.next({pageData:t,data:this.data,datasourceIndex:this.listener.configDatasourceIndex,pageLink:this.entityDataSubscriptionOptions.pageLink}),this.entityDataResolveSubject.complete())}else this.listener.initialPageDataChanged&&this.listener.initialPageDataChanged(t)},t.prototype.onDataUpdate=function(t){var e,n;try{for(var i=ve(t),r=i.next();!r.done;r=i.next()){var a=r.value,o=this.entityIdToDataIndex[a.entityId.id];Or(o)&&o>=0&&this.processEntityData(a,o,!0,this.notifyListener.bind(this))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.notifyListener=function(t,e,n,i,r){this.listener.dataUpdated(t,this.listener.configDatasourceIndex,e,n,i,r)},t.prototype.processEntityData=function(e,n,i,r){var a,o,s,u,c,l,p=this;if(this.entityDataSubscriptionOptions.type===ws.latest||this.entityDataSubscriptionOptions.type===ws.timeseries){if(e.aggLatest){var d=[];try{for(var f=ve(Object.keys(e.aggLatest)),h=f.next();!h.done;h=f.next()){var y=h.value,m=Number(y),g=this.dataKeyByIndex(m),v=e.aggLatest[m];if(g.comparisonEnabled){var T=t.calculateComparisonValue(g,v);this.onKeyData(T,g.name,m,g.type,n,!0,this.entityDataSubscriptionOptions.type===ws.timeseries,!0,r)}else d[m]=[[v.current.ts,v.current.value,v.current.count]]}}catch(t){a={error:t}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(a)throw a.error}}if(Object.keys(d).length>0&&this.tsLatestDataAggregators&&this.tsLatestDataAggregators[n]){var E=this.tsLatestDataAggregators[n],b=void 0;i||(b=E.updateOnDataCb((function(t,e){p.onIndexedData(t,n,e,p.entityDataSubscriptionOptions.type===ws.timeseries,r)}))),E.onData(d,!1,this.history,!0),b&&E.updateOnDataCb(b)}}if(e.latest){var S=function(t){var a,o,s,u,c=_.toSubscriptionData(e.latest[t],!1),l=bl(ml[t]);if(i&&ml[t]===ml.TIME_SERIES){var p=Object.keys(c),d=_.latestValues.filter((function(t){return t.type===ml.TIME_SERIES&&p.includes(t.key)}));if(d.length){var f={};try{for(var h=(a=void 0,ve(d)),y=h.next();!y.done;y=h.next()){var m=y.value;f[m.key]=c[m.key]}}catch(t){a={error:t}}finally{try{y&&!y.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}_.onData(f,l,n,!0,_.entityDataSubscriptionOptions.type===ws.timeseries,r)}var g=_.aggTsValues.filter((function(t){return p.includes(t.key)}));if(!_.history&&g.length&&_.tsLatestDataAggregators&&_.tsLatestDataAggregators[n]){var v=_.tsLatestDataAggregators[n],T=[];try{for(var E=(s=void 0,ve(g)),b=E.next();!b.done;b=E.next()){var S=b.value;T[S.id]=c[S.key]}}catch(t){s={error:t}}finally{try{b&&!b.done&&(u=E.return)&&u.call(E)}finally{if(s)throw s.error}}v.onData(T,!0,!1,!0)}}else _.onData(c,l,n,!0,_.entityDataSubscriptionOptions.type===ws.timeseries,r)},_=this;try{for(var A=ve(Object.keys(e.latest)),w=A.next();!w.done;w=A.next()){S(w.value)}}catch(t){s={error:t}}finally{try{w&&!w.done&&(u=A.return)&&u.call(A)}finally{if(s)throw s.error}}}}if(this.entityDataSubscriptionOptions.type===ws.timeseries&&e.timeseries){var I=this.toSubscriptionData(e.timeseries,!0);if(this.dataAggregators&&this.dataAggregators[n]){E=this.dataAggregators[n];var D=Object.keys(I),R=this.timeseriesDataKeysByKeyNames(D),N=[];try{for(var O=ve(R),C=O.next();!C.done;C=O.next()){N[(g=C.value).index]=I[g.name]}}catch(t){c={error:t}}finally{try{C&&!C.done&&(l=O.return)&&l.call(O)}finally{if(c)throw c.error}}b=void 0;i||(b=E.updateOnDataCb((function(t,e){p.onIndexedData(t,n,e,!1,r)}))),E.onData(N,!1,this.history,!0),b&&E.updateOnDataCb(b)}else this.history||i||this.onData(I,Va.timeseries,n,!0,!1,r)}},t.prototype.onData=function(t,e,n,i,r,a){var o,s;try{for(var u=ve(Object.keys(t)),c=u.next();!c.done;c=u.next()){var l=c.value,p=t[l];this.onKeyData(p.map((function(t){return[t[0],t[1],[t[0],t[0]]]})),l,0,e,n,i,r,!1,a)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}},t.prototype.onIndexedData=function(t,e,n,i,r){var a,o;try{for(var s=ve(Object.keys(t)),u=s.next();!u.done;u=s.next()){var c=u.value,l=Number(c),p=this.dataKeyByIndex(l),d=p.aggregationType&&p.aggregationType!==es.NONE,f=t[l],h=p.name;p.type===Va.function&&(h+="_".concat(p.index)),this.onKeyData(f,h,l,p.type,e,n,i,d,r)}}catch(t){a={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}},t.prototype.onKeyData=function(e,n,i,r,a,o,s,u,c){for(var l=this,p=u?"_".concat(i):"",d="".concat(n,"_").concat(r).concat(p).concat(s?"_latest":""),f=this.dataKeys[d],h=function(n){var i="".concat(d,"_").concat(n);if(y.datasourceData[a][i].data){var r,u,p=f[n],h=[],m=void 0,g=void 0,v=!1;if(y.realtime&&!s?(m=[],g=[]):(m=y.datasourceData[a][i].data,g=y.datasourceOrigData[a][i].data),m.length>0?(r=m[m.length-1],u=g[g.length-1]):(r=[0,0,[0,0]],u=[0,0,[0,0]]),y.datasourceOrigData[a][i].data=[],y.entityDataSubscriptionOptions.type!==ws.timeseries||s){if(y.entityDataSubscriptionOptions.type===ws.latest||s){if(e.length>0){var T=e[0],E=T[0];y.datasourceOrigData[a][i].data.push([T[0],T[1],T[2]]);var b=t.convertValue(T[1]);p.postFunc&&(b=p.postFunc(E,b,r[1],u[0],u[1])),T=[E,b,T[2]],h.push([T[0],T[1],T[2]])}v=!0}}else e.forEach((function(e){var n=e,o=n[0];l.datasourceOrigData[a][i].data.push([n[0],n[1],n[2]]);var s=t.convertValue(n[1]);p.postFunc&&(s=p.postFunc(o,s,r[1],u[0],u[1])),u=[n[0],n[1],n[2]],n=[n[0],s,n[2]],h.push([n[0],n[1],n[2]]),r=[n[0],n[1],n[2]]})),v=!0;v&&(y.datasourceData[a][i].data=h,c(y.datasourceData[a][i],a,p.index,o,s))}},y=this,m=0;f&&m<f.length;m++)h(m)},t.prototype.toSubscriptionData=function(t,e){var n,i,r={},a=function(n){var i=t[n],a=[];if(e)i.forEach((function(t){a.push([t.ts,t.value,t.count])}));else{var o=i;a.push([o.ts,o.value,o.count])}r[n]=a};try{for(var o=ve(Object.keys(t)),s=o.next();!s.done;s=o.next()){a(s.value)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r},t.prototype.createRealtimeDataAggregator=function(t,e,n,i,r){var a=this;return new Yp((function(t,e){a.onIndexedData(t,i,e,n&&a.entityDataSubscriptionOptions.type===ws.timeseries,r)}),e,n,t,this.utils,this.entityDataSubscriptionOptions.ignoreDataUpdateOnIntervalTick||n)},t.prototype.dataKeyByIndex=function(t){return this.dataKeysList.find((function(e){return e.index===t}))},t.prototype.timeseriesDataKeysByKeyNames=function(t){var e,n,i=[];try{for(var r=ve(t),a=r.next();!a.done;a=r.next()){var o=a.value,s="".concat(o,"_").concat(Va.timeseries),u=this.dataKeys[s];i.push.apply(i,Ee([],Te(u),!1))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i},t.prototype.generateSeries=function(t,e,n){var i,r=[],a="".concat(t.key,"_").concat(t.listIndex),o=this.datasourceData[0][a].data;if(o.length>0){var s=o[o.length-1];i=[s[0],s[1]]}else i=[0,0];for(var u=e;u<=n&&(this.timeseriesTimer||this.history);u+=this.frequency){var c=[u,t.func(u,i[1])];r.push(c),i=c}return r.length>0&&(t.lastUpdateTime=r[r.length-1][0]),r},t.prototype.generateLatest=function(t,e){var n,i=t.latest?"".concat(t.key,"_").concat(t.listIndex):t.key,r=this.datasourceData[0][i].data;n=r.length>0?r[r.length-1]:[0,0];var a=Date.now()+this.latestTsOffset,o=[a,t.func(a,n[1])];this.datasourceData[0][i].data=[o],this.listener.dataUpdated(this.datasourceData[0][i],this.listener.configDatasourceIndex,0,t.index,e,t.latest)},t.prototype.generateData=function(t){var e,n,i,r,a,o=[],s=[];if(this.entityDataSubscriptionOptions.type===ws.timeseries)try{for(var u=ve(Object.keys(this.dataKeys)),c=u.next();!c.done;c=u.next()){a=c.value;var l=this.dataKeys[a];o=o.concat(l.filter((function(t){return!t.latest}))),s=s.concat(l.filter((function(t){return t.latest})))}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}else if(this.entityDataSubscriptionOptions.type===ws.latest)try{for(var p=ve(Object.keys(this.dataKeys)),d=p.next();!d.done;d=p.next())a=d.value,s.push(this.dataKeys[a])}catch(t){i={error:t}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}o.length&&(this.history?this.onTimeseriesTick(o,!0):this.timeseriesTimer=setTimeout(this.onTimeseriesTick.bind(this,o,!0),0)),s.length&&this.onLatestTick(s,t)},t.prototype.onTimeseriesTick=function(t,e){var n,i,r,a=this.utils.currentPerfTime();this.tickElapsed+=a-this.tickScheduledTime,this.tickScheduledTime=a,this.timeseriesTimer&&clearTimeout(this.timeseriesTimer);var o=[];this.history||(r=Math.floor(this.tickElapsed/this.frequency));var s=this.history?this.frequency:r*this.frequency;this.tickElapsed=this.tickElapsed-s;for(var u=0;u<t.length&&(this.timeseriesTimer||this.history);u++){var c=t[u];if(!n){if(this.realtime){if(c.lastUpdateTime)n=c.lastUpdateTime+this.frequency,i=c.lastUpdateTime+s;else if(i=(n=this.entityDataSubscriptionOptions.subscriptionTimewindow.startTs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset)+this.entityDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs+this.frequency,this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.type===es.NONE){var l=i-this.frequency*this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.limit;n=Math.max(l,n)}}else n=this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow.startTimeMs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset,i=this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow.endTimeMs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset;if(this.entityDataSubscriptionOptions.subscriptionTimewindow.quickInterval){var p=ms().valueOf()+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset;i=Math.min(p,i)}}o[c.index]=this.generateSeries(c,n,i)}this.dataAggregators&&this.dataAggregators.length&&this.dataAggregators[0].onData(o,!0,this.history,e),this.history||(this.timeseriesTimer=setTimeout(this.onTimeseriesTick.bind(this,t,!0),this.frequency))},t.prototype.onLatestTick=function(t,e){var n=this;this.latestTimer&&clearTimeout(this.latestTimer),t.forEach((function(t){n.generateLatest(t,e)})),this.latestTimer=setTimeout(this.onLatestTick.bind(this,t,!0),this.latestFrequency)},t}(),Bp=function(){function t(t,e){this.telemetryService=t,this.utils=e}var e;return e=t,t.isUnresolvedDatasource=function(t,e){return t.type===qs.entity?!t.entityFilter||!e:t.type===qs.entityCount&&!t.entityFilter},t.toSubscriptionDataKey=function(t,e){return{name:t.name,type:t.type,aggregationType:t.aggregationType,comparisonEnabled:t.comparisonEnabled,timeForComparison:t.timeForComparison,comparisonCustomIntervalValue:t.comparisonCustomIntervalValue,comparisonResultType:t.comparisonResultType,funcBody:t.funcBody,postFuncBody:t.postFuncBody,latest:e}},t.prototype.prepareSubscription=function(t,n){void 0===n&&(n=!1);var i=t.configDatasource;return t.subscriptionOptions=this.createSubscriptionOptions(i,t.subscriptionType,i.pageLink,i.keyFilters,null,!1,n),e.isUnresolvedDatasource(i,i.pageLink)?Un(null):(t.subscription=new Hp(t,this.telemetryService,this.utils),t.subscription.subscribe())},t.prototype.startSubscription=function(t){t.subscription&&(t.useTimewindow&&(t.subscriptionOptions.subscriptionTimewindow=Qr(t.subscriptionTimewindow)),t.subscriptionType!==ws.timeseries&&t.subscriptionType!==ws.latest||(t.subscriptionOptions.latestTsOffset=t.latestTsOffset),t.subscription.start())},t.prototype.subscribeForPaginatedData=function(t,n,i,r){void 0===r&&(r=!1);var a=t.configDatasource;return t.subscriptionOptions=this.createSubscriptionOptions(a,t.subscriptionType,n,a.keyFilters,i,!0,r),e.isUnresolvedDatasource(a,n)?(t.dataLoaded({data:[],totalPages:0,totalElements:0,hasNext:!1},[],t.configDatasourceIndex,t.subscriptionOptions.pageLink),Un(null)):(t.subscription=new Hp(t,this.telemetryService,this.utils),t.useTimewindow&&(t.subscriptionOptions.subscriptionTimewindow=Qr(t.subscriptionTimewindow)),t.subscriptionType!==ws.timeseries&&t.subscriptionType!==ws.latest||(t.subscriptionOptions.latestTsOffset=t.latestTsOffset),t.subscription.subscribe())},t.prototype.stopSubscription=function(t){t.subscription&&t.subscription.unsubscribe()},t.prototype.createSubscriptionOptions=function(t,n,i,r,a,o,s){var u=[];t.dataKeys.forEach((function(t){u.push(e.toSubscriptionDataKey(t,!1))})),t.latestDataKeys&&t.latestDataKeys.forEach((function(t){u.push(e.toSubscriptionDataKey(t,!0))}));var c={datasourceType:t.type,dataKeys:u,type:n};return c.datasourceType!==qs.entity&&c.datasourceType!==qs.entityCount&&c.datasourceType!==qs.alarmCount||(c.entityFilter=t.entityFilter,c.alarmFilter=t.alarmFilter,c.keyFilters=r,c.additionalKeyFilters=a,c.datasourceType===qs.entity&&(c.pageLink=i)),c.isPaginatedDataSubscription=o,c.ignoreDataUpdateOnIntervalTick=s,c},t=e=fe([ae(),he(0,se(Zi.TelemetryWebsocketService)),he(1,se(Zi.UtilsService)),ye("design:paramtypes",[Op,mc])],t)}(),Kp=function(){function t(t){this.dashboard=t}return Object.defineProperty(t.prototype,"aliasController",{get:function(){return this.dashboard.aliasController},enumerable:!1,configurable:!0}),t}();!function(t){t.QUEUED="QUEUED",t.DELIVERED="DELIVERED",t.SUCCESSFUL="SUCCESSFUL",t.TIMEOUT="TIMEOUT",t.FAILED="FAILED",t.SENT="SENT",t.EXPIRED="EXPIRED"}(Rp||(Rp={}));var Gp=new Map([[Rp.QUEUED,"black"],[Rp.DELIVERED,"green"],[Rp.SUCCESSFUL,"green"],[Rp.TIMEOUT,"orange"],[Rp.FAILED,"red"],[Rp.SENT,"green"],[Rp.EXPIRED,"red"]]),qp=new Map([[Rp.QUEUED,"widgets.persistent-table.rpc-status.QUEUED"],[Rp.DELIVERED,"widgets.persistent-table.rpc-status.DELIVERED"],[Rp.SUCCESSFUL,"widgets.persistent-table.rpc-status.SUCCESSFUL"],[Rp.TIMEOUT,"widgets.persistent-table.rpc-status.TIMEOUT"],[Rp.FAILED,"widgets.persistent-table.rpc-status.FAILED"],[Rp.SENT,"widgets.persistent-table.rpc-status.SENT"],[Rp.EXPIRED,"widgets.persistent-table.rpc-status.EXPIRED"]]),zp=Sa,Qp=function(t){if(t.length>0){var e=0;return t.forEach((function(t){e+=Number(t[1])})),e}return null},Jp=function(){function t(t,e){var n,i,r=this;this.options=e,this.tsOffset=0,this.cafs={},this.hasResolvedData=!1,this.subscribed=!1,this.hasLatestData=!1,this.widgetTimewindowChangedSubject=new sn,this.widgetTimewindowChanged$=this.widgetTimewindowChangedSubject.asObservable().pipe(Je((function(t,e){var r=new Set;t.subscribe(Xe(e,(function(t){var i=n?n(t):t;r.has(i)||(r.add(i),e.next(t))}))),i&&Dn(i).subscribe(Xe(e,(function(){return r.clear()}),Ue))})));var a=new sn;this.init$=a.asObservable(),this.ctx=t,this.type=e.type,this.id=this.ctx.utils.guid(),this.callbacks=e.callbacks,this.type===ws.rpc?(this.callbacks.rpcStateChanged=this.callbacks.rpcStateChanged||function(){},this.callbacks.onRpcSuccess=this.callbacks.onRpcSuccess||function(){},this.callbacks.onRpcFailed=this.callbacks.onRpcFailed||function(){},this.callbacks.onRpcErrorCleared=this.callbacks.onRpcErrorCleared||function(){},this.targetDevice=e.targetDevice,tu(this.targetDevice)||(e.targetDeviceAliasIds&&e.targetDeviceAliasIds.length?this.targetDevice={type:Js.entity,entityAliasId:e.targetDeviceAliasIds[0]}:e.targetDeviceIds&&e.targetDeviceIds.length&&(this.targetDevice={type:Js.device,entityAliasId:e.targetDeviceIds[0]})),this.targetEntityId=null,this.targetEntityName=null,this.rpcRejection=null,this.rpcErrorText=null,this.rpcEnabled=!1,this.executingRpcRequest=!1,this.executingSubjects=[],this.initRpc().subscribe((function(){a.next(r),a.complete()}))):this.type===ws.alarm?(this.callbacks.onDataUpdated=this.callbacks.onDataUpdated||function(){},this.callbacks.onDataUpdateError=this.callbacks.onDataUpdateError||function(){},this.callbacks.onSubscriptionMessage=this.callbacks.onSubscriptionMessage||function(){},this.callbacks.dataLoading=this.callbacks.dataLoading||function(){},this.callbacks.timeWindowUpdated=this.callbacks.timeWindowUpdated||function(){},this.alarmSource=e.alarmSource,this.datasourcesOptional=e.datasourcesOptional,this.alarmDataListener=null,this.alarms={data:[],totalPages:0,totalElements:0,hasNext:!1},this.originalTimewindow=null,this.timeWindow={},this.useDashboardTimewindow=e.useDashboardTimewindow,this.useTimewindow=!0,this.onTimewindowChangeFunction=e.onTimewindowChangeFunction||function(t){return t},this.useDashboardTimewindow?this.timeWindowConfig=Qr(e.dashboardTimewindow):this.timeWindowConfig=Qr(e.timeWindowConfig),this.subscriptionTimewindow=null,this.loadingData=!1,this.displayLegend=!1,this.initAlarmSubscription().subscribe({next:function(){a.next(r),a.complete()},error:function(){a.error(null)}})):(this.callbacks.onDataUpdated=this.callbacks.onDataUpdated||function(){},this.callbacks.onLatestDataUpdated=this.callbacks.onLatestDataUpdated||function(){},this.callbacks.onDataUpdateError=this.callbacks.onDataUpdateError||function(){},this.callbacks.onLatestDataUpdateError=this.callbacks.onLatestDataUpdateError||function(){},this.callbacks.onSubscriptionMessage=this.callbacks.onSubscriptionMessage||function(){},this.callbacks.onInitialPageDataChanged=this.callbacks.onInitialPageDataChanged||function(){},this.callbacks.forceReInit=this.callbacks.forceReInit||function(){},this.callbacks.dataLoading=this.callbacks.dataLoading||function(){},this.callbacks.legendDataUpdated=this.callbacks.legendDataUpdated||function(){},this.callbacks.timeWindowUpdated=this.callbacks.timeWindowUpdated||function(){},this.configuredDatasources=this.ctx.utils.validateAndUpdateDatasources(e.datasources),this.datasourcesOptional=e.datasourcesOptional,this.entityDataListeners=[],this.hasDataPageLink=e.hasDataPageLink,this.singleEntity=e.singleEntity,this.pageSize=e.pageSize,this.warnOnPageDataOverflow=e.warnOnPageDataOverflow,this.ignoreDataUpdateOnIntervalTick=e.ignoreDataUpdateOnIntervalTick,this.datasourcePages=[],this.datasources=[],this.dataPages=[],this.data=[],this.latestData=[],this.hiddenData=[],this.originalTimewindow=null,this.timeWindow={},this.useDashboardTimewindow=e.useDashboardTimewindow,this.onTimewindowChangeFunction=e.onTimewindowChangeFunction||function(t){return t},this.stateData=e.stateData,this.useTimewindow=this.type===ws.timeseries||eu(this.configuredDatasources),this.useDashboardTimewindow?this.timeWindowConfig=Qr(e.dashboardTimewindow):this.timeWindowConfig=Qr(e.timeWindowConfig),this.type===ws.latest&&(this.timezone=this.useTimewindow?this.timeWindowConfig.timezone:e.dashboardTimewindow.timezone,this.updateTsOffset()),this.subscriptionTimewindow=null,this.comparisonEnabled=e.comparisonEnabled&&ys(this.timeWindowConfig),this.comparisonEnabled&&(this.timeForComparison=e.timeForComparison,this.comparisonCustomIntervalValue=e.comparisonCustomIntervalValue,this.comparisonTimeWindow={},this.timewindowForComparison=null),this.units=e.units||"",this.decimals=Cr(e.decimals)?e.decimals:2,this.loadingData=!1,e.legendConfig?(this.legendConfig=e.legendConfig,this.legendData={keys:[],data:[]},this.displayLegend=!0):this.displayLegend=!1,this.caulculateLegendData=this.displayLegend&&this.type===ws.timeseries&&(!0===this.legendConfig.showMin||!0===this.legendConfig.showMax||!0===this.legendConfig.showAvg||!0===this.legendConfig.showTotal||!0===this.legendConfig.showLatest),this.initDataSubscription().subscribe({next:function(){a.next(r),a.complete()},error:function(){a.error(null)}}))}return Object.defineProperty(t.prototype,"firstDatasource",{get:function(){var t;return this.type===ws.alarm?this.alarmSource:(null===(t=this.datasources)||void 0===t?void 0:t.length)?this.datasources[0]:null},enumerable:!1,configurable:!0}),t.prototype.initRpc=function(){var t=this,e=new sn;return this.ctx.aliasController.resolveSingleEntityInfoForTargetDevice(this.targetDevice).subscribe({next:function(n){if((null==n?void 0:n.id)&&(t.targetEntityId={id:n.id,entityType:n.entityType},t.targetEntityName=n.name),(null==n?void 0:n.entityType)===or.DEVICE&&(t.targetDeviceId=n.id),t.targetDeviceId)t.rpcEnabled=!0;else if(t.rpcEnabled=t.ctx.utils.widgetEditMode,!t.rpcEnabled)if(t.targetEntityId){var i=t.ctx.translate.instant(dr.get(t.targetEntityId.entityType).type);t.rpcDisabledReason=t.ctx.translate.instant("rpc.error.invalid-target-entity",{entityType:i})}else t.rpcDisabledReason=t.ctx.translate.instant("rpc.error.target-device-is-not-set");t.hasResolvedData=!0,t.callbacks.rpcStateChanged(t),e.next(),e.complete()},error:function(){t.rpcEnabled=!1,t.rpcDisabledReason=t.ctx.translate.instant("rpc.error.failed-to-resolve-target-device"),t.callbacks.rpcStateChanged(t),e.next(),e.complete()}}),e.asObservable()},t.prototype.initAlarmSubscription=function(){var t=this,e=new sn(1);return this.loadStDiff().subscribe((function(){t.ctx.aliasController?t.ctx.aliasController.resolveAlarmSource(t.alarmSource).subscribe({next:function(n){t.alarmSource=n,n&&(t.hasResolvedData=!0),t.configureAlarmsData(),e.next(),e.complete()},error:function(t){e.error(t)}}):(t.hasResolvedData=!0,t.configureAlarmsData(),e.next(),e.complete())})),e.asObservable()},t.prototype.configureAlarmsData=function(){this.notifyDataLoaded()},t.prototype.initDataSubscription=function(){var t=this;this.notifyDataLoading();var e=new sn(1);return this.loadStDiff().subscribe((function(){t.ctx.aliasController?t.ctx.aliasController.resolveDatasources(t.configuredDatasources,t.singleEntity,t.pageSize).subscribe({next:function(n){t.configuredDatasources=n,t.prepareDataSubscriptions().subscribe((function(){e.next(),e.complete()}))},error:function(n){t.notifyDataLoaded(),e.error(n)}}):(t.configuredDatasources=Qr(t.configuredDatasources),t.hasResolvedData=!0,t.prepareDataSubscriptions().subscribe((function(){e.next(),e.complete()})))})),e.asObservable()},t.prototype.prepareDataSubscriptions=function(){var t=this;if(this.hasDataPageLink||!this.configuredDatasources||!this.configuredDatasources.length)return this.hasResolvedData=!0,this.notifyDataLoaded(),Un(null);if(this.comparisonEnabled){var e=[];this.configuredDatasources.forEach((function(t,n){var i=[];if(t.dataKeys.forEach((function(t,e){if(ou(t.settings)&&t.settings.comparisonSettings.showValuesForComparison){var n=Qr(t);n.isAdditional=!0,n.origDataKeyIndex=e,i.push(n)}})),i.length){var r=Qr(t);r.dataKeys=i,r.isAdditional=!0,r.origDatasourceIndex=n,e.push(r)}})),this.configuredDatasources=this.configuredDatasources.concat(e)}return zn(this.configuredDatasources.map((function(e,n){var i={subscriptionType:t.type,useTimewindow:t.useTimewindow,configDatasource:e,configDatasourceIndex:n,dataLoaded:function(e,n,i,r){t.dataLoaded(e,n,i,r,!0)},initialPageDataChanged:t.initialPageDataChanged.bind(t),forceReInit:t.forceReInit.bind(t),dataUpdated:t.dataUpdated.bind(t),updateRealtimeSubscription:function(){return t.updateRealtimeSubscription()},setRealtimeSubscription:function(e){t.updateRealtimeSubscription(Qr(e))}};return t.entityDataListeners.push(i),t.ctx.entityDataService.prepareSubscription(i,t.ignoreDataUpdateOnIntervalTick)}))).pipe(xn((function(e){e.forEach((function(e){e&&t.dataLoaded(e.pageData,e.data,e.datasourceIndex,e.pageLink,!1)})),t.configureLoadedData(),t.hasResolvedData=t.datasources.length>0||t.datasourcesOptional,t.updateDataTimewindow(),t.notifyDataLoaded(),t.onDataUpdated(!0),t.hasLatestData&&t.onLatestDataUpdated(!0)})))},t.prototype.resetData=function(){this.data.length=0,this.latestData.length=0,this.hiddenData.length=0,this.displayLegend&&(this.legendData.keys.length=0,this.legendData.data.length=0),this.onDataUpdated(),this.hasLatestData&&this.onLatestDataUpdated()},t.prototype.getFirstEntityInfo=function(){var t,e,n,i,r,a;if(this.type===ws.rpc)this.targetEntityId&&(n=this.targetEntityId,i=this.targetEntityName,r=this.targetEntityName);else if(this.type===ws.alarm){if(this.alarmSource&&this.alarmSource.entityType&&this.alarmSource.entityId)n={entityType:this.alarmSource.entityType,id:this.alarmSource.entityId},i=this.alarmSource.entityName,r=this.alarmSource.entityLabel,a=this.alarmSource.entityDescription;else if(this.alarms&&this.alarms.data.length){var o=this.alarms.data[0];if(n=o.originator,i=o.originatorName,r=o.originatorLabel,o.latest&&o.latest[ml.ENTITY_FIELD]){var s=o.latest[ml.ENTITY_FIELD].additionalInfo;if(s){var u=s.value;if(u&&u.length)try{var c=JSON.parse(u);c&&c.description&&(a=c.description)}catch(t){}}}}}else try{for(var l=ve(this.datasources),p=l.next();!p.done;p=l.next()){var d=p.value;if(d&&d.entityType&&d.entityId){n={entityType:d.entityType,id:d.entityId},i=d.entityName,r=d.entityLabel,a=d.entityDescription;break}}}catch(e){t={error:e}}finally{try{p&&!p.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}return n?{entityId:n,entityName:i,entityLabel:r,entityDescription:a}:null},t.prototype.onAliasesChanged=function(t){return this.type===ws.rpc?this.checkRpcTarget(t):this.type===ws.alarm?this.checkAlarmSource(t):this.checkSubscriptions(t)},t.prototype.onFiltersChanged=function(t){return this.type!==ws.rpc&&(this.type===ws.alarm?this.checkAlarmSourceFilters(t):this.checkSubscriptionsFilters(t))},t.prototype.onDataUpdated=function(t){var e=this;this.cafs.dataUpdated&&(this.cafs.dataUpdated(),this.cafs.dataUpdated=null),this.cafs.dataUpdated=this.ctx.raf.raf((function(){try{e.callbacks.onDataUpdated(e,t)}catch(t){e.callbacks.onDataUpdateError(e,t)}}))},t.prototype.onLatestDataUpdated=function(t){var e=this;this.cafs.latestDataUpdated&&(this.cafs.latestDataUpdated(),this.cafs.latestDataUpdated=null),this.cafs.latestDataUpdated=this.ctx.raf.raf((function(){try{e.callbacks.onLatestDataUpdated(e,t)}catch(t){e.callbacks.onLatestDataUpdateError(e,t)}}))},t.prototype.onSubscriptionMessage=function(t){var e=this;this.cafs.message&&(this.cafs.message(),this.cafs.message=null),this.cafs.message=this.ctx.raf.raf((function(){e.callbacks.onSubscriptionMessage(e,t)}))},t.prototype.onDashboardTimewindowChanged=function(t){var e=!1,n=!1;this.useTimewindow?this.useDashboardTimewindow&&(this.type===ws.latest&&t&&this.timezone!==t.timezone&&(this.timezone=t.timezone,e=this.updateTsOffset()),!Jr(this.timeWindowConfig,t)&&t&&(n=ds(this.timeWindowConfig,t),this.timeWindowConfig=Qr(t),e=!0)):this.type===ws.latest&&t&&this.timezone!==t.timezone&&(this.timezone=t.timezone,e=this.updateTsOffset()),e&&this.update(n)},t.prototype.updateDataVisibility=function(t){if(this.displayLegend){var e=this.legendData.keys.find((function(e){return e.dataIndex===t})).dataKey.hidden;e?(this.hiddenData[t].data=this.data[t].data,this.data[t].data=[]):(this.data[t].data=this.hiddenData[t].data,this.hiddenData[t].data=[]),this.onDataUpdated()}},t.prototype.updateTimewindowConfig=function(t){if(!this.useDashboardTimewindow){this.type===ws.latest&&t&&this.timezone!==t.timezone&&(this.timezone=t.timezone,this.updateTsOffset());var e=ds(this.timeWindowConfig,t);this.timeWindowConfig=t,this.update(e)}},t.prototype.onResetTimewindow=function(){if(this.useDashboardTimewindow)this.ctx.dashboardTimewindowApi.onResetTimewindow();else if(this.originalTimewindow){var t=ds(this.timeWindowConfig,this.originalTimewindow);this.timeWindowConfig=Qr(this.originalTimewindow),this.originalTimewindow=null,this.callbacks.timeWindowUpdated(this,this.timeWindowConfig),this.update(t)}},t.prototype.onUpdateTimewindow=function(t,e,n){if(this.useDashboardTimewindow)this.ctx.dashboardTimewindowApi.onUpdateTimewindow(t,e);else{this.originalTimewindow||(this.originalTimewindow=Qr(this.timeWindowConfig)),this.timeWindowConfig=ps(this.timeWindowConfig,t,e,n,this.ctx.timeService),this.callbacks.timeWindowUpdated(this,this.timeWindowConfig);var i=ds(this.timeWindowConfig,this.originalTimewindow);this.update(i)}},t.prototype.sendOneWayCommand=function(t,e,n,i,r,a,o,s){return this.sendCommand(!0,t,e,n,i,r,a,o,s)},t.prototype.sendTwoWayCommand=function(t,e,n,i,r,a,o,s){return this.sendCommand(!1,t,e,n,i,r,a,o,s)},t.prototype.clearRpcError=function(){this.rpcRejection=null,this.rpcErrorText=null,this.callbacks.onRpcErrorCleared(this)},t.prototype.completedCommand=function(){this.executingSubjects.forEach((function(t){t.next(),t.complete()}))},t.prototype.sendCommand=function(t,e,n,i,r,a,o,s,u){var c=this;if(this.rpcEnabled){!this.rpcRejection||this.rpcRejection.status&&504===this.rpcRejection.status||(this.rpcRejection=null,this.rpcErrorText=null,this.callbacks.onRpcErrorCleared(this));var l={method:e,params:n,persistent:r,retries:o,additionalInfo:s,requestUUID:u};i&&i>0&&(l.timeout=i);var p=new nn;return this.executingRpcRequest=!0,this.callbacks.rpcStateChanged(this),this.ctx.utils.widgetEditMode?setTimeout((function(){c.executingRpcRequest=!1,c.callbacks.rpcStateChanged(c),t?(p.next(),p.complete()):(p.next(l),p.complete())}),500):(this.executingSubjects.push(p),(t?this.ctx.deviceService.sendOneWayRpcCommand(this.targetDeviceId,l):this.ctx.deviceService.sendTwoWayRpcCommand(this.targetDeviceId,l)).pipe(li((function(t){if(r&&a>0){var e=Math.max(a,1e3);return Qn(i?Math.min(i+1e3,e):e,e).pipe(li((function(){return c.ctx.deviceService.getPersistedRpc(t.rpcId,!0)})),Jn((function(t){return t.status!==Rp.DELIVERED&&t.status!==Rp.QUEUED})),li((function(t){return[Rp.TIMEOUT,Rp.EXPIRED].includes(t.status)?Pn((function(){return{status:504}})):t.status===Rp.FAILED?Pn((function(){return{status:502,statusText:t.response.error}})):Un(t.response)})),(n=p,Je((function(t,e){Dn(n).subscribe(Xe(e,(function(){return e.complete()}),Ue)),!e.closed&&t.subscribe(e)}))))}var n;return Un(t)}))).subscribe({next:function(t){c.rpcRejection=null,c.rpcErrorText=null;var e=c.executingSubjects.indexOf(p);e>=0&&c.executingSubjects.splice(e,1),c.executingRpcRequest=c.executingSubjects.length>0,c.callbacks.onRpcSuccess(c),p.next(t),p.complete()},error:function(t){var e=c.executingSubjects.indexOf(p);if(e>=0&&c.executingSubjects.splice(e,1),c.executingRpcRequest=c.executingSubjects.length>0,c.callbacks.rpcStateChanged(c),!c.executingRpcRequest||504===t.status){if(c.rpcRejection=t,504===t.status)c.rpcErrorText=c.ctx.translate.instant("rpc.error.request-timeout");else{c.rpcErrorText=c.ctx.translate.instant("rpc.error.rpc-http-error",{status:t.status,statusText:t.statusText});var n=ya(t,c.ctx.translate);n&&(c.rpcErrorText+="</br>",c.rpcErrorText+=n.message)}c.callbacks.onRpcFailed(c)}p.error(t)}})),p.asObservable()}return this.rpcErrorText=this.rpcDisabledReason,this.rpcRejection=new Error(this.rpcErrorText),Pn((function(){return c.rpcRejection}))},t.prototype.update=function(t){void 0===t&&(t=!1),this.type!==ws.rpc&&(this.widgetTimewindowChangedSubject.next(this.timeWindowConfig),this.type===ws.alarm?this.updateAlarmDataSubscription():this.type===ws.timeseries&&this.options.comparisonEnabled&&t?this.forceReInit():this.hasDataPageLink?this.updateDataSubscriptions():(this.notifyDataLoading(),this.dataSubscribe()))},t.prototype.subscribe=function(){var t=this;this.subscribed||(this.subscribed=!0,this.cafs.subscribe&&(this.cafs.subscribe(),this.cafs.subscribe=null),this.cafs.subscribe=this.ctx.raf.raf((function(){t.doSubscribe()})))},t.prototype.subscribeAllForPaginatedData=function(t,e){var n=this,i=[];return this.configuredDatasources.forEach((function(r,a){i.push(n.subscribeForPaginatedData(a,t,e))})),i.length?zn(i):Un(null)},t.prototype.stopSubscription=function(t){var e=this.entityDataListeners[t];e&&this.ctx.entityDataService.stopSubscription(e)},t.prototype.subscribeForPaginatedData=function(t,e,n){var i=this,r=this.entityDataListeners[t];r&&this.ctx.entityDataService.stopSubscription(r);var a=this.configuredDatasources[t];return a?(this.useTimewindow&&this.timeWindowConfig&&this.updateRealtimeSubscription(),r={subscriptionType:this.type,useTimewindow:this.useTimewindow,configDatasource:a,configDatasourceIndex:t,subscriptionTimewindow:this.subscriptionTimewindow,latestTsOffset:this.tsOffset,dataLoaded:function(t,e,n,r){i.dataLoaded(t,e,n,r,!0)},dataUpdated:this.dataUpdated.bind(this),updateRealtimeSubscription:function(){return i.updateRealtimeSubscription()},setRealtimeSubscription:function(t){i.updateRealtimeSubscription(Qr(t))}},this.entityDataListeners[t]=r,this.ctx.entityDataService.subscribeForPaginatedData(r,e,n,this.ignoreDataUpdateOnIntervalTick)):Un(null)},t.prototype.subscribeForAlarms=function(t,e){this.alarmDataListener&&this.ctx.alarmDataService.stopSubscription(this.alarmDataListener),this.timeWindowConfig&&this.updateRealtimeSubscription(),this.alarmDataListener={subscriptionTimewindow:this.subscriptionTimewindow,alarmSource:this.alarmSource,alarmsLoaded:this.alarmsLoaded.bind(this),alarmsUpdated:this.alarmsUpdated.bind(this)},this.alarms={data:[],totalPages:0,totalElements:0,hasNext:!1},this.ctx.alarmDataService.subscribeForAlarms(this.alarmDataListener,t,e);var n=!1;this.alarmSource.unresolvedStateEntity&&(n=!0),n&&this.onDataUpdated()},t.prototype.doSubscribe=function(){this.type!==ws.rpc&&this.type!==ws.alarm&&this.dataSubscribe()},t.prototype.updateDataTimewindow=function(){this.hasDataPageLink||this.useTimewindow&&this.timeWindowConfig&&(this.updateRealtimeSubscription(),this.comparisonEnabled&&this.updateSubscriptionForComparison())},t.prototype.dataSubscribe=function(){var t=this;if(this.updateDataTimewindow(),!this.hasDataPageLink){this.useTimewindow&&this.timeWindowConfig&&this.subscriptionTimewindow.fixedWindow&&this.onDataUpdated();var e=!this.datasources.length,n=!this.entityDataListeners.filter((function(t){return!!t.subscription})).length;this.entityDataListeners.forEach((function(e){t.comparisonEnabled&&e.configDatasource.isAdditional?e.subscriptionTimewindow=t.timewindowForComparison:(e.subscriptionTimewindow=t.subscriptionTimewindow,e.latestTsOffset=t.tsOffset),t.ctx.entityDataService.startSubscription(e)})),e&&this.onDataUpdated(),n&&this.notifyDataLoaded()}},t.prototype.unsubscribe=function(){var t=this;this.type!==ws.rpc&&(this.type===ws.alarm?this.alarmsUnsubscribe():(this.entityDataListeners.forEach((function(e){null!=e&&t.ctx.entityDataService.stopSubscription(e)})),this.entityDataListeners.length=0,this.resetData())),this.subscribed=!1},t.prototype.alarmsUnsubscribe=function(){this.alarmDataListener&&(this.ctx.alarmDataService.stopSubscription(this.alarmDataListener),this.alarmDataListener=null)},t.prototype.checkRpcTarget=function(t){var e;return(null===(e=this.targetDevice)||void 0===e?void 0:e.type)===Js.entity&&t.indexOf(this.targetDevice.entityAliasId)>-1},t.prototype.checkAlarmSource=function(t){return this.options.alarmSource&&this.options.alarmSource.entityAliasId&&t.indexOf(this.options.alarmSource.entityAliasId)>-1&&this.updateAlarmSubscription(),!1},t.prototype.checkAlarmSourceFilters=function(t){return this.options.alarmSource&&this.options.alarmSource.filterId&&t.indexOf(this.options.alarmSource.filterId)>-1&&this.updateAlarmSubscription(),!1},t.prototype.updateAlarmSubscription=function(){var t=this;this.alarmSource=this.options.alarmSource,this.ctx.aliasController?this.ctx.aliasController.resolveAlarmSource(this.alarmSource).subscribe({next:function(e){t.alarmSource=e,e&&(t.hasResolvedData=!0),t.configureAlarmsData(),t.updateAlarmDataSubscription()},error:function(){t.notifyDataLoaded()}}):(this.hasResolvedData=!0,this.configureAlarmsData(),this.updateAlarmDataSubscription())},t.prototype.updateAlarmDataSubscription=function(){if(this.alarmDataListener){var t=this.alarmDataListener.alarmDataSubscriptionOptions.pageLink,e=this.alarmDataListener.alarmDataSubscriptionOptions.additionalKeyFilters;this.subscribeForAlarms(t,e)}},t.prototype.checkSubscriptions=function(t){var e,n,i=!1,r=this.options.datasources;if(r)try{for(var a=ve(r),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.entityAliasId&&t.indexOf(s.entityAliasId)>-1){i=!0;break}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i&&this.hasDataPageLink&&(i=!1,this.updateDataSubscriptions()),i},t.prototype.checkSubscriptionsFilters=function(t){var e,n,i=!1,r=this.options.datasources;if(r)try{for(var a=ve(r),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.filterId&&t.indexOf(s.filterId)>-1){i=!0;break}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i&&this.hasDataPageLink&&(i=!1,this.updateDataSubscriptions()),i},t.prototype.updateDataSubscriptions=function(){var t=this;this.configuredDatasources=this.ctx.utils.validateAndUpdateDatasources(this.options.datasources),this.ctx.aliasController?this.ctx.aliasController.resolveDatasources(this.configuredDatasources,this.singleEntity,this.pageSize).subscribe({next:function(e){t.configuredDatasources=e,t.prepareDataSubscriptions().subscribe((function(){t.updatePaginatedDataSubscriptions()}))},error:function(){t.notifyDataLoaded()}}):(this.configuredDatasources=Qr(this.configuredDatasources),this.hasResolvedData=!0,this.prepareDataSubscriptions().subscribe((function(){t.updatePaginatedDataSubscriptions()})))},t.prototype.updatePaginatedDataSubscriptions=function(){for(var t=0;t<this.entityDataListeners.length;t++)this.stopSubscription(t);for(t=0;t<this.entityDataListeners.length;t++){var e=this.entityDataListeners[t];if(e){var n=e.subscriptionOptions.pageLink,i=e.subscriptionOptions.additionalKeyFilters;this.subscribeForPaginatedData(t,n,i)}}},t.prototype.isDataResolved=function(){return this.hasResolvedData},t.prototype.destroy=function(){var t,e;this.unsubscribe(),this.widgetTimewindowChangedSubject.complete();try{for(var n=ve(Object.keys(this.cafs)),i=n.next();!i.done;i=n.next()){var r=i.value;this.cafs[r]&&(this.cafs[r](),this.cafs[r]=null)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.notifyDataLoading=function(){this.loadingData=!0,this.callbacks.dataLoading(this)},t.prototype.notifyDataLoaded=function(){this.loadingData=!1,this.callbacks.dataLoading(this)},t.prototype.updateTimewindow=function(){if(this.timeWindow.interval=this.subscriptionTimewindow.aggregation.interval||1e3,this.timeWindow.timezone=this.subscriptionTimewindow.timezone,this.timeWindow.tsOffset=this.subscriptionTimewindow.tsOffset,this.subscriptionTimewindow.realtimeWindowMs)if(this.subscriptionTimewindow.quickInterval){var t=Ts(this.subscriptionTimewindow.quickInterval,this.subscriptionTimewindow.timezone);this.timeWindow.maxTime=t[1]+this.subscriptionTimewindow.tsOffset,this.timeWindow.minTime=t[0]+this.subscriptionTimewindow.tsOffset}else{var e=zp().valueOf()+this.subscriptionTimewindow.tsOffset+this.timeWindow.stDiff;(!this.timeWindow.maxTime||Math.abs(e-this.timeWindow.maxTime)>500)&&(this.timeWindow.maxTime=e,this.timeWindow.maxTime-=this.timeWindow.maxTime%1e3,this.timeWindow.minTime=this.timeWindow.maxTime-this.subscriptionTimewindow.realtimeWindowMs)}else this.subscriptionTimewindow.fixedWindow&&(this.timeWindow.maxTime=this.subscriptionTimewindow.fixedWindow.endTimeMs+this.subscriptionTimewindow.tsOffset,this.timeWindow.minTime=this.subscriptionTimewindow.fixedWindow.startTimeMs+this.subscriptionTimewindow.tsOffset)},t.prototype.updateTsOffset=function(){var t=hs(this.timezone);return this.tsOffset!==t&&(this.tsOffset=t,!0)},t.prototype.updateRealtimeSubscription=function(t){return this.subscriptionTimewindow=t||Es(this.timeWindowConfig,this.timeWindow.stDiff,this.stateData,this.ctx.timeService),this.updateTimewindow(),this.subscriptionTimewindow},t.prototype.updateComparisonTimewindow=function(){this.comparisonTimeWindow.interval=this.timewindowForComparison.aggregation.interval||1e3,this.comparisonTimeWindow.timezone=this.timewindowForComparison.timezone,this.timewindowForComparison.fixedWindow&&(this.comparisonTimeWindow.maxTime=this.timewindowForComparison.fixedWindow.endTimeMs+this.timewindowForComparison.tsOffset,this.comparisonTimeWindow.minTime=this.timewindowForComparison.fixedWindow.startTimeMs+this.timewindowForComparison.tsOffset)},t.prototype.updateSubscriptionForComparison=function(){return this.timewindowForComparison=_s(this.subscriptionTimewindow,this.timeForComparison,this.comparisonCustomIntervalValue),this.updateComparisonTimewindow(),this.timewindowForComparison},t.prototype.initialPageDataChanged=function(t){this.callbacks.onInitialPageDataChanged(this,t)},t.prototype.forceReInit=function(){this.callbacks.forceReInit()},t.prototype.dataLoaded=function(t,e,n,i,r){var a=this,o=this.configuredDatasources[n];o.dataReceived=!0;var s=t.data.map((function(t,e){return a.entityDataToDatasource(o,t,e)}));this.datasourcePages[n]={data:s,hasNext:t.hasNext,totalElements:t.totalElements,totalPages:t.totalPages};var u=s.map((function(t,n){return a.entityDataToDatasourceData(t,e[n])}));if(this.dataPages[n]={data:u,hasNext:t.hasNext,totalElements:t.totalElements,totalPages:t.totalPages},o.type===qs.entity&&t.hasNext&&!this.singleEntity&&this.warnOnPageDataOverflow){var c=this.ctx.translate.instant("widget.data-overflow",{count:t.data.length,total:t.totalElements});this.onSubscriptionMessage({severity:"warn",message:c})}r&&(this.configureLoadedData(),this.onDataUpdated(!0),this.hasLatestData&&this.onLatestDataUpdated(!0))},t.prototype.configureLoadedData=function(){var t=this;this.datasources.length=0,this.data.length=0,this.latestData.length=0,this.hiddenData.length=0,this.hasLatestData=!1,this.displayLegend&&(this.legendData.keys.length=0,this.legendData.data.length=0);var e=0,n=0;this.configuredDatasources.forEach((function(i,r){i.dataKeyStartIndex=e,i.latestDataKeyStartIndex=n;var a=t.datasourcePages[r],o=t.dataPages[r];a&&a.data.forEach((function(i,r){i.dataKeys.forEach((function(n,i){var a=o.data[r][i];if(t.data.push(a),t.hiddenData.push({data:[]}),t.displayLegend){var s={dataKey:n,dataIndex:e};t.legendData.keys.push(s);t.legendData.data.push({min:null,max:null,avg:null,total:null,latest:null,hidden:!1})}e++})),i.latestDataKeys&&i.latestDataKeys.length&&(t.hasLatestData=!0,i.latestDataKeys.forEach((function(e,a){var s=i.dataKeys.length+a,u=o.data[r][s];t.latestData.push(u),n++}))),t.datasources.push(i)}))}));var i=0;this.datasources.forEach((function(e){e.dataKeys.forEach((function(n){(e.generated||e.isAdditional)&&(n._hash=Math.random(),n.color=t.ctx.utils.getMaterialColor(i)),i++})),e.latestDataKeys&&e.latestDataKeys.forEach((function(t){(e.generated||e.isAdditional)&&(t._hash=Math.random())}))})),this.comparisonEnabled&&this.datasourcePages.forEach((function(e){e.data.forEach((function(e,n){if(e.isAdditional){var i=t.datasourcePages[e.origDatasourceIndex].data[n];e.dataKeys.forEach((function(t){t.settings.comparisonSettings.color&&(t.color=t.settings.comparisonSettings.color),i.dataKeys[t.origDataKeyIndex].settings.comparisonSettings.color=t.color}))}}))})),this.caulculateLegendData&&(this.data.forEach((function(e,n){t.updateLegend(n,e.data,!1)})),this.callbacks.legendDataUpdated(this,!0))},t.prototype.entityDataToDatasourceData=function(t,e){var n=this,i=[];i=i.concat(t.dataKeys.map((function(i,r){i.hidden=!!i.settings.hideDataByDefault,i.inLegend=i.settings.showInLegend||Rr(i.settings.showInLegend)&&!i.settings.removeFromLegend,i.label=n.ctx.utils.customTranslation(i.label,i.label);var a={datasource:t,dataKey:i,data:[]};return e&&e[r]&&e[r].data&&(a.data=e[r].data),a}))),t.latestDataKeys&&(i=i.concat(t.latestDataKeys.map((function(i,r){i.label=n.ctx.utils.customTranslation(i.label,i.label);var a={datasource:t,dataKey:i,data:[]},o=t.dataKeys.length+r;return e&&e[o]&&e[o].data&&(a.data=e[o].data),a}))));var r=oa(ra(i));return t.dataKeys.forEach((function(t){n.comparisonEnabled&&t.isAdditional&&ou(t.settings)&&t.settings.comparisonSettings.comparisonValuesLabel?t.label=ca(t.settings.comparisonSettings.comparisonValuesLabel,r):(n.comparisonEnabled&&t.isAdditional&&(t.label=t.label+" "+n.ctx.translate.instant("legend.comparison-time-ago."+n.timeForComparison)),t.pattern=t.label,t.label=ca(t.pattern,r))})),i},t.prototype.entityDataToDatasource=function(t,e,n){var i=Qr(t);return ap(i,rp(e)),i.generated=n>0,i},t.prototype.dataUpdated=function(t,e,n,i,r,a){a?this.processLatestDataUpdated(t,e,n,i,r):this.processDataUpdated(t,e,n,i,r)},t.prototype.processDataUpdated=function(t,e,n,i,r){var a,o=this.configuredDatasources[e],s=o.dataKeyStartIndex+n*o.dataKeys.length+i,u=!0;if(a=this.displayLegend&&this.legendData.keys.find((function(t){return t.dataIndex===s})).dataKey.hidden?this.hiddenData[s]:this.data[s],this.type===ws.latest){var c=a.data;if(t.data.length||c.length){if(c&&c[0]&&c[0].length>1&&t.data.length>0){var l=c[0][0],p=c[0][1];l===t.data[0][0]&&p===t.data[0][1]&&t.data[0][1]!==Xa&&(u=!1)}}else u=!1}u?(this.subscriptionTimewindow&&this.subscriptionTimewindow.realtimeWindowMs&&(this.updateTimewindow(),this.timewindowForComparison&&this.timewindowForComparison.realtimeWindowMs&&this.updateComparisonTimewindow()),a.data=t.data,this.caulculateLegendData&&this.updateLegend(s,t.data,r),this.notifyDataLoaded(),this.onDataUpdated(r)):this.loadingData&&this.notifyDataLoaded()},t.prototype.processLatestDataUpdated=function(t,e,n,i,r){var a=this.configuredDatasources[e],o=a.latestDataKeyStartIndex+n*a.latestDataKeys.length+i-a.dataKeys.length,s=!0,u=this.latestData[o],c=u.data;if(t.data.length){if(c&&c[0]&&c[0].length>1&&t.data.length>0){var l=c[0][0],p=c[0][1];l===t.data[0][0]&&p===t.data[0][1]&&(s=!1)}}else s=!1;s&&(u.data=t.data,this.onLatestDataUpdated(r))},t.prototype.alarmsLoaded=function(t,e,n){if(this.alarms=t,n>e){var i=this.ctx.translate.instant("widget.alarm-data-overflow",{allowedEntities:e,totalEntities:n});this.onSubscriptionMessage({severity:"warn",message:i})}this.subscriptionTimewindow&&this.subscriptionTimewindow.realtimeWindowMs&&this.updateTimewindow(),this.onDataUpdated()},t.prototype.alarmsUpdated=function(t,e){this.alarmsLoaded(e,0,0)},t.prototype.updateLegend=function(t,e,n){var i=this.legendData.keys.find((function(e){return e.dataIndex===t})).dataKey,r=Cr(i.decimals)?i.decimals:this.decimals,a=i.units&&i.units.length?i.units:this.units,o=this.legendData.data[t];this.legendConfig.showMin&&(o.min=this.ctx.widgetUtils.formatValue(function(t){if(t.length>0){for(var e=Number(t[0][1]),n=1;n<t.length;n++)e=Math.min(e,Number(t[n][1]));return e}return null}(e),r,a)),this.legendConfig.showMax&&(o.max=this.ctx.widgetUtils.formatValue(function(t){if(t.length>0){for(var e=Number(t[0][1]),n=1;n<t.length;n++)e=Math.max(e,Number(t[n][1]));return e}return null}(e),r,a)),this.legendConfig.showAvg&&(o.avg=this.ctx.widgetUtils.formatValue(function(t){return t.length>0?Qp(t)/t.length:null}(e),r,a)),this.legendConfig.showTotal&&(o.total=this.ctx.widgetUtils.formatValue(Qp(e),r,a)),this.legendConfig.showLatest&&(o.latest=this.ctx.widgetUtils.formatValue(function(t){return t.length>0?Number(t[t.length-1][1]):null}(e),r,a)),this.callbacks.legendDataUpdated(this,!1!==n)},t.prototype.loadStDiff=function(){var t=this,e=new sn(1);return this.ctx.getServerTimeDiff&&this.timeWindow?this.ctx.getServerTimeDiff().subscribe({next:function(n){t.timeWindow.stDiff=n,e.next(),e.complete()},error:function(){t.timeWindow.stDiff=0,e.next(),e.complete()}}):(this.timeWindow&&(this.timeWindow.stDiff=0),e.next(),e.complete()),e.asObservable()},t}(),Xp=qo,$p=7300*Jo,Zp=function(){function t(t){this.http=t,this.maxDatapointsLimit=500}return t.prototype.setMaxDatapointsLimit=function(t){this.maxDatapointsLimit=t,(!this.maxDatapointsLimit||this.maxDatapointsLimit<=1)&&(this.maxDatapointsLimit=2)},t.prototype.matchesExistingInterval=function(t,e,n,i){return void 0===i&&(i=!1),this.getIntervals(t,e,i).findIndex((function(t){return t.value===n}))>-1},t.prototype.getIntervals=function(t,e,n){return void 0===n&&(n=!1),t=this.boundMinInterval(t),e=this.boundMaxInterval(e),As.filter((function(i){return(n||"number"==typeof i.value)&&ns.numberValue(i.value)>=t&&ns.numberValue(i.value)<=e}))},t.prototype.boundMinInterval=function(t){return Or(t)&&(t=1e3*Math.ceil(t/1e3)),this.toBound(t,Xp,$p,Xp)},t.prototype.boundMaxInterval=function(t){return Or(t)&&(t=1e3*Math.floor(t/1e3)),this.toBound(t,Xp,$p,$p)},t.prototype.boundToPredefinedInterval=function(t,e,n,i){void 0===i&&(i=!1);var r=this.getIntervals(t,e,i),a=$p,o=n||t;if(!r.length)return o;var s=r.find((function(t){return t.value===o}));if(s)return s.value;var u=r[0];return r.forEach((function(t){var e=Math.abs(ns.numberValue(t.value)-ns.numberValue(o));e<=a&&(u=t,a=e)})),u.value},t.prototype.boundIntervalToTimewindow=function(t,e,n){if(n===es.NONE)return qo;var i=this.minIntervalLimit(t),r=this.maxIntervalLimit(t);return e?this.toIntervalBound(e,i,r,e):this.boundToPredefinedInterval(i,r,this.avgInterval(t))},t.prototype.getMaxDatapointsLimit=function(){return this.maxDatapointsLimit},t.prototype.getMinDatapointsLimit=function(){return 1},t.prototype.avgInterval=function(t){var e=t/200;return this.boundMinInterval(e)},t.prototype.minIntervalLimit=function(t){var e=t/500;return this.boundMinInterval(e)},t.prototype.maxIntervalLimit=function(t){var e=t/1;return this.boundMaxInterval(e)},t.prototype.defaultTimewindow=function(){return cs(this)},t.prototype.toBound=function(t,e,n,i){return Or(t)?(t=Math.max(t,e),t=Math.min(t,n)):i},t.prototype.toIntervalBound=function(t,e,n,i){return Or(t)?(t=ns.max(t,e),t=ns.min(t,n)):i},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),td=function(){function t(t,e){this.window=t,this.ngZone=e;var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame;this.rafSupported=!!n,this.rafSupported?this.rafFunction=function(t){var e=n(t);return function(){i(e)}}:this.rafFunction=function(t){var e=setTimeout(t,16.66);return function(){clearTimeout(e)}}}return t.prototype.raf=function(t,e){var n=this;return void 0===e&&(e=!1),e?this.rafFunction(t):this.ngZone.runOutsideAngular((function(){return n.rafFunction(t)}))},t=fe([ae(),he(0,se(Zi.Window)),he(1,se(Zi.NgZone)),ye("design:paramtypes",[Window,Ta])],t)}(),ed=function(){function t(t,e,n,i,r,a,o,s,u,c){this.utils=t,this.timeService=e,this.deviceService=n,this.entityDataService=i,this.alarmDataService=r,this.rafService=a,this.translate=o,this.http=s,this.entityService=u,this.telemetryService=c}return t.prototype.createEntityAttributesSubscription=function(t,e,n){var i=Bo.createEntityAttributesSubscription(this.telemetryService,t,e,null,n);return i.subscribe(),i.attributeData$().pipe(oi((function(){try{i.unsubscribe()}catch(t){}})))},t.prototype.createSubscriptionContext=function(){var t=new Kp({aliasController:void 0});return t.dashboardTimewindowApi={onResetTimewindow:function(){},onUpdateTimewindow:function(){}},t.timeService=this.timeService,t.deviceService=this.deviceService,t.translate=this.translate,t.entityDataService=this.entityDataService,t.alarmDataService=this.alarmDataService,t.utils=this.utils,t.raf=this.rafService,t.widgetUtils={formatValue:Fr,getEntityDetailsPageURL:ha},t.getServerTimeDiff=this.getServerTimeDiff.bind(this),t},t.prototype.createDefaultSubscription=function(t){var e,n=new sn;return t.type!==ws.rpc&&t.type!==ws.static?(e={type:t.type,stateData:!1,datasourcesOptional:!1,hasDataPageLink:t.hasDataPageLink,singleEntity:!1,warnOnPageDataOverflow:!1,ignoreDataUpdateOnIntervalTick:!0,pageSize:t.pageSize,dashboardTimewindow:{timezone:"Asia/Shanghai"},timeWindowConfig:t.timeWindowConfig,callbacks:t.callbacks},t.type===ws.alarm?e.alarmSource=Qr(t.alarmSource):e.datasources=Qr(t.datasources),this.createSubscription(e).subscribe((function(t){n.next(t),n.complete()}),(function(t){n.error(t)}))):t.type===ws.rpc?((e={type:t.type,targetDevice:t.targetDevice}).callbacks={rpcStateChanged:function(t){},onRpcSuccess:function(t){},onRpcFailed:function(t){},onRpcErrorCleared:function(t){}},this.createSubscription(e).subscribe((function(t){n.next(t),n.complete()}),(function(t){n.error(t)}))):(t.type,ws.static,n.next(null),n.complete()),n.asObservable()},t.prototype.createSubscriptionFromInfo=function(t,e,n){var i=new sn,r={type:t.type,stateData:!1,datasourcesOptional:!1,hasDataPageLink:t.hasDataPageLink,singleEntity:!1,warnOnPageDataOverflow:!1,ignoreDataUpdateOnIntervalTick:!0,pageSize:t.pageSize,dashboardTimewindow:{timezone:"Asia/Shanghai"},timeWindowConfig:t.timeWindowConfig||{},callbacks:t.callbacks||{}};return r.type===ws.alarm?r.alarmSource=this.entityService.createAlarmSourceFromSubscriptionInfo(e[0]):r.datasources=this.entityService.createDatasourcesFromSubscriptionsInfo(e),this.createSubscription(r,n).subscribe((function(t){i.next(t),i.complete()}),(function(t){i.error(t)})),i.asObservable()},t.prototype.createSubscription=function(t,e){var n=new sn,i=this.createSubscriptionContext(),r=new Jp(i,t);return r.init$.subscribe((function(){e&&r.subscribe(),n.next(r),n.complete()}),(function(t){n.error(t)})),n.asObservable()},t.prototype.datasourceToEntityData=function(t,e,n){var i={entityId:"",entityName:t.entityName,entityLabel:t.entityLabel};return t.entityId&&(i.entityId=t.entityId),t.entityType?i.entityType=t.entityType:i.entityType="",i.ts={},n.forEach((function(t,n){var r=e[n].data;r&&r.length&&r[0].length>1?e[n].dataKey.type===Va.entityField&&i.hasOwnProperty(t.label)||(i[t.label]=r[0][1],i.ts[t.label]=r[0][0]):i[t.label]=""})),i},t.prototype.subscribeForLatestTelemetry=function(t,e){return this.createEntityAttributesSubscription(t,ja.LATEST_TELEMETRY,e)},t.prototype.subscribeForLatestPaginatedData=function(t,e,n,i){var r=this;void 0===i&&(i=[]);var a={type:qs.entity,dataKeys:Ee([{type:Va.entityField,name:"type",label:"entityProfileType"},{type:Va.entityField,name:"createdTime",label:"createdTime"}],Te(e),!1),entityFilter:t},o=[];return a&&a.dataKeys&&a.dataKeys.forEach((function(t){t.settings||(t.settings={});var e=Qr(t);e.entityKey=_l(t),e.type===Va.function&&(e.name=e.label),o.push(e)})),this.subscribeForPaginatedData(ws.latest,a,n,i).pipe(xn((function(t){var e=t.datasourcePages[0],n=t.dataPages[0],i=new Array;return e.data.forEach((function(t,e){var a=r.datasourceToEntityData(t,n.data[e],o);i.push(a)})),{data:i,totalPages:e.totalPages,totalElements:e.totalElements,hasNext:e.hasNext}})))},t.prototype.subscribeForHistoryPaginatedData=function(t,e,n,i,r){void 0===r&&(r=[]);var a={type:qs.entity,dataKeys:e,entityFilter:t};return this.subscribeForPaginatedData(ws.latest,a,n,r,{selectedTab:Io.HISTORY,history:i}).pipe(xn((function(t){return t.data})))},t.prototype.subscribeForRealtimePaginatedData=function(t,e,n,i,r){void 0===r&&(r=[]);var a={type:qs.entity,dataKeys:e,entityFilter:t};return this.subscribeForPaginatedData(ws.latest,a,n,r,{selectedTab:Io.REALTIME,realtime:i}).pipe(xn((function(t){return t.data})))},t.prototype.subscribeForPaginatedData=function(t,e,n,i,r){var a,o=new nn;return this.createDefaultSubscription({type:t,datasources:[e],hasDataPageLink:!0,callbacks:{onDataUpdated:function(){o.next(a)}},timeWindowConfig:r}).subscribe((function(t){a=t,t.subscribeForPaginatedData(0,n,i)})),o.asObservable().pipe(oi((function(){if(a)try{a.destroy()}catch(t){}})))},t.prototype.subscribeForHistoryTimeseries=function(t,e,n,i,r){return this.subscribeForTimeseriesWithTimewindow(t,e,n,{selectedTab:Io.HISTORY,history:i,aggregation:r}).pipe(ci(1),ii(100))},t.prototype.subscribeForRealtimeTimeseries=function(t,e,n,i,r){return this.subscribeForTimeseriesWithTimewindow(t,e,n,{selectedTab:Io.REALTIME,realtime:i,aggregation:r}).pipe(ii(100))},t.prototype.subscribeForTimeseriesWithTimewindow=function(t,e,n,i){var r={type:qs.entity,dataKeys:n,entityFilter:t,pageLink:e};return this.subscribeData(ws.timeseries,r,i).pipe(xn((function(t){var e=t.datasourcePages[0],n=t.dataPages[0],i=new Array;return e.data.forEach((function(t,e){var r={entityId:t.entityId,entityName:t.entityName,entityLabel:t.entityLabel};n.data[e].forEach((function(t){r[t.dataKey.name]=t.data})),i.push(r)})),{data:i,totalPages:e.totalPages,totalElements:e.totalElements,hasNext:e.hasNext}})))},t.prototype.subscribeData=function(t,e,n){var i,r=new nn;return this.createDefaultSubscription({type:t,datasources:[e],hasDataPageLink:!1,callbacks:{onDataUpdated:function(t,e){r.next(i)},onLatestDataUpdated:function(t){r.next(i)}},timeWindowConfig:n}).subscribe((function(t){(i=t).subscribe()})),r.asObservable().pipe(oi((function(){if(i)try{i.destroy()}catch(t){}})))},t.prototype.sendOneWayCommand=function(t,e,n,i,r,a,o,s,u){var c;return(c={type:ws.rpc,targetDevice:{type:Js.device,deviceId:t},targetDeviceIds:[t]}).callbacks={rpcStateChanged:function(t){},onRpcSuccess:function(t){},onRpcFailed:function(t){},onRpcErrorCleared:function(t){}},this.createSubscription(c).pipe(li((function(t){return t.sendOneWayCommand(e,n,i,r,a,o,s,u)})))},t.prototype.sendTwoWayCommand=function(t,e,n,i,r,a,o,s,u){var c;return(c={type:ws.rpc,targetDevice:{type:Js.device,deviceId:t},targetDeviceIds:[t]}).callbacks={rpcStateChanged:function(t){},onRpcSuccess:function(t){},onRpcFailed:function(t){},onRpcErrorCleared:function(t){}},this.createSubscription(c).pipe(li((function(t){return t.sendTwoWayCommand(e,n,i,r,a,o,s,u)})))},t.prototype.subscribeForAlarms=function(t,e,n,i){var r=new nn,a={alarmSource:{type:qs.entity,dataKeys:[{type:Va.alarm,name:"createdTime"},{type:Va.alarm,name:"originator"},{type:Va.alarm,name:"type"},{type:Va.alarm,name:"severity"},{type:Va.alarm,name:"status"}],entityFilter:t},alarmsLoaded:function(t,e,n){r.next({pageData:t})},alarmsUpdated:function(t,e){r.next({pageData:e,update:t})},subscriptionTimewindow:i};return this.alarmDataService.subscribeForAlarms(a,e,n),r.asObservable()},t.prototype.subscribeForLatestPaginatedAlarmsData=function(t,e,n){return this.subscribeForAlarms(t,e,n)},t.prototype.subscribeForHistoryPaginatedAlarmsData=function(t,e,n,i){var r={fixedWindow:i,realtimeWindowMs:null,timezone:"Asia/Shanghai",tsOffset:hs("Asia/Shanghai")};return this.subscribeForAlarms(t,e,n,r)},t.prototype.subscribeForRealtimePaginatedAlarmsData=function(t,e,n,i){var r={fixedWindow:null,realtimeWindowMs:i,timezone:"Asia/Shanghai",tsOffset:hs("Asia/Shanghai")};return this.subscribeForAlarms(t,e,n,r)},t.prototype.getServerTimeDiff=function(){if(!this.stDiffObservable){var t=Date.now();this.stDiffObservable=this.http.get("/api/dashboard/serverTime",ir(!0)).pipe(xn((function(e){var n=Date.now();return Math.ceil(e-(t+n)/2)})),si(1),Ze())}return this.stDiffObservable},t=fe([ae(),he(0,se(Zi.UtilsService)),he(1,se(Zi.TimeService)),he(2,se(Zi.DeviceService)),he(3,se(Zi.EntityDataService)),he(4,se(Zi.AlarmDataService)),he(5,se(Zi.RafService)),he(6,se(Zi.TranslateService)),he(7,se(Zi.HttpClient)),he(8,se(Zi.EntityService)),he(9,se(Zi.TelemetryWebsocketService)),ye("design:paramtypes",[mc,Zp,wc,Bp,Mp,td,Ea,Ci,Sp,Op])],t)}(),nd=function(){function t(t){this.http=t}return t.prototype.getAdminSettings=function(t,e){return this.http.get("/api/admin/settings/".concat(t),nr(e))},t.prototype.saveAdminSettings=function(t,e){return this.http.post("/api/admin/settings",t,nr(e))},t.prototype.sendTestMail=function(t,e){return this.http.post("/api/admin/settings/testMail",t,nr(e))},t.prototype.sendTestSms=function(t,e){return this.http.post("/api/admin/settings/testSms",t,nr(e))},t.prototype.getSecuritySettings=function(t){return this.http.get("/api/admin/securitySettings",nr(t))},t.prototype.saveSecuritySettings=function(t,e){return this.http.post("/api/admin/securitySettings",t,nr(e))},t.prototype.getJwtSettings=function(t){return this.http.get("/api/admin/jwtSettings",nr(t))},t.prototype.saveJwtSettings=function(t,e){return this.http.post("/api/admin/jwtSettings",t,nr(e))},t.prototype.getRepositorySettings=function(t){return this.http.get("/api/admin/repositorySettings",nr(t))},t.prototype.saveRepositorySettings=function(t,e){return this.http.post("/api/admin/repositorySettings",t,nr(e))},t.prototype.deleteRepositorySettings=function(t){return this.http.delete("/api/admin/repositorySettings",nr(t))},t.prototype.checkRepositoryAccess=function(t,e){return this.http.post("/api/admin/repositorySettings/checkAccess",t,nr(e))},t.prototype.getRepositorySettingsInfo=function(t){return this.http.get("/api/admin/repositorySettings/info",nr(t))},t.prototype.getAutoCommitSettings=function(t){return this.http.get("/api/admin/autoCommitSettings",nr(t))},t.prototype.autoCommitSettingsExists=function(t){return this.http.get("/api/admin/autoCommitSettings/exists",nr(t))},t.prototype.saveAutoCommitSettings=function(t,e){return this.http.post("/api/admin/autoCommitSettings",t,nr(e))},t.prototype.deleteAutoCommitSettings=function(t){return this.http.delete("/api/admin/autoCommitSettings",nr(t))},t.prototype.checkUpdates=function(t){return this.http.get("/api/admin/updates",nr(t))},t.prototype.getFeaturesInfo=function(t){return this.http.get("/api/admin/featuresInfo",nr(t))},t.prototype.getLoginProcessingUrl=function(t){return this.http.get("/api/admin/mail/oauth2/loginProcessingUrl",nr(t))},t.prototype.generateAccessToken=function(t){return this.http.get("/api/admin/mail/oauth2/authorize",nr(t))},t.prototype.getMailConfigTemplate=function(t){return this.http.get("/api/mail/config/template",nr(t))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),id=function(){function t(t){this.http=t}return t.prototype.getEntityGroup=function(t,e){return this.http.get("/api/entityGroups/".concat(t),nr(e))},t.prototype.saveEntityGroup=function(t,e){return this.http.post("/api/entityGroup",t,nr(e))},t.prototype.getEntityCustomerList=function(t,e,n){return this.http.get("/api/entityGroup/".concat(t,"/customers?pageSize=1024&page=0&sortProperty=name&sortOrder=ASC"),nr(n))},t.prototype.getCustomerGroup=function(t,e,n,i,r){return this.http.get("/api/entityGroups/".concat(t,"/").concat(n,"/").concat(e),nr(r))},t.prototype.getEntityGroupList=function(t,e,n){return this.http.get("/api/entityGroup/".concat(t,"/entities?pageSize=1024&page=0&sortProperty=name&sortOrder=ASC"),nr(n))},t.prototype.getEntityGroupUserList=function(t,e,n){return this.http.get("/api/entityGroup/".concat(t,"/users").concat(e.toQuery()),nr(n))},t.prototype.delEntityGroup=function(t,e){return this.http.delete("/api/entityGroup/".concat(t),nr(e))},t.prototype.getEntityGroupsByPage=function(t,e,n){return this.http.get("/api/entityGroups/".concat(t).concat(e.toQuery()),nr(n))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),rd={},ad=Object.prototype.hasOwnProperty;function od(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function sd(t){try{return encodeURIComponent(t)}catch(t){return null}}rd.stringify=function(t,e){e=e||"";var n,i,r=[];for(i in"string"!=typeof e&&(e="?"),t)if(ad.call(t,i)){if((n=t[i])||null!=n&&!isNaN(n)||(n=""),i=sd(i),n=sd(n),null===i||null===n)continue;r.push(i+"="+n)}return r.length?e+r.join("&"):""},rd.parse=function(t){for(var e,n=/([^=?#&]+)=?([^&]*)/g,i={};e=n.exec(t);){var r=od(e[1]),a=od(e[2]);null===r||null===a||r in i||(i[r]=a)}return i};var ud=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},cd=rd,ld=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,pd=/[\n\r\t]/g,dd=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,fd=/:\d+$/,hd=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,yd=/^[a-zA-Z]:/;function md(t){return(t||"").toString().replace(ld,"")}var gd=[["#","hash"],["?","query"],function(t,e){return Ed(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],vd={hash:1,query:1};function Td(t){var n,i=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},r={},a=typeof(t=t||i);if("blob:"===t.protocol)r=new Sd(unescape(t.pathname),{});else if("string"===a)for(n in r=new Sd(t,{}),vd)delete r[n];else if("object"===a){for(n in t)n in vd||(r[n]=t[n]);void 0===r.slashes&&(r.slashes=dd.test(t.href))}return r}function Ed(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function bd(t,e){t=(t=md(t)).replace(pd,""),e=e||{};var n,i=hd.exec(t),r=i[1]?i[1].toLowerCase():"",a=!!i[2],o=!!i[3],s=0;return a?o?(n=i[2]+i[3]+i[4],s=i[2].length+i[3].length):(n=i[2]+i[4],s=i[2].length):o?(n=i[3]+i[4],s=i[3].length):n=i[4],"file:"===r?s>=2&&(n=n.slice(2)):Ed(r)?n=i[4]:r?a&&(n=n.slice(2)):s>=2&&Ed(e.protocol)&&(n=i[4]),{protocol:r,slashes:a||Ed(r),slashesCount:s,rest:n}}function Sd(t,e,n){if(t=(t=md(t)).replace(pd,""),!(this instanceof Sd))return new Sd(t,e,n);var i,r,a,o,s,u,c=gd.slice(),l=typeof e,p=this,d=0;for("object"!==l&&"string"!==l&&(n=e,e=null),n&&"function"!=typeof n&&(n=cd.parse),i=!(r=bd(t||"",e=Td(e))).protocol&&!r.slashes,p.slashes=r.slashes||i&&e.slashes,p.protocol=r.protocol||e.protocol||"",t=r.rest,("file:"===r.protocol&&(2!==r.slashesCount||yd.test(t))||!r.slashes&&(r.protocol||r.slashesCount<2||!Ed(p.protocol)))&&(c[3]=[/(.*)/,"pathname"]);d<c.length;d++)"function"!=typeof(o=c[d])?(a=o[0],u=o[1],a!=a?p[u]=t:"string"==typeof a?~(s="@"===a?t.lastIndexOf(a):t.indexOf(a))&&("number"==typeof o[2]?(p[u]=t.slice(0,s),t=t.slice(s+o[2])):(p[u]=t.slice(s),t=t.slice(0,s))):(s=a.exec(t))&&(p[u]=s[1],t=t.slice(0,s.index)),p[u]=p[u]||i&&o[3]&&e[u]||"",o[4]&&(p[u]=p[u].toLowerCase())):t=o(t,p);n&&(p.query=n(p.query)),i&&e.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==e.pathname)&&(p.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),i=n.length,r=n[i-1],a=!1,o=0;i--;)"."===n[i]?n.splice(i,1):".."===n[i]?(n.splice(i,1),o++):o&&(0===i&&(a=!0),n.splice(i,1),o--);return a&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(p.pathname,e.pathname)),"/"!==p.pathname.charAt(0)&&Ed(p.protocol)&&(p.pathname="/"+p.pathname),ud(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(~(s=p.auth.indexOf(":"))?(p.username=p.auth.slice(0,s),p.username=encodeURIComponent(decodeURIComponent(p.username)),p.password=p.auth.slice(s+1),p.password=encodeURIComponent(decodeURIComponent(p.password))):p.username=encodeURIComponent(decodeURIComponent(p.auth)),p.auth=p.password?p.username+":"+p.password:p.username),p.origin="file:"!==p.protocol&&Ed(p.protocol)&&p.host?p.protocol+"//"+p.host:"null",p.href=p.toString()}Sd.prototype={set:function(t,e,n){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||cd.parse)(e)),i[t]=e;break;case"port":i[t]=e,ud(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,fd.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(e){var r="pathname"===t?"/":"#";i[t]=e.charAt(0)!==r?r+e:e}else i[t]=e;break;case"username":case"password":i[t]=encodeURIComponent(e);break;case"auth":var a=e.indexOf(":");~a?(i.username=e.slice(0,a),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=e.slice(a+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(e))}for(var o=0;o<gd.length;o++){var s=gd[o];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&Ed(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=cd.stringify);var e,n=this,i=n.host,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var a=r+(n.protocol&&n.slashes||Ed(n.protocol)?"//":"");return n.username?(a+=n.username,n.password&&(a+=":"+n.password),a+="@"):n.password?(a+=":"+n.password,a+="@"):"file:"!==n.protocol&&Ed(n.protocol)&&!i&&"/"!==n.pathname&&(a+="@"),(":"===i[i.length-1]||fd.test(n.hostname)&&!n.port)&&(i+=":"),a+=i+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(a+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(a+=n.hash),a}},Sd.extractProtocol=bd,Sd.location=Td,Sd.trimLeft=md,Sd.qs=cd;var _d,Ad=Sd,wd=function(){function t(t){this.http=t}return t.prototype.getAllSchedulerEvents=function(t,e){return this.http.get("api/edge/".concat(t,"/allSchedulerEvents"),nr(e))},t.prototype.assignSchedulerEventToEdge=function(t,e,n){return this.http.post("/api/edge/".concat(t,"/schedulerEvent/").concat(e),nr(n))},t.prototype.unassignSchedulerEventFromEdge=function(t,e,n){return this.http.delete("/api/edge/".concat(t,"/schedulerEvent/").concat(e),nr(n))},t.prototype.getEdgeSchedulerEvents=function(t,e,n){return this.http.get("/api/edge/".concat(t,"/schedulerEvents").concat(e.toQuery()),nr(n))},t.prototype.saveSchedulerEvent=function(t,e){return this.http.post("/api/schedulerEvent",t,nr(e))},t.prototype.getSchedulerEventById=function(t,e){return this.http.get("/api/schedulerEvent/".concat(t),nr(e))},t.prototype.deleteSchedulerEvent=function(t,e){return this.http.delete("/api/schedulerEvent/".concat(t),nr(e))},t.prototype.getSchedulerEventInfoById=function(t,e){return this.http.get("/api/schedulerEvent/info/".concat(t),nr(e))},t.prototype.getSchedulerEventsByIds=function(t,e){return this.http.get("/api/schedulerEvents?schedulerEventIds=".concat(t.join(",")),nr(e))},t.prototype.getSchedulerEvents=function(t,e){return this.http.get("/api/schedulerEvents?type=".concat(t),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();!function(t){t.LWM2M_MODEL="LWM2M_MODEL",t.PKCS_12="PKCS_12",t.JKS="JKS",t.JS_MODULE="JS_MODULE"}(_d||(_d={}));var Id=new Map([[_d.LWM2M_MODEL,"application/xml,text/xml"],[_d.PKCS_12,"application/x-pkcs12"],[_d.JKS,"application/x-java-keystore"],[_d.JS_MODULE,"text/javascript,application/javascript"]]),Dd=new Map([[_d.LWM2M_MODEL,"xml"],[_d.PKCS_12,"p12,pfx"],[_d.JKS,"jks"],[_d.JS_MODULE,"js"]]),Rd=new Map([[_d.LWM2M_MODEL,"resource.type.lwm2m-model"],[_d.PKCS_12,"resource.type.pkcs-12"],[_d.JKS,"resource.type.jks"],[_d.JS_MODULE,"resource.type.js-module"]]),Nd=function(t){var e;return t.tenantId&&(null===(e=t.tenantId)||void 0===e?void 0:e.id)!==cr?"tenant":"system"},Od="tb-image;",Cd=/\/api\/images\/(tenant|system)\/(.*)/,Md="/api/images",kd="data:image/",Ld=function(t){return t?t.replace(Od,""):t},Ud=function(t){return t&&!t.startsWith(Od)&&(t=Od+t),t},Pd=function(t){return t&&Cd.test(t)},xd="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";var Fd=function(){function t(t,e){this.http=t,this.resourcesService=e,this.imagesLoading={}}return t.prototype.uploadImage=function(t,e,n){n||(n={});var i=new FormData;return i.append("file",t),i.append("title",e),this.http.post("/api/image",i,rr(n.ignoreLoading,n.ignoreErrors,n.resendRequest))},t.prototype.updateImage=function(t,e,n,i){i||(i={});var r=new FormData;return r.append("file",n),this.http.put("".concat(Md,"/").concat(t,"/").concat(encodeURIComponent(e)),r,rr(i.ignoreLoading,i.ignoreErrors,i.resendRequest))},t.prototype.updateImageInfo=function(t,e){var n=Nd(t),i=encodeURIComponent(t.resourceKey);return this.http.put("".concat(Md,"/").concat(n,"/").concat(i,"/info"),t,nr(e))},t.prototype.updateImagePublicStatus=function(t,e,n){var i=Nd(t),r=encodeURIComponent(t.resourceKey);return this.http.put("".concat(Md,"/").concat(i,"/").concat(r,"/public/").concat(e),t,nr(n))},t.prototype.getImages=function(t,e,n){return void 0===e&&(e=!1),this.http.get("".concat(Md).concat(t.toQuery(),"&includeSystemImages=").concat(e),nr(n))},t.prototype.getImageInfo=function(t,e,n){return this.http.get("".concat(Md,"/").concat(t,"/").concat(encodeURIComponent(e),"/info"),nr(n))},t.prototype.getImageDataUrl=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=xd);var r=t.split("/"),a=r[r.length-1];r[r.length-1]=encodeURIComponent(a);var o=r.join("/"),s=e?o+"/preview":o;return this.loadImageDataUrl(s,n,i)},t.prototype.loadImageDataUrl=function(t,e,n){var i,r=this;if(void 0===e&&(e=!1),void 0===n&&(n=xd),this.imagesLoading[t])i=this.imagesLoading[t];else{i=new sn(1),this.imagesLoading[t]=i;var a=nr({ignoreLoading:!0,ignoreErrors:!0});this.http.get(t,de(de({},a),{responseType:"blob"})).subscribe({next:function(t){i.next(t),i.complete()},error:function(t){i.error(t)},complete:function(){delete r.imagesLoading[t]}})}return i.pipe(li((function(t){return Hr(t).pipe(xn((function(t){return t})))})),Xn((function(){return Un(n)})))},t.prototype.resolveImageUrl=function(t,e,n,i){return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=xd),t=Ld(t),Pd(t)?this.getImageDataUrl(t,e,n,i):Un(t)},t.prototype.downloadImage=function(t,e){return this.resourcesService.downloadResource("".concat(Md,"/").concat(t,"/").concat(encodeURIComponent(e)))},t.prototype.deleteImage=function(t,e,n,i){return void 0===n&&(n=!1),this.http.delete("".concat(Md,"/").concat(t,"/").concat(encodeURIComponent(e),"?force=").concat(n),nr(i))},t.prototype.exportImage=function(t,e,n){return this.http.get("".concat(Md,"/").concat(t,"/").concat(encodeURIComponent(e),"/export"),nr(n))},t.prototype.importImage=function(t,e){return this.http.put("/api/image/import",t,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),he(1,se(Zi.ResourceService)),ye("design:paramtypes",[Ci,Object])],t)}(),Wd=function(t){function e(e,n,i,r){var a=t.call(this,n,i,"api/ws/plugins/telemetry",new wo,r)||this;return a.telemetryWebsocketService=e,a.authService=n,a.ngZone=i,a.window=r,a}return pe(e,t),e.prototype.subscribe=function(t){this.telemetryWebsocketService.subscribe(t)},e.prototype.update=function(t){this.telemetryWebsocketService.update(t)},e.prototype.unsubscribe=function(t){this.telemetryWebsocketService.unsubscribe(t)},e.prototype.processOnMessage=function(t){this.telemetryWebsocketService.processOnMessage(t)},e=fe([ae(),he(0,se(Zi.TelemetryWebsocketService)),he(1,se(Zi.AuthService)),he(2,se(Zi.NgZone)),he(3,se(Zi.Window)),ye("design:paramtypes",[Op,Tc,Ta,Window])],e)}(Np),Vd=new te;Vd.bind(Zi.AuthService).to(Tc),Vd.bind(Zi.TelemetryWebsocketService).to(Op).inSingletonScope(),Vd.bind(Zi.Window).toDynamicValue((function(){if(window&&window.XMLHttpRequest)return window;var t=wx.getStorageSync("baseUrl");return{location:t?new Ad(t):null}})).inSingletonScope(),Vd.bind(Zi.LocalStorage).to(vc),Vd.bind(Zi.NgZone).to(Ta),Vd.bind(Zi.AlarmDataService).to(Mp),Vd.bind(Zi.EntityDataService).to(Bp),Vd.bind(Zi.DataSubscriptionService).to(ed),Vd.bind(Zi.UtilsService).to(mc),Vd.bind(Zi.TimeService).to(Zp),Vd.bind(Zi.RafService).to(td),Vd.bind(Zi.TranslateService).to(Ea),Vd.bind(Zi.AdminService).to(nd),Vd.bind(Zi.AlarmService).to(Ec),Vd.bind(Zi.AssetService).to(bc),Vd.bind(Zi.AttributeService).to(Sc),Vd.bind(Zi.AuditLogService).to(_c),Vd.bind(Zi.CustomerService).to(Ac),Vd.bind(Zi.DeviceService).to(wc),Vd.bind(Zi.EntityRelationService).to(Ic),Vd.bind(Zi.EntityViewService).to(Dc),Vd.bind(Zi.EntityService).to(Sp),Vd.bind(Zi.EventService).to(_p),Vd.bind(Zi.OAuth2Service).to(Ap),Vd.bind(Zi.OtaPackageService).to(wp),Vd.bind(Zi.QueueService).to(yp),Vd.bind(Zi.ResourceService).to(Ep),Vd.bind(Zi.TenantProfileService).to(Tp),Vd.bind(Zi.TenantService).to(Uc),Vd.bind(Zi.UserService).to(ga),Vd.bind(Zi.DeviceProfileService).to(hp),Vd.bind(Zi.AssetProfileService).to(mp),Vd.bind(Zi.EntityGroupService).to(id),Vd.bind(Zi.SchedulerService).to(wd),Vd.bind(Zi.NotificationService).to(gp),Vd.bind(Zi.ImageService).to(Fd),Vd.bind(Zi.NotificationWebsocketService).to(Wd);var jd={},Yd={};Object.defineProperty(Yd,"__esModule",{value:!0});var Hd=Symbol.for("INJECTION");function Bd(t,e,n,i){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i&&!Reflect.hasMetadata(Hd,this,e)&&Reflect.defineMetadata(Hd,n(),this,e),Reflect.hasMetadata(Hd,this,e)?Reflect.getMetadata(Hd,this,e):n()},set:function(t){Reflect.defineMetadata(Hd,t,this,e)}})}Yd.makePropertyInjectDecorator=function(t,e){return function(n){return function(i,r){Bd(i,r,(function(){return t.get(n)}),e)}}},Yd.makePropertyInjectNamedDecorator=function(t,e){return function(n,i){return function(r,a){Bd(r,a,(function(){return t.getNamed(n,i)}),e)}}},Yd.makePropertyInjectTaggedDecorator=function(t,e){return function(n,i,r){return function(a,o){Bd(a,o,(function(){return t.getTagged(n,i,r)}),e)}}},Yd.makePropertyMultiInjectDecorator=function(t,e){return function(n){return function(i,r){Bd(i,r,(function(){return t.getAll(n)}),e)}}},Object.defineProperty(jd,"__esModule",{value:!0});var Kd=Yd;var Gd=jd.default=function(t,e){return void 0===e&&(e=!0),{lazyInject:Kd.makePropertyInjectDecorator(t,e),lazyInjectNamed:Kd.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:Kd.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:Kd.makePropertyMultiInjectDecorator(t,e)}},qd={},zd=Gd(Vd).lazyInject,Qd=function(){function t(){this.AUTH_SCHEME="Bearer ",this.AUTH_HEADER_NAME="X-Authorization",this.internalUrlPrefixes=["/api/auth/token","/api/rpc"],this.activeRequests=0}return t.prototype.intercept=function(t,e){var n=this;if(t.url.startsWith("/api/")){var i=this.getInterceptorConfig(t);this.updateLoadingState(i,!0);return(this.isTokenBasedAuthEntryPoint(t.url)?Tc.getJwtToken()||this.authService.refreshTokenPending()?Tc.isJwtTokenValid()?this.jwtIntercept(t,e):this.handleResponseError(t,e,new Ni({error:{refreshTokenPending:!0}})):this.handleResponseError(t,e,new Ni({error:{message:"Unauthorized!"},status:401})):this.handleRequest(t,e)).pipe(oi((function(){t.url.startsWith("/api/")&&n.updateLoadingState(i,!1)})))}return e.handle(t)},t.prototype.jwtIntercept=function(t,e){var n=this.updateAuthorizationHeader(t);return n?this.handleRequest(n,e):Pn((function(){return new Error("Could not get JWT token from store.")}))},t.prototype.handleRequest=function(t,e){var n=this;return e.handle(t).pipe(Xn((function(i){var r=i;return n.handleResponseError(t,e,r)})))},t.prototype.handleResponseError=function(t,e,n){var i=this.getInterceptorConfig(t),r=!1,a=i.ignoreErrors,o=i.resendRequest,s=n.error?n.error.errorCode:null;if(n.error&&n.error.refreshTokenPending||401===n.status&&t.url!==yr.entryPoints.tokenRefresh){if(n.error&&n.error.refreshTokenPending||s&&s===yr.serverErrorCode.jwtTokenExpired)return this.refreshTokenAndRetry(t,e);s!==yr.serverErrorCode.credentialsExpired&&(r=!0)}else if(429===n.status){if(o)return this.retryRequest(t,e)}else 403===n.status||(0===n.status||-1===n.status?this.showError("Unable to connect"):t.url.startsWith("/api/rpc")||t.url.startsWith("/api/plugins/rpc")||(404===n.status?a||this.showError(t.method+": "+t.url+"<br/>"+n.status+": "+n.statusText):r=!0));if(r&&!a){var u=ya(n,{instant:function(t){return t}},t.responseType);this.showError(u.message,u.timeout)}return Pn((function(){return n}))},t.prototype.retryRequest=function(t,e){var n=this,i=1e3+3e3*Math.random();return Un(null).pipe(function(t,e){void 0===e&&(e=dn);var n=Qn(t,e);return ai((function(){return n}))}(i),Gn((function(){return n.jwtIntercept(t,e)})))},t.prototype.refreshTokenAndRetry=function(t,e){var n=this;return this.authService.refreshJwtToken().pipe(Xn((function(i){n.authService.logout();var r=i?i.message:"Unauthorized!";return n.handleResponseError(t,e,new Ni({error:{message:r,timeout:200},status:401}))})),li((function(){return n.jwtIntercept(t,e)})))},t.prototype.updateAuthorizationHeader=function(t){var e=Tc.getJwtToken();return e?(qd[this.AUTH_HEADER_NAME]="".concat(this.AUTH_SCHEME).concat(e),t=t.clone({setHeaders:qd})):null},t.prototype.isInternalUrlPrefix=function(t){for(var e in this.internalUrlPrefixes)if(t.startsWith(this.internalUrlPrefixes[e]))return!0;return!1},t.prototype.isTokenBasedAuthEntryPoint=function(t){return t.startsWith("/api/")&&!t.startsWith(yr.entryPoints.login)&&!t.startsWith(yr.entryPoints.tokenRefresh)&&!t.startsWith(yr.entryPoints.nonTokenBased)},t.prototype.updateLoadingState=function(t,e){t.ignoreLoading||(e?this.activeRequests++:this.activeRequests--,1===this.activeRequests&&e||this.activeRequests)},t.prototype.getInterceptorConfig=function(t){var e;return e=t.params&&t.params instanceof tr?t.params.interceptorConfig:new er(!1,!1),this.isInternalUrlPrefix(t.url)&&(e.ignoreLoading=!0),e},t.prototype.showError=function(t,e){void 0===e&&(e=0),setTimeout((function(){}),e)},fe([zd(Zi.AuthService),ye("design:type",Tc)],t.prototype,"authService",void 0),t=fe([ae(),ye("design:paramtypes",[])],t)}();Xi.bind(ce.HTTP_INTERCEPTORS).to(Qd),Vd.bind(Zi.HttpClient).toConstantValue(Xi.get(ce.HttpClientInternal));var Jd=te.merge(Xi,Vd);Jd.options.skipBaseClassChecks=!0;var Xd=function(t){this.entityType=or.ASSET,this.id=t},$d=function(t){this.id=t},Zd=function(t){this.entityType=or.DASHBOARD,this.id=t},tf=function(t){this.id=t},ef=function(t){this.entityType=or.DEVICE,this.id=t},nf=function(t){this.entityType=or.DEVICE_PROFILE,this.id=t};var rf,af=function(t){this.entityType=or.ENTITY_VIEW,this.id=t},of=function(t){this.id=t},sf=function(t){this.entityType=or.NOTIFICATION,this.id=t},uf=function(t){this.entityType=or.NOTIFICATION_REQUEST,this.id=t},cf=function(t){this.entityType=or.NOTIFICATION_RULE,this.id=t},lf=function(t){this.entityType=or.NOTIFICATION_TARGET,this.id=t},pf=function(t){this.entityType=or.NOTIFICATION_TEMPLATE,this.id=t},df=function(t){this.entityType=or.OTA_PACKAGE,this.id=t},ff=function(t){this.entityType=or.RPC,this.id=t},hf=function(t){this.entityType=or.RULE_CHAIN,this.id=t},yf=function(t){this.entityType=or.RULE_NODE,this.id=t},mf=function(t){this.entityType=or.TENANT_PROFILE,this.id=t},gf=function(t){this.entityType=or.WIDGET_TYPE,this.id=t},vf=function(t){this.entityType=or.WIDGETS_BUNDLE,this.id=t},Tf=function(t){this.entityType=or.EDGE,this.id=t};!function(t){t.ENABLED="ENABLED",t.WARNING="WARNING",t.DISABLED="DISABLED"}(rf||(rf={}));var Ef,bf=new Map([[rf.ENABLED,"notification.enabled"],[rf.WARNING,"notification.warning"],[rf.DISABLED,"notification.disabled"]]);!function(t){t.TRANSPORT="TRANSPORT",t.DB="DB",t.RE="RE",t.JS="JS",t.TBEL="TBEL",t.EMAIL="EMAIL",t.SMS="SMS",t.ALARM="ALARM"}(Ef||(Ef={}));var Sf,_f,Af,wf=new Map([[Ef.TRANSPORT,"api-usage.device-api"],[Ef.DB,"api-usage.telemetry-persistence"],[Ef.RE,"api-usage.rule-engine-executions"],[Ef.JS,"api-usage.javascript-executions"],[Ef.TBEL,"api-usage.tbel-executions"],[Ef.EMAIL,"api-usage.email-messages"],[Ef.SMS,"api-usage.sms-messages"],[Ef.ALARM,"api-usage.alarm"]]);!function(t){t[t.TENANT=0]="TENANT",t[t.ENTITY=1]="ENTITY",t[t.USER=2]="USER",t[t.CUSTOMER=3]="CUSTOMER"}(Sf||(Sf={})),function(t){t.ADDED="ADDED",t.DELETED="DELETED",t.UPDATED="UPDATED",t.ATTRIBUTES_UPDATED="ATTRIBUTES_UPDATED",t.ATTRIBUTES_DELETED="ATTRIBUTES_DELETED",t.RPC_CALL="RPC_CALL",t.CREDENTIALS_UPDATED="CREDENTIALS_UPDATED",t.ASSIGNED_TO_CUSTOMER="ASSIGNED_TO_CUSTOMER",t.UNASSIGNED_FROM_CUSTOMER="UNASSIGNED_FROM_CUSTOMER",t.ACTIVATED="ACTIVATED",t.SUSPENDED="SUSPENDED",t.CREDENTIALS_READ="CREDENTIALS_READ",t.ATTRIBUTES_READ="ATTRIBUTES_READ",t.RELATION_ADD_OR_UPDATE="RELATION_ADD_OR_UPDATE",t.RELATION_DELETED="RELATION_DELETED",t.RELATIONS_DELETED="RELATIONS_DELETED",t.ALARM_ACK="ALARM_ACK",t.ALARM_CLEAR="ALARM_CLEAR",t.ALARM_ASSIGNED="ALARM_ASSIGNED",t.ALARM_UNASSIGNED="ALARM_UNASSIGNED",t.ADDED_COMMENT="ADDED_COMMENT",t.UPDATED_COMMENT="UPDATED_COMMENT",t.DELETED_COMMENT="DELETED_COMMENT",t.LOGIN="LOGIN",t.LOGOUT="LOGOUT",t.LOCKOUT="LOCKOUT",t.ASSIGNED_FROM_TENANT="ASSIGNED_FROM_TENANT",t.ASSIGNED_TO_TENANT="ASSIGNED_TO_TENANT",t.PROVISION_SUCCESS="PROVISION_SUCCESS",t.PROVISION_FAILURE="PROVISION_FAILURE",t.TIMESERIES_UPDATED="TIMESERIES_UPDATED",t.TIMESERIES_DELETED="TIMESERIES_DELETED",t.ASSIGNED_TO_EDGE="ASSIGNED_TO_EDGE",t.UNASSIGNED_FROM_EDGE="UNASSIGNED_FROM_EDGE",t.SMS_SENT="SMS_SENT"}(_f||(_f={})),function(t){t.SUCCESS="SUCCESS",t.FAILURE="FAILURE"}(Af||(Af={}));var If,Df,Rf=new Map([[_f.ADDED,"audit-log.type-added"],[_f.DELETED,"audit-log.type-deleted"],[_f.UPDATED,"audit-log.type-updated"],[_f.ATTRIBUTES_UPDATED,"audit-log.type-attributes-updated"],[_f.ATTRIBUTES_DELETED,"audit-log.type-attributes-deleted"],[_f.RPC_CALL,"audit-log.type-rpc-call"],[_f.CREDENTIALS_UPDATED,"audit-log.type-credentials-updated"],[_f.ASSIGNED_TO_CUSTOMER,"audit-log.type-assigned-to-customer"],[_f.UNASSIGNED_FROM_CUSTOMER,"audit-log.type-unassigned-from-customer"],[_f.ACTIVATED,"audit-log.type-activated"],[_f.SUSPENDED,"audit-log.type-suspended"],[_f.CREDENTIALS_READ,"audit-log.type-credentials-read"],[_f.ATTRIBUTES_READ,"audit-log.type-attributes-read"],[_f.RELATION_ADD_OR_UPDATE,"audit-log.type-relation-add-or-update"],[_f.RELATION_DELETED,"audit-log.type-relation-delete"],[_f.RELATIONS_DELETED,"audit-log.type-relations-delete"],[_f.ALARM_ACK,"audit-log.type-alarm-ack"],[_f.ALARM_CLEAR,"audit-log.type-alarm-clear"],[_f.ALARM_ASSIGNED,"audit-log.type-alarm-assign"],[_f.ALARM_UNASSIGNED,"audit-log.type-alarm-unassign"],[_f.ADDED_COMMENT,"audit-log.type-added-comment"],[_f.UPDATED_COMMENT,"audit-log.type-updated-comment"],[_f.DELETED_COMMENT,"audit-log.type-deleted-comment"],[_f.LOGIN,"audit-log.type-login"],[_f.LOGOUT,"audit-log.type-logout"],[_f.LOCKOUT,"audit-log.type-lockout"],[_f.ASSIGNED_FROM_TENANT,"audit-log.type-assigned-from-tenant"],[_f.ASSIGNED_TO_TENANT,"audit-log.type-assigned-to-tenant"],[_f.PROVISION_SUCCESS,"audit-log.type-provision-success"],[_f.PROVISION_FAILURE,"audit-log.type-provision-failure"],[_f.TIMESERIES_UPDATED,"audit-log.type-timeseries-updated"],[_f.TIMESERIES_DELETED,"audit-log.type-timeseries-deleted"],[_f.ASSIGNED_TO_EDGE,"audit-log.type-assigned-to-edge"],[_f.UNASSIGNED_FROM_EDGE,"audit-log.type-unassigned-from-edge"],[_f.SMS_SENT,"audit-log.type-sms-sent"]]),Nf=new Map([[Af.SUCCESS,"audit-log.status-success"],[Af.FAILURE,"audit-log.status-failure"]]);!function(t){t.ERROR="ERROR",t.LC_EVENT="LC_EVENT",t.STATS="STATS"}(If||(If={})),function(t){t.DEBUG_RULE_NODE="DEBUG_RULE_NODE",t.DEBUG_RULE_CHAIN="DEBUG_RULE_CHAIN"}(Df||(Df={}));var Of,Cf=new Map([[If.ERROR,"event.type-error"],[If.LC_EVENT,"event.type-lc-event"],[If.STATS,"event.type-stats"],[Df.DEBUG_RULE_NODE,"event.type-debug-rule-node"],[Df.DEBUG_RULE_CHAIN,"event.type-debug-rule-chain"]]);!function(t){t.ENTITY_EXPORT="ENTITY_EXPORT",t.ENTITY_IMPORT="ENTITY_IMPORT",t.NOTIFICATION_REQUESTS="NOTIFICATION_REQUESTS",t.NOTIFICATION_REQUESTS_PER_RULE="NOTIFICATION_REQUESTS_PER_RULE",t.REST_REQUESTS_PER_TENANT="REST_REQUESTS_PER_TENANT",t.REST_REQUESTS_PER_CUSTOMER="REST_REQUESTS_PER_CUSTOMER",t.WS_UPDATES_PER_SESSION="WS_UPDATES_PER_SESSION",t.CASSANDRA_QUERIES="CASSANDRA_QUERIES",t.TRANSPORT_MESSAGES_PER_TENANT="TRANSPORT_MESSAGES_PER_TENANT",t.TRANSPORT_MESSAGES_PER_DEVICE="TRANSPORT_MESSAGES_PER_DEVICE",t.TRANSPORT_MESSAGES_PER_GATEWAY="TRANSPORT_MESSAGES_PER_GATEWAY",t.TRANSPORT_MESSAGES_PER_GATEWAY_DEVICE="TRANSPORT_MESSAGES_PER_GATEWAY_DEVICE",t.EDGE_EVENTS="EDGE_EVENTS",t.EDGE_EVENTS_PER_EDGE="EDGE_EVENTS_PER_EDGE",t.EDGE_UPLINK_MESSAGES="EDGE_UPLINK_MESSAGES",t.EDGE_UPLINK_MESSAGES_PER_EDGE="EDGE_UPLINK_MESSAGES_PER_EDGE"}(Of||(Of={}));var Mf,kf=new Map([[Of.ENTITY_EXPORT,"api-limit.entity-version-creation"],[Of.ENTITY_IMPORT,"api-limit.entity-version-load"],[Of.NOTIFICATION_REQUESTS,"api-limit.notification-requests"],[Of.NOTIFICATION_REQUESTS_PER_RULE,"api-limit.notification-requests-per-rule"],[Of.REST_REQUESTS_PER_TENANT,"api-limit.rest-api-requests"],[Of.REST_REQUESTS_PER_CUSTOMER,"api-limit.rest-api-requests-per-customer"],[Of.WS_UPDATES_PER_SESSION,"api-limit.ws-updates-per-session"],[Of.CASSANDRA_QUERIES,"api-limit.cassandra-queries"],[Of.TRANSPORT_MESSAGES_PER_TENANT,"api-limit.transport-messages"],[Of.TRANSPORT_MESSAGES_PER_DEVICE,"api-limit.transport-messages-per-device"],[Of.TRANSPORT_MESSAGES_PER_GATEWAY,"api-limit.transport-messages-per-gateway"],[Of.TRANSPORT_MESSAGES_PER_GATEWAY_DEVICE,"api-limit.transport-messages-per-gateway-device"],[Of.EDGE_EVENTS,"api-limit.edge-events"],[Of.EDGE_EVENTS_PER_EDGE,"api-limit.edge-events-per-edge"],[Of.EDGE_UPLINK_MESSAGES,"api-limit.edge-uplink-messages"],[Of.EDGE_UPLINK_MESSAGES_PER_EDGE,"api-limit.edge-uplink-messages-per-edge"]]);!function(t){t.STARTED="STARTED",t.UPDATED="UPDATED",t.STOPPED="STOPPED"}(Mf||(Mf={}));var Lf,Uf=new Map([[Mf.STARTED,"event.started"],[Mf.UPDATED,"event.updated"],[Mf.STOPPED,"event.stopped"]]);!function(t){t.CREATED="CREATED",t.SEVERITY_CHANGED="SEVERITY_CHANGED",t.ACKNOWLEDGED="ACKNOWLEDGED",t.CLEARED="CLEARED"}(Lf||(Lf={}));var Pf,xf=new Map([[Lf.CREATED,"notification.notify-alarm-action.created"],[Lf.SEVERITY_CHANGED,"notification.notify-alarm-action.severity-changed"],[Lf.ACKNOWLEDGED,"notification.notify-alarm-action.acknowledged"],[Lf.CLEARED,"notification.notify-alarm-action.cleared"]]);!function(t){t.ASSIGNED="ASSIGNED",t.UNASSIGNED="UNASSIGNED"}(Pf||(Pf={}));var Ff,Wf=new Map([[Pf.ASSIGNED,"notification.notify-alarm-action.assigned"],[Pf.UNASSIGNED,"notification.notify-alarm-action.unassigned"]]);!function(t){t.ACTIVE="ACTIVE",t.INACTIVE="INACTIVE"}(Ff||(Ff={}));var Vf,jf=new Map([[Ff.ACTIVE,"notification.active"],[Ff.INACTIVE,"notification.inactive"]]);!function(t){t.PLATFORM_USERS="PLATFORM_USERS",t.SLACK="SLACK",t.MICROSOFT_TEAMS="MICROSOFT_TEAMS"}(Vf||(Vf={}));var Yf,Hf,Bf=new Map([[Vf.PLATFORM_USERS,"notification.platform-users"],[Vf.SLACK,"notification.delivery-method.slack"],[Vf.MICROSOFT_TEAMS,"notification.delivery-method.microsoft-teams"]]);!function(t){t.SENT="SENT",t.READ="READ"}(Yf||(Yf={})),function(t){t.WEB="WEB",t.MOBILE_APP="MOBILE_APP",t.SMS="SMS",t.EMAIL="EMAIL",t.SLACK="SLACK",t.MICROSOFT_TEAMS="MICROSOFT_TEAMS"}(Hf||(Hf={}));var Kf,Gf=new Map([[Hf.WEB,{name:"notification.delivery-method.web",icon:"mdi:bell-badge"}],[Hf.SMS,{name:"notification.delivery-method.sms",icon:"mdi:message-processing"}],[Hf.EMAIL,{name:"notification.delivery-method.email",icon:"mdi:email"}],[Hf.SLACK,{name:"notification.delivery-method.slack",icon:"mdi:slack"}],[Hf.MOBILE_APP,{name:"notification.delivery-method.mobile-app",icon:"mdi:cellphone-text"}],[Hf.MICROSOFT_TEAMS,{name:"notification.delivery-method.microsoft-teams",icon:"mdi:microsoft-teams"}]]);!function(t){t.PROCESSING="PROCESSING",t.SCHEDULED="SCHEDULED",t.SENT="SENT"}(Kf||(Kf={}));var qf,zf=new Map([[Kf.PROCESSING,"notification.request-status.processing"],[Kf.SCHEDULED,"notification.request-status.scheduled"],[Kf.SENT,"notification.request-status.sent"]]);!function(t){t.PUBLIC_CHANNEL="PUBLIC_CHANNEL",t.PRIVATE_CHANNEL="PRIVATE_CHANNEL",t.DIRECT="DIRECT"}(qf||(qf={}));var Qf,Jf=new Map([[qf.DIRECT,"notification.slack-chanel-types.direct"],[qf.PUBLIC_CHANNEL,"notification.slack-chanel-types.public-channel"],[qf.PRIVATE_CHANNEL,"notification.slack-chanel-types.private-channel"]]);!function(t){t.ALL_USERS="ALL_USERS",t.TENANT_ADMINISTRATORS="TENANT_ADMINISTRATORS",t.CUSTOMER_USERS="CUSTOMER_USERS",t.USER_LIST="USER_LIST",t.ORIGINATOR_ENTITY_OWNER_USERS="ORIGINATOR_ENTITY_OWNER_USERS",t.AFFECTED_USER="AFFECTED_USER",t.SYSTEM_ADMINISTRATORS="SYSTEM_ADMINISTRATORS",t.AFFECTED_TENANT_ADMINISTRATORS="AFFECTED_TENANT_ADMINISTRATORS"}(Qf||(Qf={}));var Xf,$f=new Map([[Qf.ALL_USERS,{name:"notification.recipient-type.all-users"}],[Qf.TENANT_ADMINISTRATORS,{name:"notification.recipient-type.tenant-administrators"}],[Qf.CUSTOMER_USERS,{name:"notification.recipient-type.customer-users"}],[Qf.USER_LIST,{name:"notification.recipient-type.user-list"}],[Qf.ORIGINATOR_ENTITY_OWNER_USERS,{name:"notification.recipient-type.users-entity-owner"}],[Qf.AFFECTED_USER,{name:"notification.recipient-type.affected-user"}],[Qf.SYSTEM_ADMINISTRATORS,{name:"notification.recipient-type.system-administrators"}],[Qf.AFFECTED_TENANT_ADMINISTRATORS,{name:"notification.recipient-type.affected-tenant-administrators"}]]);!function(t){t.GENERAL="GENERAL",t.ALARM="ALARM",t.DEVICE_ACTIVITY="DEVICE_ACTIVITY",t.ENTITY_ACTION="ENTITY_ACTION",t.ALARM_COMMENT="ALARM_COMMENT",t.ALARM_ASSIGNMENT="ALARM_ASSIGNMENT",t.RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT="RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT",t.ENTITIES_LIMIT="ENTITIES_LIMIT",t.API_USAGE_LIMIT="API_USAGE_LIMIT",t.NEW_PLATFORM_VERSION="NEW_PLATFORM_VERSION",t.RULE_NODE="RULE_NODE",t.RATE_LIMITS="RATE_LIMITS",t.EDGE_CONNECTION="EDGE_CONNECTION",t.EDGE_COMMUNICATION_FAILURE="EDGE_COMMUNICATION_FAILURE",t.TASK_PROCESSING_FAILURE="TASK_PROCESSING_FAILURE"}(Xf||(Xf={}));var Zf,th=new Map([[Xf.ALARM,"warning"],[Xf.DEVICE_ACTIVITY,"phonelink_off"],[Xf.ENTITY_ACTION,"devices"],[Xf.ALARM_COMMENT,"comment"],[Xf.ALARM_ASSIGNMENT,"assignment_turned_in"],[Xf.RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT,"settings_ethernet"],[Xf.ENTITIES_LIMIT,"data_thresholding"],[Xf.API_USAGE_LIMIT,"insert_chart"],[Xf.TASK_PROCESSING_FAILURE,"warning"]]),eh=new Map([[Da.CRITICAL,"#D12730"],[Da.MAJOR,"#FEAC0C"],[Da.MINOR,"#F2DA05"],[Da.WARNING,"#F66716"],[Da.INDETERMINATE,"#00000061"]]);!function(t){t.LINK="LINK",t.DASHBOARD="DASHBOARD"}(Zf||(Zf={}));var nh,ih=new Map([[Zf.LINK,"notification.link-type.link"],[Zf.DASHBOARD,"notification.link-type.dashboard"]]),rh=new Map([[Xf.GENERAL,{name:"notification.template-type.general",helpId:"notification/general"}],[Xf.ALARM,{name:"notification.template-type.alarm",helpId:"notification/alarm"}],[Xf.DEVICE_ACTIVITY,{name:"notification.template-type.device-activity",helpId:"notification/device_activity"}],[Xf.ENTITY_ACTION,{name:"notification.template-type.entity-action",helpId:"notification/entity_action"}],[Xf.ALARM_COMMENT,{name:"notification.template-type.alarm-comment",helpId:"notification/alarm_comment"}],[Xf.ALARM_ASSIGNMENT,{name:"notification.template-type.alarm-assignment",helpId:"notification/alarm_assignment"}],[Xf.RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT,{name:"notification.template-type.rule-engine-lifecycle-event",helpId:"notification/rule_engine_lifecycle_event"}],[Xf.ENTITIES_LIMIT,{name:"notification.template-type.entities-limit",helpId:"notification/entities_limit"}],[Xf.API_USAGE_LIMIT,{name:"notification.template-type.api-usage-limit",helpId:"notification/api_usage_limit"}],[Xf.NEW_PLATFORM_VERSION,{name:"notification.template-type.new-platform-version",helpId:"notification/new_platform_version"}],[Xf.RULE_NODE,{name:"notification.template-type.rule-node",helpId:"notification/rule_node"}],[Xf.RATE_LIMITS,{name:"notification.template-type.rate-limits",helpId:"notification/rate_limits"}],[Xf.EDGE_CONNECTION,{name:"notification.template-type.edge-connection",helpId:"notification/edge_connection"}],[Xf.EDGE_COMMUNICATION_FAILURE,{name:"notification.template-type.edge-communication-failure",helpId:"notification/edge_communication_failure"}],[Xf.TASK_PROCESSING_FAILURE,{name:"notification.template-type.task-processing-failure",helpId:"notification/task_processing_failure"}]]);!function(t){t.ALARM="ALARM",t.DEVICE_ACTIVITY="DEVICE_ACTIVITY",t.ENTITY_ACTION="ENTITY_ACTION",t.ALARM_COMMENT="ALARM_COMMENT",t.ALARM_ASSIGNMENT="ALARM_ASSIGNMENT",t.RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT="RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT",t.ENTITIES_LIMIT="ENTITIES_LIMIT",t.API_USAGE_LIMIT="API_USAGE_LIMIT",t.NEW_PLATFORM_VERSION="NEW_PLATFORM_VERSION",t.RATE_LIMITS="RATE_LIMITS",t.EDGE_CONNECTION="EDGE_CONNECTION",t.EDGE_COMMUNICATION_FAILURE="EDGE_COMMUNICATION_FAILURE",t.TASK_PROCESSING_FAILURE="TASK_PROCESSING_FAILURE"}(nh||(nh={}));var ah,oh=new Map([[nh.ALARM,"notification.trigger.alarm"],[nh.DEVICE_ACTIVITY,"notification.trigger.device-activity"],[nh.ENTITY_ACTION,"notification.trigger.entity-action"],[nh.ALARM_COMMENT,"notification.trigger.alarm-comment"],[nh.ALARM_ASSIGNMENT,"notification.trigger.alarm-assignment"],[nh.RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT,"notification.trigger.rule-engine-lifecycle-event"],[nh.ENTITIES_LIMIT,"notification.trigger.entities-limit"],[nh.API_USAGE_LIMIT,"notification.trigger.api-usage-limit"],[nh.NEW_PLATFORM_VERSION,"notification.trigger.new-platform-version"],[nh.RATE_LIMITS,"notification.trigger.rate-limits"],[nh.EDGE_CONNECTION,"notification.trigger.edge-connection"],[nh.EDGE_COMMUNICATION_FAILURE,"notification.trigger.edge-communication-failure"],[nh.TASK_PROCESSING_FAILURE,"notification.trigger.task-processing-failure"]]);!function(t){t.HTTP="HTTP",t.HTTPS="HTTPS",t.MIXED="MIXED"}(ah||(ah={}));var sh,uh,ch,lh=new Map([[ah.HTTP,"admin.oauth2.domain-schema-http"],[ah.HTTPS,"admin.oauth2.domain-schema-https"],[ah.MIXED,"admin.oauth2.domain-schema-mixed"]]);!function(t){t.BASIC="BASIC",t.CUSTOM="CUSTOM",t.GITHUB="GITHUB",t.APPLE="APPLE"}(sh||(sh={})),function(t){t.DOMAIN="DOMAIN",t.EMAIL="EMAIL",t.CUSTOM="CUSTOM"}(uh||(uh={})),function(t){t.WEB="WEB",t.ANDROID="ANDROID",t.IOS="IOS"}(ch||(ch={}));var ph,dh,fh=new Map([[ch.WEB,"admin.oauth2.platform-web"],[ch.ANDROID,"admin.oauth2.platform-android"],[ch.IOS,"admin.oauth2.platform-ios"]]);!function(t){t.BASIC="BASIC",t.POST="POST"}(ph||(ph={})),function(t){t.MD5="MD5",t.SHA256="SHA256",t.SHA384="SHA384",t.SHA512="SHA512",t.CRC32="CRC32",t.MURMUR3_32="MURMUR3_32",t.MURMUR3_128="MURMUR3_128"}(dh||(dh={}));var hh,yh=new Map([[dh.MD5,"MD5"],[dh.SHA256,"SHA-256"],[dh.SHA384,"SHA-384"],[dh.SHA512,"SHA-512"],[dh.CRC32,"CRC-32"],[dh.MURMUR3_32,"MURMUR3-32"],[dh.MURMUR3_128,"MURMUR3-128"]]);!function(t){t.FIRMWARE="FIRMWARE",t.SOFTWARE="SOFTWARE"}(hh||(hh={}));var mh,gh,vh=new Map([[hh.FIRMWARE,"ota-update.types.firmware"],[hh.SOFTWARE,"ota-update.types.software"]]),Th=new Map([[hh.FIRMWARE,{label:"ota-update.assign-firmware",required:"ota-update.assign-firmware-required",noFound:"ota-update.no-firmware-text",noMatching:"ota-update.no-firmware-matching",hint:"ota-update.chose-firmware-distributed-device"}],[hh.SOFTWARE,{label:"ota-update.assign-software",required:"ota-update.assign-software-required",noFound:"ota-update.no-software-text",noMatching:"ota-update.no-software-matching",hint:"ota-update.chose-software-distributed-device"}]]);!function(t){t.TB_CORE="TB_CORE",t.TB_RULE_ENGINE="TB_RULE_ENGINE",t.TB_TRANSPORT="TB_TRANSPORT",t.JS_EXECUTOR="JS_EXECUTOR"}(mh||(mh={})),function(t){t.SEQUENTIAL_BY_ORIGINATOR="SEQUENTIAL_BY_ORIGINATOR",t.SEQUENTIAL_BY_TENANT="SEQUENTIAL_BY_TENANT",t.SEQUENTIAL="SEQUENTIAL",t.BURST="BURST",t.BATCH="BATCH"}(gh||(gh={}));var Eh,bh=new Map([[gh.SEQUENTIAL_BY_ORIGINATOR,{label:"queue.strategies.sequential-by-originator-label",hint:"queue.strategies.sequential-by-originator-hint"}],[gh.SEQUENTIAL_BY_TENANT,{label:"queue.strategies.sequential-by-tenant-label",hint:"queue.strategies.sequential-by-tenant-hint"}],[gh.SEQUENTIAL,{label:"queue.strategies.sequential-label",hint:"queue.strategies.sequential-hint"}],[gh.BURST,{label:"queue.strategies.burst-label",hint:"queue.strategies.burst-hint"}],[gh.BATCH,{label:"queue.strategies.batch-label",hint:"queue.strategies.batch-hint"}]]);!function(t){t.RETRY_FAILED_AND_TIMED_OUT="RETRY_FAILED_AND_TIMED_OUT",t.SKIP_ALL_FAILURES="SKIP_ALL_FAILURES",t.SKIP_ALL_FAILURES_AND_TIMED_OUT="SKIP_ALL_FAILURES_AND_TIMED_OUT",t.RETRY_ALL="RETRY_ALL",t.RETRY_FAILED="RETRY_FAILED",t.RETRY_TIMED_OUT="RETRY_TIMED_OUT"}(Eh||(Eh={}));var Sh,_h,Ah=new Map([[Eh.RETRY_FAILED_AND_TIMED_OUT,{label:"queue.strategies.retry-failed-and-timeout-label",hint:"queue.strategies.retry-failed-and-timeout-hint"}],[Eh.SKIP_ALL_FAILURES,{label:"queue.strategies.skip-all-failures-label",hint:"queue.strategies.skip-all-failures-hint"}],[Eh.SKIP_ALL_FAILURES_AND_TIMED_OUT,{label:"queue.strategies.skip-all-failures-and-timeouts-label",hint:"queue.strategies.skip-all-failures-and-timeouts-hint"}],[Eh.RETRY_ALL,{label:"queue.strategies.retry-all-label",hint:"queue.strategies.retry-all-hint"}],[Eh.RETRY_FAILED,{label:"queue.strategies.retry-failed-label",hint:"queue.strategies.retry-failed-hint"}],[Eh.RETRY_TIMED_OUT,{label:"queue.strategies.retry-timeout-label",hint:"queue.strategies.retry-timeout-hint"}]]),wh="Contains",Ih="Manages",Dh=[wh,Ih];!function(t){t.COMMON="COMMON",t.ALARM="ALARM",t.DASHBOARD="DASHBOARD",t.RULE_CHAIN="RULE_CHAIN",t.RULE_NODE="RULE_NODE"}(Sh||(Sh={})),function(t){t.FROM="FROM",t.TO="TO"}(_h||(_h={}));var Rh,Nh,Oh=new Map([[_h.FROM,"relation.search-direction.FROM"],[_h.TO,"relation.search-direction.TO"]]),Ch=new Map([[_h.FROM,"relation.direction-type.FROM"],[_h.TO,"relation.direction-type.TO"]]);!function(t){t.SMTP="smtp",t.SMTPS="smtps"}(Rh||(Rh={})),function(t){t.OFFICE_365="OFFICE_365",t.CUSTOM="CUSTOM"}(Nh||(Nh={}));var Mh;!function(t){t.AWS_SNS="AWS_SNS",t.TWILIO="TWILIO",t.SMPP="SMPP"}(Mh||(Mh={}));var kh,Lh=new Map([[Mh.AWS_SNS,"admin.sms-provider-type-aws-sns"],[Mh.TWILIO,"admin.sms-provider-type-twilio"],[Mh.SMPP,"admin.sms-provider-type-smpp"]]);!function(t){t.TX="TX",t.RX="RX",t.TRX="TRX"}(kh||(kh={}));var Uh,Ph=new Map([[kh.TX,"admin.smpp-provider.bind-type-tx"],[kh.RX,"admin.smpp-provider.bind-type-rx"],[kh.TRX,"admin.smpp-provider.bind-type-trx"]]);!function(t){t.Unknown="Unknown",t.International="International",t.National="National",t.NetworkSpecific="NetworkSpecific",t.SubscriberNumber="SubscriberNumber",t.Alphanumeric="Alphanumeric",t.Abbreviated="Abbreviated"}(Uh||(Uh={}));var xh,Fh=new Map([[Uh.Unknown,{name:"admin.smpp-provider.ton-unknown",value:0}],[Uh.International,{name:"admin.smpp-provider.ton-international",value:1}],[Uh.National,{name:"admin.smpp-provider.ton-national",value:2}],[Uh.NetworkSpecific,{name:"admin.smpp-provider.ton-network-specific",value:3}],[Uh.SubscriberNumber,{name:"admin.smpp-provider.ton-subscriber-number",value:4}],[Uh.Alphanumeric,{name:"admin.smpp-provider.ton-alphanumeric",value:5}],[Uh.Abbreviated,{name:"admin.smpp-provider.ton-abbreviated",value:6}]]);!function(t){t.Unknown="Unknown",t.ISDN="ISDN",t.DataNumberingPlan="DataNumberingPlan",t.TelexNumberingPlan="TelexNumberingPlan",t.LandMobile="LandMobile",t.NationalNumberingPlan="NationalNumberingPlan",t.PrivateNumberingPlan="PrivateNumberingPlan",t.ERMESNumberingPlan="ERMESNumberingPlan",t.Internet="Internet",t.WAPClientId="WAPClientId"}(xh||(xh={}));var Wh,Vh=new Map([[xh.Unknown,{name:"admin.smpp-provider.npi-unknown",value:0}],[xh.ISDN,{name:"admin.smpp-provider.npi-isdn",value:1}],[xh.DataNumberingPlan,{name:"admin.smpp-provider.npi-data-numbering-plan",value:3}],[xh.TelexNumberingPlan,{name:"admin.smpp-provider.npi-telex-numbering-plan",value:4}],[xh.LandMobile,{name:"admin.smpp-provider.npi-land-mobile",value:5}],[xh.NationalNumberingPlan,{name:"admin.smpp-provider.npi-national-numbering-plan",value:8}],[xh.PrivateNumberingPlan,{name:"admin.smpp-provider.npi-private-numbering-plan",value:9}],[xh.ERMESNumberingPlan,{name:"admin.smpp-provider.npi-ermes-numbering-plan",value:10}],[xh.Internet,{name:"admin.smpp-provider.npi-internet",value:13}],[xh.WAPClientId,{name:"admin.smpp-provider.npi-wap-client-id",value:18}]]);!function(t){t.SMSC="SMSC",t.IA5="IA5",t.OctetUnspecified2="OctetUnspecified2",t.Latin1="Latin1",t.OctetUnspecified4="OctetUnspecified4",t.JIS="JIS",t.Cyrillic="Cyrillic",t.LatinHebrew="LatinHebrew",t.UCS2UTF16="UCS2UTF16",t.PictogramEncoding="PictogramEncoding",t.MusicCodes="MusicCodes",t.ExtendedKanjiJIS="ExtendedKanjiJIS",t.KoreanGraphicCharacterSet="KoreanGraphicCharacterSet"}(Wh||(Wh={}));var jh,Yh=new Map([[Wh.SMSC,{name:"admin.smpp-provider.scheme-smsc",value:0}],[Wh.IA5,{name:"admin.smpp-provider.scheme-ia5",value:1}],[Wh.OctetUnspecified2,{name:"admin.smpp-provider.scheme-octet-unspecified-2",value:2}],[Wh.Latin1,{name:"admin.smpp-provider.scheme-latin-1",value:3}],[Wh.OctetUnspecified4,{name:"admin.smpp-provider.scheme-octet-unspecified-4",value:4}],[Wh.JIS,{name:"admin.smpp-provider.scheme-jis",value:5}],[Wh.Cyrillic,{name:"admin.smpp-provider.scheme-cyrillic",value:6}],[Wh.LatinHebrew,{name:"admin.smpp-provider.scheme-latin-hebrew",value:7}],[Wh.UCS2UTF16,{name:"admin.smpp-provider.scheme-ucs-utf",value:8}],[Wh.PictogramEncoding,{name:"admin.smpp-provider.scheme-pictogram-encoding",value:9}],[Wh.MusicCodes,{name:"admin.smpp-provider.scheme-music-codes",value:10}],[Wh.ExtendedKanjiJIS,{name:"admin.smpp-provider.scheme-extended-kanji-jis",value:13}],[Wh.KoreanGraphicCharacterSet,{name:"admin.smpp-provider.scheme-korean-graphic-character-set",value:14}]]);!function(t){t.USERNAME_PASSWORD="USERNAME_PASSWORD",t.PRIVATE_KEY="PRIVATE_KEY"}(jh||(jh={}));var Hh,Bh=new Map([[jh.USERNAME_PASSWORD,"admin.auth-method-username-password"],[jh.PRIVATE_KEY,"admin.auth-method-private-key"]]);!function(t){t.DEFAULT="DEFAULT"}(Hh||(Hh={}));var Kh=function(){function t(t,e,n,i,r,a){this.utils=t,this.entityService=e,this.translate=n,this.stateControllerHolder=i,this.origEntityAliases=r,this.origFilters=a,this.entityAliasesChangedSubject=new nn,this.entityAliasesChanged=this.entityAliasesChangedSubject.asObservable(),this.filtersChangedSubject=new nn,this.filtersChanged=this.filtersChangedSubject.asObservable(),this.entityAliasResolvedSubject=new nn,this.entityAliasResolved=this.entityAliasResolvedSubject.asObservable(),this.resolvedAliases={},this.resolvedAliasesObservable={},this.resolvedAliasesToStateEntities={},this.entityAliases=Qr(this.origEntityAliases)||{},this.filters=Qr(this.origFilters)||{},this.userFilters={}}return t.prototype.updateEntityAliases=function(t){var e,n,i,r,a=[];try{for(var o=ve(Object.keys(t)),s=o.next();!s.done;s=o.next()){var u=t[d=s.value],c=this.entityAliases[d];Jr(u,c)||(a.push(d),this.setAliasUnresolved(d))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}try{for(var l=ve(Object.keys(this.entityAliases)),p=l.next();!p.done;p=l.next()){var d;t[d=p.value]||(a.push(d),this.setAliasUnresolved(d))}}catch(t){i={error:t}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}this.entityAliases=Qr(t),a.length&&this.entityAliasesChangedSubject.next(a)},t.prototype.updateFilters=function(t){var e,n,i,r,a,o,s=[];try{for(var u=ve(Object.keys(t)),c=u.next();!c.done;c=u.next()){var l=t[m=c.value],p=this.filters[m];Jr(l,p)||s.push(m)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}try{for(var d=ve(Object.keys(this.filters)),f=d.next();!f.done;f=d.next()){t[m=f.value]||s.push(m)}}catch(t){i={error:t}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}if(this.filters=Qr(t),s.length){try{for(var h=ve(s),y=h.next();!y.done;y=h.next()){var m=y.value;delete this.userFilters[m]}}catch(t){a={error:t}}finally{try{y&&!y.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}this.filtersChangedSubject.next(s)}},t.prototype.updateAliases=function(t){var e,n,i,r,a=this;if(!t){t=[];try{for(var o=ve(Object.keys(this.resolvedAliases)),s=o.next();!s.done;s=o.next()){var u=s.value;t.push(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}var c=[];try{for(var l=ve(t),p=l.next();!p.done;p=l.next()){u=p.value;this.setAliasUnresolved(u),c.push(this.getAliasInfo(u))}}catch(t){i={error:t}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}zn(c).subscribe((function(){a.entityAliasesChangedSubject.next(t)}))},t.prototype.dashboardStateChanged=function(){var t,e,n=[];try{for(var i=ve(Object.keys(this.resolvedAliasesToStateEntities)),r=i.next();!r.done;r=i.next()){var a=r.value,o=this.resolvedAliasesToStateEntities[a],s=this.stateControllerHolder().getEntityId(o.entityParamName),u=o.entityId;Jr(s,u)||(n.push(a),this.setAliasUnresolved(a))}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}n.length&&this.entityAliasesChangedSubject.next(n)},t.prototype.setAliasUnresolved=function(t){delete this.resolvedAliases[t],delete this.resolvedAliasesObservable[t],delete this.resolvedAliasesToStateEntities[t]},t.prototype.getEntityAliases=function(){return this.entityAliases},t.prototype.getFilters=function(){return this.filters},t.prototype.getFilterInfo=function(t){return this.userFilters[t]?this.userFilters[t]:this.filters[t]},t.prototype.getKeyFilters=function(t){var e=this.getFilterInfo(t);return e?Yl(e):[]},t.prototype.getEntityAliasId=function(t){var e,n;try{for(var i=ve(Object.keys(this.entityAliases)),r=i.next();!r.done;r=i.next()){var a=r.value;if(this.entityAliases[a].alias===t)return a}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return null},t.prototype.getAliasInfo=function(t){var e=this,n=this.resolvedAliases[t];if(n)return Un(n);if(this.resolvedAliasesObservable[t])return this.resolvedAliasesObservable[t];var i=new sn;this.resolvedAliasesObservable[t]=i.asObservable();var r=this.entityAliases[t];if(!r){i.error(null);var a=this.resolvedAliasesObservable[t];return delete this.resolvedAliasesObservable[t],a}return this.entityService.resolveAlias(r,this.stateControllerHolder().getStateParams()).subscribe((function(n){e.resolvedAliases[t]=n,delete e.resolvedAliasesObservable[t],n.stateEntity&&(e.resolvedAliasesToStateEntities[t]={entityParamName:n.entityParamName,entityId:e.stateControllerHolder().getEntityId(n.entityParamName)}),e.entityAliasResolvedSubject.next(t),i.next(n),i.complete()}),(function(){i.error(null),delete e.resolvedAliasesObservable[t]})),(n=this.resolvedAliases[t])?Un(n):this.resolvedAliasesObservable[t]},t.prototype.resolveSingleEntityInfo=function(t){var e=this;return this.getAliasInfo(t).pipe(Gn((function(t){return t.resolveMultiple?t.entityFilter?e.entityService.findSingleEntityInfoByEntityFilter(t.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}):Un(null):Un(t.currentEntity)})))},t.prototype.resolveSingleEntityInfoForDeviceId=function(t){var e=$l(t);return this.entityService.findSingleEntityInfoByEntityFilter(e,{ignoreLoading:!0,ignoreErrors:!0})},t.prototype.resolveSingleEntityInfoForTargetDevice=function(t){return tu(t)?t.type===Js.entity?this.resolveSingleEntityInfo(t.entityAliasId):this.resolveSingleEntityInfoForDeviceId(t.deviceId):Un(null)},t.prototype.resolveDatasource=function(t,e){var n=this;void 0===e&&(e=!1);var i=Qr(t);return i.type===qs.entity||i.type===qs.device||i.type===qs.entityCount||i.type===qs.alarmCount?(i.filterId&&(i.keyFilters=this.getKeyFilters(i.filterId)),i.type===qs.alarmCount&&(i.alarmFilter=this.entityService.resolveAlarmFilter(i.alarmFilterConfig,!1)),i.type===qs.device?(i.type=qs.entity,i.entityFilter=$l(i.deviceId),e?this.entityService.findSingleEntityInfoByEntityFilter(i.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}).pipe(xn((function(t){return t&&ap(i,t,!0),i}))):Un(i)):i.entityAliasId?this.getAliasInfo(i.entityAliasId).pipe(Gn((function(t){return i.aliasName=t.alias,t.entityFilter?t.resolveMultiple?(i.entityFilter=t.entityFilter,e?n.entityService.findSingleEntityInfoByEntityFilter(t.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}).pipe(xn((function(t){return t&&ap(i,t,!0),i}))):Un(i)):(t.currentEntity?ap(i,t.currentEntity,!0):t.stateEntity&&(i.unresolvedStateEntity=!0,i.name="Unresolved",i.entityName="Unresolved"),Un(i)):(i.unresolvedStateEntity=!0,i.name="Unresolved",i.entityName="Unresolved",Un(i))}))):i.entityId&&!i.entityFilter?(i.entityFilter={singleEntity:{id:i.entityId,entityType:i.entityType},type:Mc.singleEntity},Un(i)):(i.aliasName=i.entityName,i.name=i.entityName,Un(i))):Un(i)},t.prototype.resolveAlarmSource=function(t){return this.resolveDatasource(t).pipe(xn((function(t){var e;t.type===qs.function&&(e=t.name&&t.name.length?t.name:qs.function,t.name=e,t.aliasName=e,t.entityName=e);return t})))},t.prototype.resolveDatasources=function(t,e,n){var i=this;if(void 0===n&&(n=1024),!t||!t.length)return Un([]);var r=e?[t[0]]:t,a=new Array;return r.forEach((function(t){a.push(i.resolveDatasource(t))})),zn(a).pipe(xn((function(t){var r=0,a=0,o=0;return t.forEach((function(t){var s;t.type===qs.function||t.type===qs.entityCount||t.type===qs.alarmCount?(t.name&&t.name.length?s=t.name:(s=i.translate.instant(Xs.get(t.type)),t.type===qs.function?++r>1&&(s+=" "+r):t.type===qs.entityCount?++a>1&&(s+=" "+a):++o>1&&(s+=" "+o)),t.name=s,t.aliasName=s,t.entityName=s):e?t.pageLink=Qr(Xl):t.pageLink||(n=Cr(n)&&n>0?n:1024,t.pageLink=Jl(n))})),t})))},t.prototype.getInstantAliasInfo=function(t){return this.resolvedAliases[t]},t.prototype.updateCurrentAliasEntity=function(t,e){var n=this.resolvedAliases[t];if(n){var i=n.currentEntity;Jr(e,i)||(n.currentEntity=e,this.entityAliasesChangedSubject.next([t]))}},t.prototype.updateUserFilter=function(t){var e=this.userFilters[t.id];e||(e=this.filters[t.id]),e&&!Jr(e,t)&&(this.userFilters[t.id]=t,this.filtersChangedSubject.next([t.id]))},t}(),Gh=function(){function t(t){this.http=t}return t.prototype.saveAlarmComment=function(t,e,n){return this.http.post("/api/alarm/".concat(t,"/comment"),e,nr(n))},t.prototype.getAlarmComments=function(t,e,n){return this.http.get("/api/alarm/".concat(t,"/comment").concat(e.toQuery()),nr(n))},t.prototype.deleteAlarmComments=function(t,e,n){return this.http.delete("/api/alarm/".concat(t,"/comment/").concat(e),nr(n))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),qh=Jd.get(Zi.AdminService),zh=Jd.get(Zi.OAuth2Service),Qh=Jd.get(Zi.OtaPackageService),Jh=Jd.get(Zi.QueueService),Xh=Jd.get(Zi.TenantProfileService),$h=Jd.get(Zi.TenantService),Zh=Jd.get(Zi.UserService),ty=Jd.get(Zi.AlarmService),ey=Jd.get(Zi.AssetService),ny=Jd.get(Zi.AttributeService),iy=Jd.get(Zi.AuditLogService),ry=Jd.get(Zi.CustomerService),ay=Jd.get(Zi.DeviceService),oy=Jd.get(Zi.EntityRelationService),sy=Jd.get(Zi.EntityViewService),uy=Jd.get(Zi.EntityService),cy=Jd.get(Zi.EventService),ly=Jd.get(Zi.AuthService),py=Jd.get(Zi.DeviceProfileService),dy=Jd.get(Zi.AssetProfileService),fy=Jd.get(Zi.DataSubscriptionService),hy=Jd.get(Zi.EntityGroupService),yy=Jd.get(Zi.SchedulerService),my=Jd.get(Zi.ImageService),gy=Jd.get(Zi.NotificationService),vy=Jd.get(Zi.NotificationWebsocketService),Ty=Jd.get(ce.HttpClientInternal),Ey=Object.freeze({__proto__:null,AuthService:ly,AdminService:qh,OAuth2Service:zh,QueueService:Jh,OtaPackageService:Qh,TenantProfileService:Xh,TenantService:$h,UserService:Zh,AlarmService:ty,AssetService:ey,AttributeService:ny,AuditLogService:iy,CustomerService:ry,DeviceService:ay,EntityRelationService:oy,EntityViewService:sy,EntityService:uy,EventService:cy,DataSubscriptionService:fy,DeviceProfileService:py,AssetProfileService:dy,EntityGroupService:hy,SchedulerService:yy,ImageService:my,NotificationService:gy,NotificationWebsocketService:vy,HttpService:Ty,AlarmId:Ca,AssetId:Xd,AuditLogId:$d,CustomerId:Ma,DashboardId:Zd,DeviceCredentialsId:tf,DeviceId:ef,DeviceProfileId:nf,entityIdEquals:function(t,e){return Cr(t)&&Cr(e)?t.id===e.id&&t.entityType===e.entityType:t===e},EntityViewId:af,EventId:of,NULL_UUID:cr,NotificationId:sf,NotificationRequestId:uf,NotificationRuleId:cf,NotificationTargetId:lf,NotificationTemplateId:pf,OtaPackageId:df,RpcId:ff,RuleChainId:hf,RuleNodeId:yf,TenantId:Oa,TenantProfileId:mf,UserId:ka,WidgetTypeId:gf,WidgetsBundleId:vf,EdgeId:Tf,emptyPageData:Rc,MAX_SAFE_PAGE_SIZE:2147483647,defaultPageLinkSearchFunction:Nc,sortItems:Cc,PageLink:kc,TimePageLink:Lc,get Direction(){return hc},sortOrderFromString:function(t){var e,n=hc.ASC;return t.startsWith("-")?(n=hc.DESC,e=t.substring(1)):e=t.startsWith("+")?t.substring(1):t,{property:e,direction:n}},NOT_SUPPORTED:Xa,get DataKeyType(){return Va},get LatestTelemetry(){return ja},get AttributeScope(){return Ya},get TimeseriesDeleteStrategy(){return Ha},toTelemetryType:function(t){return ja[t]?ja[t]:Ya[t]},telemetryTypeTranslations:to,telemetryTypeTranslationsShort:eo,isClientSideTelemetryType:no,timeseriesDeleteStrategyTranslations:io,get DataSortOrder(){return $a},get WsCmdType(){return Za},SubscriptionCmd:ao,AttributesSubscriptionCmd:oo,get IntervalType(){return ro},TimeseriesSubscriptionCmd:uo,GetHistoryCmd:co,EntityDataCmd:lo,EntityCountCmd:po,AlarmDataCmd:fo,AlarmCountCmd:ho,UnreadCountSubCmd:yo,UnreadSubCmd:mo,MarkAsReadCmd:go,MarkAllAsReadCmd:vo,EntityDataUnsubscribeCmd:To,EntityCountUnsubscribeCmd:Eo,AlarmDataUnsubscribeCmd:bo,AlarmCountUnsubscribeCmd:So,UnsubscribeCmd:_o,AuthCmd:Ao,TelemetryPluginCmdsWrapper:wo,get CmdUpdateType(){return so},isEntityDataUpdateMsg:No,isAlarmDataUpdateMsg:Oo,isEntityCountUpdateMsg:Co,isAlarmCountUpdateMsg:Mo,isNotificationCountUpdateMsg:ko,isNotificationsUpdateMsg:Lo,SubscriptionUpdate:Uo,CmdUpdate:Po,DataUpdate:xo,EntityDataUpdate:Fo,AlarmDataUpdate:Wo,EntityCountUpdate:Vo,AlarmCountUpdate:jo,NotificationCountUpdate:Yo,NotificationsUpdate:Ho,TelemetrySubscriber:Bo,NotificationSubscriber:Ko,SECOND:qo,MINUTE:zo,HOUR:Qo,DAY:Jo,WEEK:Xo,AVG_MONTH:$o,AVG_QUARTER:Zo,YEAR:ts,get TimewindowType(){return Io},get RealtimeWindowType(){return Do},get HistoryWindowType(){return Ro},IntervalMath:ns,get AggregationType(){return es},aggregationTranslations:rs,get QuickTimeInterval(){return is},QuickTimeIntervalTranslationMap:ss,IntervalTypeValuesMap:us,forAllTimeInterval:function(){return{selectedTab:Io.HISTORY,history:{historyType:Ro.FOR_ALL_TIME}}},historyInterval:function(t){return{selectedTab:Io.HISTORY,history:{historyType:Ro.LAST_INTERVAL,timewindowMs:t}}},defaultTimewindow:cs,initModelFromDefaultTimewindow:function(t,e,n,i){var r=cs(i);return t&&(r.hideInterval=t.hideInterval,r.hideLastInterval=t.hideLastInterval,r.hideQuickInterval=t.hideQuickInterval,r.hideAggregation=t.hideAggregation,r.hideAggInterval=t.hideAggInterval,r.hideTimezone=t.hideTimezone,r.selectedTab=ls(t),Or(t.realtime)&&(Or(t.realtime.interval)&&(r.realtime.interval=t.realtime.interval),Rr(t.realtime.realtimeType)?Or(t.realtime.quickInterval)?r.realtime.realtimeType=Do.INTERVAL:r.realtime.realtimeType=Do.LAST_INTERVAL:r.realtime.realtimeType=t.realtime.realtimeType,Or(t.realtime.quickInterval)&&(r.realtime.quickInterval=t.realtime.quickInterval),Or(t.realtime.timewindowMs)&&(r.realtime.timewindowMs=t.realtime.timewindowMs)),Or(t.history)&&(Or(t.history.interval)&&(r.history.interval=t.history.interval),Rr(t.history.historyType)?Or(t.history.timewindowMs)?r.history.historyType=Ro.LAST_INTERVAL:Or(t.history.quickInterval)?r.history.historyType=Ro.INTERVAL:r.history.historyType=Ro.FIXED:r.history.historyType=t.history.historyType,Or(t.history.timewindowMs)&&(r.history.timewindowMs=t.history.timewindowMs),Or(t.history.quickInterval)&&(r.history.quickInterval=t.history.quickInterval),Or(t.history.fixedTimewindow)&&(Or(t.history.fixedTimewindow.startTimeMs)&&(r.history.fixedTimewindow.startTimeMs=t.history.fixedTimewindow.startTimeMs),Or(t.history.fixedTimewindow.endTimeMs)&&(r.history.fixedTimewindow.endTimeMs=t.history.fixedTimewindow.endTimeMs))),t.aggregation&&(t.aggregation.type&&(r.aggregation.type=t.aggregation.type),r.aggregation.limit=t.aggregation.limit||Math.floor(i.getMaxDatapointsLimit()/2)),r.timezone=t.timezone),e&&(r.realtime.realtimeType=Do.INTERVAL),n&&(r.selectedTab=Io.HISTORY),r},toHistoryTimewindow:ps,timewindowTypeChanged:ds,getTimezone:fs,calculateTsOffset:hs,isHistoryTypeTimewindow:ys,getCurrentTime:ms,calculateIntervalStartTime:gs,calculateIntervalEndTime:vs,calculateIntervalStartEndTime:Ts,createSubscriptionTimewindow:Es,quickTimeIntervalPeriod:function(t){switch(t){case is.CURRENT_HOUR:return Qo;case is.YESTERDAY:case is.DAY_BEFORE_YESTERDAY:case is.THIS_DAY_LAST_WEEK:case is.CURRENT_DAY:case is.CURRENT_DAY_SO_FAR:return Jo;case is.PREVIOUS_WEEK:case is.PREVIOUS_WEEK_ISO:case is.CURRENT_WEEK:case is.CURRENT_WEEK_ISO:case is.CURRENT_WEEK_SO_FAR:case is.CURRENT_WEEK_ISO_SO_FAR:return Xo;case is.PREVIOUS_MONTH:case is.CURRENT_MONTH:case is.CURRENT_MONTH_SO_FAR:return 30*Jo;case is.PREVIOUS_QUARTER:case is.CURRENT_QUARTER:case is.CURRENT_QUARTER_SO_FAR:return 30*Jo*3;case is.PREVIOUS_HALF_YEAR:case is.CURRENT_HALF_YEAR:case is.CURRENT_HALF_YEAR_SO_FAR:return 30*Jo*6;case is.PREVIOUS_YEAR:case is.CURRENT_YEAR:case is.CURRENT_YEAR_SO_FAR:return ts}},calculateIntervalComparisonStartTime:bs,calculateIntervalComparisonEndTime:Ss,createTimewindowForComparison:_s,cloneSelectedTimewindow:function(t){var e={};return e.hideInterval=t.hideInterval||!1,e.hideLastInterval=t.hideLastInterval||!1,e.hideQuickInterval=t.hideQuickInterval||!1,e.hideAggregation=t.hideAggregation||!1,e.hideAggInterval=t.hideAggInterval||!1,e.hideTimezone=t.hideTimezone||!1,Or(t.selectedTab)&&(e.selectedTab=t.selectedTab,t.selectedTab===Io.REALTIME?e.realtime=Qr(t.realtime):t.selectedTab===Io.HISTORY&&(e.history=Qr(t.history))),e.aggregation=Qr(t.aggregation),e.timezone=t.timezone,e},defaultTimeIntervals:As,get TimeUnit(){return as},get TimeUnitMilli(){return os},timeUnitTranslationMap:Is,getTimezones:Ns,getDefaultTimezone:Os,getTimezoneInfo:Cs,getDefaultTimezoneInfo:function(){var t=Os();return Cs(t)},getTime:Ms,calculateIntervalsCount:ks,startIntervalDate:Ls,endIntervalDate:Us,calculateAggIntervalWithSubscriptionTimeWindow:Ps,calculateAggIntervalWithWidgetTimeWindow:function(t,e){return xs(t.minTime-t.tsOffset,t.maxTime,t.interval,t.tsOffset,t.timezone,e)},calculateInterval:xs,getCurrentTimeForComparison:function(t,e){return ms(e).subtract(1,t)},get AlarmsMode(){return Ia},get AlarmSeverity(){return Da},get AlarmStatus(){return Ra},get AlarmSearchStatus(){return Na},alarmSeverityTranslations:Pa,alarmStatusTranslations:xa,alarmSearchStatusTranslations:Fa,alarmSeverityColors:Wa,get AlarmCommentType(){return La},get AlarmAssigneeOption(){return Ua},simulatedAlarm:Ba,alarmFields:Ka,AlarmQuery:Ga,AlarmQueryV2:qa,get AliasFilterType(){return Mc},edgeAliasFilterTypes:Hc,aliasFilterTypeTranslationMap:Bc,get ApiUsageStateValue(){return rf},ApiUsageStateValueTranslationMap:bf,get ApiFeature(){return Ef},ApiFeatureTranslationMap:wf,get AuditLogMode(){return Sf},get ActionType(){return _f},get ActionStatus(){return Af},actionTypeTranslations:Rf,actionStatusTranslations:Nf,get Authority(){return ma},sortEntitiesByIds:vp,hasIdEquals:function(t,e){return Cr(t)&&Cr(e)?t.id===e.id:t===e},Constants:yr,serverErrorCodesTranslations:mr,MediaBreakpoints:gr,resolveBreakpoint:function(t){return gr[t]?gr[t]:t},helpBaseUrl:vr,docPlatformPrefix:Tr,HelpLinks:Er,get ValueType(){return lr},get DataType(){return pr},DataTypeTranslationMap:Sr,valueTypesMap:_r,get ContentType(){return br},contentTypesMap:Ar,hidePageSizePixelValue:550,customTranslationsPrefix:wr,i18nPrefix:Ir,get PowerMode(){return Pc},get DeviceProfileType(){return xc},get DeviceTransportType(){return Fc},get BasicTransportType(){return Wc},get TransportPayloadType(){return Vc},get CoapTransportDeviceType(){return jc},get DeviceProvisionType(){return Yc},deviceProfileTypeTranslationMap:Gc,deviceProfileTypeConfigurationInfoMap:qc,deviceTransportTypeTranslationMap:zc,deviceProvisionTypeTranslationMap:Qc,deviceTransportTypeHintMap:Jc,transportPayloadTypeTranslationMap:Xc,defaultTelemetrySchema:'syntax ="proto3";\npackage telemetry;\n\nmessage SensorDataReading {\n\n  optional double temperature = 1;\n  optional double humidity = 2;\n  InnerObject innerObject = 3;\n\n  message InnerObject {\n    optional string key1 = 1;\n    optional bool key2 = 2;\n    optional double key3 = 3;\n    optional int32 key4 = 4;\n    optional string key5 = 5;\n  }\n}\n',defaultAttributesSchema:'syntax ="proto3";\npackage attributes;\n\nmessage SensorConfiguration {\n  optional string firmwareVersion = 1;\n  optional string serialNumber = 2;\n}',defaultRpcRequestSchema:'syntax ="proto3";\npackage rpc;\n\nmessage RpcRequestMsg {\n  optional string method = 1;\n  optional int32 requestId = 2;\n  optional string params = 3;\n}',defaultRpcResponseSchema:'syntax ="proto3";\npackage rpc;\n\nmessage RpcResponseMsg {\n  optional string payload = 1;\n}',coapDeviceTypeTranslationMap:$c,deviceTransportTypeConfigurationInfoMap:Zc,get SnmpSpecType(){return Kc},SnmpSpecTypeTranslationMap:el,createDeviceProfileConfiguration:function(t){var e=null;if(t&&t===xc.DEFAULT){e=de(de({},{}),{type:xc.DEFAULT})}return e},createDeviceConfiguration:function(t){var e=null;if(t&&t===xc.DEFAULT){e=de(de({},{}),{type:xc.DEFAULT})}return e},createDeviceProfileTransportConfiguration:function(t){var e=null;if(t)switch(t){case Fc.DEFAULT:e=de(de({},{}),{type:Fc.DEFAULT});break;case Fc.MQTT:var n={deviceTelemetryTopic:"v1/devices/me/telemetry",deviceAttributesTopic:"v1/devices/me/attributes",deviceAttributesSubscribeTopic:"v1/devices/me/attributes",sparkplug:!1,sparkplugAttributesMetricNames:["Node Control/*","Device Control/*","Properties/*"],sendAckOnValidationException:!1,transportPayloadTypeConfiguration:{transportPayloadType:Vc.JSON,enableCompatibilityWithJsonPayloadFormat:!1,useJsonPayloadFormatForDefaultDownlinkTopics:!1}};e=de(de({},n),{type:Fc.MQTT});break;case Fc.COAP:var i={coapDeviceTypeConfiguration:{coapDeviceType:jc.DEFAULT,transportPayloadTypeConfiguration:{transportPayloadType:Vc.JSON}},clientSettings:{powerMode:Pc.DRX}};e=de(de({},i),{type:Fc.COAP});break;case Fc.SNMP:e=de(de({},{timeoutMs:500,retries:0,communicationConfigs:null}),{type:Fc.SNMP})}return e},createDeviceTransportConfiguration:function(t){var e=null;if(t)switch(t){case Fc.DEFAULT:e=de(de({},{}),{type:Fc.DEFAULT});break;case Fc.MQTT:e=de(de({},{}),{type:Fc.MQTT});break;case Fc.COAP:e=de(de({},{powerMode:null}),{type:Fc.COAP});break;case Fc.LWM2M:e=de(de({},{powerMode:null}),{type:Fc.LWM2M});break;case Fc.SNMP:var n={host:"localhost",port:161,protocolVersion:rl.V2C,community:"public"};e=de(de({},n),{type:Fc.SNMP})}return e},get AlarmConditionType(){return tl},AlarmConditionTypeTranslationMap:il,get AlarmScheduleType(){return nl},AlarmScheduleTypeTranslationMap:ol,alarmRuleValidator:function(t){var e=t.value;return sl(e)?null:{alarmRule:!0}},deviceProfileAlarmValidator:function(t){var e,n,i=t.value;if(i&&i.id&&i.alarmType&&i.createRules){var r=Object.keys(i.createRules);if(r.length){var a=!0;try{for(var o=ve(r),s=o.next();!s.done;s=o.next()){var u=s.value,c=i.createRules[u];if(!sl(c)){a=!1;break}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}if(a&&i.clearRule&&!sl(i.clearRule)&&(a=!1),a)return null}}return{deviceProfileAlarm:!0}},get SnmpDeviceProtocolVersion(){return rl},get SnmpAuthenticationProtocol(){return al},SnmpAuthenticationProtocolTranslationMap:cl,get SnmpPrivacyProtocol(){return ul},SnmpPrivacyProtocolTranslationMap:pl,DeviceInfoQuery:dl,get DeviceCredentialsType(){return ll},credentialTypeNames:hl,credentialTypesByTransportType:yl,getDeviceCredentialMQTTDefault:function(){return{clientId:"",userName:"",password:""}},get ClaimResponse(){return fl},dayOfWeekTranslations:gl,timeOfDayToUTCTimestamp:function(t){return"number"==typeof t||null===t?0:Sa.utc([1970,0,1,t.getHours(),t.getMinutes(),t.getSeconds(),0]).valueOf()},utcTimestampToTimeOfDay:function(t){return void 0===t&&(t=0),new Date(t+60*new Date(t).getTimezoneOffset()*1e3)},getAlarmScheduleRangeText:function(t,e){var n=vl(t),i=vl(e);return n<i?'<span><span class="nowrap">'.concat(n.format("hh:mm A"),'</span> – <span class="nowrap">').concat(i.format("hh:mm A"),"</span></span>"):0===n.valueOf()&&0===i.valueOf()||n.isSame(Sa([1970,0]))&&i.isSame(Sa([1970,0]))?'<span><span class="nowrap">12:00 AM</span> – <span class="nowrap">12:00 PM</span></span>':'<span><span class="nowrap">12:00 AM</span> – <span class="nowrap">'.concat(i.format("hh:mm A"),"</span>")+' and <span class="nowrap">'.concat(n.format("hh:mm A"),'</span> – <span class="nowrap">12:00 PM</span></span>')},get EdgeEventType(){return tp},get EdgeEventActionType(){return ep},get EdgeEventStatus(){return np},edgeEventTypeTranslations:sp,edgeEventActionTypeTranslations:up,bodyContentEdgeEventActionTypes:cp,edgeEventStatusColor:lp,get EdgeInstructionsMethod(){return op},edgeVersionAttributeKey:"edgeVersion",get EdgeConnectionEvent(){return pp},EdgeConnectionEventTranslationMap:fp,entityFields:za,get EntityType(){return or},get AliasEntityType(){return sr},entityTypeTranslations:dr,entityTypeResources:fr,baseDetailsPageByEntityType:hr,get EventType(){return If},get DebugEventType(){return Df},eventTypeTranslations:Cf,get LimitedApi(){return Of},LimitedApiTranslationMap:kf,materialColorPalette:zu,materialColors:Qu,get ComponentLifecycleEvent(){return Mf},ComponentLifecycleEventTranslationMap:Uf,get AlarmAction(){return Lf},AlarmActionTranslationMap:xf,get AlarmAssignmentAction(){return Pf},AlarmAssignmentActionTranslationMap:Wf,get DeviceEvent(){return Ff},DeviceEventTranslationMap:jf,get NotificationTargetType(){return Vf},NotificationTargetTypeTranslationMap:Bf,get NotificationStatus(){return Yf},get NotificationDeliveryMethod(){return Hf},NotificationDeliveryMethodInfoMap:Gf,get NotificationRequestStatus(){return Kf},NotificationRequestStatusTranslateMap:zf,get SlackChanelType(){return qf},SlackChanelTypesTranslateMap:Jf,get NotificationTargetConfigType(){return Qf},NotificationTargetConfigTypeInfoMap:$f,get NotificationType(){return Xf},NotificationTypeIcons:th,AlarmSeverityNotificationColors:eh,get ActionButtonLinkType(){return Zf},ActionButtonLinkTypeTranslateMap:ih,NotificationTemplateTypeTranslateMap:rh,get TriggerType(){return nh},TriggerTypeTranslationMap:oh,CmdWrapper:Qa,WsSubscriber:Ja,get DomainSchema(){return ah},domainSchemaTranslations:lh,get MapperConfigType(){return sh},get TenantNameStrategy(){return uh},get PlatformType(){return ch},platformTypeTranslations:fh,get ClientAuthenticationMethod(){return ph},get ChecksumAlgorithm(){return dh},ChecksumAlgorithmTranslationMap:yh,get OtaUpdateType(){return hh},OtaUpdateTypeTranslationMap:vh,OtaUpdateTranslation:Th,get ServiceType(){return mh},get QueueSubmitStrategyTypes(){return gh},QueueSubmitStrategyTypesMap:bh,get QueueProcessingStrategyTypes(){return Eh},QueueProcessingStrategyTypesMap:Ah,CONTAINS_TYPE:wh,MANAGES_TYPE:Ih,RelationTypes:Dh,get RelationTypeGroup(){return Sh},get EntitySearchDirection(){return _h},entitySearchDirectionTranslations:Oh,directionTypeTranslations:Ch,get ResourceType(){return _d},ResourceTypeMIMETypes:Id,ResourceTypeExtension:Dd,ResourceTypeTranslationMap:Rd,toImageDeleteResult:function(t,e){var n,i,r;if(e){var a={image:t,success:!1,error:e};if(400===(null==e?void 0:e.status)&&!1===(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.success)&&(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.references)){var o=null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.references;a.imageIsReferencedError=!0,a.references=o}return a}return{image:t,success:!0}},imageResourceType:Nd,TB_IMAGE_PREFIX:Od,IMAGES_URL_REGEXP:Cd,IMAGES_URL_PREFIX:Md,PUBLIC_IMAGES_URL_PREFIX:"/api/images/public",IMAGE_BASE64_URL_PREFIX:kd,removeTbImagePrefix:Ld,removeTbImagePrefixFromUrls:function(t){return t?t.map((function(t){return Ld(t)})):[]},prependTbImagePrefix:Ud,prependTbImagePrefixToUrls:function(t){return t?t.map((function(t){return Ud(t)})):[]},isImageResourceUrl:Pd,extractParamsFromImageResourceUrl:function(t){var e=t.match(Cd);return{type:e[1],key:e[2]}},isBase64DataImageUrl:function(t){return t&&t.startsWith(kd)},NO_IMAGE_DATA_URI:xd,get RpcStatus(){return Rp},rpcStatusColors:Gp,rpcStatusTranslation:qp,smtpPortPattern:/^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/,get SmtpProtocol(){return Rh},get MailServerOauth2Provider(){return Nh},phoneNumberPattern:/^\+[1-9]\d{1,14}$/,phoneNumberPatternTwilio:/^\+[1-9]\d{1,14}$|^(MG|PN).*$/,get SmsProviderType(){return Mh},smsProviderTypeTranslationMap:Lh,smppVersions:[{value:3.3},{value:3.4}],get BindTypes(){return kh},bindTypesTranslationMap:Ph,get TypeOfNumber(){return Uh},typeOfNumberMap:Fh,get NumberingPlanIdentification(){return xh},numberingPlanIdentificationMap:Vh,get CodingSchemes(){return Wh},codingSchemesMap:Yh,smsProviderConfigurationValidator:function(t){return function(e){var n=e.value,i=null;if(t){var r=!1;if(n&&n.type)switch(n.type){case Mh.AWS_SNS:var a=n;r=kr(a.accessKeyId)&&kr(a.secretAccessKey)&&kr(a.region);break;case Mh.TWILIO:var o=n;r=kr(o.numberFrom)&&kr(o.accountSid)&&kr(o.accountToken);break;case Mh.SMPP:var s=n;r=kr(s.host)&&Ur(s.port)&&kr(s.systemId)&&kr(s.password)}r||(i={invalid:!0})}return i}},createSmsProviderConfiguration:function(t){var e;if(t)switch(t){case Mh.AWS_SNS:e=de(de({},{accessKeyId:"",secretAccessKey:"",region:"us-east-1"}),{type:Mh.AWS_SNS});break;case Mh.TWILIO:e=de(de({},{numberFrom:"",accountSid:"",accountToken:""}),{type:Mh.TWILIO});break;case Mh.SMPP:e=de(de({},{protocolVersion:3.3,host:"",port:null,systemId:"",password:"",systemType:"",bindType:"TX",serviceType:"",sourceAddress:"",sourceTon:5,sourceNpi:0,destinationTon:5,destinationNpi:0,addressRange:"",codingScheme:0}),{type:Mh.SMPP})}return e},get RepositoryAuthMethod(){return jh},repositoryAuthMethodTranslationMap:Bh,get TenantProfileType(){return Hh},createTenantProfileConfiguration:function(t){var e=null;if(t&&t===Hh.DEFAULT){e=de(de({},{maxDevices:0,maxAssets:0,maxCustomers:0,maxUsers:0,maxDashboards:0,maxRuleChains:0,maxResourcesInBytes:0,maxOtaPackagesInBytes:0,maxResourceSize:0,maxTransportMessages:0,maxTransportDataPoints:0,maxREExecutions:0,maxJSExecutions:0,maxTbelExecutions:0,maxDPStorageDays:0,maxRuleNodeExecutionsPerMessage:0,maxEmails:0,maxSms:0,smsEnabled:!0,maxCreatedAlarms:0,tenantServerRestLimitsConfiguration:"",customerServerRestLimitsConfiguration:"",maxWsSessionsPerTenant:0,maxWsSessionsPerCustomer:0,maxWsSessionsPerRegularUser:0,maxWsSessionsPerPublicUser:0,wsMsgQueueLimitPerSession:0,maxWsSubscriptionsPerTenant:0,maxWsSubscriptionsPerCustomer:0,maxWsSubscriptionsPerRegularUser:0,maxWsSubscriptionsPerPublicUser:0,wsUpdatesPerSessionRateLimit:"",cassandraQueryTenantRateLimitsConfiguration:"",defaultStorageTtlDays:0,alarmsTtlDays:0,rpcTtlDays:0,queueStatsTtlDays:0,ruleEngineExceptionsTtlDays:0}),{type:Hh.DEFAULT})}return e},get widgetType(){return ws},widgetTypesData:Vs,widgetActionSources:{headerButton:{name:"widget-action.header-button",value:"headerButton",multiple:!0,hasShowCondition:!0}},fullWidgetTypeFqn:function(t){var e;return(t.tenantId&&(null===(e=t.tenantId)||void 0===e?void 0:e.id)!==cr?"tenant":"system")+"."+t.fqn},widgetTypeFqn:function(t){if(kr(t)){var e=t.split(".");if(e.length>1){var n=e[0];if(["system","tenant"].includes(n))return t.substring(n.length+1)}}return t},isValidWidgetFullFqn:function(t){if(kr(t)){var e=t.split(".");if(e.length>1){var n=e[0];return["system","tenant"].includes(n)}}return!1},get DeprecatedFilter(){return Fs},get LegendDirection(){return Ws},legendDirectionTranslationMap:Ys,get LegendPosition(){return js},legendPositions:Bs,legendPositionTranslationMap:Ks,defaultLegendConfig:function(t){return{direction:Ws.column,position:js.bottom,sortDataKeys:!1,showMin:!1,showMax:!1,showAvg:t===ws.timeseries,showTotal:!1,showLatest:!1}},get ComparisonResultType(){return Hs},comparisonResultTypeTranslationMap:zs,dataKeyAggregationTypeHintTranslationMap:Qs,get DataKeyConfigMode(){return Gs},get DatasourceType(){return qs},datasourceTypeTranslationMap:Xs,datasourceValid:function(t){var e=null==t?void 0:t.type;if(e)switch(e){case qs.function:case qs.alarmCount:return!0;case qs.device:return!!t.deviceId;case qs.entity:case qs.entityCount:return!!t.entityAliasId}return!1},get TargetDeviceType(){return Js},targetDeviceValid:tu,datasourcesHasAggregation:eu,datasourcesHasOnlyComparisonAggregation:function(t){if(!eu(t))return!1;if(t){var e=t.find((function(t){var e=t.dataKeys&&t.dataKeys.find((function(t){return(null==t?void 0:t.type)===Va.timeseries&&(null==t?void 0:t.aggregationType)&&t.aggregationType!==es.NONE&&!t.comparisonEnabled}));return!!e}));if(e)return!1}return!0},get WidgetActionType(){return $s},get WidgetMobileActionType(){return Zs},widgetActionTypes:iu,widgetActionTypeTranslationMap:ru,widgetMobileActionTypeTranslationMap:au,actionDescriptorToAction:function(t){var e=de({},t);return delete e.id,delete e.name,delete e.icon,delete e.displayName,delete e.useShowWidgetActionFunction,delete e.showWidgetActionFunction,delete e.columnIndex,e},defaultWidgetAction:function(t){return void 0===t&&(t=!0),{type:$s.updateDashboardState,targetDashboardStateId:null,openRightLayout:!1,setEntityId:t,stateEntityParamName:null}},isDataKeySettingsWithComparison:ou,get WidgetConfigMode(){return nu},get EntityKeyType(){return ml},entityKeyTypeTranslationMap:El,entityKeyTypeToDataKeyType:bl,dataKeyTypeToEntityKeyType:Sl,dataKeyToEntityKey:_l,get EntityKeyValueType(){return Tl},entityKeyValueTypesMap:Il,entityKeyValueTypeToFilterPredicateType:Dl,createDefaultFilterPredicateInfo:function(t,e){return{keyFilterPredicate:Nl(t,e),userInfo:{editable:!0,label:"",autogeneratedLabel:!0,order:0}}},createDefaultFilterPredicateUserInfo:Rl,createDefaultFilterPredicate:Nl,getDynamicSourcesForAllowUser:function(t){var e=[Pl.CURRENT_TENANT,Pl.CURRENT_CUSTOMER];return t?e.push(Pl.CURRENT_USER):e.push(Pl.CURRENT_DEVICE),e},get FilterPredicateType(){return Al},get StringOperation(){return wl},stringOperationTranslationMap:Cl,get NumericOperation(){return Ol},numericOperationTranslationMap:kl,get BooleanOperation(){return Ml},booleanOperationTranslationMap:Ul,get ComplexOperation(){return Ll},complexOperationTranslationMap:xl,get DynamicValueSourceType(){return Pl},dynamicValueSourceTypeTranslationMap:Fl,inheritModeForDynamicValueSourceType:Wl,keyFiltersToText:function(t,e,n){var i,r=n.map((function(i){return Vl(t,e,i,n.length>1?Ll.AND:void 0)}));if(r.length>1){var a=t.instant("filter.operation.and");i=r.join(' <span class="tb-filter-complex-operation">'+a+"</span> ")}else i=r[0];return i},keyFilterToText:Vl,keyFilterPredicateToText:jl,keyFilterInfosToKeyFilters:function(t){var e,n,i,r;if(!t)return[];var a=[];try{for(var o=ve(t),s=o.next();!s.done;s=o.next()){var u=s.value,c=u.key;try{for(var l=(i=void 0,ve(u.predicates)),p=l.next();!p.done;p=l.next()){var d=p.value,f={key:c,valueType:u.valueType,value:u.value,predicate:Hl(d)};a.push(f)}}catch(t){i={error:t}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return a},keyFiltersToKeyFilterInfos:function(t){var e,n,i=[],r={};if(t)try{for(var a=ve(t),o=a.next();!o.done;o=a.next()){var s=o.value,u=s.key,c=u.key+u.type+s.valueType,l=r[c];l||(l={key:u,valueType:s.valueType,value:s.value,predicates:[]},r[c]=l,i.push(l)),s.predicate&&l.predicates.push(Bl(s.predicate))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i},filterInfoToKeyFilters:Yl,keyFilterPredicateInfoToKeyFilterPredicate:Hl,keyFilterPredicateToKeyFilterPredicateInfo:Bl,isFilterEditable:function(t){return!!t.editable&&t.keyFilters.some((function(t){return Kl(t)}))},isKeyFilterInfoEditable:Kl,isPredicateInfoEditable:Gl,filterToUserFilterInfoList:function(t,e){var n=t.keyFilters.map((function(t){return ql(t,e)})),i=[].concat.apply([],n);return i=i.sort((function(t,e){return(Or(t.info.userInfo.order)?t.info.userInfo.order:0)-(Or(e.info.userInfo.order)?e.info.userInfo.order:0)}))},keyFilterInfoToUserFilterInfoList:ql,predicateInfoToUserFilterInfoList:zl,generateUserFilterValueLabel:Ql,alarmFilterConfigEquals:function(t,e){return t===e||(!(!Nr(t)&&!Xr(t)||!Nr(e)&&!Xr(e))||!(!Cr(t)||!Cr(e))&&(!!Zr(t.typeList,e.typeList)&&(!!Zr(t.statusList,e.statusList)&&(!!Zr(t.severityList,e.severityList)&&(!!$r(t.assigneeId,e.assigneeId)&&(!!$r(t.searchPropagatedAlarms,e.searchPropagatedAlarms)&&!!$r(t.assignedToCurrentUser,e.assignedToCurrentUser)))))))},entityDataPageLinkSortDirection:function(t){return t.sortOrder?(t.sortOrder.direction+"").toLowerCase():""},createDefaultEntityDataPageLink:Jl,singleEntityDataPageLink:Xl,singleEntityFilterFromDeviceId:$l,entityPageDataChanged:Zl,entityInfoFields:ip,entityDataToEntityInfo:rp,updateDatasourceFromEntityInfo:ap,AliasController:Kh,DataAggregator:Yp,EntityDataService:Bp,EntityDataSubscription:Hp,AlarmDataSubscription:Cp,AlarmDataService:Mp,WidgetSubscriptionContext:Kp,WidgetSubscription:Jp,AlarmCommentService:Gh,defaultHttpOptionsFromConfig:nr,defaultHttpOptions:ir,defaultHttpUploadOptions:rr,ResourceService:Ep,APP_PREFIX:gc,LocalStorageService:vc,RafService:td,TimeService:Zp,UtilsService:mc,TelemetryWebsocketService:Op,WebsocketService:Np,onParentScrollOrWindowResize:function(t){var e=new nn,n=function(t){if(!(t instanceof HTMLElement||t instanceof SVGElement))return[];var e=[];Kr(t,[]).forEach((function(t){(function(t){return t instanceof Element&&Br.test(function(t){return Gr(t,"overflow")+Gr(t,"overflow-y")+Gr(t,"overflow-x")}(t))})(t)&&e.push(t)})),document.scrollingElement?e.push(document.scrollingElement):document.documentElement&&e.push(document.documentElement);return e}(t),i={handleEvent:function(t){e.next(t)}};return n.forEach((function(t){t.addEventListener("scroll",i)})),window.addEventListener("resize",i),e.pipe(oi((function(){n.forEach((function(t){t.removeEventListener("scroll",i)})),window.removeEventListener("resize",i)})),function(t){void 0===t&&(t={});var e=t.connector,n=void 0===e?function(){return new nn}:e,i=t.resetOnError,r=void 0===i||i,a=t.resetOnComplete,o=void 0===a||a,s=t.resetOnRefCountZero,u=void 0===s||s;return function(t){var e,i,a,s=0,c=!1,l=!1,p=function(){null==i||i.unsubscribe(),i=void 0},d=function(){p(),e=a=void 0,c=l=!1},f=function(){var t=e;d(),null==t||t.unsubscribe()};return Je((function(t,h){s++,l||c||p();var y=a=null!=a?a:n();h.add((function(){0!=--s||l||c||(i=ui(f,u))})),y.subscribe(h),!e&&s>0&&(e=new Ye({next:function(t){return y.next(t)},error:function(t){l=!0,p(),i=ui(d,r,t),y.error(t)},complete:function(){c=!0,p(),i=ui(d,o),y.complete()}}),Dn(t).subscribe(e))}))(t)}}())},isLocalUrl:function(t){var e=document.createElement("a");e.href=t;var n=e.hostname;return"localhost"===n||"127.0.0.1"===n},animatedScroll:function(t,e,n){var i=0,r=t.scrollTop,a=e,o=n||0,s=a-r,u=function(){0===o?t.scrollTop=a:(i+=20,t.scrollTop=function(t,e,n,i){if(t/=i/2,t<1)return n/2*t*t+e;return t--,-n/2*(t*(t-2)-1)+e}(i,r,s,o),i<o&&setTimeout(u,20))};u()},isUndefined:Rr,isUndefinedOrNull:Nr,isDefined:Or,isDefinedAndNotNull:Cr,isEmptyStr:Mr,isNotEmptyStr:kr,isFunction:function(t){return"function"==typeof t},isObject:Lr,isNumber:Ur,isNumeric:Pr,isBoolean:function(t){return"boolean"==typeof t},isString:xr,isLiteralObject:function(t){return!!t&&t.constructor===Object},formatValue:Fr,formatNumberValue:function(t,e){if(Cr(t)&&Pr(t)){var n=Number(t);return Cr(e)&&(n=n.toFixed(e)),Number(n)}},objectValues:function(t){return Object.keys(t).map((function(e){return t[e]}))},deleteNullProperties:function t(e){Rr(e)||null==e||Object.keys(e).forEach((function(n){null===e[n]||Rr(e[n])?delete e[n]:Lr(e[n])?t(e[n]):e[n]instanceof Array&&e[n].forEach((function(e){t(e)}))}))},objToBase64:Wr,base64toString:Vr,objToBase64URI:jr,base64toObj:Yr,stringToBase64:function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})))},blobToBase64:Hr,hashCode:qr,objectHashCode:zr,deepClone:Qr,extractType:function(t,e){return ur.pick(t,e)},isEqual:Jr,isEmpty:Xr,unset:function(t,e){return ur.unset(t,e)},setByPath:function(t,e,n){return ur.set(t,e,n)},isEqualIgnoreUndefined:$r,isArraysEqualIgnoreUndefined:Zr,mergeDeep:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return ur.merge.apply(ur,Ee([t],Te(e),!1))},guid:ta,snakeCase:function(t,e){return e=e||"_",t.replace(ea,(function(t,n){return(n?e:"")+t.toLowerCase()}))},getDescendantProp:na,insertVariable:function(t,e,n){for(var i=t,r=Dr.exec(t);null!==r;){var a=r[0];r[1]===e&&(i=i.replace(a,n)),r=Dr.exec(t)}return i},createLabelFromDatasource:ia,createLabelFromSubscriptionEntityInfo:function(t,e){var n=e;if(!t)return n;for(var i=Dr.exec(e);null!==i;){var r=i[0],a=i[1];"dsName"===a||"entityName"===a||"deviceName"===a?n=n.replace(r,t.entityName):"entityLabel"===a?n=n.replace(r,t.entityLabel||t.entityName):"aliasName"===a?n=n.replace(r,t.entityName):"entityDescription"===a&&(n=n.replace(r,t.entityDescription)),i=Dr.exec(e)}return n},hasDatasourceLabelsVariables:function(t){return null!==Dr.test(t)},formattedDataFormDatasourceData:ra,formattedDataArrayFromDatasourceData:function(t){return ur(t).groupBy((function(t){return t.datasource.entityName})).values().value().map((function(t,e){var n={};return t.filter((function(t){return t.data.length})).forEach((function(t){t.data.forEach((function(i){var r=i[0],a=i[1],o=n[r];o||((o=aa(t.datasource,e)).time=r,n[r]=o);o[t.dataKey.label]=a,o[t.dataKey.label+"|ts"]=r,"type"===t.dataKey.label.toLowerCase()&&(o.deviceType=a)}))})),ur.values(n)}))},formattedDataFromDatasource:aa,flatFormattedData:oa,flatDataWithoutOverride:function(t){var e={};return t.forEach((function(t){Object.keys(t).forEach((function(n){Cr(e[n])&&!Mr(e[n])||(e[n]=t[n])}))})),e},mergeFormattedData:function(t,e){var n=t.concat(e);return ur(n).groupBy((function(t){return t.$datasource})).values().value().map((function(t,e){var n=t[0];if(t.length>1){var i=t[1];n=de(de({},n),i)}return n}))},processDataPattern:sa,fillDataPattern:ua,createLabelFromPattern:ca,parseFunction:function(t,e){void 0===e&&(e=["def"]);var n=null;if(null==t?void 0:t.length)try{n=new(Function.bind.apply(Function,Ee(Ee([void 0],Te(e),!1),[t],!1)))}catch(t){n=null}return n},safeExecute:function(t,e){void 0===e&&(e=[]);var n=null;if(t&&"function"==typeof t)try{n=t.apply(void 0,Ee([],Te(e),!1))}catch(t){console.log("error in external function:",t),n=null}return n},padValue:la,baseUrl:pa,sortObjectKeys:function(t){return Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{})},deepTrim:function t(e){return Ur(e)||Rr(e)||xr(e)||null===e||e instanceof File?e:Object.keys(e).reduce((function(n,i){return xr(e[i])?n[i]=e[i].trim():Lr(e[i])?n[i]=t(e[i]):n[i]=e[i],n}),Array.isArray(e)?[]:{})},generateSecret:da,validateEntityId:function(t){return Cr(null==t?void 0:t.id)&&t.id!==cr&&Cr(null==t?void 0:t.entityType)},isMobileApp:function(){return Or(window.flutter_inappwebview)},randomAlphanumeric:function(t){for(var e="",n=0;n<t;n++)e+=fa.charAt(Math.floor(62*Math.random()));return e},getEntityDetailsPageURL:ha,parseHttpErrorMessage:ya,genNextLabel:function(t,e){var n=t,i=1,r=!1;if(e)do{r=!1,e.forEach((function(e){e&&(e.dataKeys&&e.dataKeys.forEach((function(e){(null==e?void 0:e.label)===n&&(i++,n=t+" "+i,r=!0)})),e.latestDataKeys&&e.latestDataKeys.forEach((function(e){(null==e?void 0:e.label)===n&&(i++,n=t+" "+i,r=!0)})))}))}while(r);return n},getOS:function(){var t=window.navigator.userAgent.toLowerCase(),e=null;return/(macintosh|macintel|macppc|mac68k|macos|mac_powerpc)/i.test(t)?e="macos":/(iphone|ipad|ipod|darwin|ios)/i.test(t)?e="ios":/(win32|win64|windows|wince)/i.test(t)?e="windows":/android/.test(t)?e="android":/linux/.test(t)&&(e="linux"),e},camelCase:function(t){return ur.camelCase(t)},convertKeysToCamelCase:function(t){return ur.mapKeys(t,(function(t,e){return ur.camelCase(e)}))},httpContainer:Xi,HttpErrorResponse:Ni,HttpClient:Ci,HttpHeaders:hi,HttpParams:vi,mainContainer:Jd,NgZone:Ta,TranslateService:Ea}),by=function(){function t(){}var e;return t.subscribeCount=function(){return this.unsubscribeCount(),this.notificationCountSubscriber=Ko.createNotificationCountSubscription(this.notificationWsService,null),this.notificationCountSubscriber.subscribe(),this.notificationCountSubscriber.notificationCount$.pipe(ci(1))},t.unsubscribeCount=function(){this.notificationCountSubscriber&&(this.notificationCountSubscriber.unsubscribe(),this.notificationCountSubscriber=null)},t.subscribeMessage=function(t){var e=this;return this.unsubscribeMessage(),this.notificationSubscriber=Ko.createNotificationsSubscription(this.notificationWsService,null,t),this.countSubscription=this.notificationSubscriber.notificationCount$.pipe(ci(1)).subscribe((function(t){return e.countSubject.next(t)})),this.notificationSubscriber.subscribe(),this.notificationSubscriber.notifications$.pipe(xn((function(t){return Array.isArray(t)?t:[]}))).pipe(ci(1))},e=t,t.notificationWsService=vy,t.countSubject=new an(0),t.unsubscribeMessage=function(){e.notificationSubscriber&&(e.countSubscription.unsubscribe(),e.notificationSubscriber.unsubscribe())},t}(),Sy=function(){function t(){}return t.subscribeSingleAndListEntityInfo=function(t,e,n){var i,r=this,a=n&&n.pageSize&&"number"==typeof n.pageSize?n.pageSize:null,o=n&&n.pageSize&&"object"==typeof n.pageSize?n.pageSize:null;return fy.createSubscriptionFromInfo({type:(null==n?void 0:n.widgetType)||ws.latest,hasDataPageLink:!!o,timeWindowConfig:n.timeWindowConfig?n.timeWindowConfig:null,callbacks:{onDataUpdated:function(t){r.onDataUpdatedSubject.next(t)}}},this.toSubscriptionsInfo(t,e,null==n?void 0:n.datasourceType,a),!o).subscribe((function(t){i=t,o&&t.subscribeForPaginatedData(0,o,[])})),this.onDataUpdatedSubject.asObservable().pipe(xn((function(t){return t.data})),oi((function(){i&&i.destroy()})))},t.subscribeEntityInfoPublic=function(t,e){var n=this;((null==e?void 0:e.dataKeys)||[]).map((function(t){t.settings||(t.settings={})})),((null==e?void 0:e.latestDataKeys)||[]).map((function(t){t.settings||(t.settings={}),t.label="latest_"+t.name}));var i={type:qs.entity,dataKeys:e.dataKeys||[],latestDataKeys:e.latestDataKeys||[]};return this.createEntityFilter(i,t),e.isPage?fy.subscribeForPaginatedData(e.widgetType||ws.latest,i,e.pageLink,e.keyFilters||[],e.timeWindowConfig).pipe(xn((function(t){if(e.timeWindowConfig)return t.data;var i=t.datasourcePages[0],r=t.dataPages[0],a=new Array;return i.data.forEach((function(t,i){var o=n.datasourceToEntityData(t,r.data[i],e.dataKeys);a.push(o)})),{data:a,totalPages:i.totalPages,totalElements:i.totalElements,hasNext:i.hasNext}}))):(e.pageLink&&(i.pageLink=e.pageLink),e.keyFilters&&(i.keyFilters=e.keyFilters),fy.subscribeData(e.widgetType||ws.timeseries,i,e.timeWindowConfig).pipe(xn((function(t){var e=t.datasourcePages[0],n=t.dataPages[0],i=new Array;return e.data.forEach((function(t,e){var r={entityId:t.entityId,entityName:t.entityName,entityLabel:t.entityLabel};n.data[e].forEach((function(t){r[t.dataKey.label]=t.data})),i.push(r)})),{data:i,totalPages:e.totalPages,totalElements:e.totalElements,hasNext:e.hasNext}}))))},t.createEntityFilter=function(t,e){var n=e.type;switch(n){case Mc.singleEntity:return t.entityFilter={type:n,singleEntity:{entityType:e.entityType,id:e.id}},t;case Mc.entityList:return t.entityFilter={type:n,entityType:e.entityType,entityList:e.entityList},t;case Mc.entityName:return t.entityFilter={type:n,entityType:e.entityType,entityNameFilter:e.entityNameFilter},t;case Mc.entityType:return t.entityFilter={type:n,entityType:e.entityType},t;case Mc.stateEntity:return t.stateEntity=!0,t.entityFilter={type:n,stateEntityParamName:e.stateEntityParamName,defaultStateEntity:{entityType:e.entityType,id:e.id}},t;case Mc.assetType:return t.entityFilter={type:n,assetTypes:e.assetTypes,assetNameFilter:e.assetNameFilter},t;case Mc.deviceType:return t.entityFilter={type:n,deviceTypes:e.deviceTypes,deviceNameFilter:e.deviceNameFilter},t;case Mc.entityViewType:return t.entityFilter={type:n,entityViewTypes:e.entityViewTypes,entityViewNameFilter:e.entityViewNameFilter},t;case Mc.edgeType:return t.entityFilter={type:n,edgeTypes:e.edgeTypes,edgeNameFilter:e.edgeNameFilter},t;case Mc.relationsQuery:case Mc.assetSearchQuery:case Mc.deviceSearchQuery:case Mc.edgeSearchQuery:case Mc.entityViewSearchQuery:return t.entityFilter={stateEntityParamName:e.stateEntityParamName,defaultStateEntity:null,rootStateEntity:e.rootStateEntity,rootEntity:{entityType:e.entityType,id:e.id},direction:e.direction,maxLevel:e.maxLevel,fetchLastLevelOnly:e.fetchLastLevelOnly,type:n},n===Mc.relationsQuery?t.entityFilter.filters=e.filters||[]:(t.entityFilter.relationType=e.relationType,n===Mc.assetSearchQuery?t.entityFilter.assetTypes=e.assetTypes:n===Mc.deviceSearchQuery?t.entityFilter.deviceTypes=e.deviceTypes:n===Mc.edgeSearchQuery?t.entityFilter.edgeTypes=e.edgeTypes:n===Mc.entityViewSearchQuery&&(t.entityFilter.entityViewTypes=e.entityViewTypes)),t}},t.datasourceToEntityData=function(t,e,n){var i={entityId:"",entityName:t.entityName,entityLabel:t.entityLabel};return t.entityId&&(i.entityId=t.entityId),t.entityType?i.entityType=t.entityType:i.entityType="",i.ts={},n.forEach((function(t,n){var r=e[n].data;r&&r.length&&r[0].length>1?e[n].dataKey.type===Va.entityField&&i.hasOwnProperty(t.name)||(i[t.name]=r[0][1],i.ts[t.name]=r[0][0]):i[t.name]=""})),i},t.toSubscriptionsInfo=function(t,e,n,i){var r=[{type:n||qs.entity,entityType:t.entityType,attributes:e.attributes||[],timeseries:e.timeseries||[]}];switch(e.alarmFields&&(r[0].alarmFields=e.alarmFields),t.type){case Mc.singleEntity:r[0].entityId=t.id;break;case Mc.entityList:r[0].entityIds=t.entityList}return i&&(r[0].pageSize=i),r},t.findEntityKeysByQuery=function(t,e,n){var i=this.createEntityFilter({pageLink:null},t);return i.pageLink={page:0,pageSize:100,sortOrder:{direction:hc.DESC,key:{key:"createdTime",type:ml.ENTITY_FIELD}}},uy.findEntityKeysByQuery(i,e,n)},t.onDataUpdatedSubject=new nn,t}();exports.EntitySubscriptionService=Sy,exports.NotificationSubscriptionService=by,exports.Observable=qe,exports.default=Ey;
