var t,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t){!function(){var n="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=r(t);function r(t,e){return function(n,i){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:i}),e&&e(n,i)}}void 0===n.Reflect?n.Reflect=t:i=r(n.Reflect,i),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,o={__proto__:[]}instanceof Array,s=!a&&!o,u={create:a?function(){return it(Object.create(null))}:o?function(){return it({__proto__:null})}:function(){return it({})},has:s?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:s?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,d=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,f=new(l||"function"!=typeof WeakMap?nt():WeakMap);function h(t,e,n,i){if(U(n)){if(!B(t))throw new TypeError;if(!G(e))throw new TypeError;return A(t,e)}if(!B(t))throw new TypeError;if(!F(e))throw new TypeError;if(!F(i)&&!U(i)&&!P(i))throw new TypeError;return P(i)&&(i=void 0),w(t,e,n=H(n),i)}function y(t,e){function n(n,i){if(!F(n))throw new TypeError;if(!U(i)&&!q(i))throw new TypeError;C(t,e,n,i)}return n}function m(t,e,n,i){if(!F(n))throw new TypeError;return U(i)||(i=H(i)),C(t,e,n,i)}function g(t,e,n){if(!F(e))throw new TypeError;return U(n)||(n=H(n)),D(t,e,n)}function v(t,e,n){if(!F(e))throw new TypeError;return U(n)||(n=H(n)),R(t,e,n)}function T(t,e,n){if(!F(e))throw new TypeError;return U(n)||(n=H(n)),N(t,e,n)}function E(t,e,n){if(!F(e))throw new TypeError;return U(n)||(n=H(n)),O(t,e,n)}function b(t,e){if(!F(t))throw new TypeError;return U(e)||(e=H(e)),M(t,e)}function S(t,e){if(!F(t))throw new TypeError;return U(e)||(e=H(e)),k(t,e)}function _(t,e,n){if(!F(e))throw new TypeError;U(n)||(n=H(n));var i=I(e,n,!1);if(U(i))return!1;if(!i.delete(t))return!1;if(i.size>0)return!0;var r=f.get(e);return r.delete(n),r.size>0||f.delete(e),!0}function A(t,e){for(var n=t.length-1;n>=0;--n){var i=(0,t[n])(e);if(!U(i)&&!P(i)){if(!G(i))throw new TypeError;e=i}}return e}function w(t,e,n,i){for(var r=t.length-1;r>=0;--r){var a=(0,t[r])(e,n,i);if(!U(a)&&!P(a)){if(!F(a))throw new TypeError;i=a}}return i}function I(t,e,n){var i=f.get(t);if(U(i)){if(!n)return;i=new p,f.set(t,i)}var r=i.get(e);if(U(r)){if(!n)return;r=new p,i.set(e,r)}return r}function D(t,e,n){if(R(t,e,n))return!0;var i=Z(e);return!P(i)&&D(t,i,n)}function R(t,e,n){var i=I(e,n,!1);return!U(i)&&j(i.has(t))}function N(t,e,n){if(R(t,e,n))return O(t,e,n);var i=Z(e);return P(i)?void 0:N(t,i,n)}function O(t,e,n){var i=I(e,n,!1);if(!U(i))return i.get(t)}function C(t,e,n,i){I(n,i,!0).set(t,e)}function M(t,e){var n=k(t,e),i=Z(t);if(null===i)return n;var r=M(i,e);if(r.length<=0)return n;if(n.length<=0)return r;for(var a=new d,o=[],s=0,u=n;s<u.length;s++){var c=u[s];a.has(c)||(a.add(c),o.push(c))}for(var l=0,p=r;l<p.length;l++){c=p[l];a.has(c)||(a.add(c),o.push(c))}return o}function k(t,e){var n=[],i=I(t,e,!1);if(U(i))return n;for(var r=Q(i.keys()),a=0;;){var o=X(r);if(!o)return n.length=a,n;var s=J(o);try{n[a]=s}catch(t){try{$(r)}finally{throw t}}a++}}function L(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function U(t){return void 0===t}function P(t){return null===t}function x(t){return"symbol"==typeof t}function F(t){return"object"==typeof t?null!==t:"function"==typeof t}function W(t,e){switch(L(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=z(t,i);if(void 0!==r){var a=r.call(t,n);if(F(a))throw new TypeError;return a}return V(t,"default"===n?"number":n)}function V(t,e){if("string"===e){var n=t.toString;if(K(n))if(!F(r=n.call(t)))return r;if(K(i=t.valueOf))if(!F(r=i.call(t)))return r}else{var i;if(K(i=t.valueOf))if(!F(r=i.call(t)))return r;var r,a=t.toString;if(K(a))if(!F(r=a.call(t)))return r}throw new TypeError}function j(t){return!!t}function Y(t){return""+t}function H(t){var e=W(t,3);return x(e)?e:Y(e)}function B(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function K(t){return"function"==typeof t}function G(t){return"function"==typeof t}function q(t){switch(L(t)){case 3:case 4:return!0;default:return!1}}function z(t,e){var n=t[e];if(null!=n){if(!K(n))throw new TypeError;return n}}function Q(t){var e=z(t,r);if(!K(e))throw new TypeError;var n=e.call(t);if(!F(n))throw new TypeError;return n}function J(t){return t.value}function X(t){var e=t.next();return!e.done&&e}function $(t){var e=t.return;e&&e.call(t)}function Z(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var n=t.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return e;var r=i.constructor;return"function"!=typeof r||r===t?e:r}function tt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[r]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,i)},e.prototype.values=function(){return new n(this._keys,this._values,a)},e.prototype.entries=function(){return new n(this._keys,this._values,o)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[r]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function i(t,e){return t}function a(t,e){return e}function o(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new p}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[r]=function(){return this.keys()},t}()}function nt(){var t=16,n=u.create(),i=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=a(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=a(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return a(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=a(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var t;do{t="@@WeakMap@@"+c()}while(u.has(n,t));return n[t]=!0,t}function a(t,n){if(!e.call(t,i)){if(!n)return;Object.defineProperty(t,i,{value:u.create()})}return t[i]}function o(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t)}function c(){var e=s(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",i=0;i<t;++i){var r=e[i];4!==i&&6!==i&&8!==i||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}function it(t){return t.__=void 0,delete t.__,t}t("decorate",h),t("metadata",y),t("defineMetadata",m),t("hasMetadata",g),t("hasOwnMetadata",v),t("getMetadata",T),t("getOwnMetadata",E),t("getMetadataKeys",b),t("getOwnMetadataKeys",S),t("deleteMetadata",_)}(i)}()}(t||(t={}));var n="named",i="name",r="unmanaged",a="optional",o="inject",s="multi_inject",u="inversify:tagged",c="inversify:tagged_props",l="inversify:paramtypes",p="post_construct",d="pre_destroy";var f=[o,s,i,r,n,a],h={Request:"Request",Singleton:"Singleton",Transient:"Transient"},y={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},m={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},g=0;function v(){return g++}var T=function(){function t(t,e){this.id=v(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=y.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===h.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e},t}(),E="Metadata key was used more than once in a parameter:",b="NULL argument",S="Key Not Found",_="Ambiguous match found for serviceIdentifier:",A="No matching bindings found for serviceIdentifier:",w="Missing required @injectable annotation in:",I="Missing required @inject or @multiInject annotation in:",D="Circular dependency found:",R="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",N=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},O=function(t,e){return"@postConstruct error in class "+t+": "+e},C=function(t,e){return"@preDestroy error in class "+t+": "+e},M=function(t,e){return"onDeactivation() error in class "+t+": "+e},k="Maximum call stack size exceeded",L=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(l,t),userGeneratedMetadata:Reflect.getMetadata(u,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(c,t)||[]},t}(),U={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function P(t){return t instanceof RangeError||t.message===k}function x(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function F(t,e,n){var i="",r=n(t,e);return 0!==r.length&&(i="\nRegistered bindings:",r.forEach((function(t){var e="Object";null!==t.implementationType&&(e=j(t.implementationType)),i=i+"\n "+e,t.constraint.metaData&&(i=i+" - "+t.constraint.metaData)}))),i}function W(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||W(t.parentRequest,e))}function V(t){t.childRequests.forEach((function(t){if(W(t,t.serviceIdentifier)){var e=function(t){var e=function t(e,n){void 0===n&&(n=[]);var i=x(e.serviceIdentifier);return n.push(i),null!==e.parentRequest?t(e.parentRequest,n):n}(t);return e.reverse().join(" --\x3e ")}(t);throw new Error(D+" "+e)}V(t)}))}function j(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}var Y=function(){function t(t){this.id=v(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}(),H=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===n?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},t}(),B=function(t,e){this.parentContext=t,this.rootRequest=e},K=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}(),G=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}(),q=function(){function t(t,e,i,r){this.id=v(),this.type=t,this.serviceIdentifier=i;var a="symbol"==typeof e?e.toString().slice(7,-1):e;this.name=new G(a||""),this.identifier=e,this.metadata=new Array;var o=null;"string"==typeof r?o=new H(n,r):r instanceof H&&(o=r),null!==o&&this.metadata.push(o)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(s)},t.prototype.matchesArray=function(t){return this.matchesTag(s)(t)},t.prototype.isNamed=function(){return this.hasTag(n)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return f.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag(a)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===n}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return f.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(n)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var i=0,r=e.metadata;i<r.length;i++){var a=r[i];if(a.key===t&&a.value===n)return!0}return!1}},t}(),z=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,a=e.length;r<a;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};function Q(t,e,n,i){var r=t.getConstructorMetadata(n),a=r.compilerGeneratedMetadata;if(void 0===a)throw new Error(w+" "+e+".");var o=r.userGeneratedMetadata,s=Object.keys(o),u=0===n.length&&s.length>0,c=s.length>n.length,l=function(t,e,n,i,r){for(var a=[],o=0;o<r;o++){var s=J(o,t,e,n,i);null!==s&&a.push(s)}return a}(i,e,a,o,u||c?s.length:n.length),p=$(t,n,e);return z(z([],l,!0),p,!0)}function J(t,e,n,i,r){var a=r[t.toString()]||[],o=tt(a),s=!0!==o.unmanaged,u=i[t],c=o.inject||o.multiInject;if((u=c||u)instanceof K&&(u=u.unwrap()),s){if(!e&&(u===Object||u===Function||void 0===u))throw new Error(I+" argument "+t+" in class "+n+".");var l=new q(m.ConstructorArgument,o.targetName,u);return l.metadata=a,l}return null}function X(t,e,n,i){var r=t||e;if(void 0===r){var a=w+" for property "+String(n)+" in class "+i+".";throw new Error(a)}return r}function $(t,e,n){for(var i=t.getPropertiesMetadata(e),r=[],a=Object.getOwnPropertySymbols(i),o=0,s=Object.keys(i).concat(a);o<s.length;o++){var u=s[o],c=i[u],l=tt(c),p=l.targetName||u,d=X(l.inject,l.multiInject,u,n),f=new q(m.ClassProperty,p,d);f.metadata=c,r.push(f)}var h=Object.getPrototypeOf(e.prototype).constructor;if(h!==Object){var y=$(t,h,n);r=z(z([],r,!0),y,!0)}return r}function Z(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var i=Q(t,j(n),n,!0),a=i.map((function(t){return t.metadata.filter((function(t){return t.key===r}))})),o=[].concat.apply([],a).length,s=i.length-o;return s>0?s:Z(t,n)}return 0}function tt(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[o],multiInject:e[s],targetName:e[i],unmanaged:e[r]}}var et=function(){function t(t,e,n,i,r){this.id=v(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=r,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,i){var r=new t(e,this.parentContext,this,n,i);return this.childRequests.push(r),r},t}();function nt(t){return t._bindingDictionary}function it(t,e,n,i,r){var a=at(n.container,r.serviceIdentifier),o=[];return a.length===U.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof r.serviceIdentifier&&t.getConstructorMetadata(r.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(r.serviceIdentifier).toSelf(),a=at(n.container,r.serviceIdentifier)),o=e?a:a.filter((function(t){var e=new et(t.serviceIdentifier,n,i,t,r);return t.constraint(e)})),function(t,e,n,i){switch(e.length){case U.NoBindingsAvailable:if(n.isOptional())return e;var r=x(t),a=A;throw a+=function(t,e){if(e.isTagged()||e.isNamed()){var n="",i=e.getNamedTag(),r=e.getCustomTags();return null!==i&&(n+=i.toString()+"\n"),null!==r&&r.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t}(r,n),a+=F(i,r,at),new Error(a);case U.OnlyOneBindingAvailable:return e;case U.MultipleBindingsAvailable:default:if(n.isArray())return e;r=x(t),a=_+" "+r;throw a+=F(i,r,at),new Error(a)}}(r.serviceIdentifier,o,r,n.container),o}function rt(t,e,n,i,r,a){var o,s;if(null===r){o=it(t,e,i,null,a),s=new et(n,i,null,o,a);var u=new B(i,s);i.addPlan(u)}else o=it(t,e,i,r,a),s=r.addChildRequest(a.serviceIdentifier,o,a);o.forEach((function(e){var n=null;if(a.isArray())n=s.addChildRequest(e.serviceIdentifier,e,a);else{if(e.cache)return;n=s}if(e.type===y.Instance&&null!==e.implementationType){var r=function(t,e){return Q(t,j(e),e,!1)}(t,e.implementationType);if(!i.container.options.skipBaseClassChecks){var o=Z(t,e.implementationType);if(r.length<o){var u=N(j(e.implementationType));throw new Error(u)}}r.forEach((function(e){rt(t,!1,e.serviceIdentifier,i,n,e)}))}}))}function at(t,e){var n=[],i=nt(t);return i.hasKey(e)?n=i.get(e):null!==t.parent&&(n=at(t.parent,e)),n}function ot(t,e,n,i,r,a,u,c){void 0===c&&(c=!1);var l=new Y(e),p=function(t,e,n,i,r,a){var u=new H(t?s:o,n),c=new q(e,i,n,u);if(void 0!==r){var l=new H(r,a);c.metadata.push(l)}return c}(n,i,r,"",a,u);try{return rt(t,c,r,l,null,p),l}catch(t){throw P(t)&&V(l.plan.rootRequest),t}}function st(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&"function"==typeof t.then}function ut(t){return!!st(t)||Array.isArray(t)&&t.some(st)}var ct,lt=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((i=i.apply(t,e||[])).next())}))},pt=function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},dt=function(t,e,n){t.has(e.id)||t.set(e.id,n)},ft=function(t,e){t.cache=e,t.activated=!0,st(e)&&ht(t,e)},ht=function(t,e){return lt(void 0,void 0,void 0,(function(){var n,i;return pt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e];case 1:return n=r.sent(),t.cache=n,[3,3];case 2:throw i=r.sent(),t.cache=null,t.activated=!1,i;case 3:return[2]}}))}))};!function(t){t.DynamicValue="toDynamicValue",t.Factory="toFactory",t.Provider="toProvider"}(ct||(ct={}));var yt=function(){return yt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},yt.apply(this,arguments)},mt=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((i=i.apply(t,e||[])).next())}))},gt=function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},vt=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,a=e.length;r<a;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};function Tt(t,e,n){var i;if(e.length>0){var r=function(t,e){return t.reduce((function(t,n){var i=e(n);return n.target.type===m.ConstructorArgument?t.constructorInjections.push(i):(t.propertyRequests.push(n),t.propertyInjections.push(i)),t.isAsync||(t.isAsync=ut(i)),t}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(e,n),a=yt(yt({},r),{constr:t});i=r.isAsync?function(t){return mt(this,void 0,void 0,(function(){var e,n;return gt(this,(function(i){switch(i.label){case 0:return[4,bt(t.constructorInjections)];case 1:return e=i.sent(),[4,bt(t.propertyInjections)];case 2:return n=i.sent(),[2,Et(yt(yt({},t),{constructorInjections:e,propertyInjections:n}))]}}))}))}(a):Et(a)}else i=new t;return i}function Et(t){var e,n=new((e=t.constr).bind.apply(e,vt([void 0],t.constructorInjections,!1)));return t.propertyRequests.forEach((function(e,i){var r=e.target.identifier,a=t.propertyInjections[i];e.target.isOptional()&&void 0===a||(n[r]=a)})),n}function bt(t){return mt(this,void 0,void 0,(function(){var e,n,i,r;return gt(this,(function(a){for(e=[],n=0,i=t;n<i.length;n++)r=i[n],Array.isArray(r)?e.push(Promise.all(r)):e.push(r);return[2,Promise.all(e)]}))}))}function St(t,e){var n=function(t,e){var n,i;if(Reflect.hasMetadata(p,t)){var r=Reflect.getMetadata(p,t);try{return null===(i=(n=e)[r.value])||void 0===i?void 0:i.call(n)}catch(e){if(e instanceof Error)throw new Error(O(t.name,e.message))}}}(t,e);return st(n)?n.then((function(){return e})):e}function _t(t,e){t.scope!==h.Singleton&&function(t,e){var n="Class cannot be instantiated in "+(t.scope===h.Request?"request":"transient")+" scope.";if("function"==typeof t.onDeactivation)throw new Error(M(e.name,n));if(Reflect.hasMetadata(d,e))throw new Error(C(e.name,n))}(t,e)}var At=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((i=i.apply(t,e||[])).next())}))},wt=function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},It=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,i=e.childRequests,r=e.target&&e.target.isArray(),a=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(r&&a)return i.map((function(e){return It(t)(e)}));if(!e.target.isOptional()||0!==n.length){var o=n[0];return Ot(t,e,o)}}},Dt=function(t,e){var n=function(t){switch(t.type){case y.Factory:return{factory:t.factory,factoryType:ct.Factory};case y.Provider:return{factory:t.provider,factoryType:ct.Provider};case y.DynamicValue:return{factory:t.dynamicValue,factoryType:ct.DynamicValue};default:throw new Error("Unexpected factory type "+t.type)}}(t);return function(t,e){try{return t()}catch(t){throw P(t)&&(t=e()),t}}((function(){return n.factory.bind(t)(e)}),(function(){return new Error((t=n.factoryType,i=e.currentRequest.serviceIdentifier.toString(),"It looks like there is a circular dependency in one of the '"+t+"' bindings. Please investigate bindings with service identifier '"+i+"'."));var t,i}))},Rt=function(t,e,n){var i,r=e.childRequests;switch(function(t){var e=null;switch(t.type){case y.ConstantValue:case y.Function:e=t.cache;break;case y.Constructor:case y.Instance:e=t.implementationType;break;case y.DynamicValue:e=t.dynamicValue;break;case y.Provider:e=t.provider;break;case y.Factory:e=t.factory}if(null===e){var n=x(t.serviceIdentifier);throw new Error("Invalid binding type: "+n)}}(n),n.type){case y.ConstantValue:case y.Function:i=n.cache;break;case y.Constructor:i=n.implementationType;break;case y.Instance:i=function(t,e,n,i){_t(t,e);var r=Tt(e,n,i);return st(r)?r.then((function(t){return St(e,t)})):St(e,r)}(n,n.implementationType,r,It(t));break;default:i=Dt(n,e.parentContext)}return i},Nt=function(t,e,n){var i=function(t,e){return e.scope===h.Singleton&&e.activated?e.cache:e.scope===h.Request&&t.has(e.id)?t.get(e.id):null}(t,e);return null!==i||function(t,e,n){e.scope===h.Singleton&&ft(e,n),e.scope===h.Request&&dt(t,e,n)}(t,e,i=n()),i},Ot=function(t,e,n){return Nt(t,n,(function(){var i=Rt(t,e,n);return i=st(i)?i.then((function(t){return Ct(e,n,t)})):Ct(e,n,i)}))};function Ct(t,e,n){var i,r=Mt(t.parentContext,e,n),a=Pt(t.parentContext.container),o=a.next();do{i=o.value;var s=t.parentContext,u=t.serviceIdentifier,c=Ut(i,u);r=st(r)?Lt(c,s,r):kt(c,s,r),o=a.next()}while(!0!==o.done&&!nt(i).hasKey(t.serviceIdentifier));return r}var Mt=function(t,e,n){return"function"==typeof e.onActivation?e.onActivation(t,n):n},kt=function(t,e,n){for(var i=t.next();!i.done;){if(st(n=i.value(e,n)))return Lt(t,e,n);i=t.next()}return n},Lt=function(t,e,n){return At(void 0,void 0,void 0,(function(){var i,r;return wt(this,(function(a){switch(a.label){case 0:return[4,n];case 1:i=a.sent(),r=t.next(),a.label=2;case 2:return r.done?[3,4]:[4,r.value(e,i)];case 3:return i=a.sent(),r=t.next(),[3,2];case 4:return[2,i]}}))}))},Ut=function(t,e){var n=t._activations;return n.hasKey(e)?n.get(e).values():[].values()},Pt=function(t){for(var e=[t],n=t.parent;null!==n;)e.push(n),n=n.parent;return{next:function(){var t=e.pop();return void 0!==t?{done:!1,value:t}:{done:!0,value:void 0}}}};var xt=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||xt(n,e))},Ft=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new H(t,e),n}},Wt=Ft(n),Vt=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var i=e.bindings[0].implementationType;return t===i}return!1}},jt=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new Yt(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=Wt(t),new Yt(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t&&(null!==t.target&&!t.target.isNamed()&&!t.target.isTagged())},new Yt(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=Ft(t)(e),new Yt(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return null!==e&&Vt(t)(e.parentRequest)},new Yt(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return null!==e&&Wt(t)(e.parentRequest)},new Yt(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&Ft(t)(e)(n.parentRequest)},new Yt(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return null!==e&&xt(e,Vt(t))},new Yt(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return null!==e&&!xt(e,Vt(t))},new Yt(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return null!==e&&xt(e,Wt(t))},new Yt(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return null!==e&&!xt(e,Wt(t))},new Yt(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&xt(n,Ft(t)(e))},new Yt(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&!xt(n,Ft(t)(e))},new Yt(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return null!==e&&xt(e,t)},new Yt(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return null!==e&&!xt(e,t)},new Yt(this._binding)},t}(),Yt=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new jt(this._binding)},t.prototype.onDeactivation=function(t){return this._binding.onDeactivation=t,new jt(this._binding)},t}(),Ht=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new jt(this._binding),this._bindingOnSyntax=new Yt(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},t}(),Bt=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=h.Request,new Ht(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=h.Transient,new Ht(this._binding)},t}(),Kt=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new jt(this._binding),this._bindingOnSyntax=new Yt(this._binding),this._bindingInSyntax=new Bt(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},t}(),Gt=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=y.Instance,this._binding.implementationType=t,new Kt(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=y.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=y.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new Kt(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=y.Constructor,this._binding.implementationType=t,this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=y.Factory,this._binding.factory=t,this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error("Value provided to function binding must be a function!");var e=this.toConstantValue(t);return this._binding.type=y.Function,this._binding.scope=h.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=y.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.toAutoNamedFactory=function(t){return this._binding.type=y.Factory,this._binding.factory=function(e){return function(n){return e.container.getNamed(t,n)}},new Ht(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=y.Provider,this._binding.provider=t,this._binding.scope=h.Singleton,new Ht(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}(),qt=function(){function t(){}return t.of=function(e,n,i,r,a){var o=new t;return o.bindings=e,o.middleware=n,o.deactivations=r,o.activations=i,o.moduleActivationStore=a,o},t}();var zt=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(b);if(null==e)throw new Error(b);var n=this._map.get(t);void 0!==n?n.push(e):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(b);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(S)},t.prototype.remove=function(t){if(null==t)throw new Error(b);if(!this._map.delete(t))throw new Error(S)},t.prototype.removeIntersection=function(t){var e=this;this.traverse((function(n,i){var r=t.hasKey(n)?t.get(n):void 0;if(void 0!==r){var a=i.filter((function(t){return!r.some((function(e){return t===e}))}));e._setValue(n,a)}}))},t.prototype.removeByCondition=function(t){var e=this,n=[];return this._map.forEach((function(i,r){for(var a=[],o=0,s=i;o<s.length;o++){var u=s[o];t(u)?n.push(u):a.push(u)}e._setValue(r,a)})),n},t.prototype.hasKey=function(t){if(null==t)throw new Error(b);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,"object"==typeof(i=t)&&null!==i&&"clone"in i&&"function"==typeof i.clone?t.clone():t);var i}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t.prototype._setValue=function(t,e){e.length>0?this._map.set(t,e):this._map.delete(t)},t}(),Qt=function(){function t(){this._map=new Map}return t.prototype.remove=function(t){if(this._map.has(t)){var e=this._map.get(t);return this._map.delete(t),e}return this._getEmptyHandlersStore()},t.prototype.addDeactivation=function(t,e,n){this._getModuleActivationHandlers(t).onDeactivations.add(e,n)},t.prototype.addActivation=function(t,e,n){this._getModuleActivationHandlers(t).onActivations.add(e,n)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){e._map.set(n,{onActivations:t.onActivations.clone(),onDeactivations:t.onDeactivations.clone()})})),e},t.prototype._getModuleActivationHandlers=function(t){var e=this._map.get(t);return void 0===e&&(e=this._getEmptyHandlersStore(),this._map.set(t,e)),e},t.prototype._getEmptyHandlersStore=function(){return{onActivations:new zt,onDeactivations:new zt}},t}(),Jt=function(){return Jt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Jt.apply(this,arguments)},Xt=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((i=i.apply(t,e||[])).next())}))},$t=function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Zt=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,a=e.length;r<a;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},te=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===e.defaultScope)e.defaultScope=h.Transient;else if(e.defaultScope!==h.Singleton&&e.defaultScope!==h.Transient&&e.defaultScope!==h.Request)throw new Error('Invalid Container option. Default scope must be a string ("singleton" or "transient").');if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=v(),this._bindingDictionary=new zt,this._snapshots=[],this._middleware=null,this._activations=new zt,this._deactivations=new zt,this.parent=null,this._metadataReader=new L,this._moduleActivationStore=new Qt}return t.merge=function(e,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var a=new t,o=Zt([e,n],i,!0).map((function(t){return nt(t)})),s=nt(a);return o.forEach((function(t){var e;e=s,t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))})),a},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),i=0,r=t;i<r.length;i++){var a=r[i],o=n(a.id);a.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction,o.unbindAsyncFunction,o.onActivationFunction,o.onDeactivationFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,void 0,(function(){var e,n,i,r,a;return $t(this,(function(o){switch(o.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,i=t,o.label=1;case 1:return n<i.length?(r=i[n],a=e(r.id),[4,r.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){var n=t._removeModuleBindings(e.id);t._deactivateSingletons(n),t._removeModuleHandlers(e.id)}))},t.prototype.unloadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,void 0,(function(){var e,n,i,r;return $t(this,(function(a){switch(a.label){case 0:e=0,n=t,a.label=1;case 1:return e<n.length?(i=n[e],r=this._removeModuleBindings(i.id),[4,this._deactivateSingletonsAsync(r)]):[3,4];case 2:a.sent(),this._removeModuleHandlers(i.id),a.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))},t.prototype.bind=function(t){var e=this.options.defaultScope||h.Transient,n=new T(t,e);return this._bindingDictionary.add(t,n),new Gt(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.rebindAsync=function(t){return Xt(this,void 0,void 0,(function(){return $t(this,(function(e){switch(e.label){case 0:return[4,this.unbindAsync(t)];case 1:return e.sent(),[2,this.bind(t)]}}))}))},t.prototype.unbind=function(t){if(this._bindingDictionary.hasKey(t)){var e=this._bindingDictionary.get(t);this._deactivateSingletons(e)}this._removeServiceFromDictionary(t)},t.prototype.unbindAsync=function(t){return Xt(this,void 0,void 0,(function(){var e;return $t(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(t)?(e=this._bindingDictionary.get(t),[4,this._deactivateSingletonsAsync(e)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(t),[2]}}))}))},t.prototype.unbindAll=function(){var t=this;this._bindingDictionary.traverse((function(e,n){t._deactivateSingletons(n)})),this._bindingDictionary=new zt},t.prototype.unbindAllAsync=function(){return Xt(this,void 0,void 0,(function(){var t,e=this;return $t(this,(function(n){switch(n.label){case 0:return t=[],this._bindingDictionary.traverse((function(n,i){t.push(e._deactivateSingletonsAsync(i))})),[4,Promise.all(t)];case 1:return n.sent(),this._bindingDictionary=new zt,[2]}}))}))},t.prototype.onActivation=function(t,e){this._activations.add(t,e)},t.prototype.onDeactivation=function(t,e){this._deactivations.add(t,e)},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isCurrentBound=function(t){return this._bindingDictionary.hasKey(t)},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,n,e)},t.prototype.isBoundTagged=function(t,e,n){var i=!1;if(this._bindingDictionary.hasKey(t)){var r=this._bindingDictionary.get(t),a=function(t,e,n,i){var r=new q(m.Variable,"",e,new H(n,i)),a=new Y(t);return new et(e,a,null,[],r)}(this,t,e,n);i=r.some((function(t){return t.constraint(a)}))}return!i&&this.parent&&(i=this.parent.isBoundTagged(t,e,n)),i},t.prototype.snapshot=function(){this._snapshots.push(qt.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error("No snapshot available to restore.");this._bindingDictionary=t.bindings,this._activations=t.activations,this._deactivations=t.deactivations,this._middleware=t.middleware,this._moduleActivationStore=t.moduleActivationStore},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){var e=this._getNotAllArgs(t,!1);return this._getButThrowIfAsync(e)},t.prototype.getAsync=function(t){return Xt(this,void 0,void 0,(function(){var e;return $t(this,(function(n){return e=this._getNotAllArgs(t,!1),[2,this._get(e)]}))}))},t.prototype.getTagged=function(t,e,n){var i=this._getNotAllArgs(t,!1,e,n);return this._getButThrowIfAsync(i)},t.prototype.getTaggedAsync=function(t,e,n){return Xt(this,void 0,void 0,(function(){var i;return $t(this,(function(r){return i=this._getNotAllArgs(t,!1,e,n),[2,this._get(i)]}))}))},t.prototype.getNamed=function(t,e){return this.getTagged(t,n,e)},t.prototype.getNamedAsync=function(t,e){return this.getTaggedAsync(t,n,e)},t.prototype.getAll=function(t){var e=this._getAllArgs(t);return this._getButThrowIfAsync(e)},t.prototype.getAllAsync=function(t){var e=this._getAllArgs(t);return this._getAll(e)},t.prototype.getAllTagged=function(t,e,n){var i=this._getNotAllArgs(t,!0,e,n);return this._getButThrowIfAsync(i)},t.prototype.getAllTaggedAsync=function(t,e,n){var i=this._getNotAllArgs(t,!0,e,n);return this._getAll(i)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,n,e)},t.prototype.getAllNamedAsync=function(t,e){return this.getAllTaggedAsync(t,n,e)},t.prototype.resolve=function(t){var e=this.isBound(t);e||this.bind(t).toSelf();var n=this.get(t);return e||this.unbind(t),n},t.prototype._preDestroy=function(t,e){var n,i;if(Reflect.hasMetadata(d,t))return null===(i=(n=e)[Reflect.getMetadata(d,t).value])||void 0===i?void 0:i.call(n)},t.prototype._removeModuleHandlers=function(t){var e=this._moduleActivationStore.remove(t);this._activations.removeIntersection(e.onActivations),this._deactivations.removeIntersection(e.onDeactivations)},t.prototype._removeModuleBindings=function(t){return this._bindingDictionary.removeByCondition((function(e){return e.moduleId===t}))},t.prototype._deactivate=function(t,e){var n=this,i=Object.getPrototypeOf(e).constructor;try{if(this._deactivations.hasKey(t.serviceIdentifier)){var r=this._deactivateContainer(e,this._deactivations.get(t.serviceIdentifier).values());if(st(r))return this._handleDeactivationError(r.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(t,e,i)})),i)}var a=this._propagateContainerDeactivationThenBindingAndPreDestroy(t,e,i);if(st(a))return this._handleDeactivationError(a,i)}catch(t){if(t instanceof Error)throw new Error(M(i.name,t.message))}},t.prototype._handleDeactivationError=function(t,e){return Xt(this,void 0,void 0,(function(){var n;return $t(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return i.sent(),[3,3];case 2:if((n=i.sent())instanceof Error)throw new Error(M(e.name,n.message));return[3,3];case 3:return[2]}}))}))},t.prototype._deactivateContainer=function(t,e){for(var n=this,i=e.next();i.value;){var r=i.value(t);if(st(r))return r.then((function(){return n._deactivateContainerAsync(t,e)}));i=e.next()}},t.prototype._deactivateContainerAsync=function(t,e){return Xt(this,void 0,void 0,(function(){var n;return $t(this,(function(i){switch(i.label){case 0:n=e.next(),i.label=1;case 1:return n.value?[4,n.value(t)]:[3,3];case 2:return i.sent(),n=e.next(),[3,1];case 3:return[2]}}))}))},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(i){var r=t.rebind(i);return e(r,n),r}},i=function(e){return function(n,i){t._moduleActivationStore.addActivation(e,n,i),t.onActivation(n,i)}},r=function(e){return function(n,i){t._moduleActivationStore.addDeactivation(e,n,i),t.onDeactivation(n,i)}};return function(a){return{bindFunction:(o=a,function(n){var i=t.bind(n);return e(i,o),i}),isboundFunction:function(e){return t.isBound(e)},onActivationFunction:i(a),onDeactivationFunction:r(a),rebindFunction:n(a),unbindFunction:function(e){return t.unbind(e)},unbindAsyncFunction:function(e){return t.unbindAsync(e)}};var o}},t.prototype._getAll=function(t){return Promise.all(this._get(t))},t.prototype._get=function(t){var e=Jt(Jt({},t),{contextInterceptor:function(t){return t},targetType:m.Variable});if(this._middleware){var n=this._middleware(e);if(null==n)throw new Error("Invalid return type in middleware. Middleware must return!");return n}return this._planAndResolve()(e)},t.prototype._getButThrowIfAsync=function(t){var e=this._get(t);if(ut(e))throw new Error(function(t){return"You are attempting to construct '"+t+"' in a synchronous way\n but it has asynchronous dependencies."}(t.serviceIdentifier));return e},t.prototype._getAllArgs=function(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}},t.prototype._getNotAllArgs=function(t,e,n,i){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:n,value:i}},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=ot(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return function(t){return It(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}(n=e.contextInterceptor(n))}},t.prototype._deactivateIfSingleton=function(t){var e=this;if(t.activated)return st(t.cache)?t.cache.then((function(n){return e._deactivate(t,n)})):this._deactivate(t,t.cache)},t.prototype._deactivateSingletons=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];if(st(this._deactivateIfSingleton(i)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},t.prototype._deactivateSingletonsAsync=function(t){return Xt(this,void 0,void 0,(function(){var e=this;return $t(this,(function(n){switch(n.label){case 0:return[4,Promise.all(t.map((function(t){return e._deactivateIfSingleton(t)})))];case 1:return n.sent(),[2]}}))}))},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(t,e,n){return this.parent?this._deactivate.bind(this.parent)(t,e):this._bindingDeactivationAndPreDestroy(t,e,n)},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(t,e,n){return Xt(this,void 0,void 0,(function(){return $t(this,(function(i){switch(i.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(t,e)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(t,e,n)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))},t.prototype._removeServiceFromDictionary=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error("Could not unbind serviceIdentifier: "+x(t))}},t.prototype._bindingDeactivationAndPreDestroy=function(t,e,n){var i=this;if("function"==typeof t.onDeactivation){var r=t.onDeactivation(e);if(st(r))return r.then((function(){return i._preDestroy(n,e)}))}return this._preDestroy(n,e)},t.prototype._bindingDeactivationAndPreDestroyAsync=function(t,e,n){return Xt(this,void 0,void 0,(function(){return $t(this,(function(i){switch(i.label){case 0:return"function"!=typeof t.onDeactivation?[3,2]:[4,t.onDeactivation(e)];case 1:i.sent(),i.label=2;case 2:return[4,this._preDestroy(n,e)];case 3:return i.sent(),[2]}}))}))},t}();function ee(t,e,n,i){!function(t){if(void 0!==t)throw new Error(R)}(e),ie(u,t,n.toString(),i)}function ne(t){var e=[];if(Array.isArray(t)){var n=function(t){for(var e=new Set,n=0,i=t;n<i.length;n++){var r=i[n];if(e.has(r))return r;e.add(r)}}((e=t).map((function(t){return t.key})));if(void 0!==n)throw new Error(E+" "+n.toString())}else e=[t];return e}function ie(t,e,n,i){var r=ne(i),a={};Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var o=a[n];if(void 0===o)o=[];else for(var s=function(t){if(r.some((function(e){return e.key===t.key})))throw new Error(E+" "+t.key.toString())},u=0,c=o;u<c.length;u++){s(c[u])}o.push.apply(o,r),a[n]=o,Reflect.defineMetadata(t,a,e)}function re(t){return function(e,n,i){"number"==typeof i?ee(e,n,i,t):function(t,e,n){if(void 0!==t.prototype)throw new Error(R);ie(c,t.constructor,e,n)}(e,n,t)}}function ae(){return function(t){if(Reflect.hasOwnMetadata(l,t))throw new Error("Cannot apply @injectable decorator multiple times.");var e=Reflect.getMetadata("design:paramtypes",t)||[];return Reflect.defineMetadata(l,e,t),t}}function oe(t){return function(e){return function(n,i,r){if(void 0===e){var a="function"==typeof n?n.name:n.constructor.name;throw new Error("@inject called with undefined this could mean that the class "+a+" has a circular dependency problem. You can use a LazyServiceIdentifier to  overcome this limitation.")}return re(new H(t,e))(n,i,r)}}}var se=oe(o),ue=oe(s),ce={HttpClientInternal:Symbol.for("HttpClientInternal"),NoopInterceptor:Symbol.for("NoopInterceptor"),JsonpClientBackend:Symbol.for("JsonpClientBackend"),DOCUMENT:Symbol.for("DOCUMENT"),JsonpInterceptor:Symbol.for("JsonpInterceptor"),HttpXhrBackend:Symbol.for("HttpXhrBackend"),XhrFactory:Symbol.for("XhrFactory"),HttpXsrfCookieExtractor:Symbol.for("HttpXsrfCookieExtractor"),HttpXsrfInterceptor:Symbol.for("HttpXsrfInterceptor"),HTTP_INTERCEPTORS:Symbol.for("HTTP_INTERCEPTORS"),HttpBackend:Symbol.for("HttpBackend"),HttpInterceptingHandler:Symbol.for("HttpInterceptingHandler"),HttpInterceptor:Symbol.for("HttpInterceptor"),GlobalHttpInterceptor:Symbol.for("GlobalHttpInterceptor")},le=function(t,e){return le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},le(t,e)};function pe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}le(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var de=function(){return de=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},de.apply(this,arguments)};function fe(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function he(t,e){return function(n,i){e(n,i,t)}}function ye(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function me(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((i=i.apply(t,e||[])).next())}))}function ge(t,e){var n,i,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function ve(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Te(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function Ee(t,e,n){if(n||2===arguments.length)for(var i,r=0,a=e.length;r<a;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function be(t){return this instanceof be?(this.v=t,this):new be(t)}function Se(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),a=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",(function(t){return function(e){return Promise.resolve(e).then(t,c)}})),i[Symbol.asyncIterator]=function(){return this},i;function o(t,e){r[t]&&(i[t]=function(e){return new Promise((function(n,i){a.push([t,e,n,i])>1||s(t,e)}))},e&&(i[t]=e(i[t])))}function s(t,e){try{(n=r[t](e)).value instanceof be?Promise.resolve(n.value.v).then(u,c):l(a[0][2],n)}catch(t){l(a[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),a.shift(),a.length&&s(a[0][0],a[0][1])}}function _e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=ve(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}function Ae(t){return"function"==typeof t}function we(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}"function"==typeof SuppressedError&&SuppressedError;var Ie=we((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function De(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var e;return t.prototype.unsubscribe=function(){var t,e,n,i,r;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=ve(a),s=o.next();!s.done;s=o.next()){s.value.remove(this)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}else a.remove(this);var u=this.initialTeardown;if(Ae(u))try{u()}catch(t){r=t instanceof Ie?t.errors:[t]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var l=ve(c),p=l.next();!p.done;p=l.next()){var d=p.value;try{Ce(d)}catch(t){r=null!=r?r:[],t instanceof Ie?r=Ee(Ee([],Te(r)),Te(t.errors)):r.push(t)}}}catch(t){n={error:t}}finally{try{p&&!p.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}if(r)throw new Ie(r)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Ce(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&De(e,t)},t.prototype.remove=function(e){var n=this._finalizers;n&&De(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),Ne=Re.EMPTY;function Oe(t){return t instanceof Re||t&&"closed"in t&&Ae(t.remove)&&Ae(t.add)&&Ae(t.unsubscribe)}function Ce(t){Ae(t)?t():t.unsubscribe()}var Me={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ke={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=ke.delegate;return(null==r?void 0:r.setTimeout)?r.setTimeout.apply(r,Ee([t,e],Te(n))):setTimeout.apply(void 0,Ee([t,e],Te(n)))},clearTimeout:function(t){var e=ke.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Le(t){ke.setTimeout((function(){throw t}))}function Ue(){}var Pe=null;function xe(t){if(Me.useDeprecatedSynchronousErrorHandling){var e=!Pe;if(e&&(Pe={errorThrown:!1,error:null}),t(),e){var n=Pe,i=n.errorThrown,r=n.error;if(Pe=null,i)throw r}}else t()}var Fe=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,Oe(e)&&e.add(n)):n.destination=Be,n}return pe(e,t),e.create=function(t,e,n){return new Ye(t,e,n)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Re),We=Function.prototype.bind;function Ve(t,e){return We.call(t,e)}var je=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){He(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){He(t)}else He(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){He(t)}},t}(),Ye=function(t){function e(e,n,i){var r,a,o=t.call(this)||this;Ae(e)||!e?r={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=i?i:void 0}:o&&Me.useDeprecatedNextContext?((a=Object.create(e)).unsubscribe=function(){return o.unsubscribe()},r={next:e.next&&Ve(e.next,a),error:e.error&&Ve(e.error,a),complete:e.complete&&Ve(e.complete,a)}):r=e;return o.destination=new je(r),o}return pe(e,t),e}(Fe);function He(t){Le(t)}var Be={closed:!0,next:Ue,error:function(t){throw t},complete:Ue},Ke="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ge(t){return t}var qe=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this,r=function(t){return t&&t instanceof Fe||function(t){return t&&Ae(t.next)&&Ae(t.error)&&Ae(t.complete)}(t)&&Oe(t)}(t)?t:new Ye(t,e,n);return xe((function(){var t=i,e=t.operator,n=t.source;r.add(e?e.call(r,n):n?i._subscribe(r):i._trySubscribe(r))})),r},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=ze(e))((function(e,i){var r=new Ye({next:function(e){try{t(e)}catch(t){i(t),r.unsubscribe()}},error:i,complete:e});n.subscribe(r)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[Ke]=function(){return this},t.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0===(t=e).length?Ge:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)})(this)},t.prototype.toPromise=function(t){var e=this;return new(t=ze(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function ze(t){var e;return null!==(e=null!=t?t:Me.Promise)&&void 0!==e?e:Promise}function Qe(t){return Ae(null==t?void 0:t.lift)}function Je(t){return function(e){if(Qe(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Xe(t,e,n,i,r){return new $e(t,e,n,i,r)}var $e=function(t){function e(e,n,i,r,a,o){var s=t.call(this,e)||this;return s.onFinalize=a,s.shouldUnsubscribe=o,s._next=n?function(t){try{n(t)}catch(t){e.error(t)}}:t.prototype._next,s._error=r?function(t){try{r(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,s._complete=i?function(){try{i()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,s}return pe(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(Fe);function Ze(){return Je((function(t,e){var n=null;t._refCount++;var i=Xe(e,void 0,void 0,void 0,(function(){if(!t||t._refCount<=0||0<--t._refCount)n=null;else{var i=t._connection,r=n;n=null,!i||r&&i!==r||i.unsubscribe(),e.unsubscribe()}}));t.subscribe(i),i.closed||(n=t.connect())}))}var tn=function(t){function e(e,n){var i=t.call(this)||this;return i.source=e,i.subjectFactory=n,i._subject=null,i._refCount=0,i._connection=null,Qe(e)&&(i.lift=e.lift),i}return pe(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,null==t||t.unsubscribe()},e.prototype.connect=function(){var t=this,e=this._connection;if(!e){e=this._connection=new Re;var n=this.getSubject();e.add(this.source.subscribe(Xe(n,void 0,(function(){t._teardown(),n.complete()}),(function(e){t._teardown(),n.error(e)}),(function(){return t._teardown()})))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e},e.prototype.refCount=function(){return Ze()(this)},e}(qe),en=we((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),nn=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return pe(e,t),e.prototype.lift=function(t){var e=new rn(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new en},e.prototype.next=function(t){var e=this;xe((function(){var n,i;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var r=ve(e.currentObservers),a=r.next();!a.done;a=r.next()){a.value.next(t)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}}))},e.prototype.error=function(t){var e=this;xe((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}}))},e.prototype.complete=function(){var t=this;xe((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,n=this,i=n.hasError,r=n.isStopped,a=n.observers;return i||r?Ne:(this.currentObservers=null,a.push(t),new Re((function(){e.currentObservers=null,De(a,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,n=e.hasError,i=e.thrownError,r=e.isStopped;n?t.error(i):r&&t.complete()},e.prototype.asObservable=function(){var t=new qe;return t.source=this,t},e.create=function(t,e){return new rn(t,e)},e}(qe),rn=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return pe(e,t),e.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},e.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:Ne},e}(nn),an=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return pe(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){var t=this,e=t.hasError,n=t.thrownError,i=t._value;if(e)throw n;return this._throwIfClosed(),i},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(nn),on={now:function(){return(on.delegate||Date).now()},delegate:void 0},sn=function(t){function e(e,n,i){void 0===e&&(e=1/0),void 0===n&&(n=1/0),void 0===i&&(i=on);var r=t.call(this)||this;return r._bufferSize=e,r._windowTime=n,r._timestampProvider=i,r._buffer=[],r._infiniteTimeWindow=!0,r._infiniteTimeWindow=n===1/0,r._bufferSize=Math.max(1,e),r._windowTime=Math.max(1,n),r}return pe(e,t),e.prototype.next=function(e){var n=this,i=n.isStopped,r=n._buffer,a=n._infiniteTimeWindow,o=n._timestampProvider,s=n._windowTime;i||(r.push(e),!a&&r.push(o.now()+s)),this._trimBuffer(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var e=this._innerSubscribe(t),n=this._infiniteTimeWindow,i=this._buffer.slice(),r=0;r<i.length&&!t.closed;r+=n?1:2)t.next(i[r]);return this._checkFinalizedStatuses(t),e},e.prototype._trimBuffer=function(){var t=this,e=t._bufferSize,n=t._timestampProvider,i=t._buffer,r=t._infiniteTimeWindow,a=(r?1:2)*e;if(e<1/0&&a<i.length&&i.splice(0,i.length-a),!r){for(var o=n.now(),s=0,u=1;u<i.length&&i[u]<=o;u+=2)s=u;s&&i.splice(0,s+1)}},e}(nn),un=function(t){function e(e,n){return t.call(this)||this}return pe(e,t),e.prototype.schedule=function(t,e){return this},e}(Re),cn={setInterval:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=cn.delegate;return(null==r?void 0:r.setInterval)?r.setInterval.apply(r,Ee([t,e],Te(n))):setInterval.apply(void 0,Ee([t,e],Te(n)))},clearInterval:function(t){var e=cn.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},ln=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.pending=!1,i}return pe(e,t),e.prototype.schedule=function(t,e){var n;if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),cn.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&cn.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n,i=!1;try{this.work(t)}catch(t){i=!0,n=t||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),n},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,n=this.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,De(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(un),pn=function(){function t(e,n){void 0===n&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},t.now=on.now,t}(),dn=new(function(t){function e(e,n){void 0===n&&(n=pn.now);var i=t.call(this,e,n)||this;return i.actions=[],i._active=!1,i}return pe(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(pn))(ln),fn=dn,hn=new qe((function(t){return t.complete()}));function yn(t){return t&&Ae(t.schedule)}function mn(t){return t[t.length-1]}function gn(t){return yn(mn(t))?t.pop():void 0}var vn=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Tn(t){return Ae(null==t?void 0:t.then)}function En(t){return Ae(t[Ke])}function bn(t){return Symbol.asyncIterator&&Ae(null==t?void 0:t[Symbol.asyncIterator])}function Sn(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var _n="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function An(t){return Ae(null==t?void 0:t[_n])}function wn(t){return Se(this,arguments,(function(){var e,n,i;return ge(this,(function(r){switch(r.label){case 0:e=t.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,be(e.read())];case 3:return n=r.sent(),i=n.value,n.done?[4,be(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,be(i)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function In(t){return Ae(null==t?void 0:t.getReader)}function Dn(t){if(t instanceof qe)return t;if(null!=t){if(En(t))return r=t,new qe((function(t){var e=r[Ke]();if(Ae(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(vn(t))return i=t,new qe((function(t){for(var e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()}));if(Tn(t))return n=t,new qe((function(t){n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Le)}));if(bn(t))return Rn(t);if(An(t))return e=t,new qe((function(t){var n,i;try{for(var r=ve(e),a=r.next();!a.done;a=r.next()){var o=a.value;if(t.next(o),t.closed)return}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.complete()}));if(In(t))return Rn(wn(t))}var e,n,i,r;throw Sn(t)}function Rn(t){return new qe((function(e){(function(t,e){var n,i,r,a;return me(this,void 0,void 0,(function(){var o,s;return ge(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=_e(t),u.label=1;case 1:return[4,n.next()];case 2:if((i=u.sent()).done)return[3,4];if(o=i.value,e.next(o),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=u.sent(),r={error:s},[3,11];case 6:return u.trys.push([6,,9,10]),i&&!i.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}function Nn(t,e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=!1);var a=e.schedule((function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()}),i);if(t.add(a),!r)return a}function On(t,e){return void 0===e&&(e=0),Je((function(n,i){n.subscribe(Xe(i,(function(n){return Nn(i,t,(function(){return i.next(n)}),e)}),(function(){return Nn(i,t,(function(){return i.complete()}),e)}),(function(n){return Nn(i,t,(function(){return i.error(n)}),e)})))}))}function Cn(t,e){return void 0===e&&(e=0),Je((function(n,i){i.add(t.schedule((function(){return n.subscribe(i)}),e))}))}function Mn(t,e){if(!t)throw new Error("Iterable cannot be null");return new qe((function(n){Nn(n,e,(function(){var i=t[Symbol.asyncIterator]();Nn(n,e,(function(){i.next().then((function(t){t.done?n.complete():n.next(t.value)}))}),0,!0)}))}))}function kn(t,e){if(null!=t){if(En(t))return function(t,e){return Dn(t).pipe(Cn(e),On(e))}(t,e);if(vn(t))return function(t,e){return new qe((function(n){var i=0;return e.schedule((function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())}))}))}(t,e);if(Tn(t))return function(t,e){return Dn(t).pipe(Cn(e),On(e))}(t,e);if(bn(t))return Mn(t,e);if(An(t))return function(t,e){return new qe((function(n){var i;return Nn(n,e,(function(){i=t[_n](),Nn(n,e,(function(){var t,e,r;try{e=(t=i.next()).value,r=t.done}catch(t){return void n.error(t)}r?n.complete():n.next(e)}),0,!0)})),function(){return Ae(null==i?void 0:i.return)&&i.return()}}))}(t,e);if(In(t))return function(t,e){return Mn(wn(t),e)}(t,e)}throw Sn(t)}function Ln(t,e){return e?kn(t,e):Dn(t)}function Un(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ln(t,gn(t))}function Pn(t,e){var n=Ae(t)?t:function(){return t},i=function(t){return t.error(n())};return new qe(e?function(t){return e.schedule(i,0,t)}:i)}function xn(t,e){return Je((function(n,i){var r=0;n.subscribe(Xe(i,(function(n){i.next(t.call(e,n,r++))})))}))}var Fn=Array.isArray;function Wn(t){return xn((function(e){return function(t,e){return Fn(e)?t.apply(void 0,Ee([],Te(e))):t(e)}(t,e)}))}var Vn=Array.isArray,jn=Object.getPrototypeOf,Yn=Object.prototype,Hn=Object.keys;function Bn(t){if(1===t.length){var e=t[0];if(Vn(e))return{args:e,keys:null};if((i=e)&&"object"==typeof i&&jn(i)===Yn){var n=Hn(e);return{args:n.map((function(t){return e[t]})),keys:n}}}var i;return{args:t,keys:null}}function Kn(t,e,n,i,r,a,o,s){var u=[],c=0,l=0,p=!1,d=function(){!p||u.length||c||e.complete()},f=function(t){return c<i?h(t):u.push(t)},h=function(t){a&&e.next(t),c++;var s=!1;Dn(n(t,l++)).subscribe(Xe(e,(function(t){null==r||r(t),a?f(t):e.next(t)}),(function(){s=!0}),void 0,(function(){if(s)try{c--;for(var t=function(){var t=u.shift();o?Nn(e,o,(function(){return h(t)})):h(t)};u.length&&c<i;)t();d()}catch(t){e.error(t)}})))};return t.subscribe(Xe(e,f,(function(){p=!0,d()}))),function(){null==s||s()}}function Gn(t,e,n){return void 0===n&&(n=1/0),Ae(e)?Gn((function(n,i){return xn((function(t,r){return e(n,t,i,r)}))(Dn(t(n,i)))}),n):("number"==typeof e&&(n=e),Je((function(e,i){return Kn(e,i,t,n)})))}function qn(){return void 0===(t=1)&&(t=1/0),Gn(Ge,t);var t}function zn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(t){return Ae(mn(t))?t.pop():void 0}(t),i=Bn(t),r=i.args,a=i.keys,o=new qe((function(t){var e=r.length;if(e)for(var n=new Array(e),i=e,o=e,s=function(e){var s=!1;Dn(r[e]).subscribe(Xe(t,(function(t){s||(s=!0,o--),n[e]=t}),(function(){return i--}),void 0,(function(){i&&s||(o||t.next(a?function(t,e){return t.reduce((function(t,n,i){return t[n]=e[i],t}),{})}(a,n):n),t.complete())})))},u=0;u<e;u++)s(u);else t.complete()}));return n?o.pipe(Wn(n)):o}function Qn(t,e,n){void 0===t&&(t=0),void 0===n&&(n=fn);var i=-1;return null!=e&&(yn(e)?n=e:i=e),new qe((function(e){var r=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;r<0&&(r=0);var a=0;return n.schedule((function(){e.closed||(e.next(a++),0<=i?this.schedule(void 0,i):e.complete())}),r)}))}function Jn(t,e){return Je((function(n,i){var r=0;n.subscribe(Xe(i,(function(n){return t.call(e,n,r++)&&i.next(n)})))}))}function Xn(t){return Je((function(e,n){var i,r=null,a=!1;r=e.subscribe(Xe(n,void 0,void 0,(function(o){i=Dn(t(o,Xn(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):a=!0}))),a&&(r.unsubscribe(),r=null,i.subscribe(n))}))}function $n(t,e){return Je(function(t,e,n,i,r){return function(a,o){var s=n,u=e,c=0;a.subscribe(Xe(o,(function(e){var n=c++;u=s?t(u,e,n):(s=!0,e),i&&o.next(u)}),r&&function(){s&&o.next(u),o.complete()}))}}(t,e,arguments.length>=2,!1,!0))}var Zn=function(t,e){return t.push(e),t};function ti(t,e){return Ae(e)?Gn(t,e,1):Gn(t,1)}var ei={connector:function(){return new nn}};function ni(t,e){void 0===e&&(e=ei);var n=e.connector;return Je((function(e,i){var r,a=n();Dn(t((r=a,new qe((function(t){return r.subscribe(t)}))))).subscribe(i),i.add(e.subscribe(a))}))}function ii(t,e){return void 0===e&&(e=dn),Je((function(n,i){var r=null,a=null,o=null,s=function(){if(r){r.unsubscribe(),r=null;var t=a;a=null,i.next(t)}};function u(){var n=o+t,a=e.now();if(a<n)return r=this.schedule(void 0,n-a),void i.add(r);s()}n.subscribe(Xe(i,(function(n){a=n,o=e.now(),r||(r=e.schedule(u,t),i.add(r))}),(function(){s(),i.complete()}),void 0,(function(){a=r=null})))}))}function ri(t){return t<=0?function(){return hn}:Je((function(e,n){var i=0;e.subscribe(Xe(n,(function(e){++i<=t&&(n.next(e),t<=i&&n.complete())})))}))}function ai(t,e){return e?function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return qn()(Ln(t,gn(t)))}(e.pipe(ri(1),Je((function(t,e){t.subscribe(Xe(e,Ue))}))),n.pipe(ai(t)))}:Gn((function(e,n){return Dn(t(e,n)).pipe(ri(1),function(t){return xn((function(){return t}))}(e))}))}function oi(t){return Je((function(e,n){try{e.subscribe(n)}finally{n.add(t)}}))}function si(t,e,n,i){n&&!Ae(n)&&(i=n);var r=Ae(n)?n:void 0;return function(n){return function(t,e){var n=Ae(t)?t:function(){return t};return Ae(e)?ni(e,{connector:n}):function(t){return new tn(t,n)}}(new sn(t,e,i),r)(n)}}function ui(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!0!==e){if(!1!==e){var r=new Ye({next:function(){r.unsubscribe(),t()}});return Dn(e.apply(void 0,Ee([],Te(n)))).subscribe(r)}}else t()}function ci(t){return Jn((function(e,n){return t<=n}))}function li(t,e){return Je((function(n,i){var r=null,a=0,o=!1,s=function(){return o&&!r&&i.complete()};n.subscribe(Xe(i,(function(n){null==r||r.unsubscribe();var o=0,u=a++;Dn(t(n,u)).subscribe(r=Xe(i,(function(t){return i.next(e?e(n,t,u,o++):t)}),(function(){r=null,s()})))}),(function(){o=!0,s()})))}))}function pi(t,e,n){var i=Ae(t)||e||n?{next:t,error:e,complete:n}:t;return i?Je((function(t,e){var n;null===(n=i.subscribe)||void 0===n||n.call(i);var r=!0;t.subscribe(Xe(e,(function(t){var n;null===(n=i.next)||void 0===n||n.call(i,t),e.next(t)}),(function(){var t;r=!1,null===(t=i.complete)||void 0===t||t.call(i),e.complete()}),(function(t){var n;r=!1,null===(n=i.error)||void 0===n||n.call(i,t),e.error(t)}),(function(){var t,e;r&&(null===(t=i.unsubscribe)||void 0===t||t.call(i)),null===(e=i.finalize)||void 0===e||e.call(i)})))})):Ge}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */var di=function(){},fi=function(){},hi=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach((function(t){var n=t.indexOf(":");if(n>0){var i=t.slice(0,n),r=i.toLowerCase(),a=t.slice(n+1).trim();e.maybeSetNormalizedName(i,r),e.headers.has(r)?e.headers.get(r).push(a):e.headers.set(r,[a])}}))}:function(){e.headers=new Map,Object.keys(t).forEach((function(n){var i=t[n],r=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(e.headers.set(r,i),e.maybeSetNormalizedName(n,r))}))}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(t){return e.applyUpdate(t)})),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach((function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))}))},t.prototype.clone=function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var i=("a"===t.op?this.headers.get(e):void 0)||[];i.push.apply(i,Ee([],Te(n),!1)),this.headers.set(e,i);break;case"d":var r=t.value;if(r){var a=this.headers.get(e);if(!a)return;a=a.filter((function(t){return-1===r.indexOf(t)})),0===a.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return t(e.normalizedNames.get(n),e.headers.get(n))}))},t}(),yi=function(){function t(){}return t.prototype.encodeKey=function(t){return mi(t)},t.prototype.encodeValue=function(t){return mi(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function mi(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function gi(t){return"".concat(t)}var vi=function(){function t(t){void 0===t&&(t={});var e=this;if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new yi,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){var n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach((function(t){var i=t.indexOf("="),r=Te(-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],2),a=r[0],o=r[1],s=n.get(a)||[];s.push(o),n.set(a,s)})),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach((function(n){var i=t.fromObject[n];e.map.set(n,Array.isArray(i)?i:[i])}))):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.appendAll=function(t){var e=[];return Object.keys(t).forEach((function(n){var i=t[n];Array.isArray(i)?i.forEach((function(t){e.push({param:n,value:t,op:"a"})})):e.push({param:n,value:i,op:"a"})})),this.clone(e)},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map((function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map((function(e){return n+"="+t.encoder.encodeValue(e)})).join("&")})).filter((function(t){return""!==t})).join("&")},t.prototype.clone=function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(e){return t.map.set(e,t.cloneFrom.map.get(e))})),this.updates.forEach((function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(gi(e.value)),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var i=t.map.get(e.param)||[],r=i.indexOf(gi(e.value));-1!==r&&i.splice(r,1),i.length>0?t.map.set(e.param,i):t.map.delete(e.param)}})),this.cloneFrom=this.updates=null)},t}(),Ti=function(t){this.defaultValue=t},Ei=function(){function t(){this.map=new Map}return t.prototype.set=function(t,e){return this.map.set(t,e),this},t.prototype.get=function(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)},t.prototype.delete=function(t){return this.map.delete(t),this},t.prototype.has=function(t){return this.map.has(t)},t.prototype.keys=function(){return this.map.keys()},t.prototype.forEach=function(t){this.map.forEach((function(e,n){return t(n,e)}))},t}();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function bi(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Si(t){return"undefined"!=typeof Blob&&t instanceof Blob}function _i(t){return"undefined"!=typeof FormData&&t instanceof FormData}var Ai,wi=function(){function t(t,e,n,i){var r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new hi),this.context||(this.context=new Ei),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=e;else{var o=e.indexOf("?"),s=-1===o?"?":o<e.length-1?"&":"";this.urlWithParams=e+s+a}}else this.params=new vi,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:bi(this.body)||Si(this.body)||_i(this.body)||"string"==typeof this.body?this.body:this.body instanceof vi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body||_i(this.body)?null:Si(this.body)?this.body.type||null:bi(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){var n;void 0===e&&(e={});var i=e.method||this.method,r=e.url||this.url,a=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,u=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,p=null!==(n=e.context)&&void 0!==n?n:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((function(t,n){return t.set(n,e.setHeaders[n])}),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((function(t,n){return t.set(n,e.setParams[n])}),l)),new t(i,r,o,{params:l,headers:c,context:p,reportProgress:u,responseType:a,withCredentials:s})},t}();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */!function(t){t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User"}(Ai||(Ai={}));var Ii=function(t,e,n){void 0===e&&(e=200),void 0===n&&(n="OK"),this.headers=t.headers||new hi,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},Di=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=Ai.ResponseHeader,n}return pe(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(Ii),Ri=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=Ai.Response,n.body=void 0!==e.body?e.body:null,n}return pe(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(Ii),Ni=function(t){function e(e){var n=t.call(this,e,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.status>=200&&n.status<300?n.message="Http failure during parsing for ".concat(e.url||"(unknown url)"):n.message="Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),n.error=e.error||null,n}return pe(e,t),e}(Ii);
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function Oi(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var Ci=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,n){var i,r=this;if(void 0===n&&(n={}),t instanceof wi)i=t;else{var a=void 0;a=n.headers instanceof hi?n.headers:new hi(n.headers);var o=void 0;n.params&&(o=n.params instanceof vi?n.params:new vi({fromObject:n.params})),i=new wi(t,e,void 0!==n.body?n.body:null,{headers:a,context:n.context,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var s=Un(i).pipe(ti((function(t){return r.handler.handle(t)})));if(t instanceof wi||"events"===n.observe)return s;var u=s.pipe(Jn((function(t){return t instanceof Ri})));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return u.pipe(xn((function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body})));case"blob":return u.pipe(xn((function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body})));case"text":return u.pipe(xn((function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body})));default:return u.pipe(xn((function(t){return t.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(n.observe,"}"))}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new vi).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,n){return void 0===n&&(n={}),this.request("PATCH",t,Oi(n,e))},t.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.request("POST",t,Oi(n,e))},t.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.request("PUT",t,Oi(n,e))},t=fe([ae(),he(0,se(ce.HttpInterceptingHandler)),ye("design:paramtypes",[di])],t)}(),Mi=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),ki=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t=fe([ae()],t)}(),Li=0,Ui=function(){},Pi=function(){function t(t,e){this.callbackMap=t,this.document=e,this.resolvedPromise=Promise.resolve()}return t.prototype.nextCallback=function(){return"ng_jsonp_callback_".concat(Li++)},t.prototype.handle=function(t){var e=this;if("JSONP"!==t.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==t.responseType)throw new Error("JSONP requests must use Json response type.");return new qe((function(n){var i=e.nextCallback(),r=t.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,"=".concat(i,"$1")),a=e.document.createElement("script");a.src=r;var o=null,s=!1,u=!1;e.callbackMap[i]=function(t){delete e.callbackMap[i],u||(o=t,s=!0)};var c=function(){a.parentNode&&a.parentNode.removeChild(a),delete e.callbackMap[i]},l=function(t){u||e.resolvedPromise.then((function(){c(),s?(n.next(new Ri({body:o,status:200,statusText:"OK",url:r})),n.complete()):n.error(new Ni({url:r,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")}))}))},p=function(t){u||(c(),n.error(new Ni({error:t,status:0,statusText:"JSONP Error",url:r})))};return a.addEventListener("load",l),a.addEventListener("error",p),e.document.body.appendChild(a),n.next({type:Ai.Sent}),function(){u=!0,a.removeEventListener("load",l),a.removeEventListener("error",p),c()}}))},t=fe([ae(),he(1,se(ce.DOCUMENT)),ye("design:paramtypes",[Ui,Object])],t)}(),xi=function(){function t(t){this.jsonp=t}return t.prototype.intercept=function(t,e){return"JSONP"===t.method?this.jsonp.handle(t):e.handle(t)},t=fe([ae(),he(0,se(ce.JsonpClientBackend)),ye("design:paramtypes",[Pi])],t)}(),Fi=function(){function t(){}return t=fe([ae(),ye("design:paramtypes",[])],t)}(),Wi=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t=fe([ae()],t)}(),Vi=function(){function t(t,e){this.backend=t,this.httpInterceptors=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.httpInterceptors;this.chain=e.reduceRight((function(t,e){return new Mi(t,e)}),this.backend)}return this.chain.handle(t)},t=fe([ae(),he(0,se(ce.HttpBackend)),he(1,ue(ce.HTTP_INTERCEPTORS)),ye("design:paramtypes",[fi,Array])],t)}(),ji=/^\)\]\}',?\n/;
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */var Yi=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new qe((function(n){var i=e.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((function(t,e){return i.setRequestHeader(t,e.join(","))})),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var r=t.detectContentTypeHeader();null!==r&&i.setRequestHeader("Content-Type",r)}if(t.responseType){var a=t.responseType.toLowerCase();i.responseType="json"!==a?a:"text"}var o=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===i.status?204:i.status,n=i.statusText||"OK",r=new hi(i.getAllResponseHeaders()),a=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||t.url;return s=new Di({headers:r,status:e,statusText:n,url:a})},c=function(){var e=u(),r=e.headers,a=e.status,o=e.statusText,s=e.url,c=null;204!==a&&(c=void 0===i.response?i.responseText:i.response),0===a&&(a=c?200:0);var l=a>=200&&a<300;if("json"===t.responseType&&"string"==typeof c){var p=c;c=c.replace(ji,"");try{c=""!==c?JSON.parse(c):null}catch(t){c=p,l&&(l=!1,c={error:t,text:c})}}l?(n.next(new Ri({body:c,headers:r,status:a,statusText:o,url:s||void 0})),n.complete()):n.error(new Ni({error:c,headers:r,status:a,statusText:o,url:s||void 0}))},l=function(t){var e=u().url,r=new Ni({error:t,status:i.status||0,statusText:i.statusText||"Unknown Error",url:e||void 0});n.error(r)},p=!1,d=function(e){p||(n.next(u()),p=!0);var r={type:Ai.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(r.total=e.total),"text"===t.responseType&&i.responseText&&(r.partialText=i.responseText),n.next(r)},f=function(t){var e={type:Ai.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return i.addEventListener("load",c),i.addEventListener("error",l),i.addEventListener("timeout",l),i.addEventListener("abort",l),t.reportProgress&&(i.addEventListener("progress",d),null!==o&&i.upload&&i.upload.addEventListener("progress",f)),i.send(o),n.next({type:Ai.Sent}),function(){i.removeEventListener("error",l),i.removeEventListener("abort",l),i.removeEventListener("load",c),i.removeEventListener("timeout",l),t.reportProgress&&(i.removeEventListener("progress",d),null!==o&&i.upload&&i.upload.removeEventListener("progress",f)),i.readyState!==i.DONE&&i.abort()}}))},t=fe([ae(),he(0,se(ce.XhrFactory)),ye("design:paramtypes",[Wi])],t)}(),Hi=new Ti((function(){return{}})),Bi=new Ti((function(){return{}})),Ki=new Ti((function(){return{}})),Gi=function(){function t(){}return t.prototype.handle=function(t){return"POST"===t.method&&t.context.has(Hi)?this.upload(t):"GET"===t.method&&t.context.has(Bi)?this.download(t):this.request(t)},t.prototype.upload=function(t){var e=this;return new qe((function(n){var i=function(e){var i=e.header;n.next(new Di({url:t.url,headers:new hi(i)}))},r=function(t){var e=t.totalBytesSent,i=t.totalBytesExpectedToSend;n.next({type:Ai.UploadProgress,loaded:e,total:i})},a=t.context.get(Hi),o=a.filePath,s=a.fileName,u=a.timeout,c=a.baseUrl,l=wx.uploadFile({url:(c||"")+t.urlWithParams,filePath:o,name:s,header:e.buildHeaders(t),formData:t.body,timeout:u,success:function(e){var i=e.data,r=e.statusCode,a=e.errMsg,o=r>=200&&r<300,s=null;if("json"===t.responseType&&"string"==typeof i&&""!==i)try{s=JSON.parse(i)}catch(t){o&&(o=!1,s={error:t,text:s})}o?(n.next(new Ri({url:t.url,body:s,status:r,statusText:a})),n.complete()):n.error(new Ni({url:t.url,error:s,status:r,statusText:a}))},fail:function(e){var i=e.errMsg;n.error(new Ni({url:t.url,statusText:i}))}});return n.next({type:Ai.Sent}),t.reportProgress&&(l.onHeadersReceived(i),l.onProgressUpdate(r)),function(){t.reportProgress&&(l.offHeadersReceived(i),l.offProgressUpdate(r)),l.abort()}}))},t.prototype.download=function(t){var e=this;return new qe((function(n){var i=function(e){var i=e.header;n.next(new Di({url:t.url,headers:new hi(i)}))},r=function(t){var e=t.totalBytesWritten,i=t.totalBytesExpectedToWrite;n.next({type:Ai.DownloadProgress,loaded:e,total:i})},a=t.context.get(Bi),o=a.filePath,s=a.timeout,u=wx.downloadFile({url:t.urlWithParams,filePath:o,header:e.buildHeaders(t),timeout:s,success:function(e){var i=e.statusCode,r=e.errMsg;i>=200&&i<300?(n.next(new Ri({url:t.url,status:i,statusText:r})),n.complete()):n.error(new Ni({url:t.url,status:i,statusText:r}))},fail:function(e){var i=e.errMsg;n.error(new Ni({url:t.url,statusText:i}))}});return n.next({type:Ai.Sent}),t.reportProgress&&(u.onHeadersReceived(i),u.onProgressUpdate(r)),function(){t.reportProgress&&(u.offHeadersReceived(i),u.offProgressUpdate(r)),u.abort()}}))},t.prototype.request=function(t){var e=this;return new qe((function(n){if("PATCH"===t.method)throw Error("WeChat MiniProgram does not support http method as "+t.method);var i=function(e){var i=e.header;n.next(new Di({url:t.url,headers:new hi(i)}))},r=wx.request(de({url:(t.context.get(Ki).baseUrl||"")+t.urlWithParams,method:t.method,data:t.body,header:e.buildHeaders(t),responseType:"arraybuffer"===t.responseType?t.responseType:"text",dataType:"json"===t.responseType?t.responseType:"其他",success:function(e){var i=e.data,r=e.header,a=e.statusCode,o=e.errMsg,s=a>=200&&a<300,u=new hi(r);s?(n.next(new Ri({url:t.url,body:i,status:a,statusText:o,headers:u})),n.complete()):n.error(new Ni({url:t.url,error:i,status:a,statusText:o,headers:u}))},fail:function(e){var i=e.errMsg;n.error(new Ni({url:t.url,statusText:i}))}},t.context.get(Ki)));return n.next({type:Ai.Sent}),t.reportProgress&&r.onHeadersReceived(i),function(){t.reportProgress&&r.offHeadersReceived(i),r.abort()}}))},t.prototype.buildHeaders=function(t){return t.headers.keys().reduce((function(e,n){return e[n]=t.headers.getAll(n).join(","),e}),{})},t=fe([ae()],t)}(),qi="X-XSRF-TOKEN";var zi=function(){},Qi=function(){function t(t){this.doc=t,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=function(t,e){var n,i;e=encodeURIComponent(e);try{for(var r=ve(t.split(";")),a=r.next();!a.done;a=r.next()){var o=a.value,s=o.indexOf("="),u=Te(-1==s?[o,""]:[o.slice(0,s),o.slice(s+1)],2),c=u[0],l=u[1];if(c.trim()===e)return decodeURIComponent(l)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return null}(t,"XSRF-TOKEN"),this.lastCookieString=t),this.lastToken},t=fe([ae(),he(0,se(ce.DOCUMENT)),ye("design:paramtypes",[Object])],t)}(),Ji=function(){function t(t){this.tokenService=t}return t.prototype.intercept=function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var i=this.tokenService.getToken();return null===i||t.headers.has(qi)||(t=t.clone({headers:t.headers.set(qi,i)})),e.handle(t)},t=fe([ae(),he(0,se(ce.HttpXsrfCookieExtractor)),ye("design:paramtypes",[zi])],t)}(),Xi=new te;Xi.bind(ce.HttpClientInternal).to(Ci),Xi.bind(ce.NoopInterceptor).to(ki),Xi.bind(ce.JsonpClientBackend).to(Pi),Xi.bind(ce.DOCUMENT).to(Fi),Xi.bind(ce.JsonpInterceptor).to(xi),window&&window.XMLHttpRequest&&Xi.bind(ce.XhrFactory).to(Wi),Xi.bind(ce.HttpXsrfCookieExtractor).to(Qi),Xi.bind(ce.HttpXsrfInterceptor).to(Ji),Xi.bind(ce.HTTP_INTERCEPTORS).to(Ji),Xi.bind(ce.HttpBackend).toDynamicValue((function(t){return window&&window.XMLHttpRequest?new Yi(t.container.get(ce.XhrFactory)):new Gi})),Xi.bind(ce.HttpInterceptingHandler).to(Vi);var $i=function(){function t(){}return t.prototype.decodeToken=function(t){if(!t||""===t)return null;var e=t.split(".");if(3!==e.length)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");var n=this.urlBase64Decode(e[1]);if(!n)throw new Error("Cannot decode the token.");return JSON.parse(n)},t.prototype.urlBase64Decode=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(e)},t.prototype.b64DecodeUnicode=function(t){return decodeURIComponent(Array.prototype.map.call(this.b64decode(t),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))},t.prototype.b64decode=function(t){var e="";if((t=String(t).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var n=0,i=void 0,r=void 0,a=0;r=t.charAt(a++);~r&&(i=n%4?64*i+r:r,n++%4)?e+=String.fromCharCode(255&i>>(-2*n&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return e},t}(),Zi={TelemetryWebsocketService:Symbol.for("TelemetryWebsocketService"),Window:Symbol.for("Window"),NgZone:Symbol.for("ngZone"),AlarmDataService:Symbol.for("AlarmDataService"),EventDataService:Symbol.for("EventDataService"),EntityDataService:Symbol.for("EntityDataService"),DataSubscriptionService:Symbol.for("DataSubscriptionService"),UtilsService:Symbol.for("UtilsService"),TimeService:Symbol.for("TimeService"),RafService:Symbol.for("RafService"),TranslateService:Symbol.for("TranslateService"),AdminService:Symbol.for("AdminService"),OAuth2Service:Symbol.for("OAuth2Service"),OtaPackageService:Symbol.for("OtaPackageService"),QueueService:Symbol.for("QueueService"),ResourceService:Symbol.for("ResourceService"),TenantProfileService:Symbol.for("TenantProfileService"),TenantService:Symbol.for("TenantService"),UiSettingsService:Symbol.for("UiSettingsService"),UserService:Symbol.for("UserService"),AlarmService:Symbol.for("AlarmService"),AssetService:Symbol.for("AssetService"),AttributeService:Symbol.for("AttributeService"),AuditLogService:Symbol.for("AuditLogService"),CustomerService:Symbol.for("CustomerService"),DeviceService:Symbol.for("DeviceService"),EdgeService:Symbol.for("EdgeService"),EntityRelationService:Symbol.for("EntityRelationService"),EntityViewService:Symbol.for("EntityViewService"),EntityService:Symbol.for("EntityService"),EventService:Symbol.for("EventService"),AuthService:Symbol.for("AuthService"),HttpClient:Symbol.for("HttpClient"),DeviceProfileService:Symbol.for("DeviceProfileService"),EntityGroupService:Symbol.for("EntityGroupService"),LocalStorage:Symbol.for("LocalStorage"),SchedulerService:Symbol.for("SchedulerService"),AssetProfileService:Symbol.for("AssetProfileService"),NotificationService:Symbol.for("NotificationService"),ImageService:Symbol.for("ImageService"),NotificationWebsocketService:Symbol.for("NotificationWebsocketService"),RuleEngineService:Symbol.for("RuleEngineService")},tr=function(t){function e(e,n){var i=t.call(this,{fromObject:n})||this;return i.interceptorConfig=e,i}return pe(e,t),e}(vi),er=function(t,e,n){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=!1),this.ignoreLoading=t,this.ignoreErrors=e,this.resendRequest=n};function nr(t){return t||(t={}),ir(t.ignoreLoading,t.ignoreErrors,t.resendRequest)}function ir(t,e,n){return void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=!1),{headers:new hi({"Content-Type":"application/json"}),params:new tr(new er(t,e,n))}}function rr(t,e,n){return void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=!1),{params:new tr(new er(t,e,n))}}var ar,or,sr={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ar=sr,or=sr.exports,function(){var t,n="Expected a function",i="__lodash_hash_undefined__",r="__lodash_placeholder__",a=16,o=32,s=64,u=128,c=256,l=1/0,p=9007199254740991,d=NaN,f=4294967295,h=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",a],["flip",512],["partial",o],["partialRight",s],["rearg",c]],y="[object Arguments]",m="[object Array]",g="[object Boolean]",v="[object Date]",T="[object Error]",E="[object Function]",b="[object GeneratorFunction]",S="[object Map]",_="[object Number]",A="[object Object]",w="[object Promise]",I="[object RegExp]",D="[object Set]",R="[object String]",N="[object Symbol]",O="[object WeakMap]",C="[object ArrayBuffer]",M="[object DataView]",k="[object Float32Array]",L="[object Float64Array]",U="[object Int8Array]",P="[object Int16Array]",x="[object Int32Array]",F="[object Uint8Array]",W="[object Uint8ClampedArray]",V="[object Uint16Array]",j="[object Uint32Array]",Y=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,q=RegExp(K.source),z=RegExp(G.source),Q=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),it=/^\s+/,rt=/\s/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,ht=/^0b[01]+$/i,yt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,gt=/^(?:0|[1-9]\d*)$/,vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Tt=/($^)/,Et=/['\n\r\u2028\u2029\\]/g,bt="\\ud800-\\udfff",St="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",_t="\\u2700-\\u27bf",At="a-z\\xdf-\\xf6\\xf8-\\xff",wt="A-Z\\xc0-\\xd6\\xd8-\\xde",It="\\ufe0e\\ufe0f",Dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rt="['’]",Nt="["+bt+"]",Ot="["+Dt+"]",Ct="["+St+"]",Mt="\\d+",kt="["+_t+"]",Lt="["+At+"]",Ut="[^"+bt+Dt+Mt+_t+At+wt+"]",Pt="\\ud83c[\\udffb-\\udfff]",xt="[^"+bt+"]",Ft="(?:\\ud83c[\\udde6-\\uddff]){2}",Wt="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+wt+"]",jt="\\u200d",Yt="(?:"+Lt+"|"+Ut+")",Ht="(?:"+Vt+"|"+Ut+")",Bt="(?:['’](?:d|ll|m|re|s|t|ve))?",Kt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Gt="(?:"+Ct+"|"+Pt+")?",qt="["+It+"]?",zt=qt+Gt+"(?:"+jt+"(?:"+[xt,Ft,Wt].join("|")+")"+qt+Gt+")*",Qt="(?:"+[kt,Ft,Wt].join("|")+")"+zt,Jt="(?:"+[xt+Ct+"?",Ct,Ft,Wt,Nt].join("|")+")",Xt=RegExp(Rt,"g"),$t=RegExp(Ct,"g"),Zt=RegExp(Pt+"(?="+Pt+")|"+Jt+zt,"g"),te=RegExp([Vt+"?"+Lt+"+"+Bt+"(?="+[Ot,Vt,"$"].join("|")+")",Ht+"+"+Kt+"(?="+[Ot,Vt+Yt,"$"].join("|")+")",Vt+"?"+Yt+"+"+Bt,Vt+"+"+Kt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mt,Qt].join("|"),"g"),ee=RegExp("["+jt+bt+St+It+"]"),ne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ie=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ae={};ae[k]=ae[L]=ae[U]=ae[P]=ae[x]=ae[F]=ae[W]=ae[V]=ae[j]=!0,ae[y]=ae[m]=ae[C]=ae[g]=ae[M]=ae[v]=ae[T]=ae[E]=ae[S]=ae[_]=ae[A]=ae[I]=ae[D]=ae[R]=ae[O]=!1;var oe={};oe[y]=oe[m]=oe[C]=oe[M]=oe[g]=oe[v]=oe[k]=oe[L]=oe[U]=oe[P]=oe[x]=oe[S]=oe[_]=oe[A]=oe[I]=oe[D]=oe[R]=oe[N]=oe[F]=oe[W]=oe[V]=oe[j]=!0,oe[T]=oe[E]=oe[O]=!1;var se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ue=parseFloat,ce=parseInt,le="object"==typeof e&&e&&e.Object===Object&&e,pe="object"==typeof self&&self&&self.Object===Object&&self,de=le||pe||Function("return this")(),fe=or&&!or.nodeType&&or,he=fe&&ar&&!ar.nodeType&&ar,ye=he&&he.exports===fe,me=ye&&le.process,ge=function(){try{var t=he&&he.require&&he.require("util").types;return t||me&&me.binding&&me.binding("util")}catch(t){}}(),ve=ge&&ge.isArrayBuffer,Te=ge&&ge.isDate,Ee=ge&&ge.isMap,be=ge&&ge.isRegExp,Se=ge&&ge.isSet,_e=ge&&ge.isTypedArray;function Ae(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function we(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var o=t[r];e(i,o,n(o),t)}return i}function Ie(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function De(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Re(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Ne(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}function Oe(t,e){return!(null==t||!t.length)&&Ve(t,e,0)>-1}function Ce(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Me(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function ke(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Le(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function Ue(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Pe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var xe=Be("length");function Fe(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function We(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function Ve(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):We(t,Ye,n)}function je(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function Ye(t){return t!=t}function He(t,e){var n=null==t?0:t.length;return n?qe(t,e)/n:d}function Be(e){return function(n){return null==n?t:n[e]}}function Ke(e){return function(n){return null==e?t:e[n]}}function Ge(t,e,n,i,r){return r(t,(function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)})),n}function qe(e,n){for(var i,r=-1,a=e.length;++r<a;){var o=n(e[r]);o!==t&&(i=i===t?o:i+o)}return i}function ze(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Qe(t){return t?t.slice(0,fn(t)+1).replace(it,""):t}function Je(t){return function(e){return t(e)}}function Xe(t,e){return Me(e,(function(e){return t[e]}))}function $e(t,e){return t.has(e)}function Ze(t,e){for(var n=-1,i=t.length;++n<i&&Ve(e,t[n],0)>-1;);return n}function tn(t,e){for(var n=t.length;n--&&Ve(e,t[n],0)>-1;);return n}var en=Ke({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),nn=Ke({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rn(t){return"\\"+se[t]}function an(t){return ee.test(t)}function on(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function sn(t,e){return function(n){return t(e(n))}}function un(t,e){for(var n=-1,i=t.length,a=0,o=[];++n<i;){var s=t[n];s!==e&&s!==r||(t[n]=r,o[a++]=n)}return o}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return an(t)?function(t){for(var e=Zt.lastIndex=0;Zt.test(t);)++e;return e}(t):xe(t)}function dn(t){return an(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.split("")}(t)}function fn(t){for(var e=t.length;e--&&rt.test(t.charAt(e)););return e}var hn=Ke({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),yn=function e(rt){var bt,St=(rt=null==rt?de:yn.defaults(de.Object(),rt,yn.pick(de,ie))).Array,_t=rt.Date,At=rt.Error,wt=rt.Function,It=rt.Math,Dt=rt.Object,Rt=rt.RegExp,Nt=rt.String,Ot=rt.TypeError,Ct=St.prototype,Mt=wt.prototype,kt=Dt.prototype,Lt=rt["__core-js_shared__"],Ut=Mt.toString,Pt=kt.hasOwnProperty,xt=0,Ft=(bt=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+bt:"",Wt=kt.toString,Vt=Ut.call(Dt),jt=de._,Yt=Rt("^"+Ut.call(Pt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=ye?rt.Buffer:t,Bt=rt.Symbol,Kt=rt.Uint8Array,Gt=Ht?Ht.allocUnsafe:t,qt=sn(Dt.getPrototypeOf,Dt),zt=Dt.create,Qt=kt.propertyIsEnumerable,Jt=Ct.splice,Zt=Bt?Bt.isConcatSpreadable:t,ee=Bt?Bt.iterator:t,se=Bt?Bt.toStringTag:t,le=function(){try{var t=da(Dt,"defineProperty");return t({},"",{}),t}catch(t){}}(),pe=rt.clearTimeout!==de.clearTimeout&&rt.clearTimeout,fe=_t&&_t.now!==de.Date.now&&_t.now,he=rt.setTimeout!==de.setTimeout&&rt.setTimeout,me=It.ceil,ge=It.floor,xe=Dt.getOwnPropertySymbols,Ke=Ht?Ht.isBuffer:t,mn=rt.isFinite,gn=Ct.join,vn=sn(Dt.keys,Dt),Tn=It.max,En=It.min,bn=_t.now,Sn=rt.parseInt,_n=It.random,An=Ct.reverse,wn=da(rt,"DataView"),In=da(rt,"Map"),Dn=da(rt,"Promise"),Rn=da(rt,"Set"),Nn=da(rt,"WeakMap"),On=da(Dt,"create"),Cn=Nn&&new Nn,Mn={},kn=Fa(wn),Ln=Fa(In),Un=Fa(Dn),Pn=Fa(Rn),xn=Fa(Nn),Fn=Bt?Bt.prototype:t,Wn=Fn?Fn.valueOf:t,Vn=Fn?Fn.toString:t;function jn(t){if(ns(t)&&!Ko(t)&&!(t instanceof Kn)){if(t instanceof Bn)return t;if(Pt.call(t,"__wrapped__"))return Wa(t)}return new Bn(t)}var Yn=function(){function e(){}return function(n){if(!es(n))return{};if(zt)return zt(n);e.prototype=n;var i=new e;return e.prototype=t,i}}();function Hn(){}function Bn(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}function Kn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new zn;++e<n;)this.add(t[e])}function Jn(t){var e=this.__data__=new qn(t);this.size=e.size}function Xn(t,e){var n=Ko(t),i=!n&&Bo(t),r=!n&&!i&&Qo(t),a=!n&&!i&&!r&&ls(t),o=n||i||r||a,s=o?ze(t.length,Nt):[],u=s.length;for(var c in t)!e&&!Pt.call(t,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ta(c,u))||s.push(c);return s}function $n(e){var n=e.length;return n?e[Qi(0,n-1)]:t}function Zn(t,e){return Ua(Or(t),ui(e,0,t.length))}function ti(t){return Ua(Or(t))}function ei(e,n,i){(i!==t&&!jo(e[n],i)||i===t&&!(n in e))&&oi(e,n,i)}function ni(e,n,i){var r=e[n];Pt.call(e,n)&&jo(r,i)&&(i!==t||n in e)||oi(e,n,i)}function ii(t,e){for(var n=t.length;n--;)if(jo(t[n][0],e))return n;return-1}function ri(t,e,n,i){return fi(t,(function(t,r,a){e(i,t,n(t),a)})),i}function ai(t,e){return t&&Cr(e,Ms(e),t)}function oi(t,e,n){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function si(e,n){for(var i=-1,r=n.length,a=St(r),o=null==e;++i<r;)a[i]=o?t:Ds(e,n[i]);return a}function ui(e,n,i){return e==e&&(i!==t&&(e=e<=i?e:i),n!==t&&(e=e>=n?e:n)),e}function ci(e,n,i,r,a,o){var s,u=1&n,c=2&n,l=4&n;if(i&&(s=a?i(e,r,a,o):i(e)),s!==t)return s;if(!es(e))return e;var p=Ko(e);if(p){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Pt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!u)return Or(e,s)}else{var d=ya(e),f=d==E||d==b;if(Qo(e))return Ar(e,u);if(d==A||d==y||f&&!a){if(s=c||f?{}:ga(e),!u)return c?function(t,e){return Cr(t,ha(t),e)}(e,function(t,e){return t&&Cr(e,ks(e),t)}(s,e)):function(t,e){return Cr(t,fa(t),e)}(e,ai(s,e))}else{if(!oe[d])return a?e:{};s=function(t,e,n){var i,r=t.constructor;switch(e){case C:return wr(t);case g:case v:return new r(+t);case M:return function(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case k:case L:case U:case P:case x:case F:case W:case V:case j:return Ir(t,n);case S:return new r;case _:case R:return new r(t);case I:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case D:return new r;case N:return i=t,Wn?Dt(Wn.call(i)):{}}}(e,d,u)}}o||(o=new Jn);var h=o.get(e);if(h)return h;o.set(e,s),ss(e)?e.forEach((function(t){s.add(ci(t,n,i,t,e,o))})):is(e)&&e.forEach((function(t,r){s.set(r,ci(t,n,i,r,e,o))}));var m=p?t:(l?c?aa:ra:c?ks:Ms)(e);return Ie(m||e,(function(t,r){m&&(t=e[r=t]),ni(s,r,ci(t,n,i,r,e,o))})),s}function li(e,n,i){var r=i.length;if(null==e)return!r;for(e=Dt(e);r--;){var a=i[r],o=n[a],s=e[a];if(s===t&&!(a in e)||!o(s))return!1}return!0}function pi(e,i,r){if("function"!=typeof e)throw new Ot(n);return Ca((function(){e.apply(t,r)}),i)}function di(t,e,n,i){var r=-1,a=Oe,o=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=Me(e,Je(n))),i?(a=Ce,o=!1):e.length>=200&&(a=$e,o=!1,e=new Qn(e));t:for(;++r<s;){var l=t[r],p=null==n?l:n(l);if(l=i||0!==l?l:0,o&&p==p){for(var d=c;d--;)if(e[d]===p)continue t;u.push(l)}else a(e,p,i)||u.push(l)}return u}jn.templateSettings={escape:Q,evaluate:J,interpolate:X,variable:"",imports:{_:jn}},jn.prototype=Hn.prototype,jn.prototype.constructor=jn,Bn.prototype=Yn(Hn.prototype),Bn.prototype.constructor=Bn,Kn.prototype=Yn(Hn.prototype),Kn.prototype.constructor=Kn,Gn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Gn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gn.prototype.get=function(e){var n=this.__data__;if(On){var r=n[e];return r===i?t:r}return Pt.call(n,e)?n[e]:t},Gn.prototype.has=function(e){var n=this.__data__;return On?n[e]!==t:Pt.call(n,e)},Gn.prototype.set=function(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=On&&n===t?i:n,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=ii(e,t);return!(n<0||(n==e.length-1?e.pop():Jt.call(e,n,1),--this.size,0))},qn.prototype.get=function(e){var n=this.__data__,i=ii(n,e);return i<0?t:n[i][1]},qn.prototype.has=function(t){return ii(this.__data__,t)>-1},qn.prototype.set=function(t,e){var n=this.__data__,i=ii(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},zn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(In||qn),string:new Gn}},zn.prototype.delete=function(t){var e=la(this,t).delete(t);return this.size-=e?1:0,e},zn.prototype.get=function(t){return la(this,t).get(t)},zn.prototype.has=function(t){return la(this,t).has(t)},zn.prototype.set=function(t,e){var n=la(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Qn.prototype.add=Qn.prototype.push=function(t){return this.__data__.set(t,i),this},Qn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.clear=function(){this.__data__=new qn,this.size=0},Jn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Jn.prototype.get=function(t){return this.__data__.get(t)},Jn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qn){var i=n.__data__;if(!In||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new zn(i)}return n.set(t,e),this.size=n.size,this};var fi=Lr(bi),hi=Lr(Si,!0);function yi(t,e){var n=!0;return fi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function mi(e,n,i){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=n(o);if(null!=s&&(u===t?s==s&&!cs(s):i(s,u)))var u=s,c=o}return c}function gi(t,e){var n=[];return fi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function vi(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=va),r||(r=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?vi(s,e-1,n,i,r):ke(r,s):i||(r[r.length]=s)}return r}var Ti=Ur(),Ei=Ur(!0);function bi(t,e){return t&&Ti(t,e,Ms)}function Si(t,e){return t&&Ei(t,e,Ms)}function _i(t,e){return Ne(e,(function(e){return $o(t[e])}))}function Ai(e,n){for(var i=0,r=(n=Er(n,e)).length;null!=e&&i<r;)e=e[xa(n[i++])];return i&&i==r?e:t}function wi(t,e,n){var i=e(t);return Ko(t)?i:ke(i,n(t))}function Ii(e){return null==e?e===t?"[object Undefined]":"[object Null]":se&&se in Dt(e)?function(e){var n=Pt.call(e,se),i=e[se];try{e[se]=t;var r=!0}catch(t){}var a=Wt.call(e);return r&&(n?e[se]=i:delete e[se]),a}(e):function(t){return Wt.call(t)}(e)}function Di(t,e){return t>e}function Ri(t,e){return null!=t&&Pt.call(t,e)}function Ni(t,e){return null!=t&&e in Dt(t)}function Oi(e,n,i){for(var r=i?Ce:Oe,a=e[0].length,o=e.length,s=o,u=St(o),c=1/0,l=[];s--;){var p=e[s];s&&n&&(p=Me(p,Je(n))),c=En(p.length,c),u[s]=!i&&(n||a>=120&&p.length>=120)?new Qn(s&&p):t}p=e[0];var d=-1,f=u[0];t:for(;++d<a&&l.length<c;){var h=p[d],y=n?n(h):h;if(h=i||0!==h?h:0,!(f?$e(f,y):r(l,y,i))){for(s=o;--s;){var m=u[s];if(!(m?$e(m,y):r(e[s],y,i)))continue t}f&&f.push(y),l.push(h)}}return l}function Ci(e,n,i){var r=null==(e=Ra(e,n=Er(n,e)))?e:e[xa(Ja(n))];return null==r?t:Ae(r,e,i)}function Mi(t){return ns(t)&&Ii(t)==y}function ki(e,n,i,r,a){return e===n||(null==e||null==n||!ns(e)&&!ns(n)?e!=e&&n!=n:function(e,n,i,r,a,o){var s=Ko(e),u=Ko(n),c=s?m:ya(e),l=u?m:ya(n),p=(c=c==y?A:c)==A,d=(l=l==y?A:l)==A,f=c==l;if(f&&Qo(e)){if(!Qo(n))return!1;s=!0,p=!1}if(f&&!p)return o||(o=new Jn),s||ls(e)?na(e,n,i,r,a,o):function(t,e,n,i,r,a,o){switch(n){case M:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case C:return!(t.byteLength!=e.byteLength||!a(new Kt(t),new Kt(e)));case g:case v:case _:return jo(+t,+e);case T:return t.name==e.name&&t.message==e.message;case I:case R:return t==e+"";case S:var s=on;case D:var u=1&i;if(s||(s=cn),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;i|=2,o.set(t,e);var l=na(s(t),s(e),i,r,a,o);return o.delete(t),l;case N:if(Wn)return Wn.call(t)==Wn.call(e)}return!1}(e,n,c,i,r,a,o);if(!(1&i)){var h=p&&Pt.call(e,"__wrapped__"),E=d&&Pt.call(n,"__wrapped__");if(h||E){var b=h?e.value():e,w=E?n.value():n;return o||(o=new Jn),a(b,w,i,r,o)}}return!!f&&(o||(o=new Jn),function(e,n,i,r,a,o){var s=1&i,u=ra(e),c=u.length,l=ra(n),p=l.length;if(c!=p&&!s)return!1;for(var d=c;d--;){var f=u[d];if(!(s?f in n:Pt.call(n,f)))return!1}var h=o.get(e),y=o.get(n);if(h&&y)return h==n&&y==e;var m=!0;o.set(e,n),o.set(n,e);for(var g=s;++d<c;){var v=e[f=u[d]],T=n[f];if(r)var E=s?r(T,v,f,n,e,o):r(v,T,f,e,n,o);if(!(E===t?v===T||a(v,T,i,r,o):E)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var b=e.constructor,S=n.constructor;b==S||!("constructor"in e)||!("constructor"in n)||"function"==typeof b&&b instanceof b&&"function"==typeof S&&S instanceof S||(m=!1)}return o.delete(e),o.delete(n),m}(e,n,i,r,a,o))}(e,n,i,r,ki,a))}function Li(e,n,i,r){var a=i.length,o=a,s=!r;if(null==e)return!o;for(e=Dt(e);a--;){var u=i[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<o;){var c=(u=i[a])[0],l=e[c],p=u[1];if(s&&u[2]){if(l===t&&!(c in e))return!1}else{var d=new Jn;if(r)var f=r(l,p,c,e,n,d);if(!(f===t?ki(p,l,3,r,d):f))return!1}}return!0}function Ui(t){return!(!es(t)||function(t){return!!Ft&&Ft in t}(t))&&($o(t)?Yt:yt).test(Fa(t))}function Pi(t){return"function"==typeof t?t:null==t?ru:"object"==typeof t?Ko(t)?Yi(t[0],t[1]):ji(t):fu(t)}function xi(t){if(!Aa(t))return vn(t);var e=[];for(var n in Dt(t))Pt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fi(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in Dt(t))e.push(n);return e}(t);var e=Aa(t),n=[];for(var i in t)("constructor"!=i||!e&&Pt.call(t,i))&&n.push(i);return n}function Wi(t,e){return t<e}function Vi(t,e){var n=-1,i=qo(t)?St(t.length):[];return fi(t,(function(t,r,a){i[++n]=e(t,r,a)})),i}function ji(t){var e=pa(t);return 1==e.length&&e[0][2]?Ia(e[0][0],e[0][1]):function(n){return n===t||Li(n,t,e)}}function Yi(e,n){return ba(e)&&wa(n)?Ia(xa(e),n):function(i){var r=Ds(i,e);return r===t&&r===n?Rs(i,e):ki(n,r,3)}}function Hi(e,n,i,r,a){e!==n&&Ti(n,(function(o,s){if(a||(a=new Jn),es(o))!function(e,n,i,r,a,o,s){var u=Na(e,i),c=Na(n,i),l=s.get(c);if(l)ei(e,i,l);else{var p=o?o(u,c,i+"",e,n,s):t,d=p===t;if(d){var f=Ko(c),h=!f&&Qo(c),y=!f&&!h&&ls(c);p=c,f||h||y?Ko(u)?p=u:zo(u)?p=Or(u):h?(d=!1,p=Ar(c,!0)):y?(d=!1,p=Ir(c,!0)):p=[]:as(c)||Bo(c)?(p=u,Bo(u)?p=vs(u):es(u)&&!$o(u)||(p=ga(c))):d=!1}d&&(s.set(c,p),a(p,c,r,o,s),s.delete(c)),ei(e,i,p)}}(e,n,s,i,Hi,r,a);else{var u=r?r(Na(e,s),o,s+"",e,n,a):t;u===t&&(u=o),ei(e,s,u)}}),ks)}function Bi(e,n){var i=e.length;if(i)return Ta(n+=n<0?i:0,i)?e[n]:t}function Ki(t,e,n){e=e.length?Me(e,(function(t){return Ko(t)?function(e){return Ai(e,1===t.length?t[0]:t)}:t})):[ru];var i=-1;e=Me(e,Je(ca()));var r=Vi(t,(function(t,n,r){var a=Me(e,(function(e){return e(t)}));return{criteria:a,index:++i,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(r,(function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,a=e.criteria,o=r.length,s=n.length;++i<o;){var u=Dr(r[i],a[i]);if(u)return i>=s?u:u*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}))}function Gi(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],s=Ai(t,o);n(s,o)&&tr(a,Er(o,t),s)}return a}function qi(t,e,n,i){var r=i?je:Ve,a=-1,o=e.length,s=t;for(t===e&&(e=Or(e)),n&&(s=Me(t,Je(n)));++a<o;)for(var u=0,c=e[a],l=n?n(c):c;(u=r(s,l,u,i))>-1;)s!==t&&Jt.call(s,u,1),Jt.call(t,u,1);return t}function zi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;Ta(r)?Jt.call(t,r,1):dr(t,r)}}return t}function Qi(t,e){return t+ge(_n()*(e-t+1))}function Ji(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=ge(e/2))&&(t+=t)}while(e);return n}function Xi(t,e){return Ma(Da(t,e,ru),t+"")}function $i(t){return $n(js(t))}function Zi(t,e){var n=js(t);return Ua(n,ui(e,0,n.length))}function tr(e,n,i,r){if(!es(e))return e;for(var a=-1,o=(n=Er(n,e)).length,s=o-1,u=e;null!=u&&++a<o;){var c=xa(n[a]),l=i;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var p=u[c];(l=r?r(p,c,u):t)===t&&(l=es(p)?p:Ta(n[a+1])?[]:{})}ni(u,c,l),u=u[c]}return e}var er=Cn?function(t,e){return Cn.set(t,e),t}:ru,nr=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:ru;function ir(t){return Ua(js(t))}function rr(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=St(r);++i<r;)a[i]=t[i+e];return a}function ar(t,e){var n;return fi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function or(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var a=i+r>>>1,o=t[a];null!==o&&!cs(o)&&(n?o<=e:o<e)?i=a+1:r=a}return r}return sr(t,e,ru,n)}function sr(e,n,i,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(n=i(n))!=n,u=null===n,c=cs(n),l=n===t;a<o;){var p=ge((a+o)/2),d=i(e[p]),f=d!==t,h=null===d,y=d==d,m=cs(d);if(s)var g=r||y;else g=l?y&&(r||f):u?y&&f&&(r||!h):c?y&&f&&!h&&(r||!m):!h&&!m&&(r?d<=n:d<n);g?a=p+1:o=p}return En(o,4294967294)}function ur(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!jo(s,u)){var u=s;a[r++]=0===o?0:o}}return a}function cr(t){return"number"==typeof t?t:cs(t)?d:+t}function lr(t){if("string"==typeof t)return t;if(Ko(t))return Me(t,lr)+"";if(cs(t))return Vn?Vn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pr(t,e,n){var i=-1,r=Oe,a=t.length,o=!0,s=[],u=s;if(n)o=!1,r=Ce;else if(a>=200){var c=e?null:Jr(t);if(c)return cn(c);o=!1,r=$e,u=new Qn}else u=e?[]:s;t:for(;++i<a;){var l=t[i],p=e?e(l):l;if(l=n||0!==l?l:0,o&&p==p){for(var d=u.length;d--;)if(u[d]===p)continue t;e&&u.push(p),s.push(l)}else r(u,p,n)||(u!==s&&u.push(p),s.push(l))}return s}function dr(t,e){return null==(t=Ra(t,e=Er(e,t)))||delete t[xa(Ja(e))]}function fr(t,e,n,i){return tr(t,e,n(Ai(t,e)),i)}function hr(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?rr(t,i?0:a,i?a+1:r):rr(t,i?a+1:0,i?r:a)}function yr(t,e){var n=t;return n instanceof Kn&&(n=n.value()),Le(e,(function(t,e){return e.func.apply(e.thisArg,ke([t],e.args))}),n)}function mr(t,e,n){var i=t.length;if(i<2)return i?pr(t[0]):[];for(var r=-1,a=St(i);++r<i;)for(var o=t[r],s=-1;++s<i;)s!=r&&(a[r]=di(a[r]||o,t[s],e,n));return pr(vi(a,1),e,n)}function gr(e,n,i){for(var r=-1,a=e.length,o=n.length,s={};++r<a;){var u=r<o?n[r]:t;i(s,e[r],u)}return s}function vr(t){return zo(t)?t:[]}function Tr(t){return"function"==typeof t?t:ru}function Er(t,e){return Ko(t)?t:ba(t,e)?[t]:Pa(Ts(t))}var br=Xi;function Sr(e,n,i){var r=e.length;return i=i===t?r:i,!n&&i>=r?e:rr(e,n,i)}var _r=pe||function(t){return de.clearTimeout(t)};function Ar(t,e){if(e)return t.slice();var n=t.length,i=Gt?Gt(n):new t.constructor(n);return t.copy(i),i}function wr(t){var e=new t.constructor(t.byteLength);return new Kt(e).set(new Kt(t)),e}function Ir(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Dr(e,n){if(e!==n){var i=e!==t,r=null===e,a=e==e,o=cs(e),s=n!==t,u=null===n,c=n==n,l=cs(n);if(!u&&!l&&!o&&e>n||o&&s&&c&&!u&&!l||r&&s&&c||!i&&c||!a)return 1;if(!r&&!o&&!l&&e<n||l&&i&&a&&!r&&!o||u&&i&&a||!s&&a||!c)return-1}return 0}function Rr(t,e,n,i){for(var r=-1,a=t.length,o=n.length,s=-1,u=e.length,c=Tn(a-o,0),l=St(u+c),p=!i;++s<u;)l[s]=e[s];for(;++r<o;)(p||r<a)&&(l[n[r]]=t[r]);for(;c--;)l[s++]=t[r++];return l}function Nr(t,e,n,i){for(var r=-1,a=t.length,o=-1,s=n.length,u=-1,c=e.length,l=Tn(a-s,0),p=St(l+c),d=!i;++r<l;)p[r]=t[r];for(var f=r;++u<c;)p[f+u]=e[u];for(;++o<s;)(d||r<a)&&(p[f+n[o]]=t[r++]);return p}function Or(t,e){var n=-1,i=t.length;for(e||(e=St(i));++n<i;)e[n]=t[n];return e}function Cr(e,n,i,r){var a=!i;i||(i={});for(var o=-1,s=n.length;++o<s;){var u=n[o],c=r?r(i[u],e[u],u,i,e):t;c===t&&(c=e[u]),a?oi(i,u,c):ni(i,u,c)}return i}function Mr(t,e){return function(n,i){var r=Ko(n)?we:ri,a=e?e():{};return r(n,t,ca(i,2),a)}}function kr(e){return Xi((function(n,i){var r=-1,a=i.length,o=a>1?i[a-1]:t,s=a>2?i[2]:t;for(o=e.length>3&&"function"==typeof o?(a--,o):t,s&&Ea(i[0],i[1],s)&&(o=a<3?t:o,a=1),n=Dt(n);++r<a;){var u=i[r];u&&e(n,u,r,o)}return n}))}function Lr(t,e){return function(n,i){if(null==n)return n;if(!qo(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=Dt(n);(e?a--:++a<r)&&!1!==i(o[a],a,o););return n}}function Ur(t){return function(e,n,i){for(var r=-1,a=Dt(e),o=i(e),s=o.length;s--;){var u=o[t?s:++r];if(!1===n(a[u],u,a))break}return e}}function Pr(e){return function(n){var i=an(n=Ts(n))?dn(n):t,r=i?i[0]:n.charAt(0),a=i?Sr(i,1).join(""):n.slice(1);return r[e]()+a}}function xr(t){return function(e){return Le($s(Bs(e).replace(Xt,"")),t,"")}}function Fr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Yn(t.prototype),i=t.apply(n,e);return es(i)?i:n}}function Wr(e){return function(n,i,r){var a=Dt(n);if(!qo(n)){var o=ca(i,3);n=Ms(n),i=function(t){return o(a[t],t,a)}}var s=e(n,i,r);return s>-1?a[o?n[s]:s]:t}}function Vr(e){return ia((function(i){var r=i.length,a=r,o=Bn.prototype.thru;for(e&&i.reverse();a--;){var s=i[a];if("function"!=typeof s)throw new Ot(n);if(o&&!u&&"wrapper"==sa(s))var u=new Bn([],!0)}for(a=u?a:r;++a<r;){var c=sa(s=i[a]),l="wrapper"==c?oa(s):t;u=l&&Sa(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[sa(l[0])].apply(u,l[3]):1==s.length&&Sa(s)?u[c]():u.thru(s)}return function(){var t=arguments,e=t[0];if(u&&1==t.length&&Ko(e))return u.plant(e).value();for(var n=0,a=r?i[n].apply(this,t):e;++n<r;)a=i[n].call(this,a);return a}}))}function jr(e,n,i,r,a,o,s,c,l,p){var d=n&u,f=1&n,h=2&n,y=24&n,m=512&n,g=h?t:Fr(e);return function u(){for(var v=arguments.length,T=St(v),E=v;E--;)T[E]=arguments[E];if(y)var b=ua(u),S=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(T,b);if(r&&(T=Rr(T,r,a,y)),o&&(T=Nr(T,o,s,y)),v-=S,y&&v<p){var _=un(T,b);return zr(e,n,jr,u.placeholder,i,T,_,c,l,p-v)}var A=f?i:this,w=h?A[e]:e;return v=T.length,c?T=function(e,n){for(var i=e.length,r=En(n.length,i),a=Or(e);r--;){var o=n[r];e[r]=Ta(o,i)?a[o]:t}return e}(T,c):m&&v>1&&T.reverse(),d&&l<v&&(T.length=l),this&&this!==de&&this instanceof u&&(w=g||Fr(w)),w.apply(A,T)}}function Yr(t,e){return function(n,i){return function(t,e,n,i){return bi(t,(function(t,r,a){e(i,n(t),r,a)})),i}(n,t,e(i),{})}}function Hr(e,n){return function(i,r){var a;if(i===t&&r===t)return n;if(i!==t&&(a=i),r!==t){if(a===t)return r;"string"==typeof i||"string"==typeof r?(i=lr(i),r=lr(r)):(i=cr(i),r=cr(r)),a=e(i,r)}return a}}function Br(t){return ia((function(e){return e=Me(e,Je(ca())),Xi((function(n){var i=this;return t(e,(function(t){return Ae(t,i,n)}))}))}))}function Kr(e,n){var i=(n=n===t?" ":lr(n)).length;if(i<2)return i?Ji(n,e):n;var r=Ji(n,me(e/pn(n)));return an(n)?Sr(dn(r),0,e).join(""):r.slice(0,e)}function Gr(e){return function(n,i,r){return r&&"number"!=typeof r&&Ea(n,i,r)&&(i=r=t),n=hs(n),i===t?(i=n,n=0):i=hs(i),function(t,e,n,i){for(var r=-1,a=Tn(me((e-t)/(n||1)),0),o=St(a);a--;)o[i?a:++r]=t,t+=n;return o}(n,i,r=r===t?n<i?1:-1:hs(r),e)}}function qr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=gs(e),n=gs(n)),t(e,n)}}function zr(e,n,i,r,a,u,c,l,p,d){var f=8&n;n|=f?o:s,4&(n&=~(f?s:o))||(n&=-4);var h=[e,n,a,f?u:t,f?c:t,f?t:u,f?t:c,l,p,d],y=i.apply(t,h);return Sa(e)&&Oa(y,h),y.placeholder=r,ka(y,e,n)}function Qr(t){var e=It[t];return function(t,n){if(t=gs(t),(n=null==n?0:En(ys(n),292))&&mn(t)){var i=(Ts(t)+"e").split("e");return+((i=(Ts(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Jr=Rn&&1/cn(new Rn([,-0]))[1]==l?function(t){return new Rn(t)}:cu;function Xr(t){return function(e){var n=ya(e);return n==S?on(e):n==D?ln(e):function(t,e){return Me(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function $r(e,i,l,p,d,f,h,y){var m=2&i;if(!m&&"function"!=typeof e)throw new Ot(n);var g=p?p.length:0;if(g||(i&=-97,p=d=t),h=h===t?h:Tn(ys(h),0),y=y===t?y:ys(y),g-=d?d.length:0,i&s){var v=p,T=d;p=d=t}var E=m?t:oa(e),b=[e,i,l,p,d,v,T,f,h,y];if(E&&function(t,e){var n=t[1],i=e[1],a=n|i,o=a<131,s=i==u&&8==n||i==u&&n==c&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&i&&(t[2]=e[2],a|=1&n?0:4);var l=e[3];if(l){var p=t[3];t[3]=p?Rr(p,l,e[4]):l,t[4]=p?un(t[3],r):e[4]}(l=e[5])&&(p=t[5],t[5]=p?Nr(p,l,e[6]):l,t[6]=p?un(t[5],r):e[6]),(l=e[7])&&(t[7]=l),i&u&&(t[8]=null==t[8]?e[8]:En(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=a}(b,E),e=b[0],i=b[1],l=b[2],p=b[3],d=b[4],!(y=b[9]=b[9]===t?m?0:e.length:Tn(b[9]-g,0))&&24&i&&(i&=-25),i&&1!=i)S=8==i||i==a?function(e,n,i){var r=Fr(e);return function a(){for(var o=arguments.length,s=St(o),u=o,c=ua(a);u--;)s[u]=arguments[u];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:un(s,c);return(o-=l.length)<i?zr(e,n,jr,a.placeholder,t,s,l,t,t,i-o):Ae(this&&this!==de&&this instanceof a?r:e,this,s)}}(e,i,y):i!=o&&33!=i||d.length?jr.apply(t,b):function(t,e,n,i){var r=1&e,a=Fr(t);return function e(){for(var o=-1,s=arguments.length,u=-1,c=i.length,l=St(c+s),p=this&&this!==de&&this instanceof e?a:t;++u<c;)l[u]=i[u];for(;s--;)l[u++]=arguments[++o];return Ae(p,r?n:this,l)}}(e,i,l,p);else var S=function(t,e,n){var i=1&e,r=Fr(t);return function e(){return(this&&this!==de&&this instanceof e?r:t).apply(i?n:this,arguments)}}(e,i,l);return ka((E?er:Oa)(S,b),e,i)}function Zr(e,n,i,r){return e===t||jo(e,kt[i])&&!Pt.call(r,i)?n:e}function ta(e,n,i,r,a,o){return es(e)&&es(n)&&(o.set(n,e),Hi(e,n,t,ta,o),o.delete(n)),e}function ea(e){return as(e)?t:e}function na(e,n,i,r,a,o){var s=1&i,u=e.length,c=n.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(e),p=o.get(n);if(l&&p)return l==n&&p==e;var d=-1,f=!0,h=2&i?new Qn:t;for(o.set(e,n),o.set(n,e);++d<u;){var y=e[d],m=n[d];if(r)var g=s?r(m,y,d,n,e,o):r(y,m,d,e,n,o);if(g!==t){if(g)continue;f=!1;break}if(h){if(!Pe(n,(function(t,e){if(!$e(h,e)&&(y===t||a(y,t,i,r,o)))return h.push(e)}))){f=!1;break}}else if(y!==m&&!a(y,m,i,r,o)){f=!1;break}}return o.delete(e),o.delete(n),f}function ia(e){return Ma(Da(e,t,Ka),e+"")}function ra(t){return wi(t,Ms,fa)}function aa(t){return wi(t,ks,ha)}var oa=Cn?function(t){return Cn.get(t)}:cu;function sa(t){for(var e=t.name+"",n=Mn[e],i=Pt.call(Mn,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function ua(t){return(Pt.call(jn,"placeholder")?jn:t).placeholder}function ca(){var t=jn.iteratee||au;return t=t===au?Pi:t,arguments.length?t(arguments[0],arguments[1]):t}function la(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function pa(t){for(var e=Ms(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,wa(r)]}return e}function da(e,n){var i=function(e,n){return null==e?t:e[n]}(e,n);return Ui(i)?i:t}var fa=xe?function(t){return null==t?[]:(t=Dt(t),Ne(xe(t),(function(e){return Qt.call(t,e)})))}:mu,ha=xe?function(t){for(var e=[];t;)ke(e,fa(t)),t=qt(t);return e}:mu,ya=Ii;function ma(t,e,n){for(var i=-1,r=(e=Er(e,t)).length,a=!1;++i<r;){var o=xa(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&ts(r)&&Ta(o,r)&&(Ko(t)||Bo(t))}function ga(t){return"function"!=typeof t.constructor||Aa(t)?{}:Yn(qt(t))}function va(t){return Ko(t)||Bo(t)||!!(Zt&&t&&t[Zt])}function Ta(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&gt.test(t))&&t>-1&&t%1==0&&t<e}function Ea(t,e,n){if(!es(n))return!1;var i=typeof e;return!!("number"==i?qo(n)&&Ta(e,n.length):"string"==i&&e in n)&&jo(n[e],t)}function ba(t,e){if(Ko(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!cs(t))||Z.test(t)||!$.test(t)||null!=e&&t in Dt(e)}function Sa(t){var e=sa(t),n=jn[e];if("function"!=typeof n||!(e in Kn.prototype))return!1;if(t===n)return!0;var i=oa(n);return!!i&&t===i[0]}(wn&&ya(new wn(new ArrayBuffer(1)))!=M||In&&ya(new In)!=S||Dn&&ya(Dn.resolve())!=w||Rn&&ya(new Rn)!=D||Nn&&ya(new Nn)!=O)&&(ya=function(e){var n=Ii(e),i=n==A?e.constructor:t,r=i?Fa(i):"";if(r)switch(r){case kn:return M;case Ln:return S;case Un:return w;case Pn:return D;case xn:return O}return n});var _a=Lt?$o:gu;function Aa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||kt)}function wa(t){return t==t&&!es(t)}function Ia(e,n){return function(i){return null!=i&&i[e]===n&&(n!==t||e in Dt(i))}}function Da(e,n,i){return n=Tn(n===t?e.length-1:n,0),function(){for(var t=arguments,r=-1,a=Tn(t.length-n,0),o=St(a);++r<a;)o[r]=t[n+r];r=-1;for(var s=St(n+1);++r<n;)s[r]=t[r];return s[n]=i(o),Ae(e,this,s)}}function Ra(t,e){return e.length<2?t:Ai(t,rr(e,0,-1))}function Na(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Oa=La(er),Ca=he||function(t,e){return de.setTimeout(t,e)},Ma=La(nr);function ka(t,e,n){var i=e+"";return Ma(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(at,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Ie(h,(function(n){var i="_."+n[0];e&n[1]&&!Oe(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(ot);return e?e[1].split(st):[]}(i),n)))}function La(e){var n=0,i=0;return function(){var r=bn(),a=16-(r-i);if(i=r,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(t,arguments)}}function Ua(e,n){var i=-1,r=e.length,a=r-1;for(n=n===t?r:n;++i<n;){var o=Qi(i,a),s=e[o];e[o]=e[i],e[i]=s}return e.length=n,e}var Pa=function(t){var e=Uo(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,i,r){e.push(i?r.replace(lt,"$1"):n||t)})),e}));function xa(t){if("string"==typeof t||cs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Fa(t){if(null!=t){try{return Ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Wa(t){if(t instanceof Kn)return t.clone();var e=new Bn(t.__wrapped__,t.__chain__);return e.__actions__=Or(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Va=Xi((function(t,e){return zo(t)?di(t,vi(e,1,zo,!0)):[]})),ja=Xi((function(e,n){var i=Ja(n);return zo(i)&&(i=t),zo(e)?di(e,vi(n,1,zo,!0),ca(i,2)):[]})),Ya=Xi((function(e,n){var i=Ja(n);return zo(i)&&(i=t),zo(e)?di(e,vi(n,1,zo,!0),t,i):[]}));function Ha(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ys(n);return r<0&&(r=Tn(i+r,0)),We(t,ca(e,3),r)}function Ba(e,n,i){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return i!==t&&(a=ys(i),a=i<0?Tn(r+a,0):En(a,r-1)),We(e,ca(n,3),a,!0)}function Ka(t){return null!=t&&t.length?vi(t,1):[]}function Ga(e){return e&&e.length?e[0]:t}var qa=Xi((function(t){var e=Me(t,vr);return e.length&&e[0]===t[0]?Oi(e):[]})),za=Xi((function(e){var n=Ja(e),i=Me(e,vr);return n===Ja(i)?n=t:i.pop(),i.length&&i[0]===e[0]?Oi(i,ca(n,2)):[]})),Qa=Xi((function(e){var n=Ja(e),i=Me(e,vr);return(n="function"==typeof n?n:t)&&i.pop(),i.length&&i[0]===e[0]?Oi(i,t,n):[]}));function Ja(e){var n=null==e?0:e.length;return n?e[n-1]:t}var Xa=Xi($a);function $a(t,e){return t&&t.length&&e&&e.length?qi(t,e):t}var Za=ia((function(t,e){var n=null==t?0:t.length,i=si(t,e);return zi(t,Me(e,(function(t){return Ta(t,n)?+t:t})).sort(Dr)),i}));function to(t){return null==t?t:An.call(t)}var eo=Xi((function(t){return pr(vi(t,1,zo,!0))})),no=Xi((function(e){var n=Ja(e);return zo(n)&&(n=t),pr(vi(e,1,zo,!0),ca(n,2))})),io=Xi((function(e){var n=Ja(e);return n="function"==typeof n?n:t,pr(vi(e,1,zo,!0),t,n)}));function ro(t){if(!t||!t.length)return[];var e=0;return t=Ne(t,(function(t){if(zo(t))return e=Tn(t.length,e),!0})),ze(e,(function(e){return Me(t,Be(e))}))}function ao(e,n){if(!e||!e.length)return[];var i=ro(e);return null==n?i:Me(i,(function(e){return Ae(n,t,e)}))}var oo=Xi((function(t,e){return zo(t)?di(t,e):[]})),so=Xi((function(t){return mr(Ne(t,zo))})),uo=Xi((function(e){var n=Ja(e);return zo(n)&&(n=t),mr(Ne(e,zo),ca(n,2))})),co=Xi((function(e){var n=Ja(e);return n="function"==typeof n?n:t,mr(Ne(e,zo),t,n)})),lo=Xi(ro),po=Xi((function(e){var n=e.length,i=n>1?e[n-1]:t;return i="function"==typeof i?(e.pop(),i):t,ao(e,i)}));function fo(t){var e=jn(t);return e.__chain__=!0,e}function ho(t,e){return e(t)}var yo=ia((function(e){var n=e.length,i=n?e[0]:0,r=this.__wrapped__,a=function(t){return si(t,e)};return!(n>1||this.__actions__.length)&&r instanceof Kn&&Ta(i)?((r=r.slice(i,+i+(n?1:0))).__actions__.push({func:ho,args:[a],thisArg:t}),new Bn(r,this.__chain__).thru((function(e){return n&&!e.length&&e.push(t),e}))):this.thru(a)})),mo=Mr((function(t,e,n){Pt.call(t,n)?++t[n]:oi(t,n,1)})),go=Wr(Ha),vo=Wr(Ba);function To(t,e){return(Ko(t)?Ie:fi)(t,ca(e,3))}function Eo(t,e){return(Ko(t)?De:hi)(t,ca(e,3))}var bo=Mr((function(t,e,n){Pt.call(t,n)?t[n].push(e):oi(t,n,[e])})),So=Xi((function(t,e,n){var i=-1,r="function"==typeof e,a=qo(t)?St(t.length):[];return fi(t,(function(t){a[++i]=r?Ae(e,t,n):Ci(t,e,n)})),a})),_o=Mr((function(t,e,n){oi(t,n,e)}));function Ao(t,e){return(Ko(t)?Me:Vi)(t,ca(e,3))}var wo=Mr((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Io=Xi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ea(t,e[0],e[1])?e=[]:n>2&&Ea(e[0],e[1],e[2])&&(e=[e[0]]),Ki(t,vi(e,1),[])})),Do=fe||function(){return de.Date.now()};function Ro(e,n,i){return n=i?t:n,n=e&&null==n?e.length:n,$r(e,u,t,t,t,t,n)}function No(e,i){var r;if("function"!=typeof i)throw new Ot(n);return e=ys(e),function(){return--e>0&&(r=i.apply(this,arguments)),e<=1&&(i=t),r}}var Oo=Xi((function(t,e,n){var i=1;if(n.length){var r=un(n,ua(Oo));i|=o}return $r(t,i,e,n,r)})),Co=Xi((function(t,e,n){var i=3;if(n.length){var r=un(n,ua(Co));i|=o}return $r(e,i,t,n,r)}));function Mo(e,i,r){var a,o,s,u,c,l,p=0,d=!1,f=!1,h=!0;if("function"!=typeof e)throw new Ot(n);function y(n){var i=a,r=o;return a=o=t,p=n,u=e.apply(r,i)}function m(e){var n=e-l;return l===t||n>=i||n<0||f&&e-p>=s}function g(){var t=Do();if(m(t))return v(t);c=Ca(g,function(t){var e=i-(t-l);return f?En(e,s-(t-p)):e}(t))}function v(e){return c=t,h&&a?y(e):(a=o=t,u)}function T(){var e=Do(),n=m(e);if(a=arguments,o=this,l=e,n){if(c===t)return function(t){return p=t,c=Ca(g,i),d?y(t):u}(l);if(f)return _r(c),c=Ca(g,i),y(l)}return c===t&&(c=Ca(g,i)),u}return i=gs(i)||0,es(r)&&(d=!!r.leading,s=(f="maxWait"in r)?Tn(gs(r.maxWait)||0,i):s,h="trailing"in r?!!r.trailing:h),T.cancel=function(){c!==t&&_r(c),p=0,a=l=o=c=t},T.flush=function(){return c===t?u:v(Do())},T}var ko=Xi((function(t,e){return pi(t,1,e)})),Lo=Xi((function(t,e,n){return pi(t,gs(e)||0,n)}));function Uo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ot(n);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],a=i.cache;if(a.has(r))return a.get(r);var o=t.apply(this,n);return i.cache=a.set(r,o)||a,o};return i.cache=new(Uo.Cache||zn),i}function Po(t){if("function"!=typeof t)throw new Ot(n);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Uo.Cache=zn;var xo=br((function(t,e){var n=(e=1==e.length&&Ko(e[0])?Me(e[0],Je(ca())):Me(vi(e,1),Je(ca()))).length;return Xi((function(i){for(var r=-1,a=En(i.length,n);++r<a;)i[r]=e[r].call(this,i[r]);return Ae(t,this,i)}))})),Fo=Xi((function(e,n){var i=un(n,ua(Fo));return $r(e,o,t,n,i)})),Wo=Xi((function(e,n){var i=un(n,ua(Wo));return $r(e,s,t,n,i)})),Vo=ia((function(e,n){return $r(e,c,t,t,t,n)}));function jo(t,e){return t===e||t!=t&&e!=e}var Yo=qr(Di),Ho=qr((function(t,e){return t>=e})),Bo=Mi(function(){return arguments}())?Mi:function(t){return ns(t)&&Pt.call(t,"callee")&&!Qt.call(t,"callee")},Ko=St.isArray,Go=ve?Je(ve):function(t){return ns(t)&&Ii(t)==C};function qo(t){return null!=t&&ts(t.length)&&!$o(t)}function zo(t){return ns(t)&&qo(t)}var Qo=Ke||gu,Jo=Te?Je(Te):function(t){return ns(t)&&Ii(t)==v};function Xo(t){if(!ns(t))return!1;var e=Ii(t);return e==T||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!as(t)}function $o(t){if(!es(t))return!1;var e=Ii(t);return e==E||e==b||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Zo(t){return"number"==typeof t&&t==ys(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var is=Ee?Je(Ee):function(t){return ns(t)&&ya(t)==S};function rs(t){return"number"==typeof t||ns(t)&&Ii(t)==_}function as(t){if(!ns(t)||Ii(t)!=A)return!1;var e=qt(t);if(null===e)return!0;var n=Pt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ut.call(n)==Vt}var os=be?Je(be):function(t){return ns(t)&&Ii(t)==I},ss=Se?Je(Se):function(t){return ns(t)&&ya(t)==D};function us(t){return"string"==typeof t||!Ko(t)&&ns(t)&&Ii(t)==R}function cs(t){return"symbol"==typeof t||ns(t)&&Ii(t)==N}var ls=_e?Je(_e):function(t){return ns(t)&&ts(t.length)&&!!ae[Ii(t)]},ps=qr(Wi),ds=qr((function(t,e){return t<=e}));function fs(t){if(!t)return[];if(qo(t))return us(t)?dn(t):Or(t);if(ee&&t[ee])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ee]());var e=ya(t);return(e==S?on:e==D?cn:js)(t)}function hs(t){return t?(t=gs(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ys(t){var e=hs(t),n=e%1;return e==e?n?e-n:e:0}function ms(t){return t?ui(ys(t),0,f):0}function gs(t){if("number"==typeof t)return t;if(cs(t))return d;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Qe(t);var n=ht.test(t);return n||mt.test(t)?ce(t.slice(2),n?2:8):ft.test(t)?d:+t}function vs(t){return Cr(t,ks(t))}function Ts(t){return null==t?"":lr(t)}var Es=kr((function(t,e){if(Aa(e)||qo(e))Cr(e,Ms(e),t);else for(var n in e)Pt.call(e,n)&&ni(t,n,e[n])})),bs=kr((function(t,e){Cr(e,ks(e),t)})),Ss=kr((function(t,e,n,i){Cr(e,ks(e),t,i)})),_s=kr((function(t,e,n,i){Cr(e,Ms(e),t,i)})),As=ia(si),ws=Xi((function(e,n){e=Dt(e);var i=-1,r=n.length,a=r>2?n[2]:t;for(a&&Ea(n[0],n[1],a)&&(r=1);++i<r;)for(var o=n[i],s=ks(o),u=-1,c=s.length;++u<c;){var l=s[u],p=e[l];(p===t||jo(p,kt[l])&&!Pt.call(e,l))&&(e[l]=o[l])}return e})),Is=Xi((function(e){return e.push(t,ta),Ae(Us,t,e)}));function Ds(e,n,i){var r=null==e?t:Ai(e,n);return r===t?i:r}function Rs(t,e){return null!=t&&ma(t,e,Ni)}var Ns=Yr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),t[e]=n}),eu(ru)),Os=Yr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),Pt.call(t,e)?t[e].push(n):t[e]=[n]}),ca),Cs=Xi(Ci);function Ms(t){return qo(t)?Xn(t):xi(t)}function ks(t){return qo(t)?Xn(t,!0):Fi(t)}var Ls=kr((function(t,e,n){Hi(t,e,n)})),Us=kr((function(t,e,n,i){Hi(t,e,n,i)})),Ps=ia((function(t,e){var n={};if(null==t)return n;var i=!1;e=Me(e,(function(e){return e=Er(e,t),i||(i=e.length>1),e})),Cr(t,aa(t),n),i&&(n=ci(n,7,ea));for(var r=e.length;r--;)dr(n,e[r]);return n})),xs=ia((function(t,e){return null==t?{}:function(t,e){return Gi(t,e,(function(e,n){return Rs(t,n)}))}(t,e)}));function Fs(t,e){if(null==t)return{};var n=Me(aa(t),(function(t){return[t]}));return e=ca(e),Gi(t,n,(function(t,n){return e(t,n[0])}))}var Ws=Xr(Ms),Vs=Xr(ks);function js(t){return null==t?[]:Xe(t,Ms(t))}var Ys=xr((function(t,e,n){return e=e.toLowerCase(),t+(n?Hs(e):e)}));function Hs(t){return Xs(Ts(t).toLowerCase())}function Bs(t){return(t=Ts(t))&&t.replace(vt,en).replace($t,"")}var Ks=xr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Gs=xr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),qs=Pr("toLowerCase"),zs=xr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Qs=xr((function(t,e,n){return t+(n?" ":"")+Xs(e)})),Js=xr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xs=Pr("toUpperCase");function $s(e,n,i){return e=Ts(e),(n=i?t:n)===t?function(t){return ne.test(t)}(e)?function(t){return t.match(te)||[]}(e):function(t){return t.match(ut)||[]}(e):e.match(n)||[]}var Zs=Xi((function(e,n){try{return Ae(e,t,n)}catch(t){return Xo(t)?t:new At(t)}})),tu=ia((function(t,e){return Ie(e,(function(e){e=xa(e),oi(t,e,Oo(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Vr(),iu=Vr(!0);function ru(t){return t}function au(t){return Pi("function"==typeof t?t:ci(t,1))}var ou=Xi((function(t,e){return function(n){return Ci(n,t,e)}})),su=Xi((function(t,e){return function(n){return Ci(t,n,e)}}));function uu(t,e,n){var i=Ms(e),r=_i(e,i);null!=n||es(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=_i(e,Ms(e)));var a=!(es(n)&&"chain"in n&&!n.chain),o=$o(t);return Ie(r,(function(n){var i=e[n];t[n]=i,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=Or(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,ke([this.value()],arguments))})})),t}function cu(){}var lu=Br(Me),pu=Br(Re),du=Br(Pe);function fu(t){return ba(t)?Be(xa(t)):function(t){return function(e){return Ai(e,t)}}(t)}var hu=Gr(),yu=Gr(!0);function mu(){return[]}function gu(){return!1}var vu,Tu=Hr((function(t,e){return t+e}),0),Eu=Qr("ceil"),bu=Hr((function(t,e){return t/e}),1),Su=Qr("floor"),_u=Hr((function(t,e){return t*e}),1),Au=Qr("round"),wu=Hr((function(t,e){return t-e}),0);return jn.after=function(t,e){if("function"!=typeof e)throw new Ot(n);return t=ys(t),function(){if(--t<1)return e.apply(this,arguments)}},jn.ary=Ro,jn.assign=Es,jn.assignIn=bs,jn.assignInWith=Ss,jn.assignWith=_s,jn.at=As,jn.before=No,jn.bind=Oo,jn.bindAll=tu,jn.bindKey=Co,jn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ko(t)?t:[t]},jn.chain=fo,jn.chunk=function(e,n,i){n=(i?Ea(e,n,i):n===t)?1:Tn(ys(n),0);var r=null==e?0:e.length;if(!r||n<1)return[];for(var a=0,o=0,s=St(me(r/n));a<r;)s[o++]=rr(e,a,a+=n);return s},jn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r},jn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=St(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return ke(Ko(n)?Or(n):[n],vi(e,1))},jn.cond=function(t){var e=null==t?0:t.length,i=ca();return t=e?Me(t,(function(t){if("function"!=typeof t[1])throw new Ot(n);return[i(t[0]),t[1]]})):[],Xi((function(n){for(var i=-1;++i<e;){var r=t[i];if(Ae(r[0],this,n))return Ae(r[1],this,n)}}))},jn.conforms=function(t){return function(t){var e=Ms(t);return function(n){return li(n,t,e)}}(ci(t,1))},jn.constant=eu,jn.countBy=mo,jn.create=function(t,e){var n=Yn(t);return null==e?n:ai(n,e)},jn.curry=function e(n,i,r){var a=$r(n,8,t,t,t,t,t,i=r?t:i);return a.placeholder=e.placeholder,a},jn.curryRight=function e(n,i,r){var o=$r(n,a,t,t,t,t,t,i=r?t:i);return o.placeholder=e.placeholder,o},jn.debounce=Mo,jn.defaults=ws,jn.defaultsDeep=Is,jn.defer=ko,jn.delay=Lo,jn.difference=Va,jn.differenceBy=ja,jn.differenceWith=Ya,jn.drop=function(e,n,i){var r=null==e?0:e.length;return r?rr(e,(n=i||n===t?1:ys(n))<0?0:n,r):[]},jn.dropRight=function(e,n,i){var r=null==e?0:e.length;return r?rr(e,0,(n=r-(n=i||n===t?1:ys(n)))<0?0:n):[]},jn.dropRightWhile=function(t,e){return t&&t.length?hr(t,ca(e,3),!0,!0):[]},jn.dropWhile=function(t,e){return t&&t.length?hr(t,ca(e,3),!0):[]},jn.fill=function(e,n,i,r){var a=null==e?0:e.length;return a?(i&&"number"!=typeof i&&Ea(e,n,i)&&(i=0,r=a),function(e,n,i,r){var a=e.length;for((i=ys(i))<0&&(i=-i>a?0:a+i),(r=r===t||r>a?a:ys(r))<0&&(r+=a),r=i>r?0:ms(r);i<r;)e[i++]=n;return e}(e,n,i,r)):[]},jn.filter=function(t,e){return(Ko(t)?Ne:gi)(t,ca(e,3))},jn.flatMap=function(t,e){return vi(Ao(t,e),1)},jn.flatMapDeep=function(t,e){return vi(Ao(t,e),l)},jn.flatMapDepth=function(e,n,i){return i=i===t?1:ys(i),vi(Ao(e,n),i)},jn.flatten=Ka,jn.flattenDeep=function(t){return null!=t&&t.length?vi(t,l):[]},jn.flattenDepth=function(e,n){return null!=e&&e.length?vi(e,n=n===t?1:ys(n)):[]},jn.flip=function(t){return $r(t,512)},jn.flow=nu,jn.flowRight=iu,jn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},jn.functions=function(t){return null==t?[]:_i(t,Ms(t))},jn.functionsIn=function(t){return null==t?[]:_i(t,ks(t))},jn.groupBy=bo,jn.initial=function(t){return null!=t&&t.length?rr(t,0,-1):[]},jn.intersection=qa,jn.intersectionBy=za,jn.intersectionWith=Qa,jn.invert=Ns,jn.invertBy=Os,jn.invokeMap=So,jn.iteratee=au,jn.keyBy=_o,jn.keys=Ms,jn.keysIn=ks,jn.map=Ao,jn.mapKeys=function(t,e){var n={};return e=ca(e,3),bi(t,(function(t,i,r){oi(n,e(t,i,r),t)})),n},jn.mapValues=function(t,e){var n={};return e=ca(e,3),bi(t,(function(t,i,r){oi(n,i,e(t,i,r))})),n},jn.matches=function(t){return ji(ci(t,1))},jn.matchesProperty=function(t,e){return Yi(t,ci(e,1))},jn.memoize=Uo,jn.merge=Ls,jn.mergeWith=Us,jn.method=ou,jn.methodOf=su,jn.mixin=uu,jn.negate=Po,jn.nthArg=function(t){return t=ys(t),Xi((function(e){return Bi(e,t)}))},jn.omit=Ps,jn.omitBy=function(t,e){return Fs(t,Po(ca(e)))},jn.once=function(t){return No(2,t)},jn.orderBy=function(e,n,i,r){return null==e?[]:(Ko(n)||(n=null==n?[]:[n]),Ko(i=r?t:i)||(i=null==i?[]:[i]),Ki(e,n,i))},jn.over=lu,jn.overArgs=xo,jn.overEvery=pu,jn.overSome=du,jn.partial=Fo,jn.partialRight=Wo,jn.partition=wo,jn.pick=xs,jn.pickBy=Fs,jn.property=fu,jn.propertyOf=function(e){return function(n){return null==e?t:Ai(e,n)}},jn.pull=Xa,jn.pullAll=$a,jn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?qi(t,e,ca(n,2)):t},jn.pullAllWith=function(e,n,i){return e&&e.length&&n&&n.length?qi(e,n,t,i):e},jn.pullAt=Za,jn.range=hu,jn.rangeRight=yu,jn.rearg=Vo,jn.reject=function(t,e){return(Ko(t)?Ne:gi)(t,Po(ca(e,3)))},jn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=ca(e,3);++i<a;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return zi(t,r),n},jn.rest=function(e,i){if("function"!=typeof e)throw new Ot(n);return Xi(e,i=i===t?i:ys(i))},jn.reverse=to,jn.sampleSize=function(e,n,i){return n=(i?Ea(e,n,i):n===t)?1:ys(n),(Ko(e)?Zn:Zi)(e,n)},jn.set=function(t,e,n){return null==t?t:tr(t,e,n)},jn.setWith=function(e,n,i,r){return r="function"==typeof r?r:t,null==e?e:tr(e,n,i,r)},jn.shuffle=function(t){return(Ko(t)?ti:ir)(t)},jn.slice=function(e,n,i){var r=null==e?0:e.length;return r?(i&&"number"!=typeof i&&Ea(e,n,i)?(n=0,i=r):(n=null==n?0:ys(n),i=i===t?r:ys(i)),rr(e,n,i)):[]},jn.sortBy=Io,jn.sortedUniq=function(t){return t&&t.length?ur(t):[]},jn.sortedUniqBy=function(t,e){return t&&t.length?ur(t,ca(e,2)):[]},jn.split=function(e,n,i){return i&&"number"!=typeof i&&Ea(e,n,i)&&(n=i=t),(i=i===t?f:i>>>0)?(e=Ts(e))&&("string"==typeof n||null!=n&&!os(n))&&!(n=lr(n))&&an(e)?Sr(dn(e),0,i):e.split(n,i):[]},jn.spread=function(t,e){if("function"!=typeof t)throw new Ot(n);return e=null==e?0:Tn(ys(e),0),Xi((function(n){var i=n[e],r=Sr(n,0,e);return i&&ke(r,i),Ae(t,this,r)}))},jn.tail=function(t){var e=null==t?0:t.length;return e?rr(t,1,e):[]},jn.take=function(e,n,i){return e&&e.length?rr(e,0,(n=i||n===t?1:ys(n))<0?0:n):[]},jn.takeRight=function(e,n,i){var r=null==e?0:e.length;return r?rr(e,(n=r-(n=i||n===t?1:ys(n)))<0?0:n,r):[]},jn.takeRightWhile=function(t,e){return t&&t.length?hr(t,ca(e,3),!1,!0):[]},jn.takeWhile=function(t,e){return t&&t.length?hr(t,ca(e,3)):[]},jn.tap=function(t,e){return e(t),t},jn.throttle=function(t,e,i){var r=!0,a=!0;if("function"!=typeof t)throw new Ot(n);return es(i)&&(r="leading"in i?!!i.leading:r,a="trailing"in i?!!i.trailing:a),Mo(t,e,{leading:r,maxWait:e,trailing:a})},jn.thru=ho,jn.toArray=fs,jn.toPairs=Ws,jn.toPairsIn=Vs,jn.toPath=function(t){return Ko(t)?Me(t,xa):cs(t)?[t]:Or(Pa(Ts(t)))},jn.toPlainObject=vs,jn.transform=function(t,e,n){var i=Ko(t),r=i||Qo(t)||ls(t);if(e=ca(e,4),null==n){var a=t&&t.constructor;n=r?i?new a:[]:es(t)&&$o(a)?Yn(qt(t)):{}}return(r?Ie:bi)(t,(function(t,i,r){return e(n,t,i,r)})),n},jn.unary=function(t){return Ro(t,1)},jn.union=eo,jn.unionBy=no,jn.unionWith=io,jn.uniq=function(t){return t&&t.length?pr(t):[]},jn.uniqBy=function(t,e){return t&&t.length?pr(t,ca(e,2)):[]},jn.uniqWith=function(e,n){return n="function"==typeof n?n:t,e&&e.length?pr(e,t,n):[]},jn.unset=function(t,e){return null==t||dr(t,e)},jn.unzip=ro,jn.unzipWith=ao,jn.update=function(t,e,n){return null==t?t:fr(t,e,Tr(n))},jn.updateWith=function(e,n,i,r){return r="function"==typeof r?r:t,null==e?e:fr(e,n,Tr(i),r)},jn.values=js,jn.valuesIn=function(t){return null==t?[]:Xe(t,ks(t))},jn.without=oo,jn.words=$s,jn.wrap=function(t,e){return Fo(Tr(e),t)},jn.xor=so,jn.xorBy=uo,jn.xorWith=co,jn.zip=lo,jn.zipObject=function(t,e){return gr(t||[],e||[],ni)},jn.zipObjectDeep=function(t,e){return gr(t||[],e||[],tr)},jn.zipWith=po,jn.entries=Ws,jn.entriesIn=Vs,jn.extend=bs,jn.extendWith=Ss,uu(jn,jn),jn.add=Tu,jn.attempt=Zs,jn.camelCase=Ys,jn.capitalize=Hs,jn.ceil=Eu,jn.clamp=function(e,n,i){return i===t&&(i=n,n=t),i!==t&&(i=(i=gs(i))==i?i:0),n!==t&&(n=(n=gs(n))==n?n:0),ui(gs(e),n,i)},jn.clone=function(t){return ci(t,4)},jn.cloneDeep=function(t){return ci(t,5)},jn.cloneDeepWith=function(e,n){return ci(e,5,n="function"==typeof n?n:t)},jn.cloneWith=function(e,n){return ci(e,4,n="function"==typeof n?n:t)},jn.conformsTo=function(t,e){return null==e||li(t,e,Ms(e))},jn.deburr=Bs,jn.defaultTo=function(t,e){return null==t||t!=t?e:t},jn.divide=bu,jn.endsWith=function(e,n,i){e=Ts(e),n=lr(n);var r=e.length,a=i=i===t?r:ui(ys(i),0,r);return(i-=n.length)>=0&&e.slice(i,a)==n},jn.eq=jo,jn.escape=function(t){return(t=Ts(t))&&z.test(t)?t.replace(G,nn):t},jn.escapeRegExp=function(t){return(t=Ts(t))&&nt.test(t)?t.replace(et,"\\$&"):t},jn.every=function(e,n,i){var r=Ko(e)?Re:yi;return i&&Ea(e,n,i)&&(n=t),r(e,ca(n,3))},jn.find=go,jn.findIndex=Ha,jn.findKey=function(t,e){return Fe(t,ca(e,3),bi)},jn.findLast=vo,jn.findLastIndex=Ba,jn.findLastKey=function(t,e){return Fe(t,ca(e,3),Si)},jn.floor=Su,jn.forEach=To,jn.forEachRight=Eo,jn.forIn=function(t,e){return null==t?t:Ti(t,ca(e,3),ks)},jn.forInRight=function(t,e){return null==t?t:Ei(t,ca(e,3),ks)},jn.forOwn=function(t,e){return t&&bi(t,ca(e,3))},jn.forOwnRight=function(t,e){return t&&Si(t,ca(e,3))},jn.get=Ds,jn.gt=Yo,jn.gte=Ho,jn.has=function(t,e){return null!=t&&ma(t,e,Ri)},jn.hasIn=Rs,jn.head=Ga,jn.identity=ru,jn.includes=function(t,e,n,i){t=qo(t)?t:js(t),n=n&&!i?ys(n):0;var r=t.length;return n<0&&(n=Tn(r+n,0)),us(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Ve(t,e,n)>-1},jn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ys(n);return r<0&&(r=Tn(i+r,0)),Ve(t,e,r)},jn.inRange=function(e,n,i){return n=hs(n),i===t?(i=n,n=0):i=hs(i),function(t,e,n){return t>=En(e,n)&&t<Tn(e,n)}(e=gs(e),n,i)},jn.invoke=Cs,jn.isArguments=Bo,jn.isArray=Ko,jn.isArrayBuffer=Go,jn.isArrayLike=qo,jn.isArrayLikeObject=zo,jn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Ii(t)==g},jn.isBuffer=Qo,jn.isDate=Jo,jn.isElement=function(t){return ns(t)&&1===t.nodeType&&!as(t)},jn.isEmpty=function(t){if(null==t)return!0;if(qo(t)&&(Ko(t)||"string"==typeof t||"function"==typeof t.splice||Qo(t)||ls(t)||Bo(t)))return!t.length;var e=ya(t);if(e==S||e==D)return!t.size;if(Aa(t))return!xi(t).length;for(var n in t)if(Pt.call(t,n))return!1;return!0},jn.isEqual=function(t,e){return ki(t,e)},jn.isEqualWith=function(e,n,i){var r=(i="function"==typeof i?i:t)?i(e,n):t;return r===t?ki(e,n,t,i):!!r},jn.isError=Xo,jn.isFinite=function(t){return"number"==typeof t&&mn(t)},jn.isFunction=$o,jn.isInteger=Zo,jn.isLength=ts,jn.isMap=is,jn.isMatch=function(t,e){return t===e||Li(t,e,pa(e))},jn.isMatchWith=function(e,n,i){return i="function"==typeof i?i:t,Li(e,n,pa(n),i)},jn.isNaN=function(t){return rs(t)&&t!=+t},jn.isNative=function(t){if(_a(t))throw new At("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ui(t)},jn.isNil=function(t){return null==t},jn.isNull=function(t){return null===t},jn.isNumber=rs,jn.isObject=es,jn.isObjectLike=ns,jn.isPlainObject=as,jn.isRegExp=os,jn.isSafeInteger=function(t){return Zo(t)&&t>=-9007199254740991&&t<=p},jn.isSet=ss,jn.isString=us,jn.isSymbol=cs,jn.isTypedArray=ls,jn.isUndefined=function(e){return e===t},jn.isWeakMap=function(t){return ns(t)&&ya(t)==O},jn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Ii(t)},jn.join=function(t,e){return null==t?"":gn.call(t,e)},jn.kebabCase=Ks,jn.last=Ja,jn.lastIndexOf=function(e,n,i){var r=null==e?0:e.length;if(!r)return-1;var a=r;return i!==t&&(a=(a=ys(i))<0?Tn(r+a,0):En(a,r-1)),n==n?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(e,n,a):We(e,Ye,a,!0)},jn.lowerCase=Gs,jn.lowerFirst=qs,jn.lt=ps,jn.lte=ds,jn.max=function(e){return e&&e.length?mi(e,ru,Di):t},jn.maxBy=function(e,n){return e&&e.length?mi(e,ca(n,2),Di):t},jn.mean=function(t){return He(t,ru)},jn.meanBy=function(t,e){return He(t,ca(e,2))},jn.min=function(e){return e&&e.length?mi(e,ru,Wi):t},jn.minBy=function(e,n){return e&&e.length?mi(e,ca(n,2),Wi):t},jn.stubArray=mu,jn.stubFalse=gu,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=_u,jn.nth=function(e,n){return e&&e.length?Bi(e,ys(n)):t},jn.noConflict=function(){return de._===this&&(de._=jt),this},jn.noop=cu,jn.now=Do,jn.pad=function(t,e,n){t=Ts(t);var i=(e=ys(e))?pn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Kr(ge(r),n)+t+Kr(me(r),n)},jn.padEnd=function(t,e,n){t=Ts(t);var i=(e=ys(e))?pn(t):0;return e&&i<e?t+Kr(e-i,n):t},jn.padStart=function(t,e,n){t=Ts(t);var i=(e=ys(e))?pn(t):0;return e&&i<e?Kr(e-i,n)+t:t},jn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Sn(Ts(t).replace(it,""),e||0)},jn.random=function(e,n,i){if(i&&"boolean"!=typeof i&&Ea(e,n,i)&&(n=i=t),i===t&&("boolean"==typeof n?(i=n,n=t):"boolean"==typeof e&&(i=e,e=t)),e===t&&n===t?(e=0,n=1):(e=hs(e),n===t?(n=e,e=0):n=hs(n)),e>n){var r=e;e=n,n=r}if(i||e%1||n%1){var a=_n();return En(e+a*(n-e+ue("1e-"+((a+"").length-1))),n)}return Qi(e,n)},jn.reduce=function(t,e,n){var i=Ko(t)?Le:Ge,r=arguments.length<3;return i(t,ca(e,4),n,r,fi)},jn.reduceRight=function(t,e,n){var i=Ko(t)?Ue:Ge,r=arguments.length<3;return i(t,ca(e,4),n,r,hi)},jn.repeat=function(e,n,i){return n=(i?Ea(e,n,i):n===t)?1:ys(n),Ji(Ts(e),n)},jn.replace=function(){var t=arguments,e=Ts(t[0]);return t.length<3?e:e.replace(t[1],t[2])},jn.result=function(e,n,i){var r=-1,a=(n=Er(n,e)).length;for(a||(a=1,e=t);++r<a;){var o=null==e?t:e[xa(n[r])];o===t&&(r=a,o=i),e=$o(o)?o.call(e):o}return e},jn.round=Au,jn.runInContext=e,jn.sample=function(t){return(Ko(t)?$n:$i)(t)},jn.size=function(t){if(null==t)return 0;if(qo(t))return us(t)?pn(t):t.length;var e=ya(t);return e==S||e==D?t.size:xi(t).length},jn.snakeCase=zs,jn.some=function(e,n,i){var r=Ko(e)?Pe:ar;return i&&Ea(e,n,i)&&(n=t),r(e,ca(n,3))},jn.sortedIndex=function(t,e){return or(t,e)},jn.sortedIndexBy=function(t,e,n){return sr(t,e,ca(n,2))},jn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=or(t,e);if(i<n&&jo(t[i],e))return i}return-1},jn.sortedLastIndex=function(t,e){return or(t,e,!0)},jn.sortedLastIndexBy=function(t,e,n){return sr(t,e,ca(n,2),!0)},jn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=or(t,e,!0)-1;if(jo(t[n],e))return n}return-1},jn.startCase=Qs,jn.startsWith=function(t,e,n){return t=Ts(t),n=null==n?0:ui(ys(n),0,t.length),e=lr(e),t.slice(n,n+e.length)==e},jn.subtract=wu,jn.sum=function(t){return t&&t.length?qe(t,ru):0},jn.sumBy=function(t,e){return t&&t.length?qe(t,ca(e,2)):0},jn.template=function(e,n,i){var r=jn.templateSettings;i&&Ea(e,n,i)&&(n=t),e=Ts(e),n=Ss({},n,r,Zr);var a,o,s=Ss({},n.imports,r.imports,Zr),u=Ms(s),c=Xe(s,u),l=0,p=n.interpolate||Tt,d="__p += '",f=Rt((n.escape||Tt).source+"|"+p.source+"|"+(p===X?pt:Tt).source+"|"+(n.evaluate||Tt).source+"|$","g"),h="//# sourceURL="+(Pt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";e.replace(f,(function(t,n,i,r,s,u){return i||(i=r),d+=e.slice(l,u).replace(Et,rn),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),d+="';\n";var y=Pt.call(n,"variable")&&n.variable;if(y){if(ct.test(y))throw new At("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(Y,""):d).replace(H,"$1").replace(B,"$1;"),d="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Zs((function(){return wt(u,h+"return "+d).apply(t,c)}));if(m.source=d,Xo(m))throw m;return m},jn.times=function(t,e){if((t=ys(t))<1||t>p)return[];var n=f,i=En(t,f);e=ca(e),t-=f;for(var r=ze(i,e);++n<t;)e(n);return r},jn.toFinite=hs,jn.toInteger=ys,jn.toLength=ms,jn.toLower=function(t){return Ts(t).toLowerCase()},jn.toNumber=gs,jn.toSafeInteger=function(t){return t?ui(ys(t),-9007199254740991,p):0===t?t:0},jn.toString=Ts,jn.toUpper=function(t){return Ts(t).toUpperCase()},jn.trim=function(e,n,i){if((e=Ts(e))&&(i||n===t))return Qe(e);if(!e||!(n=lr(n)))return e;var r=dn(e),a=dn(n);return Sr(r,Ze(r,a),tn(r,a)+1).join("")},jn.trimEnd=function(e,n,i){if((e=Ts(e))&&(i||n===t))return e.slice(0,fn(e)+1);if(!e||!(n=lr(n)))return e;var r=dn(e);return Sr(r,0,tn(r,dn(n))+1).join("")},jn.trimStart=function(e,n,i){if((e=Ts(e))&&(i||n===t))return e.replace(it,"");if(!e||!(n=lr(n)))return e;var r=dn(e);return Sr(r,Ze(r,dn(n))).join("")},jn.truncate=function(e,n){var i=30,r="...";if(es(n)){var a="separator"in n?n.separator:a;i="length"in n?ys(n.length):i,r="omission"in n?lr(n.omission):r}var o=(e=Ts(e)).length;if(an(e)){var s=dn(e);o=s.length}if(i>=o)return e;var u=i-pn(r);if(u<1)return r;var c=s?Sr(s,0,u).join(""):e.slice(0,u);if(a===t)return c+r;if(s&&(u+=c.length-u),os(a)){if(e.slice(u).search(a)){var l,p=c;for(a.global||(a=Rt(a.source,Ts(dt.exec(a))+"g")),a.lastIndex=0;l=a.exec(p);)var d=l.index;c=c.slice(0,d===t?u:d)}}else if(e.indexOf(lr(a),u)!=u){var f=c.lastIndexOf(a);f>-1&&(c=c.slice(0,f))}return c+r},jn.unescape=function(t){return(t=Ts(t))&&q.test(t)?t.replace(K,hn):t},jn.uniqueId=function(t){var e=++xt;return Ts(t)+e},jn.upperCase=Js,jn.upperFirst=Xs,jn.each=To,jn.eachRight=Eo,jn.first=Ga,uu(jn,(vu={},bi(jn,(function(t,e){Pt.call(jn.prototype,e)||(vu[e]=t)})),vu),{chain:!1}),jn.VERSION="4.17.21",Ie(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){jn[t].placeholder=jn})),Ie(["drop","take"],(function(e,n){Kn.prototype[e]=function(i){i=i===t?1:Tn(ys(i),0);var r=this.__filtered__&&!n?new Kn(this):this.clone();return r.__filtered__?r.__takeCount__=En(i,r.__takeCount__):r.__views__.push({size:En(i,f),type:e+(r.__dir__<0?"Right":"")}),r},Kn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ie(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Kn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ca(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),Ie(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Kn.prototype[t]=function(){return this[n](1).value()[0]}})),Ie(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Kn.prototype[t]=function(){return this.__filtered__?new Kn(this):this[n](1)}})),Kn.prototype.compact=function(){return this.filter(ru)},Kn.prototype.find=function(t){return this.filter(t).head()},Kn.prototype.findLast=function(t){return this.reverse().find(t)},Kn.prototype.invokeMap=Xi((function(t,e){return"function"==typeof t?new Kn(this):this.map((function(n){return Ci(n,t,e)}))})),Kn.prototype.reject=function(t){return this.filter(Po(ca(t)))},Kn.prototype.slice=function(e,n){e=ys(e);var i=this;return i.__filtered__&&(e>0||n<0)?new Kn(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),n!==t&&(i=(n=ys(n))<0?i.dropRight(-n):i.take(n-e)),i)},Kn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Kn.prototype.toArray=function(){return this.take(f)},bi(Kn.prototype,(function(e,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),a=jn[r?"take"+("last"==n?"Right":""):n],o=r||/^find/.test(n);a&&(jn.prototype[n]=function(){var n=this.__wrapped__,s=r?[1]:arguments,u=n instanceof Kn,c=s[0],l=u||Ko(n),p=function(t){var e=a.apply(jn,ke([t],s));return r&&d?e[0]:e};l&&i&&"function"==typeof c&&1!=c.length&&(u=l=!1);var d=this.__chain__,f=!!this.__actions__.length,h=o&&!d,y=u&&!f;if(!o&&l){n=y?n:new Kn(this);var m=e.apply(n,s);return m.__actions__.push({func:ho,args:[p],thisArg:t}),new Bn(m,d)}return h&&y?e.apply(this,s):(m=this.thru(p),h?r?m.value()[0]:m.value():m)})})),Ie(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ct[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);jn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Ko(r)?r:[],t)}return this[n]((function(n){return e.apply(Ko(n)?n:[],t)}))}})),bi(Kn.prototype,(function(t,e){var n=jn[e];if(n){var i=n.name+"";Pt.call(Mn,i)||(Mn[i]=[]),Mn[i].push({name:e,func:n})}})),Mn[jr(t,2).name]=[{name:"wrapper",func:t}],Kn.prototype.clone=function(){var t=new Kn(this.__wrapped__);return t.__actions__=Or(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Or(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Or(this.__views__),t},Kn.prototype.reverse=function(){if(this.__filtered__){var t=new Kn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Kn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ko(t),i=e<0,r=n?t.length:0,a=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=En(e,t+o);break;case"takeRight":t=Tn(t,e-o)}}return{start:t,end:e}}(0,r,this.__views__),o=a.start,s=a.end,u=s-o,c=i?s:o-1,l=this.__iteratees__,p=l.length,d=0,f=En(u,this.__takeCount__);if(!n||!i&&r==u&&f==u)return yr(t,this.__actions__);var h=[];t:for(;u--&&d<f;){for(var y=-1,m=t[c+=e];++y<p;){var g=l[y],v=g.iteratee,T=g.type,E=v(m);if(2==T)m=E;else if(!E){if(1==T)continue t;break t}}h[d++]=m}return h},jn.prototype.at=yo,jn.prototype.chain=function(){return fo(this)},jn.prototype.commit=function(){return new Bn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===t&&(this.__values__=fs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},jn.prototype.plant=function(e){for(var n,i=this;i instanceof Hn;){var r=Wa(i);r.__index__=0,r.__values__=t,n?a.__wrapped__=r:n=r;var a=r;i=i.__wrapped__}return a.__wrapped__=e,n},jn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Kn){var n=e;return this.__actions__.length&&(n=new Kn(this)),(n=n.reverse()).__actions__.push({func:ho,args:[to],thisArg:t}),new Bn(n,this.__chain__)}return this.thru(to)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return yr(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,ee&&(jn.prototype[ee]=function(){return this}),jn}();he?((he.exports=yn)._=yn,fe._=yn):de._=yn}.call(e);var ur,cr,lr=sr.exports,pr="13814000-1dd2-11b2-8080-808080808080";!function(t){t.TENANT="TENANT",t.TENANT_PROFILE="TENANT_PROFILE",t.CUSTOMER="CUSTOMER",t.USER="USER",t.DASHBOARD="DASHBOARD",t.ASSET="ASSET",t.DEVICE="DEVICE",t.DEVICE_PROFILE="DEVICE_PROFILE",t.ASSET_PROFILE="ASSET_PROFILE",t.ALARM="ALARM",t.RULE_CHAIN="RULE_CHAIN",t.RULE_NODE="RULE_NODE",t.EDGE="EDGE",t.ENTITY_VIEW="ENTITY_VIEW",t.WIDGETS_BUNDLE="WIDGETS_BUNDLE",t.WIDGET_TYPE="WIDGET_TYPE",t.API_USAGE_STATE="API_USAGE_STATE",t.TB_RESOURCE="TB_RESOURCE",t.OTA_PACKAGE="OTA_PACKAGE",t.RPC="RPC",t.QUEUE="QUEUE",t.QUEUE_STATS="QUEUE_STATS",t.NOTIFICATION="NOTIFICATION",t.NOTIFICATION_REQUEST="NOTIFICATION_REQUEST",t.NOTIFICATION_RULE="NOTIFICATION_RULE",t.NOTIFICATION_TARGET="NOTIFICATION_TARGET",t.NOTIFICATION_TEMPLATE="NOTIFICATION_TEMPLATE"}(ur||(ur={})),function(t){t.CURRENT_CUSTOMER="CURRENT_CUSTOMER",t.CURRENT_TENANT="CURRENT_TENANT",t.CURRENT_USER="CURRENT_USER",t.CURRENT_USER_OWNER="CURRENT_USER_OWNER"}(cr||(cr={}));var dr,fr,hr=new Map([[ur.TENANT,{type:"entity.type-tenant",typePlural:"entity.type-tenants",list:"entity.list-of-tenants",nameStartsWith:"entity.tenant-name-starts-with",details:"tenant.tenant-details",add:"tenant.add",noEntities:"tenant.no-tenants-text",search:"tenant.search",selectedEntities:"tenant.selected-tenants"}],[ur.TENANT_PROFILE,{type:"entity.type-tenant-profile",typePlural:"entity.type-tenant-profiles",list:"entity.list-of-tenant-profiles",nameStartsWith:"entity.tenant-profile-name-starts-with",details:"tenant-profile.tenant-profile-details",add:"tenant-profile.add",noEntities:"tenant-profile.no-tenant-profiles-text",search:"tenant-profile.search",selectedEntities:"tenant-profile.selected-tenant-profiles"}],[ur.CUSTOMER,{type:"entity.type-customer",typePlural:"entity.type-customers",list:"entity.list-of-customers",nameStartsWith:"entity.customer-name-starts-with",details:"customer.customer-details",add:"customer.add",noEntities:"customer.no-customers-text",search:"customer.search",selectedEntities:"customer.selected-customers"}],[ur.USER,{type:"entity.type-user",typePlural:"entity.type-users",list:"entity.list-of-users",nameStartsWith:"entity.user-name-starts-with",details:"user.user-details",add:"user.add",noEntities:"user.no-users-text",search:"user.search",selectedEntities:"user.selected-users"}],[ur.DEVICE,{type:"entity.type-device",typePlural:"entity.type-devices",list:"entity.list-of-devices",nameStartsWith:"entity.device-name-starts-with",details:"device.device-details",add:"device.add",noEntities:"device.no-devices-text",search:"device.search",selectedEntities:"device.selected-devices"}],[ur.DEVICE_PROFILE,{type:"entity.type-device-profile",typePlural:"entity.type-device-profiles",list:"entity.list-of-device-profiles",nameStartsWith:"entity.device-profile-name-starts-with",details:"device-profile.device-profile-details",add:"device-profile.add",noEntities:"device-profile.no-device-profiles-text",search:"device-profile.search",selectedEntities:"device-profile.selected-device-profiles"}],[ur.ASSET_PROFILE,{type:"entity.type-asset-profile",typePlural:"entity.type-asset-profiles",list:"entity.list-of-asset-profiles",nameStartsWith:"entity.asset-profile-name-starts-with",details:"asset-profile.asset-profile-details",add:"asset-profile.add",noEntities:"asset-profile.no-asset-profiles-text",search:"asset-profile.search",selectedEntities:"asset-profile.selected-asset-profiles"}],[ur.ASSET,{type:"entity.type-asset",typePlural:"entity.type-assets",list:"entity.list-of-assets",nameStartsWith:"entity.asset-name-starts-with",details:"asset.asset-details",add:"asset.add",noEntities:"asset.no-assets-text",search:"asset.search",selectedEntities:"asset.selected-assets"}],[ur.EDGE,{type:"entity.type-edge",typePlural:"entity.type-edges",list:"entity.list-of-edges",nameStartsWith:"entity.edge-name-starts-with",details:"edge.edge-details",add:"edge.add",noEntities:"edge.no-edges-text",search:"edge.search",selectedEntities:"edge.selected-edges"}],[ur.ENTITY_VIEW,{type:"entity.type-entity-view",typePlural:"entity.type-entity-views",list:"entity.list-of-entity-views",nameStartsWith:"entity.entity-view-name-starts-with",details:"entity-view.entity-view-details",add:"entity-view.add",noEntities:"entity-view.no-entity-views-text",search:"entity-view.search",selectedEntities:"entity-view.selected-entity-views"}],[ur.RULE_CHAIN,{type:"entity.type-rulechain",typePlural:"entity.type-rulechains",list:"entity.list-of-rulechains",nameStartsWith:"entity.rulechain-name-starts-with",details:"rulechain.rulechain-details",add:"rulechain.add",noEntities:"rulechain.no-rulechains-text",search:"rulechain.search",selectedEntities:"rulechain.selected-rulechains"}],[ur.RULE_NODE,{type:"entity.type-rulenode",typePlural:"entity.type-rulenodes",list:"entity.list-of-rulenodes",nameStartsWith:"entity.rulenode-name-starts-with"}],[ur.DASHBOARD,{type:"entity.type-dashboard",typePlural:"entity.type-dashboards",list:"entity.list-of-dashboards",nameStartsWith:"entity.dashboard-name-starts-with",details:"dashboard.dashboard-details",add:"dashboard.add",noEntities:"dashboard.no-dashboards-text",search:"dashboard.search",selectedEntities:"dashboard.selected-dashboards"}],[ur.ALARM,{type:"entity.type-alarm",typePlural:"entity.type-alarms",list:"entity.list-of-alarms",nameStartsWith:"entity.alarm-name-starts-with",details:"alarm.alarm-details",noEntities:"alarm.no-alarms-prompt",search:"alarm.search",selectedEntities:"alarm.selected-alarms"}],[ur.API_USAGE_STATE,{type:"entity.type-api-usage-state"}],[ur.WIDGET_TYPE,{type:"entity.type-widget",typePlural:"entity.type-widgets",list:"entity.list-of-widgets",details:"widget.details",add:"dashboard.add-widget",noEntities:"widget.no-widgets-text",search:"widget.search-widgets",selectedEntities:"widget.selected-widgets"}],[ur.WIDGETS_BUNDLE,{type:"entity.type-widgets-bundle",typePlural:"entity.type-widgets-bundles",list:"entity.list-of-widgets-bundles",details:"widgets-bundle.widgets-bundle-details",add:"widgets-bundle.add",noEntities:"widgets-bundle.no-widgets-bundles-text",search:"widgets-bundle.search",selectedEntities:"widgets-bundle.selected-widgets-bundles"}],[cr.CURRENT_CUSTOMER,{type:"entity.type-current-customer",list:"entity.type-current-customer"}],[cr.CURRENT_TENANT,{type:"entity.type-current-tenant",list:"entity.type-current-tenant"}],[cr.CURRENT_USER,{type:"entity.type-current-user",list:"entity.type-current-user"}],[cr.CURRENT_USER_OWNER,{type:"entity.type-current-user-owner",list:"entity.type-current-user-owner"}],[ur.TB_RESOURCE,{type:"entity.type-tb-resource",typePlural:"entity.type-tb-resources",list:"entity.list-of-tb-resources",details:"resource.resource-library-details",add:"resource.add",noEntities:"resource.no-resource-text",search:"resource.search",selectedEntities:"resource.selected-resources"}],[ur.OTA_PACKAGE,{type:"entity.type-ota-package",details:"ota-update.ota-update-details",add:"ota-update.add",noEntities:"ota-update.no-packages-text",search:"ota-update.search",selectedEntities:"ota-update.selected-package"}],[ur.RPC,{type:"entity.type-rpc"}],[ur.QUEUE,{type:"entity.type-queue",add:"queue.add",search:"queue.search",details:"queue.details",selectedEntities:"queue.selected-queues"}],[ur.QUEUE_STATS,{type:"entity.type-queue-stats",typePlural:"entity.type-queues-stats",list:"queue-statistics.list-of-queue-statistics",noEntities:"queue-statistics.no-queue-statistics-text",selectedEntities:"queue-statistics.selected-queue-statistics",nameStartsWith:"queue-statistics.queue-statistics-starts-with"}],[ur.NOTIFICATION,{type:"entity.type-notification",noEntities:"notification.no-inbox-notification",search:"notification.search-notification",selectedEntities:"notification.selected-notifications"}],[ur.NOTIFICATION_REQUEST,{type:"entity.type-notification-request",noEntities:"notification.no-notification-request",selectedEntities:"notification.selected-requests"}],[ur.NOTIFICATION_RULE,{type:"entity.type-notification-rule",typePlural:"entity.type-notification-rules",list:"entity.list-of-notification-rules",noEntities:"notification.no-rules-notification",search:"notification.search-rules",selectedEntities:"notification.selected-rules"}],[ur.NOTIFICATION_TARGET,{type:"entity.type-notification-target",typePlural:"entity.type-notification-targets",list:"entity.list-of-notification-targets",noEntities:"notification.no-recipients-notification",search:"notification.search-recipients",selectedEntities:"notification.selected-recipients"}],[ur.NOTIFICATION_TEMPLATE,{type:"entity.type-notification-template",typePlural:"entity.type-notification-templates",list:"entity.list-of-notification-templates",noEntities:"notification.no-notification-templates",search:"notification.search-templates",selectedEntities:"notification.selected-template"}]]),yr=new Map([[ur.TENANT,{helpLinkId:"tenants"}],[ur.TENANT_PROFILE,{helpLinkId:"tenantProfiles"}],[ur.CUSTOMER,{helpLinkId:"customers"}],[ur.USER,{helpLinkId:"users"}],[ur.DEVICE,{helpLinkId:"devices"}],[ur.DEVICE_PROFILE,{helpLinkId:"deviceProfiles"}],[ur.ASSET_PROFILE,{helpLinkId:"assetProfiles"}],[ur.ASSET,{helpLinkId:"assets"}],[ur.EDGE,{helpLinkId:"edges"}],[ur.ENTITY_VIEW,{helpLinkId:"entityViews"}],[ur.RULE_CHAIN,{helpLinkId:"rulechains"}],[ur.DASHBOARD,{helpLinkId:"dashboards"}],[ur.WIDGET_TYPE,{helpLinkId:"widgetTypes"}],[ur.WIDGETS_BUNDLE,{helpLinkId:"widgetsBundles"}],[ur.TB_RESOURCE,{helpLinkId:"lwm2mResourceLibrary"}],[ur.OTA_PACKAGE,{helpLinkId:"otaUpdates"}],[ur.QUEUE,{helpLinkId:"queue"}]]),mr=new Map([[ur.TENANT,"/tenants"],[ur.TENANT_PROFILE,"/tenantProfiles"],[ur.CUSTOMER,"/customers"],[ur.USER,"/users"],[ur.DASHBOARD,"/dashboards"],[ur.ASSET,"/entities/assets"],[ur.DEVICE,"/entities/devices"],[ur.DEVICE_PROFILE,"/profiles/deviceProfiles"],[ur.ASSET_PROFILE,"/profiles/assetProfiles"],[ur.RULE_CHAIN,"/ruleChains"],[ur.EDGE,"/edgeManagement/instances"],[ur.ENTITY_VIEW,"/entities/entityViews"],[ur.TB_RESOURCE,"/resources/resources-library"],[ur.OTA_PACKAGE,"/features/otaUpdates"],[ur.QUEUE,"/settings/queues"],[ur.WIDGETS_BUNDLE,"/resources/widgets-library/widgets-bundles/details"],[ur.WIDGET_TYPE,"/resources/widgets-library/widget-types/details"]]),gr={serverErrorCode:{general:2,authentication:10,jwtTokenExpired:11,tenantTrialExpired:12,credentialsExpired:15,permissionDenied:20,invalidArguments:30,badRequestParams:31,itemNotFound:32,tooManyRequests:33,tooManyUpdates:34,passwordViolation:45},entryPoints:{login:"/api/auth/login",tokenRefresh:"/api/auth/token",nonTokenBased:"/api/noauth"}},vr=new Map([[gr.serverErrorCode.general,"server-error.general"],[gr.serverErrorCode.authentication,"server-error.authentication"],[gr.serverErrorCode.jwtTokenExpired,"server-error.jwt-token-expired"],[gr.serverErrorCode.tenantTrialExpired,"server-error.tenant-trial-expired"],[gr.serverErrorCode.credentialsExpired,"server-error.credentials-expired"],[gr.serverErrorCode.permissionDenied,"server-error.permission-denied"],[gr.serverErrorCode.invalidArguments,"server-error.invalid-arguments"],[gr.serverErrorCode.badRequestParams,"server-error.bad-request-params"],[gr.serverErrorCode.itemNotFound,"server-error.item-not-found"],[gr.serverErrorCode.tooManyRequests,"server-error.too-many-requests"],[gr.serverErrorCode.tooManyUpdates,"server-error.too-many-updates"]]),Tr={xs:"screen and (max-width: 599px)",sm:"screen and (min-width: 600px) and (max-width: 959px)",md:"screen and (min-width: 960px) and (max-width: 1279px)",lg:"screen and (min-width: 1280px) and (max-width: 1919px)",xl:"screen and (min-width: 1920px) and (max-width: 5000px)","lt-sm":"screen and (max-width: 599px)","lt-md":"screen and (max-width: 959px)","lt-lg":"screen and (max-width: 1279px)","lt-xl":"screen and (max-width: 1919px)","gt-xs":"screen and (min-width: 600px)","gt-sm":"screen and (min-width: 960px)","gt-md":"screen and (min-width: 1280px)","gt-lg":"screen and (min-width: 1920px)","gt-xl":"screen and (min-width: 5001px)","md-lg":"screen and (min-width: 960px) and (max-width: 1819px)"},Er="https://thingsboard.io",br="",Sr={linksMap:{outgoingMailSettings:"".concat(Er,"/docs").concat(br,"/user-guide/ui/mail-settings"),smsProviderSettings:"".concat(Er,"/docs").concat(br,"/user-guide/ui/sms-provider-settings"),slackSettings:"".concat(Er,"/docs").concat(br,"/user-guide/ui/slack-settings"),securitySettings:"".concat(Er,"/docs").concat(br,"/user-guide/ui/security-settings"),oauth2Settings:"".concat(Er,"/docs").concat(br,"/user-guide/oauth-2-support/"),ruleEngine:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/overview/"),ruleNodeCheckRelation:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#check-relation-filter-node"),ruleNodeCheckExistenceFields:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#check-existence-fields-node"),ruleNodeGpsGeofencingFilter:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#gps-geofencing-filter-node"),ruleNodeJsFilter:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#script-filter-node"),ruleNodeJsSwitch:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#switch-node"),ruleNodeAssetProfileSwitch:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#asset-profile-switch"),ruleNodeDeviceProfileSwitch:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#device-profile-switch"),ruleNodeCheckAlarmStatus:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#check-alarm-status"),ruleNodeMessageTypeFilter:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#message-type-filter-node"),ruleNodeMessageTypeSwitch:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#message-type-switch-node"),ruleNodeOriginatorTypeFilter:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#originator-type-filter-node"),ruleNodeOriginatorTypeSwitch:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/filter-nodes/#originator-type-switch-node"),ruleNodeOriginatorAttributes:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/enrichment-nodes/#originator-attributes"),ruleNodeOriginatorFields:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/enrichment-nodes/#originator-fields"),ruleNodeOriginatorTelemetry:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/enrichment-nodes/#originator-telemetry"),ruleNodeCustomerAttributes:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/enrichment-nodes/#customer-attributes"),ruleNodeCustomerDetails:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/enrichment-nodes/#customer-details"),ruleNodeDeviceAttributes:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/enrichment-nodes/#device-attributes"),ruleNodeRelatedAttributes:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/enrichment-nodes/#related-attributes"),ruleNodeTenantAttributes:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/enrichment-nodes/#tenant-attributes"),ruleNodeTenantDetails:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/enrichment-nodes/#tenant-details"),ruleNodeChangeOriginator:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/transformation-nodes/#change-originator"),ruleNodeTransformMsg:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/transformation-nodes/#script-transformation-node"),ruleNodeMsgToEmail:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/transformation-nodes/#to-email-node"),ruleNodeAssignToCustomer:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/transformation-nodes/#assign-to-customer-node"),ruleNodeUnassignFromCustomer:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/transformation-nodes/#unassign-from-customer-node"),ruleNodeClearAlarm:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#clear-alarm-node"),ruleNodeCreateAlarm:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#create-alarm-node"),ruleNodeCreateRelation:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#create-relation-node"),ruleNodeDeleteRelation:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#delete-relation-node"),ruleNodeMsgDelay:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#delay-node"),ruleNodeMsgGenerator:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#generator-node"),ruleNodeGpsGeofencingEvents:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#gps-geofencing-events-node"),ruleNodeLog:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#log-node"),ruleNodeRpcCallReply:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#rpc-call-reply-node"),ruleNodeRpcCallRequest:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#rpc-call-request-node"),ruleNodeSaveAttributes:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#save-attributes-node"),ruleNodeSaveTimeseries:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#save-timeseries-node"),ruleNodeSaveToCustomTable:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#save-to-custom-table"),ruleNodeRuleChain:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/flow-nodes/#rule-chain-node"),ruleNodeOutputNode:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/flow-nodes/#output-node"),ruleNodeAwsSns:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/external-nodes/#aws-sns-node"),ruleNodeAwsSqs:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/external-nodes/#aws-sqs-node"),ruleNodeKafka:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/external-nodes/#kafka-node"),ruleNodeMqtt:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/external-nodes/#mqtt-node"),ruleNodeAzureIotHub:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/external-nodes/#azure-iot-hub-node"),ruleNodeRabbitMq:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/external-nodes/#rabbitmq-node"),ruleNodeRestApiCall:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/external-nodes/#rest-api-call-node"),ruleNodeSendEmail:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/external-nodes/#send-email-node"),ruleNodeSendSms:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/external-nodes/#send-sms-node"),ruleNodeMath:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#math-function-node"),ruleNodeCalculateDelta:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/enrichment-nodes/#calculate-delta"),ruleNodeRestCallReply:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#rest-call-reply-node"),ruleNodePushToCloud:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#push-to-cloud"),ruleNodePushToEdge:"".concat(Er,"/docs").concat(br,"/user-guide/rule-engine-2-0/action-nodes/#push-to-edge"),tenants:"".concat(Er,"/docs").concat(br,"/user-guide/ui/tenants"),tenantProfiles:"".concat(Er,"/docs").concat(br,"/user-guide/ui/tenant-profiles"),customers:"".concat(Er,"/docs").concat(br,"/user-guide/ui/customers"),users:"".concat(Er,"/docs").concat(br,"/user-guide/ui/users"),devices:"".concat(Er,"/docs").concat(br,"/user-guide/ui/devices"),deviceProfiles:"".concat(Er,"/docs").concat(br,"/user-guide/ui/device-profiles"),assetProfiles:"".concat(Er,"/docs").concat(br,"/user-guide/ui/asset-profiles"),edges:"".concat(Er,"/docs/edge/getting-started-guides/what-is-edge"),assets:"".concat(Er,"/docs").concat(br,"/user-guide/ui/assets"),entityViews:"".concat(Er,"/docs").concat(br,"/user-guide/ui/entity-views"),entitiesImport:"".concat(Er,"/docs").concat(br,"/user-guide/bulk-provisioning"),rulechains:"".concat(Er,"/docs").concat(br,"/user-guide/ui/rule-chains"),lwm2mResourceLibrary:"".concat(Er,"/docs").concat(br,"/reference/lwm2m-api"),dashboards:"".concat(Er,"/docs").concat(br,"/user-guide/ui/dashboards"),otaUpdates:"".concat(Er,"/docs").concat(br,"/user-guide/ota-updates"),widgetTypes:"".concat(Er,"/docs").concat(br,"/user-guide/ui/widget-library/#widget-types"),widgetsBundles:"".concat(Er,"/docs").concat(br,"/user-guide/ui/widget-library/#widgets-library-bundles"),widgetsConfig:"".concat(Er,"/docs").concat(br,"/user-guide/ui/widget-library"),widgetsConfigTimeseries:"".concat(Er,"/docs").concat(br,"/user-guide/ui/widget-library#time-series"),widgetsConfigLatest:"".concat(Er,"/docs").concat(br,"/user-guide/ui/widget-library#latest-values"),widgetsConfigRpc:"".concat(Er,"/docs").concat(br,"/user-guide/ui/widget-library#control-widget"),widgetsConfigAlarm:"".concat(Er,"/docs").concat(br,"/user-guide/ui/widget-library#alarm-widget"),widgetsConfigStatic:"".concat(Er,"/docs").concat(br,"/user-guide/ui/widget-library#static"),queue:"".concat(Er,"/docs").concat(br,"/user-guide/queue"),repositorySettings:"".concat(Er,"/docs").concat(br,"/user-guide/version-control/#git-settings-configuration"),autoCommitSettings:"".concat(Er,"/docs").concat(br,"/user-guide/version-control/#auto-commit"),twoFactorAuthentication:"".concat(Er,"/docs").concat(br,"/user-guide/two-factor-authentication"),sentNotification:"".concat(Er,"/docs").concat(br,"/user-guide/notifications/#send-notification"),templateNotifications:"".concat(Er,"/docs").concat(br,"/user-guide/notifications/#templates"),recipientNotifications:"".concat(Er,"/docs").concat(br,"/user-guide/notifications/#recipients"),ruleNotifications:"".concat(Er,"/docs").concat(br,"/user-guide/notifications/#rules"),jwtSecuritySettings:"".concat(Er,"/docs").concat(br,"/user-guide/ui/jwt-security-settings/"),gatewayInstall:"".concat(Er,"/docs/iot-gateway/install/docker-installation/")}};!function(t){t.STRING="STRING",t.INTEGER="INTEGER",t.DOUBLE="DOUBLE",t.BOOLEAN="BOOLEAN",t.JSON="JSON"}(dr||(dr={})),function(t){t.STRING="STRING",t.LONG="LONG",t.BOOLEAN="BOOLEAN",t.DOUBLE="DOUBLE",t.JSON="JSON"}(fr||(fr={}));var _r,Ar=new Map([[fr.STRING,"value.string"],[fr.LONG,"value.integer"],[fr.BOOLEAN,"value.boolean"],[fr.DOUBLE,"value.double"],[fr.JSON,"value.json"]]),wr=new Map([[dr.STRING,{name:"value.string",icon:"mdi:format-text"}],[dr.INTEGER,{name:"value.integer",icon:"mdi:numeric"}],[dr.DOUBLE,{name:"value.double",icon:"mdi:numeric"}],[dr.BOOLEAN,{name:"value.boolean",icon:"mdi:checkbox-marked-outline"}],[dr.JSON,{name:"value.json",icon:"mdi:code-json"}]]);!function(t){t.JSON="JSON",t.TEXT="TEXT",t.BINARY="BINARY"}(_r||(_r={}));var Ir=new Map([[_r.JSON,{name:"content-type.json",code:"json"}],[_r.TEXT,{name:"content-type.text",code:"text"}],[_r.BINARY,{name:"content-type.binary",code:"text"}]]),Dr="custom.",Rr="i18n",Nr=/\${([^}]*)}/g;function Or(t){return void 0===t}function Cr(t){return null==t}function Mr(t){return void 0!==t}function kr(t){return null!=t}function Lr(t){return""===t}function Ur(t){return"string"==typeof t&&t.trim().length>0}function Pr(t){return null!==t&&"object"==typeof t}function xr(t){return"number"==typeof t}function Fr(t){return t-parseFloat(t)+1>=0}function Wr(t){return"string"==typeof t}var Vr=function(t,e,n,i){if(kr(t)&&Fr(t)&&(kr(e)||kr(n)||Number(t).toString()===t)){var r=Number(t);return kr(e)&&(r=r.toFixed(e)),i||(r=Number(r)),r=r.toString(),kr(n)&&n.length>0&&(r+=" "+n),r}return null!==t?t:""};function jr(t){var e=JSON.stringify(t);return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})))}function Yr(t){return decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function Hr(t){return encodeURIComponent(jr(t))}function Br(t){var e=decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(e)}var Kr=function(t){return Ln(new Promise((function(e){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.readAsDataURL(t)})))},Gr=/(auto|scroll)/;function qr(t,e){return null===t.parentNode?e:qr(t.parentNode,e.concat([t]))}function zr(t,e){return getComputedStyle(t,null).getPropertyValue(e)}function Qr(t){var e,n=0;if(0===t.length)return n;for(e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n}function Jr(t){var e=0;t&&(e=Qr(JSON.stringify(t)));return e}function Xr(t,e){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var n=[];return t.forEach((function(t){n.push(t)})),n.map((function(t){return Xr(t)}))}if("object"==typeof t){var i=de({},t);return Object.keys(i).forEach((function(t){e&&-1!==e.indexOf(t)||(i[t]=Xr(i[t]))})),i}return t}var $r=function(t,e){return lr.isEqual(t,e)},Zr=function(t){return lr.isEmpty(t)},ta=function(t,e){return t===e||(kr(t)&&kr(e)?$r(t,e):(Cr(t)||!t)&&(Cr(e)||!e))},ea=function(t,e){var n=ta(t,e);return n||(Cr(t)||!(null==t?void 0:t.length))&&(Cr(e)||!(null==e?void 0:e.length))};function na(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}var ia=/[A-Z]/g;function ra(t,e){return t.hasOwnProperty(e)?t[e]:e.split(".").reduce((function(t,e){return t&&t[e]}),t)}var aa=function(t,e){var n=e;if(!t)return n;for(var i=Nr.exec(e);null!==i;){var r=i[0],a=i[1];"dsName"===a?n=n.replace(r,t.name):"entityName"===a||"deviceName"===a?n=n.replace(r,t.entityName):"entityLabel"===a?n=n.replace(r,t.entityLabel||t.entityName):"aliasName"===a?n=n.replace(r,t.aliasName):"entityDescription"===a&&(n=n.replace(r,t.entityDescription)),i=Nr.exec(e)}return n};function oa(t,e,n){return lr(t).groupBy((function(t){return t.datasource.entityName+t.datasource.entityType})).values().value().map((function(t,i){var r=sa(t[0].datasource,i);return t.filter((function(t){return t.data.length})).forEach((function(t){var i=Mr(e)?e:t.data.length-1,a=Mr(n)?t.data.find((function(t){return t[0]===n})):t.data[i];void 0===a||r.hasOwnProperty(t.dataKey.label)&&""===a[1]||(r[t.dataKey.label]=a[1],r[t.dataKey.label+"|ts"]=a[0],"type"===t.dataKey.label.toLowerCase()&&(r.deviceType=a[1]))})),r}))}function sa(t,e){return{entityName:t.entityName,deviceName:t.entityName,entityId:t.entityId,entityType:t.entityType,entityLabel:t.entityLabel||t.entityName,entityDescription:t.entityDescription,aliasName:t.aliasName,$datasource:t,dsIndex:e,dsName:t.name,deviceType:null}}function ua(t){var e,n,i={};if(t.length){try{for(var r=ve(t),a=r.next();!a.done;a=r.next()){var o=a.value;i=de(de({},i),o)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}var s=t[0];i.entityName=s.entityName,i.deviceName=s.deviceName,i.entityId=s.entityId,i.entityType=s.entityType,i.entityLabel=s.entityLabel,i.entityDescription=s.entityDescription,i.aliasName=s.aliasName,i.$datasource=s.$datasource,i.dsIndex=s.dsIndex,i.dsName=s.dsName,i.deviceType=s.deviceType}return i}function ca(t,e){var n=[];try{for(var i=/\${([^}]*)}/g,r=i.exec(t);null!==r;){var a={dataKeyName:"",valDec:2,variable:""},o=r[0],s=r[1],u=2,c=s.split(":");if(c.length>1&&(s=c[0],u=parseFloat(c[1])),a.variable=o,a.valDec=u,s.startsWith("#")){var l=s.substring(1),p=Math.floor(Number(l));String(p)===l&&p>=0&&(a.dataKeyName=e.$datasource.dataKeys[p].label)}else a.dataKeyName=s;n.push(a),r=i.exec(t)}}catch(e){console.log(e,t)}return n}function la(t,e,n){var i,r,a=aa(n.$datasource,t);if(e)try{for(var o=ve(e),s=o.next();!s.done;s=o.next()){var u=s.value,c="";if(u.dataKeyName&&kr(n[u.dataKeyName])){var l=n[u.dataKeyName];c=xr(l)?da(l,u.valDec):l}a=a.replace(u.variable,c)}}catch(t){i={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function pa(t,e){return la(t,ca(t,e),e)}function da(t,e){var n;return n=(t=parseFloat(t))<0,t=Math.abs(t),(n?"-":"")+(e>0?t.toFixed(e):Math.round(t).toString())}function fa(){var t=window.location.protocol+"//"+window.location.hostname,e=window.location.port;return e&&e.length>0&&"80"!==e&&"443"!==e&&(t+=":"+e),t}function ha(t){(Or(t)||null==t)&&(t=1);var e=t>10?10:t,n=Math.random().toString(36).substr(2,e);return n.length>=t?n:n.concat(ha(t-n.length))}var ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function ma(t,e){return mr.has(e)?"".concat(mr.get(e),"/").concat(t):""}function ga(t,e,n){var i,r=null,a=0;if("text"===n)try{r=t.error?JSON.parse(t.error):null}catch(t){}else r=t.error;if(r&&!r.message?i=function(t){if("object"!=typeof t||t.constructor!==ArrayBuffer)return t;var e=String.fromCharCode.apply(null,new Uint8Array(t));try{var n=JSON.parse(e);return n.message?n.message:e}catch(t){return e}}(r):r&&r.message?(i=r.message,a=r.timeout?r.timeout:0):i="Unhandled error code ".concat(r?r.status:"'Unknown'"),Pr(i)){var o="".concat(t.status,": "),s=null;i.errorCode&&(s=vr.get(i.errorCode)),i=o+=s?e.instant(s):t.statusText}return{message:i,timeout:a}}var va,Ta=function(){function t(t){this.http=t}return t.prototype.getUsers=function(t,e){return this.http.get("/api/users".concat(t.toQuery()),nr(e))},t.prototype.getTenantAdmins=function(t,e,n){return this.http.get("/api/tenant/".concat(t,"/users").concat(e.toQuery()),nr(n))},t.prototype.getCustomerUsers=function(t,e,n){return this.http.get("/api/customer/".concat(t,"/users").concat(e.toQuery()),nr(n))},t.prototype.getUsersForAssign=function(t,e,n){return this.http.get("/api/users/assign/".concat(t).concat(e.toQuery()),nr(n))},t.prototype.getUser=function(t,e){return this.http.get("/api/user/".concat(t),nr(e))},t.prototype.saveUser=function(t,e,n){void 0===e&&(e=!1);var i="/api/user";return i+="?sendActivationMail="+e,this.http.post(i,t,nr(n))},t.prototype.deleteUser=function(t,e){return this.http.delete("/api/user/".concat(t),nr(e))},t.prototype.getActivationLink=function(t,e){return this.http.get("/api/user/".concat(t,"/activationLink"),de({responseType:"text"},nr(e)))},t.prototype.sendActivationEmail=function(t,e){var n=encodeURIComponent(t);return this.http.post("/api/user/sendActivationMail?email=".concat(n),null,nr(e))},t.prototype.setUserCredentialsEnabled=function(t,e,n){var i="/api/user/".concat(t,"/userCredentialsEnabled");return Mr(e)&&(i+="?userCredentialsEnabled=".concat(e)),this.http.post(i,null,nr(n))},t.prototype.findUsersByQuery=function(t,e){return this.http.get("/api/users/info".concat(t.toQuery()),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();!function(t){t.SYS_ADMIN="SYS_ADMIN",t.TENANT_ADMIN="TENANT_ADMIN",t.CUSTOMER_USER="CUSTOMER_USER",t.REFRESH_TOKEN="REFRESH_TOKEN",t.ANONYMOUS="ANONYMOUS",t.PRE_VERIFICATION_TOKEN="PRE_VERIFICATION_TOKEN"}(va||(va={}));var Ea=function(){function t(){}return t.prototype.runOutsideAngular=function(t){return t()},t=fe([ae(),ye("design:paramtypes",[])],t)}(),ba=function(){function t(){}return t.prototype.instant=function(t,e){return t},t=fe([ae(),ye("design:paramtypes",[])],t)}(),Sa={exports:{}};!function(t){t.exports=function(){var e;function n(){return e.apply(null,arguments)}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function r(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;for(var e in t)if(a(t,e))return;return 1}function s(t){return void 0===t}function u(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function c(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function l(t,e){for(var n=[],i=t.length,r=0;r<i;++r)n.push(e(t[r],r));return n}function p(t,e){for(var n in e)a(e,n)&&(t[n]=e[n]);return a(e,"toString")&&(t.toString=e.toString),a(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,n,i){return Ne(t,e,n,i,!0).utc()}function f(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function h(t){if(null==t._isValid){var e=f(t),n=m.call(e.parsedDateParts,(function(t){return null!=t}));if(n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function y(t){var e=d(NaN);return null!=t?p(f(e),t):f(e).userInvalidated=!0,e}var m=Array.prototype.some||function(t){for(var e=Object(this),n=e.length>>>0,i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1},g=n.momentProperties=[],v=!1;function T(t,e){var n,i,r,a=g.length;if(s(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),s(e._i)||(t._i=e._i),s(e._f)||(t._f=e._f),s(e._l)||(t._l=e._l),s(e._strict)||(t._strict=e._strict),s(e._tzm)||(t._tzm=e._tzm),s(e._isUTC)||(t._isUTC=e._isUTC),s(e._offset)||(t._offset=e._offset),s(e._pf)||(t._pf=f(e)),s(e._locale)||(t._locale=e._locale),0<a)for(n=0;n<a;n++)s(r=e[i=g[n]])||(t[i]=r);return t}function E(t){T(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,n.updateOffset(this),v=!1)}function b(t){return t instanceof E||null!=t&&null!=t._isAMomentObject}function S(t){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function _(t,e){var i=!0;return p((function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,t),i){for(var r,o,s=[],u=arguments.length,c=0;c<u;c++){if(r="","object"==typeof arguments[c]){for(o in r+="\n["+c+"] ",arguments[0])a(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[c];s.push(r)}S(t+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),i=!1}return e.apply(this,arguments)}),e)}var A={};function w(t,e){null!=n.deprecationHandler&&n.deprecationHandler(t,e),A[t]||(S(e),A[t]=!0)}function I(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function D(t,e){var n,i=p({},t);for(n in e)a(e,n)&&(r(t[n])&&r(e[n])?(i[n]={},p(i[n],t[n]),p(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)a(t,n)&&!a(e,n)&&r(t[n])&&(i[n]=p({},i[n]));return i}function R(t){null!=t&&this.set(t)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null;var N=Object.keys||function(t){var e,n=[];for(e in t)a(t,e)&&n.push(e);return n};function O(t,e,n){var i=""+Math.abs(t);return(0<=t?n?"+":"":"-")+Math.pow(10,Math.max(0,e-i.length)).toString().substr(1)+i}var C=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,M=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,k={},L={};function U(t,e,n,i){var r="string"==typeof i?function(){return this[i]()}:i;t&&(L[t]=r),e&&(L[e[0]]=function(){return O(r.apply(this,arguments),e[1],e[2])}),n&&(L[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function P(t,e){return t.isValid()?(e=x(e,t.localeData()),k[e]=k[e]||function(t){for(var e,n=t.match(C),i=0,r=n.length;i<r;i++)L[n[i]]?n[i]=L[n[i]]:n[i]=(e=n[i]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var i="",a=0;a<r;a++)i+=I(n[a])?n[a].call(e,t):n[a];return i}}(e),k[e](t)):t.localeData().invalidDate()}function x(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(M.lastIndex=0;0<=n&&M.test(t);)t=t.replace(M,i),M.lastIndex=0,--n;return t}var F={};function W(t,e){var n=t.toLowerCase();F[n]=F[n+"s"]=F[e]=t}function V(t){return"string"==typeof t?F[t]||F[t.toLowerCase()]:void 0}function j(t){var e,n,i={};for(n in t)a(t,n)&&(e=V(n))&&(i[e]=t[n]);return i}var Y={};function H(t,e){Y[t]=e}function B(t){return t%4==0&&t%100!=0||t%400==0}function K(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function G(t){var e=0;return 0!=(t=+t)&&isFinite(t)?K(t):e}function q(t,e){return function(i){return null!=i?(Q(this,t,i),n.updateOffset(this,e),this):z(this,t)}}function z(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Q(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&B(t.year())&&1===t.month()&&29===t.date()?(n=G(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Nt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}var J=/\d/,X=/\d\d/,$=/\d{3}/,Z=/\d{4}/,tt=/[+-]?\d{6}/,et=/\d\d?/,nt=/\d\d\d\d?/,it=/\d\d\d\d\d\d?/,rt=/\d{1,3}/,at=/\d{1,4}/,ot=/[+-]?\d{1,6}/,st=/\d+/,ut=/[+-]?\d+/,ct=/Z|[+-]\d\d:?\d\d/gi,lt=/Z|[+-]\d\d(?::?\d\d)?/gi,pt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function dt(t,e,n){yt[t]=I(e)?e:function(t,i){return t&&n?n:e}}function ft(t,e){return a(yt,t)?yt[t](e._strict,e._locale):new RegExp(ht(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,i,r){return e||n||i||r}))))}function ht(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var yt={},mt={};function gt(t,e){var n,i,r=e;for("string"==typeof t&&(t=[t]),u(e)&&(r=function(t,n){n[e]=G(t)}),i=t.length,n=0;n<i;n++)mt[t[n]]=r}function vt(t,e){gt(t,(function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)}))}var Tt,Et=0,bt=1,St=2,_t=3,At=4,wt=5,It=6,Dt=7,Rt=8;function Nt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=(e%(n=12)+n)%n;return t+=(e-n)/12,1==n?B(t)?29:28:31-n%7%2}Tt=Array.prototype.indexOf||function(t){for(var e=0;e<this.length;++e)if(this[e]===t)return e;return-1},U("M",["MM",2],"Mo",(function(){return this.month()+1})),U("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),U("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),W("month","M"),H("month",8),dt("M",et),dt("MM",et,X),dt("MMM",(function(t,e){return e.monthsShortRegex(t)})),dt("MMMM",(function(t,e){return e.monthsRegex(t)})),gt(["M","MM"],(function(t,e){e[bt]=G(t)-1})),gt(["MMM","MMMM"],(function(t,e,n,i){null!=(i=n._locale.monthsParse(t,i,n._strict))?e[bt]=i:f(n).invalidMonth=t}));var Ot="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ct="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Mt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,kt=pt,Lt=pt;function Ut(t,e){var n;if(t.isValid()){if("string"==typeof e)if(/^\d+$/.test(e))e=G(e);else if(!u(e=t.localeData().monthsParse(e)))return;n=Math.min(t.date(),Nt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n)}}function Pt(t){return null!=t?(Ut(this,t),n.updateOffset(this,!0),this):z(this,"Month")}function xt(){function t(t,e){return e.length-t.length}for(var e,n=[],i=[],r=[],a=0;a<12;a++)e=d([2e3,a]),n.push(this.monthsShort(e,"")),i.push(this.months(e,"")),r.push(this.months(e,"")),r.push(this.monthsShort(e,""));for(n.sort(t),i.sort(t),r.sort(t),a=0;a<12;a++)n[a]=ht(n[a]),i[a]=ht(i[a]);for(a=0;a<24;a++)r[a]=ht(r[a]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Ft(t){return B(t)?366:365}U("Y",0,0,(function(){var t=this.year();return t<=9999?O(t,4):"+"+t})),U(0,["YY",2],0,(function(){return this.year()%100})),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),W("year","y"),H("year",1),dt("Y",ut),dt("YY",et,X),dt("YYYY",at,Z),dt("YYYYY",ot,tt),dt("YYYYYY",ot,tt),gt(["YYYYY","YYYYYY"],Et),gt("YYYY",(function(t,e){e[Et]=2===t.length?n.parseTwoDigitYear(t):G(t)})),gt("YY",(function(t,e){e[Et]=n.parseTwoDigitYear(t)})),gt("Y",(function(t,e){e[Et]=parseInt(t,10)})),n.parseTwoDigitYear=function(t){return G(t)+(68<G(t)?1900:2e3)};var Wt=q("FullYear",!0);function Vt(t,e,n,i,r,a,o){var s;return t<100&&0<=t?(s=new Date(t+400,e,n,i,r,a,o),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,i,r,a,o),s}function jt(t){var e;return t<100&&0<=t?((e=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,e)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Yt(t,e,n){return(n=7+e-n)-(7+jt(t,0,n).getUTCDay()-e)%7-1}function Ht(t,e,n,i,r){var a;return n=(e=1+7*(e-1)+(7+n-i)%7+Yt(t,i,r))<=0?Ft(a=t-1)+e:e>Ft(t)?(a=t+1,e-Ft(t)):(a=t,e),{year:a,dayOfYear:n}}function Bt(t,e,n){var i,r,a=Yt(t.year(),e,n);return(a=Math.floor((t.dayOfYear()-a-1)/7)+1)<1?i=a+Kt(r=t.year()-1,e,n):a>Kt(t.year(),e,n)?(i=a-Kt(t.year(),e,n),r=t.year()+1):(r=t.year(),i=a),{week:i,year:r}}function Kt(t,e,n){var i=Yt(t,e,n);return e=Yt(t+1,e,n),(Ft(t)-i+e)/7}function Gt(t,e){return t.slice(e,7).concat(t.slice(0,e))}U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),W("week","w"),W("isoWeek","W"),H("week",5),H("isoWeek",5),dt("w",et),dt("ww",et,X),dt("W",et),dt("WW",et,X),vt(["w","ww","W","WW"],(function(t,e,n,i){e[i.substr(0,1)]=G(t)})),U("d",0,"do","day"),U("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),U("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),U("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),W("day","d"),W("weekday","e"),W("isoWeekday","E"),H("day",11),H("weekday",11),H("isoWeekday",11),dt("d",et),dt("e",et),dt("E",et),dt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),dt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),dt("dddd",(function(t,e){return e.weekdaysRegex(t)})),vt(["dd","ddd","dddd"],(function(t,e,n,i){null!=(i=n._locale.weekdaysParse(t,i,n._strict))?e.d=i:f(n).invalidWeekday=t})),vt(["d","e","E"],(function(t,e,n,i){e[i]=G(t)}));var qt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),zt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Qt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Jt=pt,Xt=pt,$t=pt;function Zt(){function t(t,e){return e.length-t.length}for(var e,n,i,r=[],a=[],o=[],s=[],u=0;u<7;u++)i=d([2e3,1]).day(u),e=ht(this.weekdaysMin(i,"")),n=ht(this.weekdaysShort(i,"")),i=ht(this.weekdays(i,"")),r.push(e),a.push(n),o.push(i),s.push(e),s.push(n),s.push(i);r.sort(t),a.sort(t),o.sort(t),s.sort(t),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function te(){return this.hours()%12||12}function ee(t,e){U(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function ne(t,e){return e._meridiemParse}U("H",["HH",2],0,"hour"),U("h",["hh",2],0,te),U("k",["kk",2],0,(function(){return this.hours()||24})),U("hmm",0,0,(function(){return""+te.apply(this)+O(this.minutes(),2)})),U("hmmss",0,0,(function(){return""+te.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)})),U("Hmm",0,0,(function(){return""+this.hours()+O(this.minutes(),2)})),U("Hmmss",0,0,(function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)})),ee("a",!0),ee("A",!1),W("hour","h"),H("hour",13),dt("a",ne),dt("A",ne),dt("H",et),dt("h",et),dt("k",et),dt("HH",et,X),dt("hh",et,X),dt("kk",et,X),dt("hmm",nt),dt("hmmss",it),dt("Hmm",nt),dt("Hmmss",it),gt(["H","HH"],_t),gt(["k","kk"],(function(t,e,n){t=G(t),e[_t]=24===t?0:t})),gt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),gt(["h","hh"],(function(t,e,n){e[_t]=G(t),f(n).bigHour=!0})),gt("hmm",(function(t,e,n){var i=t.length-2;e[_t]=G(t.substr(0,i)),e[At]=G(t.substr(i)),f(n).bigHour=!0})),gt("hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[_t]=G(t.substr(0,i)),e[At]=G(t.substr(i,2)),e[wt]=G(t.substr(r)),f(n).bigHour=!0})),gt("Hmm",(function(t,e,n){var i=t.length-2;e[_t]=G(t.substr(0,i)),e[At]=G(t.substr(i))})),gt("Hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[_t]=G(t.substr(0,i)),e[At]=G(t.substr(i,2)),e[wt]=G(t.substr(r))})),pt=q("Hours",!0);var ie,re={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ot,monthsShort:Ct,week:{dow:0,doy:6},weekdays:qt,weekdaysMin:Qt,weekdaysShort:zt,meridiemParse:/[ap]\.?m?\.?/i},ae={},oe={};function se(t){return t&&t.toLowerCase().replace("_","-")}function ue(t){for(var e,n,i,r,a=0;a<t.length;){for(e=(r=se(t[a]).split("-")).length,n=(n=se(t[a+1]))?n.split("-"):null;0<e;){if(i=ce(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i+=1)if(t[i]!==e[i])return i;return n}(r,n)>=e-1)break;e--}a++}return ie}function ce(e){var n;if(void 0===ae[e]&&t&&t.exports&&null!=e.match("^[^/\\\\]*$"))try{n=ie._abbr,function(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */("./locale/"+e),le(n)}catch(n){ae[e]=null}return ae[e]}function le(t,e){return t&&((e=s(e)?de(t):pe(t,e))?ie=e:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ie._abbr}function pe(t,e){if(null===e)return delete ae[t],null;var n,i=re;if(e.abbr=t,null!=ae[t])w("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ae[t]._config;else if(null!=e.parentLocale)if(null!=ae[e.parentLocale])i=ae[e.parentLocale]._config;else{if(null==(n=ce(e.parentLocale)))return oe[e.parentLocale]||(oe[e.parentLocale]=[]),oe[e.parentLocale].push({name:t,config:e}),null;i=n._config}return ae[t]=new R(D(i,e)),oe[t]&&oe[t].forEach((function(t){pe(t.name,t.config)})),le(t),ae[t]}function de(t){var e;if(!(t=t&&t._locale&&t._locale._abbr?t._locale._abbr:t))return ie;if(!i(t)){if(e=ce(t))return e;t=[t]}return ue(t)}function fe(t){var e=t._a;return e&&-2===f(t).overflow&&(e=e[bt]<0||11<e[bt]?bt:e[St]<1||e[St]>Nt(e[Et],e[bt])?St:e[_t]<0||24<e[_t]||24===e[_t]&&(0!==e[At]||0!==e[wt]||0!==e[It])?_t:e[At]<0||59<e[At]?At:e[wt]<0||59<e[wt]?wt:e[It]<0||999<e[It]?It:-1,f(t)._overflowDayOfYear&&(e<Et||St<e)&&(e=St),f(t)._overflowWeeks&&-1===e&&(e=Dt),f(t)._overflowWeekday&&-1===e&&(e=Rt),f(t).overflow=e),t}var he=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ye=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,me=/Z|[+-]\d\d(?::?\d\d)?/,ge=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ve=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Te=/^\/?Date\((-?\d+)/i,Ee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,be={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Se(t){var e,n,i,r,a,o,s=t._i,u=he.exec(s)||ye.exec(s),c=(s=ge.length,ve.length);if(u){for(f(t).iso=!0,e=0,n=s;e<n;e++)if(ge[e][1].exec(u[1])){r=ge[e][0],i=!1!==ge[e][2];break}if(null==r)t._isValid=!1;else{if(u[3]){for(e=0,n=c;e<n;e++)if(ve[e][1].exec(u[3])){a=(u[2]||" ")+ve[e][0];break}if(null==a)return void(t._isValid=!1)}if(i||null==a){if(u[4]){if(!me.exec(u[4]))return void(t._isValid=!1);o="Z"}t._f=r+(a||"")+(o||""),De(t)}else t._isValid=!1}}else t._isValid=!1}function _e(t,e,n,i,r,a){return t=[function(t){return(t=parseInt(t,10))<=49?2e3+t:t<=999?1900+t:t}(t),Ct.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(r,10)],a&&t.push(parseInt(a,10)),t}function Ae(t){var e,n,i,r,a=Ee.exec(t._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));a?(i=e=_e(a[4],a[3],a[2],a[5],a[6],a[7]),r=t,(n=a[1])&&zt.indexOf(n)!==new Date(i[0],i[1],i[2]).getDay()?(f(r).weekdayMismatch=!0,r._isValid=!1):(t._a=e,t._tzm=(n=a[8],i=a[9],r=a[10],n?be[n]:i?0:((n=parseInt(r,10))-(i=n%100))/100*60+i),t._d=jt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0)):t._isValid=!1}function we(t,e,n){return null!=t?t:null!=e?e:n}function Ie(t){var e,i,r,a,o,s,u,c,l,p,d,h=[];if(!t._d){for(r=t,a=new Date(n.now()),i=r._useUTC?[a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()]:[a.getFullYear(),a.getMonth(),a.getDate()],t._w&&null==t._a[St]&&null==t._a[bt]&&(null!=(a=(r=t)._w).GG||null!=a.W||null!=a.E?(c=1,l=4,o=we(a.GG,r._a[Et],Bt(Oe(),1,4).year),s=we(a.W,1),((u=we(a.E,1))<1||7<u)&&(p=!0)):(c=r._locale._week.dow,l=r._locale._week.doy,d=Bt(Oe(),c,l),o=we(a.gg,r._a[Et],d.year),s=we(a.w,d.week),null!=a.d?((u=a.d)<0||6<u)&&(p=!0):null!=a.e?(u=a.e+c,(a.e<0||6<a.e)&&(p=!0)):u=c),s<1||s>Kt(o,c,l)?f(r)._overflowWeeks=!0:null!=p?f(r)._overflowWeekday=!0:(d=Ht(o,s,u,c,l),r._a[Et]=d.year,r._dayOfYear=d.dayOfYear)),null!=t._dayOfYear&&(a=we(t._a[Et],i[Et]),(t._dayOfYear>Ft(a)||0===t._dayOfYear)&&(f(t)._overflowDayOfYear=!0),p=jt(a,0,t._dayOfYear),t._a[bt]=p.getUTCMonth(),t._a[St]=p.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=h[e]=i[e];for(;e<7;e++)t._a[e]=h[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[_t]&&0===t._a[At]&&0===t._a[wt]&&0===t._a[It]&&(t._nextDay=!0,t._a[_t]=0),t._d=(t._useUTC?jt:Vt).apply(null,h),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[_t]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(f(t).weekdayMismatch=!0)}}function De(t){if(t._f===n.ISO_8601)Se(t);else if(t._f===n.RFC_2822)Ae(t);else{t._a=[],f(t).empty=!0;for(var e,i,r,o,s,u=""+t._i,c=u.length,l=0,p=x(t._f,t._locale).match(C)||[],d=p.length,h=0;h<d;h++)i=p[h],(e=(u.match(ft(i,t))||[])[0])&&(0<(r=u.substr(0,u.indexOf(e))).length&&f(t).unusedInput.push(r),u=u.slice(u.indexOf(e)+e.length),l+=e.length),L[i]?(e?f(t).empty=!1:f(t).unusedTokens.push(i),r=i,s=t,null!=(o=e)&&a(mt,r)&&mt[r](o,s._a,s,r)):t._strict&&!e&&f(t).unusedTokens.push(i);f(t).charsLeftOver=c-l,0<u.length&&f(t).unusedInput.push(u),t._a[_t]<=12&&!0===f(t).bigHour&&0<t._a[_t]&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[_t]=function(t,e,n){return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((t=t.isPM(n))&&e<12&&(e+=12),e=t||12!==e?e:0):e}(t._locale,t._a[_t],t._meridiem),null!==(c=f(t).era)&&(t._a[Et]=t._locale.erasConvertYear(c,t._a[Et])),Ie(t),fe(t)}}function Re(t){var e,a,o,d=t._i,m=t._f;return t._locale=t._locale||de(t._l),null===d||void 0===m&&""===d?y({nullInput:!0}):("string"==typeof d&&(t._i=d=t._locale.preparse(d)),b(d)?new E(fe(d)):(c(d)?t._d=d:i(m)?function(t){var e,n,i,r,a,o,s=!1,u=t._f.length;if(0===u)return f(t).invalidFormat=!0,t._d=new Date(NaN);for(r=0;r<u;r++)a=0,o=!1,e=T({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],De(e),h(e)&&(o=!0),a=(a+=f(e).charsLeftOver)+10*f(e).unusedTokens.length,f(e).score=a,s?a<i&&(i=a,n=e):(null==i||a<i||o)&&(i=a,n=e,o&&(s=!0));p(t,n||e)}(t):m?De(t):s(m=(d=t)._i)?d._d=new Date(n.now()):c(m)?d._d=new Date(m.valueOf()):"string"==typeof m?(a=d,null!==(e=Te.exec(a._i))?a._d=new Date(+e[1]):(Se(a),!1===a._isValid&&(delete a._isValid,Ae(a),!1===a._isValid&&(delete a._isValid,a._strict?a._isValid=!1:n.createFromInputFallback(a))))):i(m)?(d._a=l(m.slice(0),(function(t){return parseInt(t,10)})),Ie(d)):r(m)?(e=d)._d||(o=void 0===(a=j(e._i)).day?a.date:a.day,e._a=l([a.year,a.month,o,a.hour,a.minute,a.second,a.millisecond],(function(t){return t&&parseInt(t,10)})),Ie(e)):u(m)?d._d=new Date(m):n.createFromInputFallback(d),h(t)||(t._d=null),t))}function Ne(t,e,n,a,s){var u={};return!0!==e&&!1!==e||(a=e,e=void 0),!0!==n&&!1!==n||(a=n,n=void 0),(r(t)&&o(t)||i(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=n,u._i=t,u._f=e,u._strict=a,(s=new E(fe(Re(s=u))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Oe(t,e,n,i){return Ne(t,e,n,i,!1)}function Ce(t,e){var n,r;if(!(e=1===e.length&&i(e[0])?e[0]:e).length)return Oe();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}n.createFromInputFallback=_("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),n.ISO_8601=function(){},n.RFC_2822=function(){},nt=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Oe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:y()})),it=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Oe.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:y()}));var Me=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ke(t){var e=(t=j(t)).year||0,n=t.quarter||0,i=t.month||0,r=t.week||t.isoWeek||0,o=t.day||0,s=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=function(t){var e,n,i=!1,r=Me.length;for(e in t)if(a(t,e)&&(-1===Tt.call(Me,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<r;++n)if(t[Me[n]]){if(i)return!1;parseFloat(t[Me[n]])!==G(t[Me[n]])&&(i=!0)}return!0}(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*s*60*60,this._days=+o+7*r,this._months=+i+3*n+12*e,this._data={},this._locale=de(),this._bubble()}function Le(t){return t instanceof ke}function Ue(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Pe(t,e){U(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+O(~~(t/60),2)+e+O(~~t%60,2)}))}Pe("Z",":"),Pe("ZZ",""),dt("Z",lt),dt("ZZ",lt),gt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Fe(lt,t)}));var xe=/([\+\-]|\d\d)/gi;function Fe(t,e){return null===(e=(e||"").match(t))?null:0===(e=60*(t=((e[e.length-1]||[])+"").match(xe)||["-",0,0])[1]+G(t[2]))?0:"+"===t[0]?e:-e}function We(t,e){var i;return e._isUTC?(e=e.clone(),i=(b(t)||c(t)?t:Oe(t)).valueOf()-e.valueOf(),e._d.setTime(e._d.valueOf()+i),n.updateOffset(e,!1),e):Oe(t).local()}function Ve(t){return-Math.round(t._d.getTimezoneOffset())}function je(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var Ye=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,He=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Be(t,e){var n,i=t,r=null;return Le(t)?i={ms:t._milliseconds,d:t._days,M:t._months}:u(t)||!isNaN(+t)?(i={},e?i[e]=+t:i.milliseconds=+t):(r=Ye.exec(t))?(n="-"===r[1]?-1:1,i={y:0,d:G(r[St])*n,h:G(r[_t])*n,m:G(r[At])*n,s:G(r[wt])*n,ms:G(Ue(1e3*r[It]))*n}):(r=He.exec(t))?(n="-"===r[1]?-1:1,i={y:Ke(r[2],n),M:Ke(r[3],n),w:Ke(r[4],n),d:Ke(r[5],n),h:Ke(r[6],n),m:Ke(r[7],n),s:Ke(r[8],n)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(e=function(t,e){var n;return t.isValid()&&e.isValid()?(e=We(e,t),t.isBefore(e)?n=Ge(t,e):((n=Ge(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(Oe(i.from),Oe(i.to)),(i={}).ms=e.milliseconds,i.M=e.months),r=new ke(i),Le(t)&&a(t,"_locale")&&(r._locale=t._locale),Le(t)&&a(t,"_isValid")&&(r._isValid=t._isValid),r}function Ke(t,e){return t=t&&parseFloat(t.replace(",",".")),(isNaN(t)?0:t)*e}function Ge(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function qe(t,e){return function(n,i){var r;return null===i||isNaN(+i)||(w(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),ze(this,Be(n,i),t),this}}function ze(t,e,i,r){var a=e._milliseconds,o=Ue(e._days);e=Ue(e._months),t.isValid()&&(r=null==r||r,e&&Ut(t,z(t,"Month")+e*i),o&&Q(t,"Date",z(t,"Date")+o*i),a&&t._d.setTime(t._d.valueOf()+a*i),r&&n.updateOffset(t,o||e))}function Qe(t){return"string"==typeof t||t instanceof String}function Je(t){return b(t)||c(t)||Qe(t)||u(t)||function(t){var e=i(t),n=!1;return e&&(n=0===t.filter((function(e){return!u(e)&&Qe(t)})).length),e&&n}(t)||function(t){var e,n,i=r(t)&&!o(t),s=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=u.length;for(e=0;e<c;e+=1)n=u[e],s=s||a(t,n);return i&&s}(t)||null==t}function Xe(t,e){if(t.date()<e.date())return-Xe(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,"months");return-(n+(e=e-i<0?(e-i)/(i-t.clone().add(n-1,"months")):(e-i)/(t.clone().add(1+n,"months")-i)))||0}function $e(t){return void 0===t?this._locale._abbr:(null!=(t=de(t))&&(this._locale=t),this)}function Ze(){return this._locale}Be.fn=ke.prototype,Be.invalid=function(){return Be(NaN)},Ot=qe(1,"add"),qt=qe(-1,"subtract"),n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",Qt=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));var tn,en=126227808e5;function nn(t,e){return(t%e+e)%e}function rn(t,e,n){return t<100&&0<=t?new Date(t+400,e,n)-en:new Date(t,e,n).valueOf()}function an(t,e,n){return t<100&&0<=t?Date.UTC(t+400,e,n)-en:Date.UTC(t,e,n)}function on(t,e){return e.erasAbbrRegex(t)}function sn(){for(var t=[],e=[],n=[],i=[],r=this.eras(),a=0,o=r.length;a<o;++a)e.push(ht(r[a].name)),t.push(ht(r[a].abbr)),n.push(ht(r[a].narrow)),i.push(ht(r[a].name)),i.push(ht(r[a].abbr)),i.push(ht(r[a].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function un(t,e){U(0,[t,t.length],0,e)}function cn(t,e,n,i,r){var a;return null==t?Bt(this,i,r).year:(a=Kt(t,i,r),function(t,e,n,i,r){return e=jt((t=Ht(t,e,n,i,r)).year,0,t.dayOfYear),this.year(e.getUTCFullYear()),this.month(e.getUTCMonth()),this.date(e.getUTCDate()),this}.call(this,t,e=a<e?a:e,n,i,r))}for(U("N",0,0,"eraAbbr"),U("NN",0,0,"eraAbbr"),U("NNN",0,0,"eraAbbr"),U("NNNN",0,0,"eraName"),U("NNNNN",0,0,"eraNarrow"),U("y",["y",1],"yo","eraYear"),U("y",["yy",2],0,"eraYear"),U("y",["yyy",3],0,"eraYear"),U("y",["yyyy",4],0,"eraYear"),dt("N",on),dt("NN",on),dt("NNN",on),dt("NNNN",(function(t,e){return e.erasNameRegex(t)})),dt("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),gt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,i){(i=n._locale.erasParse(t,i,n._strict))?f(n).era=i:f(n).invalidEra=t})),dt("y",st),dt("yy",st),dt("yyy",st),dt("yyyy",st),dt("yo",(function(t,e){return e._eraYearOrdinalRegex||st})),gt(["y","yy","yyy","yyyy"],Et),gt(["yo"],(function(t,e,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Et]=n._locale.eraYearOrdinalParse(t,r):e[Et]=parseInt(t,10)})),U(0,["gg",2],0,(function(){return this.weekYear()%100})),U(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),un("gggg","weekYear"),un("ggggg","weekYear"),un("GGGG","isoWeekYear"),un("GGGGG","isoWeekYear"),W("weekYear","gg"),W("isoWeekYear","GG"),H("weekYear",1),H("isoWeekYear",1),dt("G",ut),dt("g",ut),dt("GG",et,X),dt("gg",et,X),dt("GGGG",at,Z),dt("gggg",at,Z),dt("GGGGG",ot,tt),dt("ggggg",ot,tt),vt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,i){e[i.substr(0,2)]=G(t)})),vt(["gg","GG"],(function(t,e,i,r){e[r]=n.parseTwoDigitYear(t)})),U("Q",0,"Qo","quarter"),W("quarter","Q"),H("quarter",7),dt("Q",J),gt("Q",(function(t,e){e[bt]=3*(G(t)-1)})),U("D",["DD",2],"Do","date"),W("date","D"),H("date",9),dt("D",et),dt("DD",et,X),dt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),gt(["D","DD"],St),gt("Do",(function(t,e){e[St]=G(t.match(et)[0])})),at=q("Date",!0),U("DDD",["DDDD",3],"DDDo","dayOfYear"),W("dayOfYear","DDD"),H("dayOfYear",4),dt("DDD",rt),dt("DDDD",$),gt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=G(t)})),U("m",["mm",2],0,"minute"),W("minute","m"),H("minute",14),dt("m",et),dt("mm",et,X),gt(["m","mm"],At),Z=q("Minutes",!1),U("s",["ss",2],0,"second"),W("second","s"),H("second",15),dt("s",et),dt("ss",et,X),gt(["s","ss"],wt),ot=q("Seconds",!1),U("S",0,0,(function(){return~~(this.millisecond()/100)})),U(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),U(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),U(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),U(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),U(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),U(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),W("millisecond","ms"),H("millisecond",16),dt("S",rt,J),dt("SS",rt,X),dt("SSS",rt,$),tn="SSSS";tn.length<=9;tn+="S")dt(tn,st);function ln(t,e){e[It]=G(1e3*("0."+t))}for(tn="S";tn.length<=9;tn+="S")gt(tn,ln);function pn(t){return t}function dn(t,e,n,i){var r=de();return i=d().set(i,e),r[n](i,t)}function fn(t,e,n){if(u(t)&&(e=t,t=void 0),t=t||"",null!=e)return dn(t,e,n,"month");for(var i=[],r=0;r<12;r++)i[r]=dn(t,r,n,"month");return i}function hn(t,e,n,i){"boolean"==typeof t?u(e)&&(n=e,e=void 0):(e=t,t=!1,u(n=e)&&(n=e,e=void 0)),e=e||"";var r,a=de(),o=t?a._week.dow:0,s=[];if(null!=n)return dn(e,(n+o)%7,i,"day");for(r=0;r<7;r++)s[r]=dn(e,(r+o)%7,i,"day");return s}tt=q("Milliseconds",!1),U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName"),(J=E.prototype).add=Ot,J.calendar=function(t,e){1===arguments.length&&(arguments[0]?Je(arguments[0])?(t=arguments[0],e=void 0):function(t){for(var e=r(t)&&!o(t),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s=0;s<i.length;s+=1)n=n||a(t,i[s]);return e&&n}(arguments[0])&&(e=arguments[0],t=void 0):e=t=void 0);var i=We(t=t||Oe(),this).startOf("day");return i=n.calendarFormat(this,i)||"sameElse",e=e&&(I(e[i])?e[i].call(this,t):e[i]),this.format(e||this.localeData().calendar(i,this,Oe(t)))},J.clone=function(){return new E(this)},J.diff=function(t,e,n){var i,r,a;if(!this.isValid())return NaN;if(!(i=We(t,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),e=V(e)){case"year":a=Xe(this,i)/12;break;case"month":a=Xe(this,i);break;case"quarter":a=Xe(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-r)/864e5;break;case"week":a=(this-i-r)/6048e5;break;default:a=this-i}return n?a:K(a)},J.endOf=function(t){var e,i;if(void 0===(t=V(t))||"millisecond"===t||!this.isValid())return this;switch(i=this._isUTC?an:rn,t){case"year":e=i(this.year()+1,0,1)-1;break;case"quarter":e=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=i(this.year(),this.month()+1,1)-1;break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-nn(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-nn(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-nn(e,1e3)-1}return this._d.setTime(e),n.updateOffset(this,!0),this},J.format=function(t){return t=P(this,t=t||(this.isUtc()?n.defaultFormatUtc:n.defaultFormat)),this.localeData().postformat(t)},J.from=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||Oe(t).isValid())?Be({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},J.fromNow=function(t){return this.from(Oe(),t)},J.to=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||Oe(t).isValid())?Be({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},J.toNow=function(t){return this.to(Oe(),t)},J.get=function(t){return I(this[t=V(t)])?this[t]():this},J.invalidAt=function(){return f(this).overflow},J.isAfter=function(t,e){return t=b(t)?t:Oe(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=V(e)||"millisecond")?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf())},J.isBefore=function(t,e){return t=b(t)?t:Oe(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=V(e)||"millisecond")?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf())},J.isBetween=function(t,e,n,i){return t=b(t)?t:Oe(t),e=b(e)?e:Oe(e),!!(this.isValid()&&t.isValid()&&e.isValid())&&("("===(i=i||"()")[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===i[1]?this.isBefore(e,n):!this.isAfter(e,n))},J.isSame=function(t,e){return t=b(t)?t:Oe(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=V(e)||"millisecond")?this.valueOf()===t.valueOf():(t=t.valueOf(),this.clone().startOf(e).valueOf()<=t&&t<=this.clone().endOf(e).valueOf()))},J.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},J.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},J.isValid=function(){return h(this)},J.lang=Qt,J.locale=$e,J.localeData=Ze,J.max=it,J.min=nt,J.parsingFlags=function(){return p({},f(this))},J.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e,n=[];for(e in t)a(t,e)&&n.push({unit:e,priority:Y[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=j(t)),i=n.length,r=0;r<i;r++)this[n[r].unit](t[n[r].unit]);else if(I(this[t=V(t)]))return this[t](e);return this},J.startOf=function(t){var e,i;if(void 0===(t=V(t))||"millisecond"===t||!this.isValid())return this;switch(i=this._isUTC?an:rn,t){case"year":e=i(this.year(),0,1);break;case"quarter":e=i(this.year(),this.month()-this.month()%3,1);break;case"month":e=i(this.year(),this.month(),1);break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=i(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=nn(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=nn(e,6e4);break;case"second":e=this._d.valueOf(),e-=nn(e,1e3)}return this._d.setTime(e),n.updateOffset(this,!0),this},J.subtract=qt,J.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},J.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},J.toDate=function(){return new Date(this.valueOf())},J.toISOString=function(t){if(!this.isValid())return null;var e=(t=!0!==t)?this.clone().utc():this;return e.year()<0||9999<e.year()?P(e,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):I(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",P(e,"Z")):P(e,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},J.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e="moment",n="";return this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),e="["+e+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n+'[")]')},"undefined"!=typeof Symbol&&null!=Symbol.for&&(J[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),J.toJSON=function(){return this.isValid()?this.toISOString():null},J.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},J.unix=function(){return Math.floor(this.valueOf()/1e3)},J.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},J.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},J.eraName=function(){for(var t,e=this.localeData().eras(),n=0,i=e.length;n<i;++n){if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until)return e[n].name;if(e[n].until<=t&&t<=e[n].since)return e[n].name}return""},J.eraNarrow=function(){for(var t,e=this.localeData().eras(),n=0,i=e.length;n<i;++n){if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until)return e[n].narrow;if(e[n].until<=t&&t<=e[n].since)return e[n].narrow}return""},J.eraAbbr=function(){for(var t,e=this.localeData().eras(),n=0,i=e.length;n<i;++n){if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until)return e[n].abbr;if(e[n].until<=t&&t<=e[n].since)return e[n].abbr}return""},J.eraYear=function(){for(var t,e,i=this.localeData().eras(),r=0,a=i.length;r<a;++r)if(t=i[r].since<=i[r].until?1:-1,e=this.clone().startOf("day").valueOf(),i[r].since<=e&&e<=i[r].until||i[r].until<=e&&e<=i[r].since)return(this.year()-n(i[r].since).year())*t+i[r].offset;return this.year()},J.year=Wt,J.isLeapYear=function(){return B(this.year())},J.weekYear=function(t){return cn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},J.isoWeekYear=function(t){return cn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},J.quarter=J.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},J.month=Pt,J.daysInMonth=function(){return Nt(this.year(),this.month())},J.week=J.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},J.isoWeek=J.isoWeeks=function(t){var e=Bt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},J.weeksInYear=function(){var t=this.localeData()._week;return Kt(this.year(),t.dow,t.doy)},J.weeksInWeekYear=function(){var t=this.localeData()._week;return Kt(this.weekYear(),t.dow,t.doy)},J.isoWeeksInYear=function(){return Kt(this.year(),1,4)},J.isoWeeksInISOWeekYear=function(){return Kt(this.isoWeekYear(),1,4)},J.date=at,J.day=J.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,n,i=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,n=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=n.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-i,"d")):i},J.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},J.isoWeekday=function(t){return this.isValid()?null!=t?(e=t,n=this.localeData(),n="string"==typeof e?n.weekdaysParse(e)%7||7:isNaN(e)?null:e,this.day(this.day()%7?n:n-7)):this.day()||7:null!=t?this:NaN;var e,n},J.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},J.hour=J.hours=pt,J.minute=J.minutes=Z,J.second=J.seconds=ot,J.millisecond=J.milliseconds=tt,J.utcOffset=function(t,e,i){var r,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?a:Ve(this);if("string"==typeof t){if(null===(t=Fe(lt,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&e&&(r=Ve(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),a!==t&&(!e||this._changeInProgress?ze(this,Be(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this},J.utc=function(t){return this.utcOffset(0,t)},J.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ve(this),"m")),this},J.parseZone=function(){var t;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(t=Fe(ct,this._i))?this.utcOffset(t):this.utcOffset(0,!0)),this},J.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Oe(t).utcOffset():0,(this.utcOffset()-t)%60==0)},J.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},J.isLocal=function(){return!!this.isValid()&&!this._isUTC},J.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},J.isUtc=je,J.isUTC=je,J.zoneAbbr=function(){return this._isUTC?"UTC":""},J.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},J.dates=_("dates accessor is deprecated. Use date instead.",at),J.months=_("months accessor is deprecated. Use month instead",Pt),J.years=_("years accessor is deprecated. Use year instead",Wt),J.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?(this.utcOffset(t="string"!=typeof t?-t:t,e),this):-this.utcOffset()})),J.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var t,e={};return T(e,this),(e=Re(e))._a?(t=(e._isUTC?d:Oe)(e._a),this._isDSTShifted=this.isValid()&&0<function(t,e,n){for(var i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),a=0,o=0;o<i;o++)(n&&t[o]!==e[o]||!n&&G(t[o])!==G(e[o]))&&a++;return a+r}(e._a,t.toArray())):this._isDSTShifted=!1,this._isDSTShifted})),(X=R.prototype).calendar=function(t,e,n){return I(t=this._calendar[t]||this._calendar.sameElse)?t.call(e,n):t},X.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(C).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},X.invalidDate=function(){return this._invalidDate},X.ordinal=function(t){return this._ordinal.replace("%d",t)},X.preparse=pn,X.postformat=pn,X.relativeTime=function(t,e,n,i){var r=this._relativeTime[n];return I(r)?r(t,e,n,i):r.replace(/%d/i,t)},X.pastFuture=function(t,e){return I(t=this._relativeTime[0<t?"future":"past"])?t(e):t.replace(/%s/i,e)},X.set=function(t){var e,n;for(n in t)a(t,n)&&(I(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},X.eras=function(t,e){for(var i,r=this._eras||de("en")._eras,a=0,o=r.length;a<o;++a)switch("string"==typeof r[a].since&&(i=n(r[a].since).startOf("day"),r[a].since=i.valueOf()),typeof r[a].until){case"undefined":r[a].until=1/0;break;case"string":i=n(r[a].until).startOf("day").valueOf(),r[a].until=i.valueOf()}return r},X.erasParse=function(t,e,n){var i,r,a,o,s,u=this.eras();for(t=t.toUpperCase(),i=0,r=u.length;i<r;++i)if(a=u[i].name.toUpperCase(),o=u[i].abbr.toUpperCase(),s=u[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(o===t)return u[i];break;case"NNNN":if(a===t)return u[i];break;case"NNNNN":if(s===t)return u[i]}else if(0<=[a,o,s].indexOf(t))return u[i]},X.erasConvertYear=function(t,e){var i=t.since<=t.until?1:-1;return void 0===e?n(t.since).year():n(t.since).year()+(e-t.offset)*i},X.erasAbbrRegex=function(t){return a(this,"_erasAbbrRegex")||sn.call(this),t?this._erasAbbrRegex:this._erasRegex},X.erasNameRegex=function(t){return a(this,"_erasNameRegex")||sn.call(this),t?this._erasNameRegex:this._erasRegex},X.erasNarrowRegex=function(t){return a(this,"_erasNarrowRegex")||sn.call(this),t?this._erasNarrowRegex:this._erasRegex},X.months=function(t,e){return t?(i(this._months)?this._months:this._months[(this._months.isFormat||Mt).test(e)?"format":"standalone"])[t.month()]:i(this._months)?this._months:this._months.standalone},X.monthsShort=function(t,e){return t?(i(this._monthsShort)?this._monthsShort:this._monthsShort[Mt.test(e)?"format":"standalone"])[t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},X.monthsParse=function(t,e,n){var i,r;if(this._monthsParseExact)return function(t,e,n){var i,r,a;if(t=t.toLocaleLowerCase(),!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=d([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(r=Tt.call(this._shortMonthsParse,t))?r:null:-1!==(r=Tt.call(this._longMonthsParse,t))?r:null:"MMM"===e?-1!==(r=Tt.call(this._shortMonthsParse,t))||-1!==(r=Tt.call(this._longMonthsParse,t))?r:null:-1!==(r=Tt.call(this._longMonthsParse,t))||-1!==(r=Tt.call(this._shortMonthsParse,t))?r:null}.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=d([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},X.monthsRegex=function(t){return this._monthsParseExact?(a(this,"_monthsRegex")||xt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=Lt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},X.monthsShortRegex=function(t){return this._monthsParseExact?(a(this,"_monthsRegex")||xt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=kt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},X.week=function(t){return Bt(t,this._week.dow,this._week.doy).week},X.firstDayOfYear=function(){return this._week.doy},X.firstDayOfWeek=function(){return this._week.dow},X.weekdays=function(t,e){return e=i(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"],!0===t?Gt(e,this._week.dow):t?e[t.day()]:e},X.weekdaysMin=function(t){return!0===t?Gt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},X.weekdaysShort=function(t){return!0===t?Gt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},X.weekdaysParse=function(t,e,n){var i,r;if(this._weekdaysParseExact)return function(t,e,n){var i,r,a;if(t=t.toLocaleLowerCase(),!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=d([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(r=Tt.call(this._weekdaysParse,t))?r:null:"ddd"===e?-1!==(r=Tt.call(this._shortWeekdaysParse,t))?r:null:-1!==(r=Tt.call(this._minWeekdaysParse,t))?r:null:"dddd"===e?-1!==(r=Tt.call(this._weekdaysParse,t))||-1!==(r=Tt.call(this._shortWeekdaysParse,t))||-1!==(r=Tt.call(this._minWeekdaysParse,t))?r:null:"ddd"===e?-1!==(r=Tt.call(this._shortWeekdaysParse,t))||-1!==(r=Tt.call(this._weekdaysParse,t))||-1!==(r=Tt.call(this._minWeekdaysParse,t))?r:null:-1!==(r=Tt.call(this._minWeekdaysParse,t))||-1!==(r=Tt.call(this._weekdaysParse,t))||-1!==(r=Tt.call(this._shortWeekdaysParse,t))?r:null}.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=d([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},X.weekdaysRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Jt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},X.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Xt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},X.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=$t),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},X.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},X.meridiem=function(t,e,n){return 11<t?n?"pm":"PM":n?"am":"AM"},le("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===G(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),n.lang=_("moment.lang is deprecated. Use moment.locale instead.",le),n.langData=_("moment.langData is deprecated. Use moment.localeData instead.",de);var yn=Math.abs;function mn(t,e,n,i){return e=Be(e,n),t._milliseconds+=i*e._milliseconds,t._days+=i*e._days,t._months+=i*e._months,t._bubble()}function gn(t){return t<0?Math.floor(t):Math.ceil(t)}function vn(t){return 4800*t/146097}function Tn(t){return 146097*t/4800}function En(t){return function(){return this.as(t)}}function bn(t){return function(){return this.isValid()?this._data[t]:NaN}}rt=En("ms"),$=En("s"),Ot=En("m"),it=En("h"),nt=En("d"),qt=En("w"),pt=En("M"),Z=En("Q"),ot=En("y"),tt=bn("milliseconds"),at=bn("seconds"),Wt=bn("minutes"),X=bn("hours");var Sn=bn("days"),_n=bn("months"),An=bn("years"),wn=Math.round,In={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Dn(t,e,n,i){var r=Be(t).abs(),a=wn(r.as("s")),o=wn(r.as("m")),s=wn(r.as("h")),u=wn(r.as("d")),c=wn(r.as("M")),l=wn(r.as("w"));return r=wn(r.as("y")),a=(a<=n.ss?["s",a]:a<n.s&&["ss",a])||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u],(a=(a=null!=n.w?a||l<=1&&["w"]||l<n.w&&["ww",l]:a)||c<=1&&["M"]||c<n.M&&["MM",c]||r<=1&&["y"]||["yy",r])[2]=e,a[3]=0<+t,a[4]=i,function(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}.apply(null,a)}var Rn=Math.abs;function Nn(t){return(0<t)-(t<0)||+t}function On(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,i,r,a,o,s=Rn(this._milliseconds)/1e3,u=Rn(this._days),c=Rn(this._months),l=this.asSeconds();return l?(t=K(s/60),e=K(t/60),s%=60,t%=60,n=K(c/12),c%=12,i=s?s.toFixed(3).replace(/\.?0+$/,""):"",r=Nn(this._months)!==Nn(l)?"-":"",a=Nn(this._days)!==Nn(l)?"-":"",o=Nn(this._milliseconds)!==Nn(l)?"-":"",(l<0?"-":"")+"P"+(n?r+n+"Y":"")+(c?r+c+"M":"")+(u?a+u+"D":"")+(e||t||s?"T":"")+(e?o+e+"H":"")+(t?o+t+"M":"")+(s?o+i+"S":"")):"P0D"}var Cn=ke.prototype;return Cn.isValid=function(){return this._isValid},Cn.abs=function(){var t=this._data;return this._milliseconds=yn(this._milliseconds),this._days=yn(this._days),this._months=yn(this._months),t.milliseconds=yn(t.milliseconds),t.seconds=yn(t.seconds),t.minutes=yn(t.minutes),t.hours=yn(t.hours),t.months=yn(t.months),t.years=yn(t.years),this},Cn.add=function(t,e){return mn(this,t,e,1)},Cn.subtract=function(t,e){return mn(this,t,e,-1)},Cn.as=function(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=V(t))||"quarter"===t||"year"===t)switch(e=this._days+i/864e5,n=this._months+vn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Tn(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},Cn.asMilliseconds=rt,Cn.asSeconds=$,Cn.asMinutes=Ot,Cn.asHours=it,Cn.asDays=nt,Cn.asWeeks=qt,Cn.asMonths=pt,Cn.asQuarters=Z,Cn.asYears=ot,Cn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*G(this._months/12):NaN},Cn._bubble=function(){var t=this._milliseconds,e=this._days,n=this._months,i=this._data;return 0<=t&&0<=e&&0<=n||t<=0&&e<=0&&n<=0||(t+=864e5*gn(Tn(n)+e),n=e=0),i.milliseconds=t%1e3,t=K(t/1e3),i.seconds=t%60,t=K(t/60),i.minutes=t%60,t=K(t/60),i.hours=t%24,e+=K(t/24),n+=t=K(vn(e)),e-=gn(Tn(t)),t=K(n/12),n%=12,i.days=e,i.months=n,i.years=t,this},Cn.clone=function(){return Be(this)},Cn.get=function(t){return t=V(t),this.isValid()?this[t+"s"]():NaN},Cn.milliseconds=tt,Cn.seconds=at,Cn.minutes=Wt,Cn.hours=X,Cn.days=Sn,Cn.weeks=function(){return K(this.days()/7)},Cn.months=_n,Cn.years=An,Cn.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=In;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(n=t),"object"==typeof e&&(i=Object.assign({},In,e),null!=e.s&&null==e.ss&&(i.ss=e.s-1)),e=Dn(this,!n,i,t=this.localeData()),n&&(e=t.pastFuture(+this,e)),t.postformat(e)},Cn.toISOString=On,Cn.toString=On,Cn.toJSON=On,Cn.locale=$e,Cn.localeData=Ze,Cn.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",On),Cn.lang=Qt,U("X",0,0,"unix"),U("x",0,0,"valueOf"),dt("x",ut),dt("X",/[+-]?\d+(\.\d{1,3})?/),gt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),gt("x",(function(t,e,n){n._d=new Date(G(t))})),n.version="2.29.4",e=Oe,n.fn=J,n.min=function(){return Ce("isBefore",[].slice.call(arguments,0))},n.max=function(){return Ce("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=d,n.unix=function(t){return Oe(1e3*t)},n.months=function(t,e){return fn(t,e,"months")},n.isDate=c,n.locale=le,n.invalid=y,n.duration=Be,n.isMoment=b,n.weekdays=function(t,e,n){return hn(t,e,n,"weekdays")},n.parseZone=function(){return Oe.apply(null,arguments).parseZone()},n.localeData=de,n.isDuration=Le,n.monthsShort=function(t,e){return fn(t,e,"monthsShort")},n.weekdaysMin=function(t,e,n){return hn(t,e,n,"weekdaysMin")},n.defineLocale=pe,n.updateLocale=function(t,e){var n,i;return null!=e?(i=re,null!=ae[t]&&null!=ae[t].parentLocale?ae[t].set(D(ae[t]._config,e)):(e=D(i=null!=(n=ce(t))?n._config:i,e),null==n&&(e.abbr=t),(i=new R(e)).parentLocale=ae[t],ae[t]=i),le(t)):null!=ae[t]&&(null!=ae[t].parentLocale?(ae[t]=ae[t].parentLocale,t===le()&&le(t)):null!=ae[t]&&delete ae[t]),ae[t]},n.locales=function(){return N(ae)},n.weekdaysShort=function(t,e,n){return hn(t,e,n,"weekdaysShort")},n.normalizeUnits=V,n.relativeTimeRounding=function(t){return void 0===t?wn:"function"==typeof t&&(wn=t,!0)},n.relativeTimeThreshold=function(t,e){return void 0!==In[t]&&(void 0===e?In[t]:(In[t]=e,"s"===t&&(In.ss=e-1),!0))},n.calendarFormat=function(t,e){return(t=t.diff(e,"days",!0))<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"},n.prototype=J,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}()}(Sa);var _a=Sa.exports,Aa={exports:{}},wa={exports:{}};!function(t){
//! moment-timezone.js
//! version : 0.5.45
//! Copyright (c) JS Foundation and other contributors
//! license : MIT
//! github.com/moment/moment-timezone
var n,i;n=e,i=function(t){void 0===t.version&&t.default&&(t=t.default);var e,n={},i={},r={},a={},o={};t&&"string"==typeof t.version||N("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var s=t.version.split("."),u=+s[0],c=+s[1];function l(t){return t>96?t-87:t>64?t-29:t-48}function p(t){var e=0,n=t.split("."),i=n[0],r=n[1]||"",a=1,o=0,s=1;for(45===t.charCodeAt(0)&&(e=1,s=-1);e<i.length;e++)o=60*o+l(i.charCodeAt(e));for(e=0;e<r.length;e++)a/=60,o+=l(r.charCodeAt(e))*a;return o*s}function d(t){for(var e=0;e<t.length;e++)t[e]=p(t[e])}function f(t,e){var n,i=[];for(n=0;n<e.length;n++)i[n]=t[e[n]];return i}function h(t){var e=t.split("|"),n=e[2].split(" "),i=e[3].split(""),r=e[4].split(" ");return d(n),d(i),d(r),function(t,e){for(var n=0;n<e;n++)t[n]=Math.round((t[n-1]||0)+6e4*t[n]);t[e-1]=1/0}(r,i.length),{name:e[0],abbrs:f(e[1].split(" "),i),offsets:f(n,i),untils:r,population:0|e[5]}}function y(t){t&&this._set(h(t))}function m(t,e){this.name=t,this.zones=e}function g(t){var e=t.toTimeString(),n=e.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=e.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+t,this.abbr=n,this.offset=t.getTimezoneOffset()}function v(t){this.zone=t,this.offsetScore=0,this.abbrScore=0}function T(t,e){for(var n,i;i=6e4*((e.at-t.at)/12e4|0);)(n=new g(new Date(t.at+i))).offset===t.offset?t=n:e=n;return t}function E(t,e){return t.offsetScore!==e.offsetScore?t.offsetScore-e.offsetScore:t.abbrScore!==e.abbrScore?t.abbrScore-e.abbrScore:t.zone.population!==e.zone.population?e.zone.population-t.zone.population:e.zone.name.localeCompare(t.zone.name)}function b(t,e){var n,i;for(d(e),n=0;n<e.length;n++)i=e[n],o[i]=o[i]||{},o[i][t]=!0}function S(t){var e,n,i,r,s=t.length,u={},c=[],l={};for(e=0;e<s;e++)if(i=t[e].offset,!l.hasOwnProperty(i)){for(n in r=o[i]||{})r.hasOwnProperty(n)&&(u[n]=!0);l[i]=!0}for(e in u)u.hasOwnProperty(e)&&c.push(a[e]);return c}function _(){try{var t=Intl.DateTimeFormat().resolvedOptions().timeZone;if(t&&t.length>3){var e=a[A(t)];if(e)return e;N("Moment Timezone found "+t+" from the Intl api, but did not have that data loaded.")}}catch(t){}var n,i,r,o=function(){var t,e,n,i,r=(new Date).getFullYear()-2,a=new g(new Date(r,0,1)),o=a.offset,s=[a];for(i=1;i<48;i++)(n=new Date(r,i,1).getTimezoneOffset())!==o&&(t=T(a,e=new g(new Date(r,i,1))),s.push(t),s.push(new g(new Date(t.at+6e4))),a=e,o=n);for(i=0;i<4;i++)s.push(new g(new Date(r+i,0,1))),s.push(new g(new Date(r+i,6,1)));return s}(),s=o.length,u=S(o),c=[];for(i=0;i<u.length;i++){for(n=new v(I(u[i])),r=0;r<s;r++)n.scoreOffsetAt(o[r]);c.push(n)}return c.sort(E),c.length>0?c[0].zone.name:void 0}function A(t){return(t||"").toLowerCase().replace(/\//g,"_")}function w(t){var e,i,r,o;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)o=A(i=(r=t[e].split("|"))[0]),n[o]=t[e],a[o]=i,b(o,r[2].split(" "))}function I(t,e){t=A(t);var r,o=n[t];return o instanceof y?o:"string"==typeof o?(o=new y(o),n[t]=o,o):i[t]&&e!==I&&(r=I(i[t],I))?((o=n[t]=new y)._set(r),o.name=a[t],o):null}function D(t){var e,n,r,o;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)r=A((n=t[e].split("|"))[0]),o=A(n[1]),i[r]=o,a[r]=n[0],i[o]=r,a[o]=n[1]}function R(t){var e="X"===t._f||"x"===t._f;return!(!t._a||void 0!==t._tzm||e)}function N(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}function O(e){var n,i=Array.prototype.slice.call(arguments,0,-1),r=arguments[arguments.length-1],a=t.utc.apply(null,i);return!t.isMoment(e)&&R(a)&&(n=I(r))&&a.add(n.parse(a),"minutes"),a.tz(r),a}(u<2||2===u&&c<6)&&N("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+t.version+". See momentjs.com"),y.prototype={_set:function(t){this.name=t.name,this.abbrs=t.abbrs,this.untils=t.untils,this.offsets=t.offsets,this.population=t.population},_index:function(t){var e;if((e=function(t,e){var n,i=e.length;if(t<e[0])return 0;if(i>1&&e[i-1]===1/0&&t>=e[i-2])return i-1;if(t>=e[i-1])return-1;for(var r=0,a=i-1;a-r>1;)e[n=Math.floor((r+a)/2)]<=t?r=n:a=n;return a}(+t,this.untils))>=0)return e},countries:function(){var t=this.name;return Object.keys(r).filter((function(e){return-1!==r[e].zones.indexOf(t)}))},parse:function(t){var e,n,i,r,a=+t,o=this.offsets,s=this.untils,u=s.length-1;for(r=0;r<u;r++)if(e=o[r],n=o[r+1],i=o[r?r-1:r],e<n&&O.moveAmbiguousForward?e=n:e>i&&O.moveInvalidForward&&(e=i),a<s[r]-6e4*e)return o[r];return o[u]},abbr:function(t){return this.abbrs[this._index(t)]},offset:function(t){return N("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(t)]},utcOffset:function(t){return this.offsets[this._index(t)]}},v.prototype.scoreOffsetAt=function(t){this.offsetScore+=Math.abs(this.zone.utcOffset(t.at)-t.offset),this.zone.abbr(t.at).replace(/[^A-Z]/g,"")!==t.abbr&&this.abbrScore++},O.version="0.5.45",O.dataVersion="",O._zones=n,O._links=i,O._names=a,O._countries=r,O.add=w,O.link=D,O.load=function(t){w(t.zones),D(t.links),function(t){var e,n,i,a;if(t&&t.length)for(e=0;e<t.length;e++)n=(a=t[e].split("|"))[0].toUpperCase(),i=a[1].split(" "),r[n]=new m(n,i)}(t.countries),O.dataVersion=t.version},O.zone=I,O.zoneExists=function t(e){return t.didShowError||(t.didShowError=!0,N("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!I(e)},O.guess=function(t){return e&&!t||(e=_()),e},O.names=function(){var t,e=[];for(t in a)a.hasOwnProperty(t)&&(n[t]||n[i[t]])&&a[t]&&e.push(a[t]);return e.sort()},O.Zone=y,O.unpack=h,O.unpackBase60=p,O.needsOffset=R,O.moveInvalidForward=!0,O.moveAmbiguousForward=!1,O.countries=function(){return Object.keys(r)},O.zonesForCountry=function(t,e){var n;if(n=(n=t).toUpperCase(),!(t=r[n]||null))return null;var i=t.zones.sort();return e?i.map((function(t){return{name:t,offset:I(t).utcOffset(new Date)}})):i};var C,M=t.fn;function k(t){return function(){return this._z?this._z.abbr(this):t.call(this)}}function L(t){return function(){return this._z=null,t.apply(this,arguments)}}t.tz=O,t.defaultZone=null,t.updateOffset=function(e,n){var i,r=t.defaultZone;if(void 0===e._z&&(r&&R(e)&&!e._isUTC&&e.isValid()&&(e._d=t.utc(e._a)._d,e.utc().add(r.parse(e),"minutes")),e._z=r),e._z)if(i=e._z.utcOffset(e),Math.abs(i)<16&&(i/=60),void 0!==e.utcOffset){var a=e._z;e.utcOffset(-i,n),e._z=a}else e.zone(i,n)},M.tz=function(e,n){if(e){if("string"!=typeof e)throw new Error("Time zone name must be a string, got "+e+" ["+typeof e+"]");return this._z=I(e),this._z?t.updateOffset(this,n):N("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},M.zoneName=k(M.zoneName),M.zoneAbbr=k(M.zoneAbbr),M.utc=L(M.utc),M.local=L(M.local),M.utcOffset=(C=M.utcOffset,function(){return arguments.length>0&&(this._z=null),C.apply(this,arguments)}),t.tz.setDefault=function(e){return(u<2||2===u&&c<9)&&N("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+t.version+"."),t.defaultZone=e?I(e):null,t};var U=t.momentProperties;return"[object Array]"===Object.prototype.toString.call(U)?(U.push("_z"),U.push("_a")):U&&(U._z=null),t},t.exports?t.exports=i(Sa.exports):i(n.moment)}(wa);var Ia={version:"2021e",zones:["Asia/Shanghai|CST CDT|-80 -90|01010101010101010101010101010|-23uw0 18n0 OjB0 Rz0 11d0 1wL0 A10 8HX0 1G10 Tz0 1ip0 1jX0 1cN0 11b0 1oN0 aL0 1tU30 Rb0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0|23e6"],links:["Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|PRC"],countries:["CN|Asia/Shanghai Asia/Urumqi"]};(Aa.exports=wa.exports).tz.load(Ia);var Da,Ra,Na,Oa,Ca=function(t){this.entityType=ur.TENANT,this.id=t},Ma=function(t){this.entityType=ur.ALARM,this.id=t},ka=function(t){this.entityType=ur.CUSTOMER,this.id=t},La=function(t){this.entityType=ur.USER,this.id=t};!function(t){t[t.ALL=0]="ALL",t[t.ENTITY=1]="ENTITY"}(Da||(Da={})),function(t){t.CRITICAL="CRITICAL",t.MAJOR="MAJOR",t.MINOR="MINOR",t.WARNING="WARNING",t.INDETERMINATE="INDETERMINATE"}(Ra||(Ra={})),function(t){t.ACTIVE_UNACK="ACTIVE_UNACK",t.ACTIVE_ACK="ACTIVE_ACK",t.CLEARED_UNACK="CLEARED_UNACK",t.CLEARED_ACK="CLEARED_ACK"}(Na||(Na={})),function(t){t.ANY="ANY",t.ACTIVE="ACTIVE",t.CLEARED="CLEARED",t.ACK="ACK",t.UNACK="UNACK"}(Oa||(Oa={}));var Ua,Pa,xa=new Map([[Ra.CRITICAL,"alarm.severity-critical"],[Ra.MAJOR,"alarm.severity-major"],[Ra.MINOR,"alarm.severity-minor"],[Ra.WARNING,"alarm.severity-warning"],[Ra.INDETERMINATE,"alarm.severity-indeterminate"]]),Fa=new Map([[Na.ACTIVE_UNACK,"alarm.display-status.ACTIVE_UNACK"],[Na.ACTIVE_ACK,"alarm.display-status.ACTIVE_ACK"],[Na.CLEARED_UNACK,"alarm.display-status.CLEARED_UNACK"],[Na.CLEARED_ACK,"alarm.display-status.CLEARED_ACK"]]),Wa=new Map([[Oa.ANY,"alarm.search-status.ANY"],[Oa.ACTIVE,"alarm.search-status.ACTIVE"],[Oa.CLEARED,"alarm.search-status.CLEARED"],[Oa.ACK,"alarm.search-status.ACK"],[Oa.UNACK,"alarm.search-status.UNACK"]]),Va=new Map([[Ra.CRITICAL,"red"],[Ra.MAJOR,"orange"],[Ra.MINOR,"#ffca3d"],[Ra.WARNING,"#abab00"],[Ra.INDETERMINATE,"green"]]);!function(t){t.SYSTEM="SYSTEM",t.OTHER="OTHER"}(Ua||(Ua={})),function(t){t.noAssignee="noAssignee",t.currentUser="currentUser"}(Pa||(Pa={}));var ja,Ya,Ha,Ba,Ka={id:new Ma(pr),tenantId:new Ca(pr),customerId:new ka(pr),assigneeId:new La(pr),createdTime:(new Date).getTime(),startTs:(new Date).getTime(),endTs:0,ackTs:0,clearTs:0,assignTs:0,originatorName:"Simulated",originatorLabel:"Simulated",assignee:{firstName:"",lastName:"",email:"test@example.com"},originator:{entityType:ur.DEVICE,id:"1"},type:"TEMPERATURE",severity:Ra.MAJOR,status:Na.ACTIVE_UNACK,acknowledged:!1,cleared:!1,details:{message:"Temperature is high!"},propagate:!1},Ga={createdTime:{keyName:"createdTime",value:"createdTime",name:"alarm.created-time",time:!0},startTime:{keyName:"startTime",value:"startTs",name:"alarm.start-time",time:!0},endTime:{keyName:"endTime",value:"endTs",name:"alarm.end-time",time:!0},ackTime:{keyName:"ackTime",value:"ackTs",name:"alarm.ack-time",time:!0},clearTime:{keyName:"clearTime",value:"clearTs",name:"alarm.clear-time",time:!0},assignTime:{keyName:"assignTime",value:"assignTs",name:"alarm.assign-time",time:!0},originator:{keyName:"originator",value:"originatorName",name:"alarm.originator"},originatorLabel:{keyName:"originatorLabel",value:"originatorLabel",name:"alarm.originator-label"},originatorType:{keyName:"originatorType",value:"originator.entityType",name:"alarm.originator-type"},type:{keyName:"type",value:"type",name:"alarm.type"},severity:{keyName:"severity",value:"severity",name:"alarm.severity"},status:{keyName:"status",value:"status",name:"alarm.status"},assignee:{keyName:"assignee",value:"assignee",name:"alarm.assignee"}},qa=function(){function t(t,e,n,i,r,a){this.affectedEntityId=t,this.pageLink=e,this.searchStatus=n,this.status=i,this.fetchOriginator=r,this.assigneeId=a}return t.prototype.toQuery=function(){var t=this.affectedEntityId?"/".concat(this.affectedEntityId.entityType,"/").concat(this.affectedEntityId.id):"";return t+=this.pageLink.toQuery(),this.searchStatus?t+="&searchStatus=".concat(this.searchStatus):this.status&&(t+="&status=".concat(this.status)),void 0!==this.fetchOriginator&&null!==this.fetchOriginator&&(t+="&fetchOriginator=".concat(this.fetchOriginator)),void 0!==this.assigneeId&&null!==this.assigneeId&&(t+="&assigneeId=".concat(this.assigneeId.id)),t},t}(),za=function(){function t(t,e,n){this.affectedEntityId=t,this.pageLink=e,this.typeList=n.typeList,this.statusList=n.statusList,this.severityList=n.severityList,this.assigneeId=n.assigneeId}return t.prototype.toQuery=function(){var t=this.affectedEntityId?"/".concat(this.affectedEntityId.entityType,"/").concat(this.affectedEntityId.id):"";return t+=this.pageLink.toQuery(),this.typeList&&this.typeList.length&&(t+="&typeList=".concat(this.typeList.map((function(t){return encodeURIComponent(t)})).join(","))),this.statusList&&this.statusList.length&&(t+="&statusList=".concat(this.statusList.join(","))),this.severityList&&this.severityList.length&&(t+="&severityList=".concat(this.severityList.join(","))),void 0!==this.assigneeId&&null!==this.assigneeId&&(t+="&assigneeId=".concat(this.assigneeId.id)),t},t}(),Qa={createdTime:{keyName:"createdTime",name:"entity-field.created-time",value:"createdTime",time:!0},name:{keyName:"name",name:"entity-field.name",value:"name"},type:{keyName:"type",name:"entity-field.type",value:"type"},firstName:{keyName:"firstName",name:"entity-field.first-name",value:"firstName"},lastName:{keyName:"lastName",name:"entity-field.last-name",value:"lastName"},email:{keyName:"email",name:"entity-field.email",value:"email"},title:{keyName:"title",name:"entity-field.title",value:"title"},country:{keyName:"country",name:"entity-field.country",value:"country"},state:{keyName:"state",name:"entity-field.state",value:"state"},city:{keyName:"city",name:"entity-field.city",value:"city"},address:{keyName:"address",name:"entity-field.address",value:"address"},address2:{keyName:"address2",name:"entity-field.address2",value:"address2"},zip:{keyName:"zip",name:"entity-field.zip",value:"zip"},phone:{keyName:"phone",name:"entity-field.phone",value:"phone"},label:{keyName:"label",name:"entity-field.label",value:"label"},queueName:{keyName:"queueName",name:"entity-field.queue-name",value:"queueName"},serviceId:{keyName:"serviceId",name:"entity-field.service-id",value:"serviceId"},ownerName:{keyName:"ownerName",name:"entity-field.owner-name",value:"ownerName"},ownerType:{keyName:"ownerType",name:"entity-field.owner-type",value:"ownerType"}},Ja=function(){},Xa=function(){function t(t,e){this.wsService=t,this.zone=e,this.reconnectSubject=new nn,this.reconnect$=this.reconnectSubject.asObservable(),this.subscriptionCommands=[]}return t.prototype.subscribe=function(){this.wsService.subscribe(this)},t.prototype.update=function(){this.wsService.update(this)},t.prototype.unsubscribe=function(){this.wsService.unsubscribe(this),this.complete()},t.prototype.complete=function(){this.reconnectSubject.complete()},t.prototype.onReconnected=function(){this.reconnectSubject.next()},t}(),$a="Not supported!";!function(t){t.timeseries="timeseries",t.attribute="attribute",t.function="function",t.alarm="alarm",t.entityField="entityField",t.count="count"}(ja||(ja={})),function(t){t.LATEST_TELEMETRY="LATEST_TELEMETRY"}(Ya||(Ya={})),function(t){t.CLIENT_SCOPE="CLIENT_SCOPE",t.SERVER_SCOPE="SERVER_SCOPE",t.SHARED_SCOPE="SHARED_SCOPE"}(Ha||(Ha={})),function(t){t.DELETE_ALL_DATA="DELETE_ALL_DATA",t.DELETE_ALL_DATA_EXCEPT_LATEST_VALUE="DELETE_ALL_DATA_EXCEPT_LATEST_VALUE",t.DELETE_LATEST_VALUE="DELETE_LATEST_VALUE",t.DELETE_ALL_DATA_FOR_TIME_PERIOD="DELETE_ALL_DATA_FOR_TIME_PERIOD"}(Ba||(Ba={}));var Za,to,eo=new Map([[Ya.LATEST_TELEMETRY,"attribute.scope-telemetry"],[Ha.CLIENT_SCOPE,"attribute.scope-client"],[Ha.SERVER_SCOPE,"attribute.scope-server"],[Ha.SHARED_SCOPE,"attribute.scope-shared"]]),no=new Map([[Ya.LATEST_TELEMETRY,"attribute.scope-telemetry-short"],[Ha.CLIENT_SCOPE,"attribute.scope-client-short"],[Ha.SERVER_SCOPE,"attribute.scope-server-short"],[Ha.SHARED_SCOPE,"attribute.scope-shared-short"]]),io=new Map([[Ya.LATEST_TELEMETRY,!0],[Ha.CLIENT_SCOPE,!0],[Ha.SERVER_SCOPE,!1],[Ha.SHARED_SCOPE,!1]]),ro=new Map([[Ba.DELETE_ALL_DATA,"attribute.delete-timeseries.all-data"],[Ba.DELETE_ALL_DATA_EXCEPT_LATEST_VALUE,"attribute.delete-timeseries.all-data-except-latest-value"],[Ba.DELETE_LATEST_VALUE,"attribute.delete-timeseries.latest-value"],[Ba.DELETE_ALL_DATA_FOR_TIME_PERIOD,"attribute.delete-timeseries.all-data-for-time-period"]]);!function(t){t.ASC="ASC",t.DESC="DESC"}(Za||(Za={})),function(t){t.AUTH="AUTH",t.ATTRIBUTES="ATTRIBUTES",t.TIMESERIES="TIMESERIES",t.TIMESERIES_HISTORY="TIMESERIES_HISTORY",t.ENTITY_DATA="ENTITY_DATA",t.ENTITY_COUNT="ENTITY_COUNT",t.ALARM_DATA="ALARM_DATA",t.ALARM_COUNT="ALARM_COUNT",t.NOTIFICATIONS="NOTIFICATIONS",t.NOTIFICATIONS_COUNT="NOTIFICATIONS_COUNT",t.MARK_NOTIFICATIONS_AS_READ="MARK_NOTIFICATIONS_AS_READ",t.MARK_ALL_NOTIFICATIONS_AS_READ="MARK_ALL_NOTIFICATIONS_AS_READ",t.ALARM_DATA_UNSUBSCRIBE="ALARM_DATA_UNSUBSCRIBE",t.ALARM_COUNT_UNSUBSCRIBE="ALARM_COUNT_UNSUBSCRIBE",t.ENTITY_DATA_UNSUBSCRIBE="ENTITY_DATA_UNSUBSCRIBE",t.ENTITY_COUNT_UNSUBSCRIBE="ENTITY_COUNT_UNSUBSCRIBE",t.NOTIFICATIONS_UNSUBSCRIBE="NOTIFICATIONS_UNSUBSCRIBE"}(to||(to={}));var ao,oo=function(){},so=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=to.ATTRIBUTES,e}return pe(e,t),e}(oo);!function(t){t.MILLISECONDS="MILLISECONDS",t.WEEK="WEEK",t.WEEK_ISO="WEEK_ISO",t.MONTH="MONTH",t.QUARTER="QUARTER"}(ao||(ao={}));var uo,co=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=to.TIMESERIES,e}return pe(e,t),e}(oo),lo=function(){this.type=to.TIMESERIES_HISTORY},po=function(){function t(){this.type=to.ENTITY_DATA}return t.prototype.isEmpty=function(){return!(this.query||this.historyCmd||this.latestCmd||this.tsCmd||this.aggTsCmd||this.aggHistoryCmd)},t}(),fo=function(){this.type=to.ENTITY_COUNT},ho=function(){function t(){this.type=to.ALARM_DATA}return t.prototype.isEmpty=function(){return!this.query},t}(),yo=function(){this.type=to.ALARM_COUNT},mo=function(){this.type=to.NOTIFICATIONS_COUNT},go=function(t){void 0===t&&(t=10),this.type=to.NOTIFICATIONS,this.limit=t},vo=function(t){this.type=to.MARK_NOTIFICATIONS_AS_READ,this.notifications=t},To=function(){this.type=to.MARK_ALL_NOTIFICATIONS_AS_READ},Eo=function(){this.type=to.ENTITY_DATA_UNSUBSCRIBE},bo=function(){this.type=to.ENTITY_COUNT_UNSUBSCRIBE},So=function(){this.type=to.ALARM_DATA_UNSUBSCRIBE},_o=function(){this.type=to.ALARM_COUNT_UNSUBSCRIBE},Ao=function(){this.type=to.NOTIFICATIONS_UNSUBSCRIBE},wo=function(t){this.cmdId=0,this.token=t},Io=function(){function t(){this.cmds=[]}return t.popCmds=function(t,e){var n=Math.min(t.length,e);return n>0?t.splice(0,n):[]},t.prototype.setAuth=function(t){this.authCmd=new wo(t)},t.prototype.hasCommands=function(){return this.cmds.length>0},t.prototype.clear=function(){this.cmds.length=0},t.prototype.preparePublishCommands=function(e){var n=new t;return this.authCmd&&(n.authCmd=this.authCmd,this.authCmd=null),n.cmds=t.popCmds(this.cmds,e),n},t}();!function(t){t.ENTITY_DATA="ENTITY_DATA",t.ALARM_DATA="ALARM_DATA",t.ALARM_COUNT_DATA="ALARM_COUNT_DATA",t.COUNT_DATA="COUNT_DATA",t.NOTIFICATIONS_COUNT="NOTIFICATIONS_COUNT",t.NOTIFICATIONS="NOTIFICATIONS"}(uo||(uo={}));var Do,Ro,No,Oo=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===uo.ENTITY_DATA},Co=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===uo.ALARM_DATA},Mo=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===uo.COUNT_DATA},ko=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===uo.ALARM_COUNT_DATA},Lo=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===uo.NOTIFICATIONS_COUNT},Uo=function(t){var e=t;return void 0!==e.cmdId&&e.cmdUpdateType===uo.NOTIFICATIONS},Po=function(){function t(t){this.subscriptionId=t.subscriptionId,this.errorCode=t.errorCode,this.errorMsg=t.errorMsg,this.data=t.data}return t.prototype.prepareData=function(t){var e=this;this.data||(this.data={}),t&&t.forEach((function(t){e.data[t]||(e.data[t]=[])}))},t.prototype.updateAttributeData=function(t){var e,n,i=function(e){var n=r.data[e];if(n.length){var i=t.find((function(t){return t.key===e}));i?(i.lastUpdateTs=n[0][0],i.value=n[0][1]):t.push({key:e,lastUpdateTs:n[0][0],value:n[0][1]})}},r=this;try{for(var a=ve(Object.keys(this.data)),o=a.next();!o.done;o=a.next()){i(o.value)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return t},t}(),xo=function(t){this.cmdId=t.cmdId,this.errorCode=t.errorCode,this.errorMsg=t.errorMsg,this.cmdUpdateType=t.cmdUpdateType},Fo=function(t){function e(e){var n=t.call(this,e)||this;return n.data=e.data,n.update=e.update,n}return pe(e,t),e}(xo),Wo=function(t){function e(e){return t.call(this,e)||this}return pe(e,t),e.processEntityData=function(t,e){var n,i,r,a,o,s,u,c,l,p;try{for(var d=ve(t),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.timeseries)try{for(var y=(r=void 0,ve(Object.keys(h.timeseries))),m=y.next();!m.done;m=y.next()){var g=m.value,v=h.timeseries[g];try{for(var T=(o=void 0,ve(v)),E=T.next();!E.done;E=T.next()){(D=E.value).ts&&(D.ts+=e)}}catch(t){o={error:t}}finally{try{E&&!E.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}}}catch(t){r={error:t}}finally{try{m&&!m.done&&(a=y.return)&&a.call(y)}finally{if(r)throw r.error}}if(h.latest)try{for(var b=(u=void 0,ve(Object.keys(h.latest))),S=b.next();!S.done;S=b.next()){var _=S.value,A=h.latest[_];try{for(var w=(l=void 0,ve(Object.keys(A))),I=w.next();!I.done;I=w.next()){var D;(D=A[g=I.value]).ts&&(D.ts+=e),g===Qa.createdTime.keyName&&D.value&&(D.value=Number(D.value)+e+"")}}catch(t){l={error:t}}finally{try{I&&!I.done&&(p=w.return)&&p.call(w)}finally{if(l)throw l.error}}}}catch(t){u={error:t}}finally{try{S&&!S.done&&(c=b.return)&&c.call(b)}finally{if(u)throw u.error}}}}catch(t){n={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}},e.prototype.prepareData=function(t){this.data&&e.processEntityData(this.data.data,t),this.update&&e.processEntityData(this.update,t)},e}(Fo),Vo=function(t){function e(e){var n=t.call(this,e)||this;return n.allowedEntities=e.allowedEntities,n.totalEntities=e.totalEntities,n}return pe(e,t),e.processAlarmData=function(t,e){var n,i,r,a,o,s;try{for(var u=ve(t),c=u.next();!c.done;c=u.next()){var l=c.value;if(l.createdTime+=e,l.ackTs&&(l.ackTs+=e),l.clearTs&&(l.clearTs+=e),l.endTs&&(l.endTs+=e),l.latest)try{for(var p=(r=void 0,ve(Object.keys(l.latest))),d=p.next();!d.done;d=p.next()){var f=d.value,h=l.latest[f];try{for(var y=(o=void 0,ve(Object.keys(h))),m=y.next();!m.done;m=y.next()){var g=m.value,v=h[g];v.ts&&(v.ts+=e),g in[Qa.createdTime.keyName,Ga.startTime.keyName,Ga.endTime.keyName,Ga.ackTime.keyName,Ga.clearTime.keyName]&&v.value&&(v.value=Number(v.value)+e+"")}}catch(t){o={error:t}}finally{try{m&&!m.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}}}catch(t){r={error:t}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(r)throw r.error}}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},e.prototype.prepareData=function(t){this.data&&e.processAlarmData(this.data.data,t),this.update&&e.processAlarmData(this.update,t)},e}(Fo),jo=function(t){function e(e){var n=t.call(this,e)||this;return n.count=e.count,n}return pe(e,t),e}(xo),Yo=function(t){function e(e){var n=t.call(this,e)||this;return n.count=e.count,n}return pe(e,t),e}(xo),Ho=function(t){function e(e){var n=t.call(this,e)||this;return n.totalUnreadCount=e.totalUnreadCount,n.sequenceNumber=e.sequenceNumber,n}return pe(e,t),e}(xo),Bo=function(t){function e(e){var n=t.call(this,e)||this;return n.totalUnreadCount=e.totalUnreadCount,n.sequenceNumber=e.sequenceNumber,n.update=e.update,n.notifications=e.notifications,n}return pe(e,t),e}(xo),Ko=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.telemetryService=e,i.zone=n,i.dataSubject=new sn(1),i.entityDataSubject=new sn(1),i.alarmDataSubject=new sn(1),i.entityCountSubject=new sn(1),i.alarmCountSubject=new sn(1),i.tsOffset=void 0,i.data$=i.dataSubject.asObservable(),i.entityData$=i.entityDataSubject.asObservable(),i.alarmData$=i.alarmDataSubject.asObservable(),i.entityCount$=i.entityCountSubject.asObservable(),i.alarmCount$=i.alarmCountSubject.asObservable(),i}return pe(e,t),e.createEntityAttributesSubscription=function(t,n,i,r,a){var o;void 0===a&&(a=null),(o=i===Ya.LATEST_TELEMETRY?new co:new so).entityType=n.entityType,o.entityId=n.id,o.scope=i,a&&(o.keys=a.join(","));var s=new e(t,r);return s.subscriptionCommands.push(o),s},e.createEntityFilterLatestSubscription=function(t,n,i,r){void 0===r&&(r=null);var a={entityFilter:n,pageLink:{pageSize:1,page:0},latestValues:r||[]},o=new po;o.query=a,o.latestCmd={keys:r||[]};var s=new e(t,i);return s.subscriptionCommands.push(o),s},e.prototype.complete=function(){this.dataSubject.complete(),this.entityDataSubject.complete(),this.alarmDataSubject.complete(),this.entityCountSubject.complete(),this.alarmCountSubject.complete(),t.prototype.complete.call(this)},e.prototype.setTsOffset=function(t){if(this.tsOffset!==t){var e=!Or(this.tsOffset);return this.tsOffset=t,e}return!1},e.prototype.onData=function(t){var e,n=this,i=t.subscriptionId,r=this.subscriptionCommands.find((function(t){return t.cmdId===i}));if(r){var a=r;a.keys&&a.keys.length&&(e=a.keys.split(","))}t.prepareData(e),this.zone?this.zone.run((function(){n.dataSubject.next(t)})):this.dataSubject.next(t)},e.prototype.onEntityData=function(t){var e=this;this.tsOffset&&t.prepareData(this.tsOffset),this.zone?this.zone.run((function(){e.entityDataSubject.next(t)})):this.entityDataSubject.next(t)},e.prototype.onAlarmData=function(t){var e=this;this.tsOffset&&t.prepareData(this.tsOffset),this.zone?this.zone.run((function(){e.alarmDataSubject.next(t)})):this.alarmDataSubject.next(t)},e.prototype.onEntityCount=function(t){var e=this;this.zone?this.zone.run((function(){e.entityCountSubject.next(t)})):this.entityCountSubject.next(t)},e.prototype.onAlarmCount=function(t){var e=this;this.zone?this.zone.run((function(){e.alarmCountSubject.next(t)})):this.alarmCountSubject.next(t)},e.prototype.attributeData$=function(){var t=new Array;return this.data$.pipe(xn((function(e){return e.updateAttributeData(t)})))},e}(Xa),Go=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.websocketService=e,i.zone=n,i.notificationCountSubject=new an({cmdId:0,cmdUpdateType:void 0,errorCode:0,errorMsg:"",totalUnreadCount:0,sequenceNumber:0}),i.notificationsSubject=new an({cmdId:0,cmdUpdateType:void 0,errorCode:0,errorMsg:"",notifications:null,totalUnreadCount:0,sequenceNumber:0}),i.messageLimit=10,i.notificationCount$=i.notificationCountSubject.asObservable().pipe(xn((function(t){return t.totalUnreadCount}))),i.notifications$=i.notificationsSubject.asObservable().pipe(xn((function(t){return t.notifications}))),i}return pe(e,t),e.createNotificationCountSubscription=function(t,n){var i=new mo,r=new e(t,n);return r.subscriptionCommands.push(i),r},e.createNotificationsSubscription=function(t,n,i){void 0===i&&(i=10);var r=new go(i),a=new e(t,n);return a.messageLimit=i,a.subscriptionCommands.push(r),a},e.createMarkAsReadCommand=function(t,n){var i=new vo(n),r=new e(t);return r.subscriptionCommands.push(i),r},e.createMarkAllAsReadCommand=function(t){var n=new To,i=new e(t);return i.subscriptionCommands.push(n),i},e.prototype.onNotificationCountUpdate=function(t){var e=this,n=this.notificationCountSubject.value;t.sequenceNumber<=n.sequenceNumber||(this.zone?this.zone.run((function(){e.notificationCountSubject.next(t)})):this.notificationCountSubject.next(t))},e.prototype.complete=function(){this.notificationCountSubject.complete(),this.notificationsSubject.complete(),t.prototype.complete.call(this)},e.prototype.onNotificationsUpdate=function(t){var e=this,n=this.notificationsSubject.value;t.sequenceNumber<=n.sequenceNumber&&(t.totalUnreadCount=n.totalUnreadCount);var i=t;kr(n)&&t.update&&(n.notifications.unshift(t.update),n.notifications.length>this.messageLimit&&n.notifications.pop(),(i=n).totalUnreadCount=t.totalUnreadCount),this.zone?this.zone.run((function(){e.notificationsSubject.next(i),e.notificationCountSubject.next(i)})):(this.notificationsSubject.next(i),this.notificationCountSubject.next(i))},e}(Xa),qo=_a,zo=1e3,Qo=6e4,Jo=36e5,Xo=24*Jo,$o=7*Xo,Zo=Math.floor(30.44*Xo),ts=Math.floor(7889238e3),es=365*Xo;!function(t){t[t.REALTIME=0]="REALTIME",t[t.HISTORY=1]="HISTORY"}(Do||(Do={})),function(t){t[t.LAST_INTERVAL=0]="LAST_INTERVAL",t[t.INTERVAL=1]="INTERVAL"}(Ro||(Ro={})),function(t){t[t.LAST_INTERVAL=0]="LAST_INTERVAL",t[t.FIXED=1]="FIXED",t[t.INTERVAL=2]="INTERVAL",t[t.FOR_ALL_TIME=3]="FOR_ALL_TIME"}(No||(No={}));var ns,is=function(){function t(){}return t.max=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e.map((function(e){return t.numberValue(e)}));return e[i.indexOf(Math.max.apply(Math,Ee([],Te(i),!1)))]},t.min=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e.map((function(e){return t.numberValue(e)}));return e[i.indexOf(Math.min.apply(Math,Ee([],Te(i),!1)))]},t.numberValue=function(t){return"number"==typeof t?t:cs.get(t)},t}();!function(t){t.MIN="MIN",t.MAX="MAX",t.AVG="AVG",t.SUM="SUM",t.COUNT="COUNT",t.NONE="NONE"}(ns||(ns={}));var rs,as=new Map([[ns.MIN,"aggregation.min"],[ns.MAX,"aggregation.max"],[ns.AVG,"aggregation.avg"],[ns.SUM,"aggregation.sum"],[ns.COUNT,"aggregation.count"],[ns.NONE,"aggregation.none"]]);!function(t){t.YESTERDAY="YESTERDAY",t.DAY_BEFORE_YESTERDAY="DAY_BEFORE_YESTERDAY",t.THIS_DAY_LAST_WEEK="THIS_DAY_LAST_WEEK",t.PREVIOUS_WEEK="PREVIOUS_WEEK",t.PREVIOUS_WEEK_ISO="PREVIOUS_WEEK_ISO",t.PREVIOUS_MONTH="PREVIOUS_MONTH",t.PREVIOUS_QUARTER="PREVIOUS_QUARTER",t.PREVIOUS_HALF_YEAR="PREVIOUS_HALF_YEAR",t.PREVIOUS_YEAR="PREVIOUS_YEAR",t.CURRENT_HOUR="CURRENT_HOUR",t.CURRENT_DAY="CURRENT_DAY",t.CURRENT_DAY_SO_FAR="CURRENT_DAY_SO_FAR",t.CURRENT_WEEK="CURRENT_WEEK",t.CURRENT_WEEK_ISO="CURRENT_WEEK_ISO",t.CURRENT_WEEK_SO_FAR="CURRENT_WEEK_SO_FAR",t.CURRENT_WEEK_ISO_SO_FAR="CURRENT_WEEK_ISO_SO_FAR",t.CURRENT_MONTH="CURRENT_MONTH",t.CURRENT_MONTH_SO_FAR="CURRENT_MONTH_SO_FAR",t.CURRENT_QUARTER="CURRENT_QUARTER",t.CURRENT_QUARTER_SO_FAR="CURRENT_QUARTER_SO_FAR",t.CURRENT_HALF_YEAR="CURRENT_HALF_YEAR",t.CURRENT_HALF_YEAR_SO_FAR="CURRENT_HALF_YEAR_SO_FAR",t.CURRENT_YEAR="CURRENT_YEAR",t.CURRENT_YEAR_SO_FAR="CURRENT_YEAR_SO_FAR"}(rs||(rs={}));var os,ss,us=new Map([[rs.YESTERDAY,"timeinterval.predefined.yesterday"],[rs.DAY_BEFORE_YESTERDAY,"timeinterval.predefined.day-before-yesterday"],[rs.THIS_DAY_LAST_WEEK,"timeinterval.predefined.this-day-last-week"],[rs.PREVIOUS_WEEK,"timeinterval.predefined.previous-week"],[rs.PREVIOUS_WEEK_ISO,"timeinterval.predefined.previous-week-iso"],[rs.PREVIOUS_MONTH,"timeinterval.predefined.previous-month"],[rs.PREVIOUS_QUARTER,"timeinterval.predefined.previous-quarter"],[rs.PREVIOUS_HALF_YEAR,"timeinterval.predefined.previous-half-year"],[rs.PREVIOUS_YEAR,"timeinterval.predefined.previous-year"],[rs.CURRENT_HOUR,"timeinterval.predefined.current-hour"],[rs.CURRENT_DAY,"timeinterval.predefined.current-day"],[rs.CURRENT_DAY_SO_FAR,"timeinterval.predefined.current-day-so-far"],[rs.CURRENT_WEEK,"timeinterval.predefined.current-week"],[rs.CURRENT_WEEK_ISO,"timeinterval.predefined.current-week-iso"],[rs.CURRENT_WEEK_SO_FAR,"timeinterval.predefined.current-week-so-far"],[rs.CURRENT_WEEK_ISO_SO_FAR,"timeinterval.predefined.current-week-iso-so-far"],[rs.CURRENT_MONTH,"timeinterval.predefined.current-month"],[rs.CURRENT_MONTH_SO_FAR,"timeinterval.predefined.current-month-so-far"],[rs.CURRENT_QUARTER,"timeinterval.predefined.current-quarter"],[rs.CURRENT_QUARTER_SO_FAR,"timeinterval.predefined.current-quarter-so-far"],[rs.CURRENT_HALF_YEAR,"timeinterval.predefined.current-half-year"],[rs.CURRENT_HALF_YEAR_SO_FAR,"timeinterval.predefined.current-half-year-so-far"],[rs.CURRENT_YEAR,"timeinterval.predefined.current-year"],[rs.CURRENT_YEAR_SO_FAR,"timeinterval.predefined.current-year-so-far"]]),cs=new Map([[ao.WEEK,$o],[ao.WEEK_ISO,$o],[ao.MONTH,Zo],[ao.QUARTER,ts]]),ls=function(t){var e=qo().valueOf();return{displayValue:"",hideInterval:!1,hideLastInterval:!1,hideQuickInterval:!1,hideAggregation:!1,hideAggInterval:!1,hideTimezone:!1,selectedTab:Do.REALTIME,realtime:{realtimeType:Ro.LAST_INTERVAL,interval:zo,timewindowMs:Qo,quickInterval:rs.CURRENT_DAY},history:{historyType:No.LAST_INTERVAL,interval:zo,timewindowMs:Qo,fixedTimewindow:{startTimeMs:e-Xo,endTimeMs:e},quickInterval:rs.CURRENT_DAY},aggregation:{type:ns.AVG,limit:Math.floor(t.getMaxDatapointsLimit()/2)}}},ps=function(t){return Or(t.selectedTab)?Mr(t.realtime)?Do.REALTIME:Do.HISTORY:t.selectedTab},ds=function(t,e,n,i,r){var a,o;return i=t.history?Mr(i)?i:t.history.interval:t.realtime?t.realtime.interval:0,t.aggregation?(a=t.aggregation.type||ns.AVG,o=t.aggregation.limit||r.getMaxDatapointsLimit()):(a=ns.AVG,o=r.getMaxDatapointsLimit()),{hideInterval:t.hideInterval||!1,hideLastInterval:t.hideLastInterval||!1,hideQuickInterval:t.hideQuickInterval||!1,hideAggregation:t.hideAggregation||!1,hideAggInterval:t.hideAggInterval||!1,hideTimezone:t.hideTimezone||!1,selectedTab:Do.HISTORY,history:{historyType:No.FIXED,fixedTimewindow:{startTimeMs:e,endTimeMs:n},interval:r.boundIntervalToTimewindow(n-e,i,ns.AVG)},aggregation:{type:a,limit:o},timezone:t.timezone}},fs=function(t,e){return!(!t||!e)&&ps(t)!==ps(e)},hs=function(t){return qo.tz(t)},ys=function(t){if(t){var e=hs(t),n=qo().utcOffset();return 60*(e.utcOffset()-n)*1e3}return 0},ms=function(t){return ps(t)===Do.HISTORY},gs=function(t){return t?qo().tz(t):qo()},vs=function(t,e){switch(t){case rs.YESTERDAY:return e.subtract(1,"days"),e.startOf("day");case rs.DAY_BEFORE_YESTERDAY:return e.subtract(2,"days"),e.startOf("day");case rs.THIS_DAY_LAST_WEEK:return e.subtract(1,"weeks"),e.startOf("day");case rs.PREVIOUS_WEEK:return e.subtract(1,"weeks"),e.startOf("week");case rs.PREVIOUS_WEEK_ISO:return e.subtract(1,"weeks"),e.startOf("isoWeek");case rs.PREVIOUS_MONTH:return e.subtract(1,"months"),e.startOf("month");case rs.PREVIOUS_QUARTER:return e.subtract(1,"quarter"),e.startOf("quarter");case rs.PREVIOUS_HALF_YEAR:return e.get("quarter")<3?e.startOf("year").subtract(2,"quarters"):e.startOf("year");case rs.PREVIOUS_YEAR:return e.subtract(1,"years"),e.startOf("year");case rs.CURRENT_HOUR:return e.startOf("hour");case rs.CURRENT_DAY:case rs.CURRENT_DAY_SO_FAR:return e.startOf("day");case rs.CURRENT_WEEK:case rs.CURRENT_WEEK_SO_FAR:return e.startOf("week");case rs.CURRENT_WEEK_ISO:case rs.CURRENT_WEEK_ISO_SO_FAR:return e.startOf("isoWeek");case rs.CURRENT_MONTH:case rs.CURRENT_MONTH_SO_FAR:return e.startOf("month");case rs.CURRENT_QUARTER:case rs.CURRENT_QUARTER_SO_FAR:return e.startOf("quarter");case rs.CURRENT_HALF_YEAR:case rs.CURRENT_HALF_YEAR_SO_FAR:return e.get("quarter")<3?e.startOf("year"):e.clone().set("quarter",3).startOf("quarter");case rs.CURRENT_YEAR:case rs.CURRENT_YEAR_SO_FAR:return e.startOf("year")}},Ts=function(t,e,n){switch(t){case rs.YESTERDAY:case rs.DAY_BEFORE_YESTERDAY:case rs.THIS_DAY_LAST_WEEK:case rs.CURRENT_DAY:return e.add(1,"day").valueOf();case rs.PREVIOUS_WEEK:case rs.PREVIOUS_WEEK_ISO:case rs.CURRENT_WEEK:case rs.CURRENT_WEEK_ISO:return e.add(1,"week").valueOf();case rs.PREVIOUS_MONTH:case rs.CURRENT_MONTH:return e.add(1,"month").valueOf();case rs.PREVIOUS_QUARTER:case rs.CURRENT_QUARTER:return e.add(1,"quarter").valueOf();case rs.PREVIOUS_HALF_YEAR:case rs.CURRENT_HALF_YEAR:return e.add(2,"quarters").valueOf();case rs.PREVIOUS_YEAR:case rs.CURRENT_YEAR:return e.add(1,"year").valueOf();case rs.CURRENT_HOUR:return e.add(1,"hour").valueOf();case rs.CURRENT_DAY_SO_FAR:case rs.CURRENT_WEEK_SO_FAR:case rs.CURRENT_WEEK_ISO_SO_FAR:case rs.CURRENT_MONTH_SO_FAR:case rs.CURRENT_QUARTER_SO_FAR:case rs.CURRENT_HALF_YEAR_SO_FAR:case rs.CURRENT_YEAR_SO_FAR:return gs(n).valueOf()}},Es=function(t,e){var n=[0,0],i=gs(e),r=vs(t,i);n[0]=r.valueOf();var a=Ts(t,r,e);return n[1]=a.valueOf(),n},bs=function(t,e,n,i){var r,a={fixedWindow:null,realtimeWindowMs:null,aggregation:{interval:zo,limit:i.getMaxDatapointsLimit(),type:ns.AVG},timezone:t.timezone||Cs(),tsOffset:ys(t.timezone)};if(n&&(a.aggregation.type=ns.NONE,a.aggregation.stateData=!0),Mr(t.aggregation)&&!n&&(a.aggregation={type:t.aggregation.type||ns.AVG,limit:t.aggregation.limit||i.getMaxDatapointsLimit()}),ps(t)===Do.REALTIME){var o=t.realtime.realtimeType;if(Or(o)&&(o=Mr(t.realtime.quickInterval)?Ro.INTERVAL:Ro.LAST_INTERVAL),o===Ro.INTERVAL){a.realtimeWindowMs=function(t,e){var n;switch(t){case rs.CURRENT_HOUR:return Jo;case rs.CURRENT_DAY:case rs.CURRENT_DAY_SO_FAR:return Xo;case rs.CURRENT_WEEK:case rs.CURRENT_WEEK_ISO:case rs.CURRENT_WEEK_SO_FAR:case rs.CURRENT_WEEK_ISO_SO_FAR:return $o;case rs.CURRENT_MONTH:case rs.CURRENT_MONTH_SO_FAR:return(n=gs(e)).clone().endOf("month").add(1,"milliseconds").diff(n.clone().startOf("month"));case rs.CURRENT_QUARTER:case rs.CURRENT_QUARTER_SO_FAR:return(n=gs(e)).clone().endOf("quarter").add(1,"milliseconds").diff(n.clone().startOf("quarter"));case rs.CURRENT_HALF_YEAR:case rs.CURRENT_HALF_YEAR_SO_FAR:return(n=gs(e)).get("quarter")<3?n.clone().set("quarter",2).endOf("quarter").add(1,"milliseconds").diff(n.clone().startOf("year")):n.clone().endOf("year").add(1,"milliseconds").diff(n.clone().set("quarter",3).startOf("quarter"));case rs.CURRENT_YEAR:case rs.CURRENT_YEAR_SO_FAR:return(n=gs(e)).clone().endOf("year").add(1,"milliseconds").diff(n.clone().startOf("year"))}}(t.realtime.quickInterval,t.timezone),a.quickInterval=t.realtime.quickInterval;var s=gs(t.timezone);a.startTs=vs(t.realtime.quickInterval,s).valueOf()}else{a.realtimeWindowMs=t.realtime.timewindowMs;s=gs(t.timezone);a.startTs=s.valueOf()+e-a.realtimeWindowMs}a.aggregation.interval=a.aggregation.type===ns.NONE?zo:t.realtime.interval?t.realtime.interval:i.boundIntervalToTimewindow(a.realtimeWindowMs,t.realtime.interval,a.aggregation.type),r=a.realtimeWindowMs}else{var u=t.history.historyType;if(Or(u)&&(u=Mr(t.history.timewindowMs)?No.LAST_INTERVAL:Mr(t.history.quickInterval)?No.INTERVAL:No.FIXED),u===No.LAST_INTERVAL){var c=(s=gs(t.timezone)).valueOf();a.fixedWindow={startTimeMs:c-t.history.timewindowMs,endTimeMs:c},r=t.history.timewindowMs}else if(u===No.INTERVAL){var l=Es(t.history.quickInterval,t.timezone);a.fixedWindow={startTimeMs:l[0],endTimeMs:l[1]},r=a.fixedWindow.endTimeMs-a.fixedWindow.startTimeMs,a.quickInterval=t.history.quickInterval}else a.fixedWindow={startTimeMs:t.history.fixedTimewindow.startTimeMs-a.tsOffset,endTimeMs:t.history.fixedTimewindow.endTimeMs-a.tsOffset},r=a.fixedWindow.endTimeMs-a.fixedWindow.startTimeMs;a.startTs=a.fixedWindow.startTimeMs,a.aggregation.interval=a.aggregation.type===ns.NONE?zo:t.history.interval?t.history.interval:i.boundIntervalToTimewindow(r,t.history.interval,a.aggregation.type)}var p=a.aggregation;return p.timeWindow=r,p.type!==ns.NONE&&(p.limit=Ls(a.startTs,r,a.aggregation.interval,t.timezone)),a},Ss=function(t,e){switch(t){case rs.YESTERDAY:case rs.DAY_BEFORE_YESTERDAY:case rs.CURRENT_DAY:case rs.CURRENT_DAY_SO_FAR:return e.subtract(1,"days"),e.startOf("day");case rs.THIS_DAY_LAST_WEEK:return e.subtract(1,"weeks"),e.startOf("day");case rs.PREVIOUS_WEEK:case rs.CURRENT_WEEK:case rs.CURRENT_WEEK_SO_FAR:return e.subtract(1,"weeks"),e.startOf("week");case rs.PREVIOUS_WEEK_ISO:case rs.CURRENT_WEEK_ISO:case rs.CURRENT_WEEK_ISO_SO_FAR:return e.subtract(1,"weeks"),e.startOf("isoWeek");case rs.PREVIOUS_MONTH:case rs.CURRENT_MONTH:case rs.CURRENT_MONTH_SO_FAR:return e.subtract(1,"months"),e.startOf("month");case rs.PREVIOUS_QUARTER:case rs.CURRENT_QUARTER:case rs.CURRENT_QUARTER_SO_FAR:return e.subtract(1,"quarters"),e.startOf("quarter");case rs.PREVIOUS_HALF_YEAR:case rs.CURRENT_HALF_YEAR:case rs.CURRENT_HALF_YEAR_SO_FAR:return e.subtract(2,"quarters"),e.get("quarter")<3?e.startOf("year"):e.clone().set("quarter",3).startOf("quarter");case rs.PREVIOUS_YEAR:case rs.CURRENT_YEAR:case rs.CURRENT_YEAR_SO_FAR:return e.subtract(1,"years"),e.startOf("year");case rs.CURRENT_HOUR:return e.subtract(1,"hour"),e.startOf("hour")}},_s=function(t,e,n){switch(t){case rs.CURRENT_DAY_SO_FAR:return n.subtract(1,"days").valueOf();case rs.CURRENT_WEEK_SO_FAR:case rs.CURRENT_WEEK_ISO_SO_FAR:return n.subtract(1,"week").valueOf();case rs.CURRENT_MONTH_SO_FAR:return n.subtract(1,"month").valueOf();case rs.CURRENT_QUARTER_SO_FAR:return n.subtract(1,"quarter").valueOf();case rs.CURRENT_HALF_YEAR_SO_FAR:return n.subtract(2,"quarters").valueOf();case rs.CURRENT_YEAR_SO_FAR:return n.subtract(1,"year").valueOf();default:return Ts(t,e)}},As=function(t,e,n){var i={fixedWindow:null,realtimeWindowMs:null,aggregation:t.aggregation,tsOffset:t.tsOffset,timezone:t.timezone};if(t.fixedWindow){var r=void 0,a=void 0;if("previousInterval"===e)if(t.quickInterval){var o=qo(t.fixedWindow.startTimeMs),s=qo(t.fixedWindow.endTimeMs);t.timezone&&(o.tz(t.timezone),s.tz(t.timezone));var u=Ss(t.quickInterval,o);r=u.valueOf(),a=_s(t.quickInterval,u,s)}else{var c=t.fixedWindow.endTimeMs-t.fixedWindow.startTimeMs;r=(a=t.fixedWindow.startTimeMs)-c}else if("customInterval"===e)if(Fr(n)&&isFinite(n)&&n>0){c=t.fixedWindow.endTimeMs-t.fixedWindow.startTimeMs;r=(a=t.fixedWindow.endTimeMs-Math.round(n))-c}else a=t.fixedWindow.endTimeMs,r=t.fixedWindow.startTimeMs;else{c=t.fixedWindow.endTimeMs-t.fixedWindow.startTimeMs;r=(a=qo(t.fixedWindow.endTimeMs).subtract(1,e).valueOf())-c}i.startTs=r,i.fixedWindow={startTimeMs:i.startTs,endTimeMs:a}}return i},ws=new Array({name:"timeinterval.seconds-interval",translateParams:{seconds:1},value:zo},{name:"timeinterval.seconds-interval",translateParams:{seconds:5},value:5e3},{name:"timeinterval.seconds-interval",translateParams:{seconds:10},value:1e4},{name:"timeinterval.seconds-interval",translateParams:{seconds:15},value:15e3},{name:"timeinterval.seconds-interval",translateParams:{seconds:30},value:3e4},{name:"timeinterval.minutes-interval",translateParams:{minutes:1},value:Qo},{name:"timeinterval.minutes-interval",translateParams:{minutes:2},value:12e4},{name:"timeinterval.minutes-interval",translateParams:{minutes:5},value:3e5},{name:"timeinterval.minutes-interval",translateParams:{minutes:10},value:6e5},{name:"timeinterval.minutes-interval",translateParams:{minutes:15},value:9e5},{name:"timeinterval.minutes-interval",translateParams:{minutes:30},value:18e5},{name:"timeinterval.hours-interval",translateParams:{hours:1},value:Jo},{name:"timeinterval.hours-interval",translateParams:{hours:2},value:2*Jo},{name:"timeinterval.hours-interval",translateParams:{hours:5},value:5*Jo},{name:"timeinterval.hours-interval",translateParams:{hours:10},value:10*Jo},{name:"timeinterval.hours-interval",translateParams:{hours:12},value:12*Jo},{name:"timeinterval.days-interval",translateParams:{days:1},value:Xo},{name:"timeinterval.days-interval",translateParams:{days:7},value:7*Xo},{name:"timeinterval.type.week",translateParams:{},value:ao.WEEK},{name:"timeinterval.type.week-iso",translateParams:{},value:ao.WEEK_ISO},{name:"timeinterval.days-interval",translateParams:{days:30},value:30*Xo},{name:"timeinterval.type.month",translateParams:{},value:ao.MONTH},{name:"timeinterval.type.quarter",translateParams:{},value:ao.QUARTER});!function(t){t.SECONDS="SECONDS",t.MINUTES="MINUTES",t.HOURS="HOURS",t.DAYS="DAYS"}(os||(os={})),function(t){t.MILLISECONDS="MILLISECONDS"}(ss||(ss={}));var Is,Ds=new Map([[ss.MILLISECONDS,"timeunit.milliseconds"],[os.SECONDS,"timeunit.seconds"],[os.MINUTES,"timeunit.minutes"],[os.HOURS,"timeunit.hours"],[os.DAYS,"timeunit.days"]]),Rs=null,Ns=null,Os=function(){return Rs||(Rs=Aa.exports.tz.names().map((function(t){var e=Aa.exports.tz(t);return{id:t,name:t.replace(/_/g," "),offset:"UTC".concat(e.format("Z")),nOffset:e.utcOffset(),abbr:e.zoneAbbr()}}))),Rs},Cs=function(){return Ns||(Ns=Aa.exports.tz.guess()),Ns},Ms=function(t,e,n){var i=Os(),r=t?i.find((function(e){return e.id===t})):null;if(!r)if(n){var a=Cs();r=i.find((function(t){return t.id===a}))}else e&&(r=i.find((function(t){return t.id===e})));return r},ks=function(t,e){return e?qo(t).tz(e):qo(t)},Ls=function(t,e,n,i){if("number"==typeof n)return Math.ceil(e/n);for(var r=ks(t,i),a=ks(t+e,i),o=Us(r,n),s=Ps(r,n),u=0;o.isBefore(a);)u++,s.add(1,"milliseconds"),o=Us(s,n),s=Ps(s,n);return u},Us=function(t,e){switch(e){case ao.WEEK:return t.clone().startOf("week");case ao.WEEK_ISO:return t.clone().startOf("isoWeek");case ao.MONTH:return t.clone().startOf("month");case ao.QUARTER:return t.clone().startOf("quarter")}},Ps=function(t,e){switch(e){case ao.WEEK:return t.clone().endOf("week");case ao.WEEK_ISO:return t.clone().endOf("isoWeek");case ao.MONTH:return t.clone().endOf("month");case ao.QUARTER:return t.clone().endOf("quarter")}},xs=function(t,e,n,i){return(i||t.aggregation.type)===ns.NONE?[n,n]:Fs(t.startTs,e,t.aggregation.interval,t.tsOffset,t.timezone,n)},Fs=function(t,e,n,i,r,a){var o,s;if("number"==typeof n){var u=t+i;s=(o=u+Math.floor((a-u)/n)*n)+n}else{var c=ks(a,r),l=Us(c,n),p=ks(t,r);p.isAfter(l)&&(l=p);var d=Ps(c,n).add(1,"milliseconds");o=l.valueOf()+i,s=d.valueOf()+i}return[o,s=Math.min(s,e)]};!function(t){t.timeseries="timeseries",t.latest="latest",t.rpc="rpc",t.alarm="alarm",t.static="static"}(Is||(Is={}));var Ws,Vs,js=new Map([[Is.timeseries,{name:"widget.timeseries",icon:"timeline",configHelpLinkId:"widgetsConfigTimeseries",template:{fullFqn:"system.time_series_chart"}}],[Is.latest,{name:"widget.latest",icon:"track_changes",configHelpLinkId:"widgetsConfigLatest",template:{fullFqn:"system.cards.attributes_card"}}],[Is.rpc,{name:"widget.rpc",icon:"mdi:developer-board",configHelpLinkId:"widgetsConfigRpc",template:{fullFqn:"system.gpio_widgets.basic_gpio_control"}}],[Is.alarm,{name:"widget.alarm",icon:"error",configHelpLinkId:"widgetsConfigAlarm",template:{fullFqn:"system.alarm_widgets.alarms_table"}}],[Is.static,{name:"widget.static",icon:"font_download",configHelpLinkId:"widgetsConfigStatic",template:{fullFqn:"system.cards.html_card"}}]]);!function(t){t.ALL="ALL",t.ACTUAL="ACTUAL",t.DEPRECATED="DEPRECATED"}(Ws||(Ws={})),function(t){t.column="column",t.row="row"}(Vs||(Vs={}));var Ys,Hs=new Map([[Vs.column,"direction.column"],[Vs.row,"direction.row"]]);!function(t){t.top="top",t.bottom="bottom",t.left="left",t.right="right"}(Ys||(Ys={}));var Bs,Ks=Object.keys(Ys),Gs=new Map([[Ys.top,"position.top"],[Ys.bottom,"position.bottom"],[Ys.left,"position.left"],[Ys.right,"position.right"]]);!function(t){t.PREVIOUS_VALUE="PREVIOUS_VALUE",t.DELTA_ABSOLUTE="DELTA_ABSOLUTE",t.DELTA_PERCENT="DELTA_PERCENT"}(Bs||(Bs={}));var qs,zs,Qs=new Map([[Bs.PREVIOUS_VALUE,"datakey.delta-calculation-result-previous-value"],[Bs.DELTA_ABSOLUTE,"datakey.delta-calculation-result-delta-absolute"],[Bs.DELTA_PERCENT,"datakey.delta-calculation-result-delta-percent"]]),Js=new Map([[ns.MIN,"datakey.aggregation-type-min-hint"],[ns.MAX,"datakey.aggregation-type-max-hint"],[ns.AVG,"datakey.aggregation-type-avg-hint"],[ns.SUM,"datakey.aggregation-type-sum-hint"],[ns.COUNT,"datakey.aggregation-type-count-hint"],[ns.NONE,"datakey.aggregation-type-none-hint"]]);!function(t){t.general="general",t.advanced="advanced"}(qs||(qs={})),function(t){t.function="function",t.device="device",t.entity="entity",t.entityCount="entityCount",t.alarmCount="alarmCount"}(zs||(zs={}));var Xs,$s=new Map([[zs.function,"function.function"],[zs.device,"device.device"],[zs.entity,"entity.entity"],[zs.entityCount,"entity.entities-count"],[zs.alarmCount,"entity.alarms-count"]]);!function(t){t.device="device",t.entity="entity"}(Xs||(Xs={}));var Zs,tu,eu=function(t){return!!t&&!!t.type&&(t.type===Xs.device&&!!t.deviceId||t.type===Xs.entity&&!!t.entityAliasId)},nu=function(t){if(t){var e=t.find((function(t){var e=t.dataKeys&&t.dataKeys.find((function(t){return(null==t?void 0:t.type)===ja.timeseries&&(null==t?void 0:t.aggregationType)&&t.aggregationType!==ns.NONE}));return!!e}));if(e)return!0}return!1};!function(t){t.openDashboardState="openDashboardState",t.updateDashboardState="updateDashboardState",t.openDashboard="openDashboard",t.custom="custom",t.customPretty="customPretty",t.mobileAction="mobileAction",t.openURL="openURL"}(Zs||(Zs={})),function(t){t.takePictureFromGallery="takePictureFromGallery",t.takePhoto="takePhoto",t.mapDirection="mapDirection",t.mapLocation="mapLocation",t.scanQrCode="scanQrCode",t.makePhoneCall="makePhoneCall",t.getLocation="getLocation",t.takeScreenshot="takeScreenshot"}(tu||(tu={}));var iu,ru=Object.keys(Zs),au=new Map([[Zs.openDashboardState,"widget-action.open-dashboard-state"],[Zs.updateDashboardState,"widget-action.update-dashboard-state"],[Zs.openDashboard,"widget-action.open-dashboard"],[Zs.custom,"widget-action.custom"],[Zs.customPretty,"widget-action.custom-pretty"],[Zs.mobileAction,"widget-action.mobile-action"],[Zs.openURL,"widget-action.open-URL"]]),ou=new Map([[tu.takePictureFromGallery,"widget-action.mobile.take-picture-from-gallery"],[tu.takePhoto,"widget-action.mobile.take-photo"],[tu.mapDirection,"widget-action.mobile.map-direction"],[tu.mapLocation,"widget-action.mobile.map-location"],[tu.scanQrCode,"widget-action.mobile.scan-qr-code"],[tu.makePhoneCall,"widget-action.mobile.make-phone-call"],[tu.getLocation,"widget-action.mobile.get-location"],[tu.takeScreenshot,"widget-action.mobile.take-screenshot"]]),su=function(t){return"comparisonSettings"in t};function uu(t){return uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(t)}!function(t){t.basic="basic",t.advanced="advanced"}(iu||(iu={}));var cu=/^\s+/,lu=/\s+$/;function pu(t,e){if(e=e||{},(t=t||"")instanceof pu)return t;if(!(this instanceof pu))return new pu(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,i=null,r=null,a=null,o=!1,s=!1;"string"==typeof t&&(t=function(t){t=t.replace(cu,"").replace(lu,"").toLowerCase();var e,n=!1;if(Ru[t])t=Ru[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=Ku.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=Ku.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=Ku.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=Ku.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=Ku.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=Ku.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=Ku.hex8.exec(t))return{r:ku(e[1]),g:ku(e[2]),b:ku(e[3]),a:xu(e[4]),format:n?"name":"hex8"};if(e=Ku.hex6.exec(t))return{r:ku(e[1]),g:ku(e[2]),b:ku(e[3]),format:n?"name":"hex"};if(e=Ku.hex4.exec(t))return{r:ku(e[1]+""+e[1]),g:ku(e[2]+""+e[2]),b:ku(e[3]+""+e[3]),a:xu(e[4]+""+e[4]),format:n?"name":"hex8"};if(e=Ku.hex3.exec(t))return{r:ku(e[1]+""+e[1]),g:ku(e[2]+""+e[2]),b:ku(e[3]+""+e[3]),format:n?"name":"hex"};return!1}(t));"object"==uu(t)&&(Gu(t.r)&&Gu(t.g)&&Gu(t.b)?(u=t.r,c=t.g,l=t.b,e={r:255*Cu(u,255),g:255*Cu(c,255),b:255*Cu(l,255)},o=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):Gu(t.h)&&Gu(t.s)&&Gu(t.v)?(i=Uu(t.s),r=Uu(t.v),e=function(t,e,n){t=6*Cu(t,360),e=Cu(e,100),n=Cu(n,100);var i=Math.floor(t),r=t-i,a=n*(1-e),o=n*(1-r*e),s=n*(1-(1-r)*e),u=i%6,c=[n,o,a,a,s,n][u],l=[s,n,n,o,a,a][u],p=[a,a,s,n,n,o][u];return{r:255*c,g:255*l,b:255*p}}(t.h,i,r),o=!0,s="hsv"):Gu(t.h)&&Gu(t.s)&&Gu(t.l)&&(i=Uu(t.s),a=Uu(t.l),e=function(t,e,n){var i,r,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=Cu(t,360),e=Cu(e,100),n=Cu(n,100),0===e)i=r=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;i=o(u,s,t+1/3),r=o(u,s,t),a=o(u,s,t-1/3)}return{r:255*i,g:255*r,b:255*a}}(t.h,i,a),o=!0,s="hsl"),t.hasOwnProperty("a")&&(n=t.a));var u,c,l;return n=Ou(n),{ok:o,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function du(t,e,n){t=Cu(t,255),e=Cu(e,255),n=Cu(n,255);var i,r,a=Math.max(t,e,n),o=Math.min(t,e,n),s=(a+o)/2;if(a==o)i=r=0;else{var u=a-o;switch(r=s>.5?u/(2-a-o):u/(a+o),a){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,l:s}}function fu(t,e,n){t=Cu(t,255),e=Cu(e,255),n=Cu(n,255);var i,r,a=Math.max(t,e,n),o=Math.min(t,e,n),s=a,u=a-o;if(r=0===a?0:u/a,a==o)i=0;else{switch(a){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,v:s}}function hu(t,e,n,i){var r=[Lu(Math.round(t).toString(16)),Lu(Math.round(e).toString(16)),Lu(Math.round(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function yu(t,e,n,i){return[Lu(Pu(i)),Lu(Math.round(t).toString(16)),Lu(Math.round(e).toString(16)),Lu(Math.round(n).toString(16))].join("")}function mu(t,e){e=0===e?0:e||10;var n=pu(t).toHsl();return n.s-=e/100,n.s=Mu(n.s),pu(n)}function gu(t,e){e=0===e?0:e||10;var n=pu(t).toHsl();return n.s+=e/100,n.s=Mu(n.s),pu(n)}function vu(t){return pu(t).desaturate(100)}function Tu(t,e){e=0===e?0:e||10;var n=pu(t).toHsl();return n.l+=e/100,n.l=Mu(n.l),pu(n)}function Eu(t,e){e=0===e?0:e||10;var n=pu(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),pu(n)}function bu(t,e){e=0===e?0:e||10;var n=pu(t).toHsl();return n.l-=e/100,n.l=Mu(n.l),pu(n)}function Su(t,e){var n=pu(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,pu(n)}function _u(t){var e=pu(t).toHsl();return e.h=(e.h+180)%360,pu(e)}function Au(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=pu(t).toHsl(),i=[pu(t)],r=360/e,a=1;a<e;a++)i.push(pu({h:(n.h+a*r)%360,s:n.s,l:n.l}));return i}function wu(t){var e=pu(t).toHsl(),n=e.h;return[pu(t),pu({h:(n+72)%360,s:e.s,l:e.l}),pu({h:(n+216)%360,s:e.s,l:e.l})]}function Iu(t,e,n){e=e||6,n=n||30;var i=pu(t).toHsl(),r=360/n,a=[pu(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,a.push(pu(i));return a}function Du(t,e){e=e||6;for(var n=pu(t).toHsv(),i=n.h,r=n.s,a=n.v,o=[],s=1/e;e--;)o.push(pu({h:i,s:r,v:a})),a=(a+s)%1;return o}pu.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,i=this.toRgb();return t=i.r/255,e=i.g/255,n=i.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=Ou(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=fu(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=fu(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),i=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=du(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=du(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),i=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return hu(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,i,r){var a=[Lu(Math.round(t).toString(16)),Lu(Math.round(e).toString(16)),Lu(Math.round(n).toString(16)),Lu(Pu(i))];if(r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Cu(this._r,255))+"%",g:Math.round(100*Cu(this._g,255))+"%",b:Math.round(100*Cu(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Cu(this._r,255))+"%, "+Math.round(100*Cu(this._g,255))+"%, "+Math.round(100*Cu(this._b,255))+"%)":"rgba("+Math.round(100*Cu(this._r,255))+"%, "+Math.round(100*Cu(this._g,255))+"%, "+Math.round(100*Cu(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Nu[hu(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+yu(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=pu(t);n="#"+yu(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return e||!i||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return pu(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Tu,arguments)},brighten:function(){return this._applyModification(Eu,arguments)},darken:function(){return this._applyModification(bu,arguments)},desaturate:function(){return this._applyModification(mu,arguments)},saturate:function(){return this._applyModification(gu,arguments)},greyscale:function(){return this._applyModification(vu,arguments)},spin:function(){return this._applyModification(Su,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(Iu,arguments)},complement:function(){return this._applyCombination(_u,arguments)},monochromatic:function(){return this._applyCombination(Du,arguments)},splitcomplement:function(){return this._applyCombination(wu,arguments)},triad:function(){return this._applyCombination(Au,[3])},tetrad:function(){return this._applyCombination(Au,[4])}},pu.fromRatio=function(t,e){if("object"==uu(t)){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:Uu(t[i]));t=n}return pu(t,e)},pu.equals=function(t,e){return!(!t||!e)&&pu(t).toRgbString()==pu(e).toRgbString()},pu.random=function(){return pu.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},pu.mix=function(t,e,n){n=0===n?0:n||50;var i=pu(t).toRgb(),r=pu(e).toRgb(),a=n/100;return pu({r:(r.r-i.r)*a+i.r,g:(r.g-i.g)*a+i.g,b:(r.b-i.b)*a+i.b,a:(r.a-i.a)*a+i.a})},pu.readability=function(t,e){var n=pu(t),i=pu(e);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)},pu.isReadable=function(t,e,n){var i,r,a=pu.readability(t,e);switch(r=!1,(i=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n)).level+i.size){case"AAsmall":case"AAAlarge":r=a>=4.5;break;case"AAlarge":r=a>=3;break;case"AAAsmall":r=a>=7}return r},pu.mostReadable=function(t,e,n){var i,r,a,o,s=null,u=0;r=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var c=0;c<e.length;c++)(i=pu.readability(t,e[c]))>u&&(u=i,s=pu(e[c]));return pu.isReadable(t,s,{level:a,size:o})||!r?s:(n.includeFallbackColors=!1,pu.mostReadable(t,["#fff","#000"],n))};var Ru=pu.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Nu=pu.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(Ru);function Ou(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Cu(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Mu(t){return Math.min(1,Math.max(0,t))}function ku(t){return parseInt(t,16)}function Lu(t){return 1==t.length?"0"+t:""+t}function Uu(t){return t<=1&&(t=100*t+"%"),t}function Pu(t){return Math.round(255*parseFloat(t)).toString(16)}function xu(t){return ku(t)/255}var Fu,Wu,Vu,ju,Yu,Hu,Bu,Ku=(Wu="[\\s|\\(]+("+(Fu="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Fu+")[,|\\s]+("+Fu+")\\s*\\)?",Vu="[\\s|\\(]+("+Fu+")[,|\\s]+("+Fu+")[,|\\s]+("+Fu+")[,|\\s]+("+Fu+")\\s*\\)?",{CSS_UNIT:new RegExp(Fu),rgb:new RegExp("rgb"+Wu),rgba:new RegExp("rgba"+Vu),hsl:new RegExp("hsl"+Wu),hsla:new RegExp("hsla"+Vu),hsv:new RegExp("hsv"+Wu),hsva:new RegExp("hsva"+Vu),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Gu(t){return!!Ku.CSS_UNIT.exec(t)}var qu,zu,Qu={red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},"deep-purple":{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},"light-blue":{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},"light-green":{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},"deep-orange":{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#ffffff",A200:"#000000",A400:"#303030",A700:"#616161"},"blue-grey":{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64"}},Ju=new Array,Xu=["blue","green","red","amber","blue-grey","purple","light-green","indigo","pink","yellow","light-blue","orange","deep-purple","lime","teal","brown","cyan","deep-orange","grey"],$u=["500","A700","600","700","800","900","300","400","A200","A400"];try{for(var Zu=ve(Object.keys(Qu)),tc=Zu.next();!tc.done;tc=Zu.next()){var ec=tc.value,nc=Qu[ec];try{for(var ic=(Hu=void 0,ve(Object.keys(nc))),rc=ic.next();!rc.done;rc=ic.next()){var ac=rc.value;if($u.indexOf(ac)>-1){var oc=pu(nc[ac]),sc=oc.isDark(),uc={value:oc.toHexString(),group:ec,label:ac,isDark:sc};Ju.push(uc)}}}catch(t){Hu={error:t}}finally{try{rc&&!rc.done&&(Bu=ic.return)&&Bu.call(ic)}finally{if(Hu)throw Hu.error}}}}catch(t){ju={error:t}}finally{try{tc&&!tc.done&&(Yu=Zu.return)&&Yu.call(Zu)}finally{if(ju)throw ju.error}}Ju.sort((function(t,e){var n=$u.indexOf(t.label)-$u.indexOf(e.label);0===n&&(n=Xu.indexOf(t.group)-Xu.indexOf(e.group));return n}));var cc=new RegExp("{".concat(Rr,":[^{}]+}"),"g"),lc={Sin:"return Math.round(1000*Math.sin(time/5000));",Cos:"return Math.round(1000*Math.cos(time/5000));",Random:"var value = prevValue + Math.random() * 100 - 50;\nvar multiplier = Math.pow(10, 2 || 0);\nvar value = Math.round(value * multiplier) / multiplier;\nif (value < -1000) {\n\tvalue = -1000;\n} else if (value > 1000) {\n\tvalue = 1000;\n}\nreturn value;"},pc=[];try{for(var dc=ve(Object.keys(lc)),fc=dc.next();!fc.done;fc=dc.next()){var hc=fc.value;pc.push(hc)}}catch(t){qu={error:t}}finally{try{fc&&!fc.done&&(zu=dc.return)&&zu.call(dc)}finally{if(qu)throw qu.error}}var yc,mc=[Ga.createdTime.keyName,Ga.originator.keyName,Ga.type.keyName,Ga.severity.keyName,Ga.status.keyName],gc=function(){function t(t,e){this.window=t,this.translate=e,this.iframeMode=!1,this.widgetEditMode=!1,this.defaultDataKey={name:"f(x)",type:ja.function,label:"Sin",color:this.getMaterialColor(0),funcBody:this.getPredefinedFunctionBody("Sin"),settings:{},_hash:Math.random()},this.defaultDatasource={type:zs.function,name:zs.function,dataKeys:[Xr(this.defaultDataKey)]},this.defaultAlarmDataKeys=[]}return t.prototype.getPredefinedFunctionsList=function(){return pc},t.prototype.getPredefinedFunctionBody=function(t){return lc[t]},t.prototype.initDefaultAlarmDataKeys=function(){for(var t=0;t<mc.length;t++){var e=mc[t],n={name:e,type:ja.alarm,label:this.translate.instant(Ga[e].name),color:this.getMaterialColor(t),settings:{},_hash:Math.random()};this.defaultAlarmDataKeys.push(n)}},t.prototype.getDefaultAlarmDataKeys=function(){return this.defaultAlarmDataKeys.length||this.initDefaultAlarmDataKeys(),Xr(this.defaultAlarmDataKeys)},t.prototype.defaultAlarmFieldContent=function(t,e){if(Mr(e)){var n=Ga[t.name];if(n){if(n.time)return e?_a(e).format("YYYY-MM-DD HH:mm:ss"):"";if(n===Ga.severity)return this.translate.instant(xa.get(e));if(n===Ga.status)return Fa.get(e)?this.translate.instant(Fa.get(e)):e;if(n===Ga.originatorType)return this.translate.instant(hr.get(e).type);if(n.value===Ga.assignee.value)return""}return e}return""},t.prototype.processWidgetException=function(t){var e,n=this.parseException(t,-6);if((null===(e=n.message)||void 0===e?void 0:e.startsWith("NG0"))&&(n.message="".concat(this.translate.instant("widget.widget-template-error"),"<br/>\n                       <br/><i>").concat(this.translate.instant("dialog.error-message-title"),"</i><br/><br/>").concat(n.message)),this.widgetEditMode){var i={type:"widgetException",data:n};this.window.parent.postMessage(JSON.stringify(i),"*")}return n},t.prototype.parseException=function(t,e){var n={};if(t)if("string"==typeof t)n.message=t;else if(t instanceof String)n.message=t.toString();else if(t.name?n.name=t.name:n.name="UnknownError",t.message&&(n.message=t.message),t.lineNumber)n.lineNumber=t.lineNumber,t.columnNumber&&(n.columnNumber=t.columnNumber);else if(t.stack){var i=/(.*<anonymous>):(\d*)(:)?(\d*)?/g.exec(t.stack);null!=i&&i.length>=3&&(Or(e)&&(e=-2),n.lineNumber=Number(i[2])+e,i.length>=5&&(n.columnNumber=Number(i[4])))}return n},t.prototype.customTranslation=function(t,e){var n,i;if(t&&Wr(t)){if(t.includes("{".concat(Rr))){var r=t.match(cc),a=t;try{for(var o=ve(r),s=o.next();!s.done;s=o.next()){var u=s.value,c=u.substring(6,u.length-1);a=a.replace(u,this.doTranslate(c,u))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}return this.doTranslate(t,e,Dr)}return t},t.prototype.doTranslate=function(t,e,n){var i;i=n?n+t:t;var r=this.translate.instant(i);return r!==i?r+"":e},t.prototype.guid=function(){return na()},t.prototype.validateAndUpdateDatasources=function(t){return t||(t=[]),t.forEach((function(t){t.deviceAliasId&&(t.type=zs.entity,t.entityAliasId=t.deviceAliasId,delete t.deviceAliasId),t.deviceName&&(t.entityName=t.deviceName,delete t.deviceName),t.type===zs.entity&&t.entityId&&(t.name=t.entityName),t.dataKeys||(t.dataKeys=[]),t.dataKeys.forEach((function(t){Or(t.label)&&(t.label=t.name)}))})),t},t.prototype.getMaterialColor=function(t){var e=t%Ju.length;return Ju[e].value},t.prototype.createKey=function(t,e,n){var i;if(void 0===n&&(n=-1),e===ja.alarm&&!t.label){var r=Ga[t.name];r&&(i=this.translate.instant(r.name))}i||(i=t.label||t.name);var a={name:t.name,type:e,label:i,funcBody:t.funcBody,settings:{},_hash:Math.random()};return t.units&&(a.units=t.units),Mr(t.decimals)&&(a.decimals=t.decimals),t.color?a.color=t.color:n>-1&&(a.color=this.getMaterialColor(n)),t.postFuncBody&&t.postFuncBody.length&&(a.usePostProcessing=!0,a.postFuncBody=t.postFuncBody),a},t.prototype.createLabelFromDatasource=function(t,e){return aa(t,e)},t.prototype.generateColors=function(t){var e=this,n=0;t.forEach((function(t){t.dataKeys.forEach((function(t){t.color||(t.color=e.getMaterialColor(n)),n++}))}))},t.prototype.stringToHslColor=function(t,e,n){if(t&&t.length){var i=Qr(t)%360;return"hsl(".concat(i,", ").concat(e,"%, ").concat(n,"%)")}},t.prototype.currentPerfTime=function(){return this.window.performance&&this.window.performance.now?this.window.performance.now():Date.now()},t.prototype.getQueryParam=function(t,e){void 0===e&&(e=this.window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},t.prototype.removeQueryParams=function(t){var e,n,i=this.window.location.search;try{for(var r=ve(t),a=r.next();!a.done;a=r.next()){var o=a.value;i=this.updateUrlQueryString(i,o,null)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}var s=[fa(),this.window.location.pathname].join("");this.window.history.replaceState({},"",s+i)},t.prototype.updateQueryParam=function(t,e){var n=[fa(),this.window.location.pathname].join(""),i=this.window.location.search,r=this.updateUrlQueryString(i,t,e);this.window.history.replaceState({},"",n+r)},t.prototype.updateUrlQueryString=function(t,e,n){var i="",r="";if(null!==n&&(i=e+"="+n),t){var a=new RegExp("([?&])"+e+"[^&]*");null!==t.match(a)?(i&&(i="$1"+i),(r=t.replace(a,i)).startsWith("&")&&(r="?"+r.substring(1))):i&&(r=t+"&"+i)}else i&&(r="?"+i);return r},t.prototype.baseUrl=function(){return fa()},t.prototype.deepClone=function(t,e){return Xr(t,e)},t.prototype.isUndefined=function(t){return Or(t)},t.prototype.isDefined=function(t){return Mr(t)},t.prototype.defaultValue=function(t,e){return kr(t)?t:e},t.prototype.getEntityIdFromDatasource=function(t){return{id:t.entityId,entityType:t.entityType}},t.prototype.objToBase64=function(t){return jr(t)},t.prototype.base64toString=function(t){return Yr(t)},t.prototype.objToBase64URI=function(t){return Hr(t)},t.prototype.base64toObj=function(t){return Br(t)},t=fe([ae(),he(0,se(Zi.Window)),he(1,se(Zi.TranslateService)),ye("design:paramtypes",[Window,ba])],t)}(),vc="TB-",Tc=function(){function t(){}return t.loadInitialState=function(){return Object.keys(localStorage).reduce((function(t,e){if(e.includes(vc)){var n=e.replace(vc,"").toLowerCase().split(".").map((function(t){return t.split("-").map((function(t,e){return 0===e?t:t.charAt(0).toUpperCase()+t.slice(1)})).join("")})),i=t;n.forEach((function(t,r){r!==n.length-1?(i[t]=i[t]||{},i=i[t]):i[t]=JSON.parse(localStorage.getItem(e))}))}return t}),{})},t.prototype.setItem=function(t,e){localStorage.setItem("".concat(vc).concat(t),JSON.stringify(e))},t.prototype.getItem=function(t){return JSON.parse(localStorage.getItem("".concat(vc).concat(t)))},t.prototype.removeItem=function(t){localStorage.removeItem("".concat(vc).concat(t))},t=fe([ae(),ye("design:paramtypes",[])],t)}(),Ec=function(){function t(t,e,n){this.http=t,this.userService=e,this.utils=n,this.twoFactorAuthProviders=null,this.refreshTokenSubject=null,this.jwtHelper=new $i,this.authenticatedListeners=[],this.isAuthenticated=!1}var e;return e=t,t._storeGet=function(t){return e.localStorage.getItem(t)},t.isTokenValid=function(t){var n=e._storeGet(t+"_expiration");return n&&Number(n)>(new Date).valueOf()+2e3},t.isJwtTokenValid=function(){return e.isTokenValid("jwt_token")},t.clearTokenData=function(){e.localStorage.removeItem("jwt_token"),e.localStorage.removeItem("jwt_token_expiration"),e.localStorage.removeItem("refresh_token"),e.localStorage.removeItem("refresh_token_expiration")},t.getJwtToken=function(){return e._storeGet("jwt_token")},t.prototype.login=function(t){var e=this;return this.http.post("/api/auth/login",t,ir()).pipe(Gn((function(t){return e.setUserFromJwtToken(t.token,t.refreshToken,!0).pipe(xn((function(){return Object.assign(t,e.userInfo)})))})))},t.prototype.checkTwoFaVerificationCode=function(t,e){var n=this;return this.http.post("/api/auth/2fa/verification/check?providerType=".concat(t,"&verificationCode=").concat(e),null,ir(!1,!0)).pipe(pi((function(t){n.setUserFromJwtToken(t.token,t.refreshToken,!0)})))},t.prototype.publicLogin=function(t){var e={publicId:t};return this.http.post("/api/auth/login/public",e,ir())},t.prototype.sendResetPasswordLink=function(t){return this.http.post("/api/noauth/resetPasswordByEmail",{email:t},ir())},t.prototype.activate=function(t,e,n){var i=this;return this.http.post("/api/noauth/activate?sendActivationMail=".concat(n),{activateToken:t,password:e},ir()).pipe(pi((function(t){i.setUserFromJwtToken(t.token,t.refreshToken,!0)})))},t.prototype.resetPassword=function(t,e){var n=this;return this.http.post("/api/noauth/resetPassword",{resetToken:t,password:e},ir()).pipe(pi((function(t){n.setUserFromJwtToken(t.token,t.refreshToken,!0)})))},t.prototype.changePassword=function(t,e,n){var i=this;return this.http.post("/api/auth/changePassword",{currentPassword:t,newPassword:e},nr(n)).pipe(pi((function(t){i.setUserFromJwtToken(t.token,t.refreshToken,!1)})))},t.prototype.getUserPasswordPolicy=function(){return this.http.get("/api/noauth/userPasswordPolicy",ir())},t.prototype.activateByEmailCode=function(t){return this.http.post("/api/noauth/activateByEmailCode?emailCode=".concat(t),null,ir())},t.prototype.resendEmailActivation=function(t){var e=encodeURIComponent(t);return this.http.post("/api/noauth/resendEmailActivation?email=".concat(e),null,ir())},t.prototype.loginAsUser=function(t){var e=this;return this.http.get("/api/user/".concat(t,"/token"),ir()).pipe(pi((function(t){e.setUserFromJwtToken(t.token,t.refreshToken,!0)})))},t.prototype.logout=function(){var t=this;this.http.post("/api/auth/logout",null,ir(!0,!0)).pipe(Gn((function(){return t.clearJwtToken(),Un({status:200,message:"退出登录成功"})})),Xn((function(){return t.clearJwtToken(),Un({status:200,message:"退出登录成功"})})))},t.prototype.getAvailableTwoFaLoginProviders=function(){var t=this;return this.http.get("/api/auth/2fa/providers",ir()).pipe(Xn((function(){return Un([])})),pi((function(e){t.twoFactorAuthProviders=e})))},t.prototype.loadUser=function(t){var n=this,i=this.utils.getQueryParam("publicId"),r=this.utils.getQueryParam("accessToken"),a=this.utils.getQueryParam("refreshToken"),o=this.utils.getQueryParam("username"),s=this.utils.getQueryParam("password"),u=this.utils.getQueryParam("loginError");if(i)return this.publicLogin(i).pipe(Gn((function(t){return n.updateAndValidateTokens(t.token,t.refreshToken,!1),n.procceedJwtTokenValidate()})),Xn((function(t){throw n.utils.updateQueryParam("publicId",null),Error()})));if(r){var c=["accessToken"];a&&c.push("refreshToken"),this.utils.removeQueryParams(c);try{this.updateAndValidateToken(r,"jwt_token",!1),a?this.updateAndValidateToken(a,"refresh_token",!1):(e.localStorage.removeItem("refresh_token"),e.localStorage.removeItem("refresh_token_expiration"))}catch(t){return Pn(t)}return this.procceedJwtTokenValidate()}if(o&&s){this.utils.updateQueryParam("username",null),this.utils.updateQueryParam("password",null);var l={username:o,password:s};return this.http.post("/api/auth/login",l,ir()).pipe(Gn((function(t){return n.updateAndValidateTokens(t.token,t.refreshToken,!1),n.procceedJwtTokenValidate()})))}return u?(this.utils.updateQueryParam("loginError",null),Pn(Error())):this.procceedJwtTokenValidate(t)},t.prototype.procceedJwtTokenValidate=function(t){var n=this,i=new sn;return this.validateJwtToken(t).subscribe((function(){var t,r,a,o={},s=e._storeGet("jwt_token");o.authUser=n.jwtHelper.decodeToken(s),o.authUser&&o.authUser.scopes&&o.authUser.scopes.length?o.authUser.authority=va[o.authUser.scopes[0]]:o.authUser&&(o.authUser.authority=va.ANONYMOUS),(null===(t=o.authUser)||void 0===t?void 0:t.isPublic)&&(o.forceFullscreen=!0),(null===(r=o.authUser)||void 0===r?void 0:r.authority)===va.PRE_VERIFICATION_TOKEN?(i.next(o),i.complete()):(null===(a=o.authUser)||void 0===a?void 0:a.userId)?n.userService.getUser(o.authUser.userId).subscribe((function(t){o.userDetails=t,n.userInfo=t,o.forceFullscreen=!1,i.next(o),i.complete()}),(function(t){i.error(t),n.logout()})):i.error(null)}),(function(t){i.error(t)})),i},t.prototype.refreshJwtToken=function(t){var n=this;void 0===t&&(t=!0);var i=this.refreshTokenSubject;if(null===this.refreshTokenSubject){this.refreshTokenSubject=new sn(1),i=this.refreshTokenSubject;var r=e._storeGet("refresh_token"),a=e.isTokenValid("refresh_token");if(this.setUserFromJwtToken(null,null,!1),a){var o={refreshToken:r};this.http.post("/api/auth/token",o,ir()).subscribe((function(e){t?n.setUserFromJwtToken(e.token,e.refreshToken,!1):n.updateAndValidateTokens(e.token,e.refreshToken,!0),n.refreshTokenSubject.next(e),n.refreshTokenSubject.complete(),n.refreshTokenSubject=null}),(function(){n.clearJwtToken(),n.refreshTokenSubject=null}))}else;}return i},t.prototype.notifyUnauthenticated=function(){this.isAuthenticated=!1,this.notifyAuthenticationChange()},t.prototype.notifyAuthenticated=function(t){this.isAuthenticated=!0,this.notifyAuthenticationChange()},t.prototype.notifyAuthenticationChange=function(){var t=this;this.authenticatedListeners.forEach((function(e){e(t.isAuthenticated)}))},t.prototype.listenAuthenticationChange=function(t){this.authenticatedListeners.find((function(e){return e===t}))||this.authenticatedListeners.push(t)},t.prototype.validateJwtToken=function(t){var n=new sn;return e.isTokenValid("jwt_token")?(n.next(),n.complete()):t?this.refreshJwtToken(!t).subscribe((function(){n.next(),n.complete()}),(function(t){n.error(t)})):(this.clearJwtToken(),n.error(null)),n},t.prototype.refreshTokenPending=function(){return null!==this.refreshTokenSubject},t.prototype.setUserFromJwtToken=function(t,n,i){var r=this,a=new sn;return t?(this.updateAndValidateTokens(t,n,!0),i?this.loadUser(!1).subscribe((function(t){r.notifyAuthenticated(t),a.next(!0),a.complete()}),(function(){r.notifyUnauthenticated(),a.next(!1),a.complete()})):this.loadUser(!1).subscribe((function(){a.next(!0),a.complete()}),(function(){a.next(!1),a.complete()}))):(e.clearTokenData(),i&&this.notifyUnauthenticated(),a.next(!1),a.complete()),a},t.prototype.updateAndValidateTokens=function(t,e,n){this.updateAndValidateToken(t,"jwt_token",n),this.updateAndValidateToken(e,"refresh_token",n)},t.prototype.parsePublicId=function(){var t=e.getJwtToken();if(t){var n=this.jwtHelper.decodeToken(t);if(n&&n.isPublic)return n.sub}return null},t.prototype.updateAndValidateToken=function(t,n,i){var r=!1,a=this.jwtHelper.decodeToken(t),o=null==a?void 0:a.iat,s=null==a?void 0:a.exp;if(o&&s){var u=s-o;if(u>0){var c=(new Date).valueOf()+1e3*u;e.localStorage.setItem(n,t),e.localStorage.setItem(n+"_expiration",""+c),r=!0}}!r&&i&&this.notifyUnauthenticated()},t.prototype.clearJwtToken=function(){this.setUserFromJwtToken(null,null,!0)},t.localStorage=new Tc,t=e=fe([ae(),he(0,se(Zi.HttpClient)),he(1,se(Zi.UserService)),he(2,se(Zi.UtilsService)),ye("design:paramtypes",[Ci,Ta,gc])],t)}(),bc=function(){function t(t){this.http=t}return t.prototype.getAlarm=function(t,e){return this.http.get("/api/alarm/".concat(t),nr(e))},t.prototype.getAlarmInfo=function(t,e){return this.http.get("/api/alarm/info/".concat(t),nr(e))},t.prototype.saveAlarm=function(t,e){return this.http.post("/api/alarm",t,nr(e))},t.prototype.ackAlarm=function(t,e){return this.http.post("/api/alarm/".concat(t,"/ack"),null,nr(e))},t.prototype.clearAlarm=function(t,e){return this.http.post("/api/alarm/".concat(t,"/clear"),null,nr(e))},t.prototype.assignAlarm=function(t,e,n){return this.http.post("/api/alarm/".concat(t,"/assign/").concat(e),null,nr(n))},t.prototype.unassignAlarm=function(t,e){return this.http.delete("/api/alarm/".concat(t,"/assign"),nr(e))},t.prototype.deleteAlarm=function(t,e){return this.http.delete("/api/alarm/".concat(t),nr(e))},t.prototype.getAlarms=function(t,e){return this.http.get("/api/alarm".concat(t.toQuery()),nr(e))},t.prototype.getAlarmsV2=function(t,e){return this.http.get("/api/v2/alarm".concat(t.toQuery()),nr(e))},t.prototype.getAllAlarms=function(t,e){return this.http.get("/api/alarms".concat(t.toQuery()),nr(e))},t.prototype.getAllAlarmsV2=function(t,e){return this.http.get("/api/v2/alarms".concat(t.toQuery()),nr(e))},t.prototype.getHighestAlarmSeverity=function(t,e,n,i){var r="/api/alarm/highestSeverity/".concat(t.entityType,"/").concat(t.id);return e?r+="?searchStatus=".concat(e):n&&(r+="?status=".concat(n)),this.http.get(r,nr(i))},t.prototype.getAlarmTypes=function(t,e){return this.http.get("/api/alarm/types".concat(t.toQuery()),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Sc=function(){function t(t){this.http=t}return t.prototype.getTenantAssetInfos=function(t,e,n){return void 0===e&&(e=""),this.http.get("/api/tenant/assetInfos".concat(t.toQuery(),"&type=").concat(e),nr(n))},t.prototype.getTenantAssetInfosByAssetProfileId=function(t,e,n){return void 0===e&&(e=""),this.http.get("/api/tenant/assetInfos".concat(t.toQuery(),"&assetProfileId=").concat(e),nr(n))},t.prototype.getCustomerAssetInfos=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/customer/".concat(t,"/assetInfos").concat(e.toQuery(),"&type=").concat(n),nr(i))},t.prototype.getCustomerAssetInfosByAssetProfileId=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/customer/".concat(t,"/assetInfos").concat(e.toQuery(),"&assetProfileId=").concat(n),nr(i))},t.prototype.getAsset=function(t,e){return this.http.get("/api/asset/".concat(t),nr(e))},t.prototype.getAssets=function(t,e){return this.http.get("/api/assets?assetIds=".concat(t.join(",")),nr(e))},t.prototype.getAssetInfo=function(t,e){return this.http.get("/api/asset/info/".concat(t),nr(e))},t.prototype.saveAsset=function(t,e){return this.http.post("/api/asset",t,nr(e))},t.prototype.deleteAsset=function(t,e){return this.http.delete("/api/asset/".concat(t),nr(e))},t.prototype.getAssetTypes=function(t){return this.http.get("/api/asset/types",nr(t))},t.prototype.makeAssetPublic=function(t,e){return this.http.post("/api/customer/public/asset/".concat(t),null,nr(e))},t.prototype.assignAssetToCustomer=function(t,e,n){return this.http.post("/api/customer/".concat(t,"/asset/").concat(e),null,nr(n))},t.prototype.unassignAssetFromCustomer=function(t,e){return this.http.delete("/api/customer/asset/".concat(t),nr(e))},t.prototype.findByQuery=function(t,e){return this.http.post("/api/assets",t,nr(e))},t.prototype.findByName=function(t,e){return this.http.get("/api/tenant/assets?assetName=".concat(t),nr(e))},t.prototype.assignAssetToEdge=function(t,e,n){return this.http.post("/api/edge/".concat(t,"/asset/").concat(e),null,nr(n))},t.prototype.unassignAssetFromEdge=function(t,e,n){return this.http.delete("/api/edge/".concat(t,"/asset/").concat(e),nr(n))},t.prototype.getEdgeAssets=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/edge/".concat(t,"/assets").concat(e.toQuery(),"&type=").concat(n),nr(i))},t.prototype.bulkImportAssets=function(t,e){return this.http.post("/api/asset/bulk_import",t,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),_c=function(){function t(t){this.http=t}return t.prototype.getEntityAttributes=function(t,e,n,i){var r="/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/values/attributes");return e&&(r+="/".concat(e)),n&&n.length&&(r+="?keys=".concat(n.join(","))),this.http.get(r,nr(i))},t.prototype.deleteEntityAttributes=function(t,e,n,i){var r=n.map((function(t){return encodeURIComponent(t.key)})).join(",");return this.http.delete("/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/").concat(e)+"?keys=".concat(r),nr(i))},t.prototype.deleteEntityTimeseries=function(t,e,n,i,r,a,o,s){void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===o&&(o=!0);var u=e.map((function(t){return encodeURIComponent(t.key)})).join(","),c="/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/timeseries/delete?keys=").concat(u);return kr(n)&&(c+="&deleteAllDataForKeys=".concat(n)),kr(a)&&(c+="&rewriteLatestIfDeleted=".concat(a)),kr(o)&&(c+="&deleteLatest=".concat(o)),kr(i)&&(c+="&startTs=".concat(i)),kr(r)&&(c+="&endTs=".concat(r)),this.http.delete(c,nr(s))},t.prototype.saveEntityAttributes=function(t,e,n,i){var r,a={},o=[];return n.forEach((function(t){kr(t.value)?a[t.key]=t.value:o.push(t)})),r=o.length?this.deleteEntityAttributes(t,e,o,i):Un(null),zn([Object.keys(a).length?this.http.post("/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/").concat(e),a,nr(i)):Un(null),r])},t.prototype.saveEntityTimeseries=function(t,e,n,i){var r,a={},o=[];return n.forEach((function(t){kr(t.value)?a[t.key]=t.value:o.push(t)})),r=o.length?this.deleteEntityTimeseries(t,o,!0,null,null,!1,!0,i):Un(null),zn([Object.keys(a).length?this.http.post("/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/timeseries/").concat(e),a,nr(i)):Un(null),r])},t.prototype.getEntityTimeseries=function(t,e,n,i,r,a,o,s,u,c){void 0===r&&(r=100),void 0===a&&(a=ns.NONE),void 0===s&&(s=Za.DESC),void 0===u&&(u=!1);var l="/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/values/timeseries?keys=").concat(e.join(","),"&startTs=").concat(n,"&endTs=").concat(i);return kr(r)&&(l+="&limit=".concat(r)),kr(a)&&(l+="&agg=".concat(a)),kr(o)&&(l+="&interval=".concat(o)),kr(s)&&(l+="&orderBy=".concat(s)),kr(u)&&(l+="&useStrictDataTypes=".concat(u)),this.http.get(l,nr(c))},t.prototype.getEntityTimeseriesLatest=function(t,e,n,i){void 0===n&&(n=!1);var r="/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/values/timeseries?useStrictDataTypes=").concat(n);return kr(e)&&e.length&&(r+="&keys=".concat(e.join(","))),this.http.get(r,nr(i))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Ac=function(){function t(t){this.http=t}return t.prototype.getAuditLogs=function(t,e){return this.http.get("/api/audit/logs".concat(t.toQuery()),nr(e))},t.prototype.getAuditLogsByCustomerId=function(t,e,n){return this.http.get("/api/audit/logs/customer/".concat(t).concat(e.toQuery()),nr(n))},t.prototype.getAuditLogsByUserId=function(t,e,n){return this.http.get("/api/audit/logs/user/".concat(t).concat(e.toQuery()),nr(n))},t.prototype.getAuditLogsByEntityId=function(t,e,n){return this.http.get("/api/audit/logs/entity/".concat(t.entityType,"/").concat(t.id).concat(e.toQuery()),nr(n))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),wc=function(){function t(t){this.http=t}return t.prototype.getCustomers=function(t,e){return this.http.get("/api/customers".concat(t.toQuery()),nr(e))},t.prototype.getCustomer=function(t,e){return this.http.get("/api/customer/".concat(t),nr(e))},t.prototype.saveCustomer=function(t,e){return this.http.post("/api/customer",t,nr(e))},t.prototype.deleteCustomer=function(t,e){return this.http.delete("/api/customer/".concat(t),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Ic=function(){function t(t){this.http=t}return t.prototype.getDeviceInfosByQuery=function(t,e){return this.http.get("/api".concat(t.toQuery()),nr(e))},t.prototype.getTenantDeviceInfos=function(t,e,n){return void 0===e&&(e=""),this.http.get("/api/tenant/deviceInfos".concat(t.toQuery(),"&type=").concat(e),nr(n))},t.prototype.getTenantDeviceInfosByDeviceProfileId=function(t,e,n){return void 0===e&&(e=""),this.http.get("/api/tenant/deviceInfos".concat(t.toQuery(),"&deviceProfileId=").concat(e),nr(n))},t.prototype.getCustomerDeviceInfos=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/customer/".concat(t,"/deviceInfos").concat(e.toQuery(),"&type=").concat(n),nr(i))},t.prototype.getCustomerDeviceInfosByDeviceProfileId=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/customer/".concat(t,"/deviceInfos").concat(e.toQuery(),"&deviceProfileId=").concat(n),nr(i))},t.prototype.getDevice=function(t,e){return this.http.get("/api/device/".concat(t),nr(e))},t.prototype.getDevices=function(t,e){return this.http.get("/api/devices?deviceIds=".concat(t.join(",")),nr(e))},t.prototype.getDeviceInfo=function(t,e){return this.http.get("/api/device/info/".concat(t),nr(e))},t.prototype.saveDevice=function(t,e){return this.http.post("/api/device",t,nr(e))},t.prototype.saveDeviceWithCredentials=function(t,e,n){return this.http.post("/api/device-with-credentials",{device:t,credentials:e},nr(n))},t.prototype.deleteDevice=function(t,e){return this.http.delete("/api/device/".concat(t),nr(e))},t.prototype.getDeviceTypes=function(t){return this.http.get("/api/device/types",nr(t))},t.prototype.getDeviceCredentials=function(t,e,n){void 0===e&&(e=!1);var i="/api/device/".concat(t,"/credentials");if(e){var r=new sn,a=new XMLHttpRequest;a.open("GET",i,!1),a.setRequestHeader("Accept","application/json, text/plain, */*");var o=Ec.getJwtToken();if(o&&a.setRequestHeader("X-Authorization","Bearer "+o),a.send(null),200===a.status){var s=JSON.parse(a.responseText);r.next(s)}else r.error(null);return r.asObservable()}return this.http.get(i,nr(n))},t.prototype.saveDeviceCredentials=function(t,e){return this.http.post("/api/device/credentials",t,nr(e))},t.prototype.makeDevicePublic=function(t,e){return this.http.post("/api/customer/public/device/".concat(t),null,nr(e))},t.prototype.assignDeviceToCustomer=function(t,e,n){return this.http.post("/api/customer/".concat(t,"/device/").concat(e),null,nr(n))},t.prototype.unassignDeviceFromCustomer=function(t,e){return this.http.delete("/api/customer/device/".concat(t),nr(e))},t.prototype.sendOneWayRpcCommand=function(t,e,n){return this.http.post("/api/rpc/oneway/".concat(t),e,nr(n))},t.prototype.sendTwoWayRpcCommand=function(t,e,n){return this.http.post("/api/rpc/twoway/".concat(t),e,nr(n))},t.prototype.getPersistedRpc=function(t,e,n){return this.http.get("/api/rpc/persistent/".concat(t),nr(n))},t.prototype.deletePersistedRpc=function(t,e){return this.http.delete("/api/rpc/persistent/".concat(t),nr(e))},t.prototype.getPersistedRpcRequests=function(t,e,n,i){var r="/api/rpc/persistent/device/".concat(t).concat(e.toQuery());return n&&n.length&&(r+="&rpcStatus=".concat(n)),this.http.get(r,nr(i))},t.prototype.findByQuery=function(t,e){return this.http.post("/api/devices",t,nr(e))},t.prototype.findByName=function(t,e){return this.http.get("/api/tenant/devices?deviceName=".concat(t),nr(e))},t.prototype.claimDevice=function(t,e,n){return this.http.post("/api/customer/device/".concat(t,"/claim"),e,nr(n))},t.prototype.unclaimDevice=function(t,e){return this.http.delete("/api/customer/device/".concat(t,"/claim"),nr(e))},t.prototype.assignDeviceToEdge=function(t,e,n){return this.http.post("/api/edge/".concat(t,"/device/").concat(e),nr(n))},t.prototype.unassignDeviceFromEdge=function(t,e,n){return this.http.delete("/api/edge/".concat(t,"/device/").concat(e),nr(n))},t.prototype.getEdgeDevices=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/edge/".concat(t,"/devices").concat(e.toQuery(),"&type=").concat(n),nr(i))},t.prototype.bulkImportDevices=function(t,e){return this.http.post("/api/device/bulk_import",t,nr(e))},t.prototype.getDevicePublishTelemetryCommands=function(t,e){return this.http.get("/api/device-connectivity/".concat(t),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Dc=function(){function t(t){this.http=t}return t.prototype.saveRelation=function(t,e){return this.http.post("/api/relation",t,nr(e))},t.prototype.deleteRelation=function(t,e,n,i){return this.http.delete("/api/relation?fromId=".concat(t.id,"&fromType=").concat(t.entityType)+"&relationType=".concat(e,"&toId=").concat(n.id,"&toType=").concat(n.entityType),nr(i))},t.prototype.deleteRelations=function(t,e){return this.http.delete("/api/relations?entityId=".concat(t.id,"&entityType=").concat(t.entityType),nr(e))},t.prototype.getRelation=function(t,e,n,i){return this.http.get("/api/relation?fromId=".concat(t.id,"&fromType=").concat(t.entityType)+"&relationType=".concat(e,"&toId=").concat(n.id,"&toType=").concat(n.entityType),nr(i))},t.prototype.findByFrom=function(t,e){return this.http.get("/api/relations?fromId=".concat(t.id,"&fromType=").concat(t.entityType),nr(e))},t.prototype.findInfoByFrom=function(t,e){return this.http.get("/api/relations/info?fromId=".concat(t.id,"&fromType=").concat(t.entityType),nr(e))},t.prototype.findByFromAndType=function(t,e,n){return this.http.get("/api/relations?fromId=".concat(t.id,"&fromType=").concat(t.entityType,"&relationType=").concat(e),nr(n))},t.prototype.findByTo=function(t,e){return this.http.get("/api/relations?toId=".concat(t.id,"&toType=").concat(t.entityType),nr(e))},t.prototype.findInfoByTo=function(t,e){return this.http.get("/api/relations/info?toId=".concat(t.id,"&toType=").concat(t.entityType),nr(e))},t.prototype.findByToAndType=function(t,e,n){return this.http.get("/api/relations?toId=".concat(t.id,"&toType=").concat(t.entityType,"&relationType=").concat(e),nr(n))},t.prototype.findByQuery=function(t,e){return this.http.post("/api/relations",t,nr(e))},t.prototype.findInfoByQuery=function(t,e){return this.http.post("/api/relations/info",t,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Rc=function(){function t(t){this.http=t}return t.prototype.getTenantEntityViewInfos=function(t,e,n){return void 0===e&&(e=""),this.http.get("/api/tenant/entityViewInfos".concat(t.toQuery(),"&type=").concat(e),nr(n))},t.prototype.getCustomerEntityViewInfos=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/customer/".concat(t,"/entityViewInfos").concat(e.toQuery(),"&type=").concat(n),nr(i))},t.prototype.getEntityView=function(t,e){return this.http.get("/api/entityView/".concat(t),nr(e))},t.prototype.getEntityViewInfo=function(t,e){return this.http.get("/api/entityView/info/".concat(t),nr(e))},t.prototype.saveEntityView=function(t,e){return this.http.post("/api/entityView",t,nr(e))},t.prototype.deleteEntityView=function(t,e){return this.http.delete("/api/entityView/".concat(t),nr(e))},t.prototype.getEntityViewTypes=function(t){return this.http.get("/api/entityView/types",nr(t))},t.prototype.makeEntityViewPublic=function(t,e){return this.http.post("/api/customer/public/entityView/".concat(t),null,nr(e))},t.prototype.assignEntityViewToCustomer=function(t,e,n){return this.http.post("/api/customer/".concat(t,"/entityView/").concat(e),null,nr(n))},t.prototype.unassignEntityViewFromCustomer=function(t,e){return this.http.delete("/api/customer/entityView/".concat(t),nr(e))},t.prototype.findByQuery=function(t,e){return this.http.post("/api/entityViews",t,nr(e))},t.prototype.assignEntityViewToEdge=function(t,e,n){return this.http.post("/api/edge/".concat(t,"/entityView/").concat(e),null,nr(n))},t.prototype.unassignEntityViewFromEdge=function(t,e,n){return this.http.delete("/api/edge/".concat(t,"/entityView/").concat(e),nr(n))},t.prototype.getEdgeEntityViews=function(t,e,n,i){return void 0===n&&(n=""),this.http.get("/api/edge/".concat(t,"/entityViews").concat(e.toQuery(),"&type=").concat(n),nr(i))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();function Nc(){return{data:[],totalPages:0,totalElements:0,hasNext:!1}}!function(t){t.ASC="ASC",t.DESC="DESC"}(yc||(yc={}));function Oc(t){return function(e,n){return Cc(e,n,t)}}var Cc=function(t,e,n){var i,r;if(null===e||!e.length)return!0;var a=(""+e).toLowerCase();if(n&&n.length){if(Object.prototype.hasOwnProperty.call(t,n)&&null!==(u=t[n])&&u!==Object(u)&&-1!==(""+u).toLowerCase().indexOf(a))return!0}else try{for(var o=ve(Object.keys(t)),s=o.next();!s.done;s=o.next()){var u;if(null!==(u=t[s.value]))if(u!==Object(u)){if(-1!==(""+u).toLowerCase().indexOf(a))return!0}else if(Pr(u)&&Cc(u,e))return!0}}catch(t){i={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return!1};function Mc(t,e,n,i){var r=ra(t,n),a=ra(e,n),o=0;if(r!==a){var s=typeof r,u=typeof a;"number"===s&&"number"===u?o=r-a:"string"===s&&"string"===u?o=r.localeCompare(a):("boolean"===s&&"boolean"===u||s!==u)&&(r&&!a?o=1:!r&&a&&(o=-1))}return i?o:-1*o}var kc,Lc=function(){function t(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=null),void 0===i&&(i=null),this.textSearch=n,this.pageSize=t,this.page=e,this.sortOrder=i}return t.prototype.nextPageLink=function(){return new t(this.pageSize,this.page+1,this.textSearch,this.sortOrder)},t.prototype.toQuery=function(){var t,e="?pageSize=".concat(this.pageSize,"&page=").concat(this.page),n=null===(t=this.textSearch)||void 0===t?void 0:t.trim();if(null==n?void 0:n.length){var i=encodeURIComponent(n);e+="&textSearch=".concat(i)}return this.sortOrder&&(e+="&sortProperty=".concat(this.sortOrder.property,"&sortOrder=").concat(this.sortOrder.direction)),e},t.prototype.sort=function(t,e){return this.sortOrder?Mc(t,e,this.sortOrder.property,this.sortOrder.direction===yc.ASC):0},t.prototype.filterData=function(t,e){var n=this;void 0===e&&(e=Oc());var i={data:[],totalPages:0,totalElements:0,hasNext:!1};if(i.data=Ee([],Te(t),!1),this.textSearch&&this.textSearch.length&&(i.data=i.data.filter((function(t){return e(t,n.textSearch)}))),i.totalElements=i.data.length,i.totalPages=this.pageSize===Number.POSITIVE_INFINITY?1:Math.ceil(i.totalElements/this.pageSize),this.sortOrder){var r=this.sortOrder.property,a=this.sortOrder.direction===yc.ASC;i.data=i.data.sort((function(t,e){return Mc(t,e,r,a)}))}if(this.pageSize!==Number.POSITIVE_INFINITY){var o=this.pageSize*this.page;i.data=i.data.slice(o,o+this.pageSize),i.hasNext=i.totalElements>o+i.data.length}return i},t.prototype.sortDirection=function(){return this.sortOrder?(this.sortOrder.direction+"").toLowerCase():""},t}(),Uc=function(t){function e(e,n,i,r,a,o){void 0===n&&(n=0),void 0===i&&(i=null),void 0===r&&(r=null),void 0===a&&(a=null),void 0===o&&(o=null);var s=t.call(this,e,n,i,r)||this;return s.startTime=a,s.endTime=o,s}return pe(e,t),e.prototype.nextPageLink=function(){return new e(this.pageSize,this.page+1,this.textSearch,this.sortOrder,this.startTime,this.endTime)},e.prototype.toQuery=function(){var e=t.prototype.toQuery.call(this);return this.startTime&&(e+="&startTime=".concat(this.startTime)),this.endTime&&(e+="&endTime=".concat(this.endTime)),e},e}(Lc),Pc=function(){function t(t){this.http=t}return t.prototype.getTenants=function(t,e){return this.http.get("/api/tenants".concat(t.toQuery()),nr(e))},t.prototype.getTenantInfos=function(t,e){return this.http.get("/api/tenantInfos".concat(t.toQuery()),nr(e))},t.prototype.getTenant=function(t,e){return this.http.get("/api/tenant/".concat(t),nr(e))},t.prototype.getTenantInfo=function(t,e){return this.http.get("/api/tenant/info/".concat(t),nr(e))},t.prototype.saveTenant=function(t,e){return this.http.post("/api/tenant",t,nr(e))},t.prototype.deleteTenant=function(t,e){return this.http.delete("/api/tenant/".concat(t),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();!function(t){t.singleEntity="singleEntity",t.entityList="entityList",t.entityName="entityName",t.entityType="entityType",t.stateEntity="stateEntity",t.assetType="assetType",t.deviceType="deviceType",t.edgeType="edgeType",t.entityViewType="entityViewType",t.apiUsageState="apiUsageState",t.relationsQuery="relationsQuery",t.assetSearchQuery="assetSearchQuery",t.deviceSearchQuery="deviceSearchQuery",t.edgeSearchQuery="edgeSearchQuery",t.entityViewSearchQuery="entityViewSearchQuery"}(kc||(kc={}));var xc,Fc,Wc,Vc,jc,Yc,Hc,Bc=new Array(kc.edgeType,kc.edgeSearchQuery),Kc=new Map([[kc.singleEntity,"alias.filter-type-single-entity"],[kc.entityList,"alias.filter-type-entity-list"],[kc.entityName,"alias.filter-type-entity-name"],[kc.entityType,"alias.filter-type-entity-type"],[kc.stateEntity,"alias.filter-type-state-entity"],[kc.assetType,"alias.filter-type-asset-type"],[kc.deviceType,"alias.filter-type-device-type"],[kc.edgeType,"alias.filter-type-edge-type"],[kc.entityViewType,"alias.filter-type-entity-view-type"],[kc.apiUsageState,"alias.filter-type-apiUsageState"],[kc.relationsQuery,"alias.filter-type-relations-query"],[kc.assetSearchQuery,"alias.filter-type-asset-search-query"],[kc.deviceSearchQuery,"alias.filter-type-device-search-query"],[kc.edgeSearchQuery,"alias.filter-type-edge-search-query"],[kc.entityViewSearchQuery,"alias.filter-type-entity-view-search-query"]]);!function(t){t.PSM="PSM",t.DRX="DRX",t.E_DRX="E_DRX"}(xc||(xc={})),function(t){t.DEFAULT="DEFAULT",t.SNMP="SNMP"}(Fc||(Fc={})),function(t){t.DEFAULT="DEFAULT",t.MQTT="MQTT",t.COAP="COAP",t.LWM2M="LWM2M",t.SNMP="SNMP"}(Wc||(Wc={})),function(t){t.HTTP="HTTP"}(Vc||(Vc={})),function(t){t.JSON="JSON",t.PROTOBUF="PROTOBUF"}(jc||(jc={})),function(t){t.DEFAULT="DEFAULT",t.EFENTO="EFENTO"}(Yc||(Yc={})),function(t){t.DISABLED="DISABLED",t.ALLOW_CREATE_NEW_DEVICES="ALLOW_CREATE_NEW_DEVICES",t.CHECK_PRE_PROVISIONED_DEVICES="CHECK_PRE_PROVISIONED_DEVICES",t.X509_CERTIFICATE_CHAIN="X509_CERTIFICATE_CHAIN"}(Hc||(Hc={}));var Gc,qc=new Map([[Fc.DEFAULT,"device-profile.type-default"]]),zc=new Map([[Fc.DEFAULT,{hasProfileConfiguration:!1,hasDeviceConfiguration:!1}],[Fc.SNMP,{hasProfileConfiguration:!0,hasDeviceConfiguration:!0}]]),Qc=new Map([[Wc.DEFAULT,"device-profile.transport-type-default"],[Wc.MQTT,"device-profile.transport-type-mqtt"],[Wc.COAP,"device-profile.transport-type-coap"],[Wc.LWM2M,"device-profile.transport-type-lwm2m"],[Wc.SNMP,"device-profile.transport-type-snmp"],[Vc.HTTP,"device-profile.transport-type-http"]]),Jc=new Map([[Hc.DISABLED,"device-profile.provision-strategy-disabled"],[Hc.ALLOW_CREATE_NEW_DEVICES,"device-profile.provision-strategy-created-new"],[Hc.CHECK_PRE_PROVISIONED_DEVICES,"device-profile.provision-strategy-check-pre-provisioned"],[Hc.X509_CERTIFICATE_CHAIN,"device-profile.provision-strategy-x509.certificate-chain"]]),Xc=new Map([[Wc.DEFAULT,"device-profile.transport-type-default-hint"],[Wc.MQTT,"device-profile.transport-type-mqtt-hint"],[Wc.COAP,"device-profile.transport-type-coap-hint"],[Wc.LWM2M,"device-profile.transport-type-lwm2m-hint"],[Wc.SNMP,"device-profile.transport-type-snmp-hint"],[Vc.HTTP,""]]),$c=new Map([[jc.JSON,"device-profile.transport-device-payload-type-json"],[jc.PROTOBUF,"device-profile.transport-device-payload-type-proto"]]),Zc=new Map([[Yc.DEFAULT,"device-profile.coap-device-type-default"],[Yc.EFENTO,"device-profile.coap-device-type-efento"]]),tl=new Map([[Wc.DEFAULT,{hasProfileConfiguration:!1,hasDeviceConfiguration:!1}],[Wc.MQTT,{hasProfileConfiguration:!0,hasDeviceConfiguration:!1}],[Wc.LWM2M,{hasProfileConfiguration:!0,hasDeviceConfiguration:!0}],[Wc.COAP,{hasProfileConfiguration:!0,hasDeviceConfiguration:!0}],[Wc.SNMP,{hasProfileConfiguration:!0,hasDeviceConfiguration:!0}]]);!function(t){t.TELEMETRY_QUERYING="TELEMETRY_QUERYING",t.CLIENT_ATTRIBUTES_QUERYING="CLIENT_ATTRIBUTES_QUERYING",t.SHARED_ATTRIBUTES_SETTING="SHARED_ATTRIBUTES_SETTING",t.TO_DEVICE_RPC_REQUEST="TO_DEVICE_RPC_REQUEST",t.TO_SERVER_RPC_REQUEST="TO_SERVER_RPC_REQUEST"}(Gc||(Gc={}));var el,nl=new Map([[Gc.TELEMETRY_QUERYING," Telemetry (SNMP GET)"],[Gc.CLIENT_ATTRIBUTES_QUERYING,"Client attributes (SNMP GET)"],[Gc.SHARED_ATTRIBUTES_SETTING,"Shared attributes (SNMP SET)"],[Gc.TO_DEVICE_RPC_REQUEST,"To-device RPC request (SNMP GET/SET)"],[Gc.TO_SERVER_RPC_REQUEST,"From-device RPC request (SNMP TRAP)"]]);!function(t){t.SIMPLE="SIMPLE",t.DURATION="DURATION",t.REPEATING="REPEATING"}(el||(el={}));var il,rl=new Map([[el.SIMPLE,"device-profile.condition-type-simple"],[el.DURATION,"device-profile.condition-type-duration"],[el.REPEATING,"device-profile.condition-type-repeating"]]);!function(t){t.ANY_TIME="ANY_TIME",t.SPECIFIC_TIME="SPECIFIC_TIME",t.CUSTOM="CUSTOM"}(il||(il={}));var al,ol,sl=new Map([[il.ANY_TIME,"device-profile.schedule-any-time"],[il.SPECIFIC_TIME,"device-profile.schedule-specific-time"],[il.CUSTOM,"device-profile.schedule-custom"]]),ul=function(t){return!!(t&&t.condition&&t.condition.condition&&t.condition.condition.length)};!function(t){t.V1="V1",t.V2C="V2C",t.V3="V3"}(al||(al={})),function(t){t.SHA_1="SHA_1",t.SHA_224="SHA_224",t.SHA_256="SHA_256",t.SHA_384="SHA_384",t.SHA_512="SHA_512",t.MD5="MD%"}(ol||(ol={}));var cl,ll=new Map([[ol.SHA_1,"SHA-1"],[ol.SHA_224,"SHA-224"],[ol.SHA_256,"SHA-256"],[ol.SHA_384,"SHA-384"],[ol.SHA_512,"SHA-512"],[ol.MD5,"MD5"]]);!function(t){t.DES="DES",t.AES_128="AES_128",t.AES_192="AES_192",t.AES_256="AES_256"}(cl||(cl={}));var pl,dl=new Map([[cl.DES,"DES"],[cl.AES_128,"AES-128"],[cl.AES_192,"AES-192"],[cl.AES_256,"AES-256"]]),fl=function(){function t(t,e){this.pageLink=t,this.deviceInfoFilter=e}return t.prototype.toQuery=function(){var t;return t=this.deviceInfoFilter.customerId?"/customer/".concat(this.deviceInfoFilter.customerId.id,"/deviceInfos"):this.deviceInfoFilter.edgeId?"/edge/".concat(this.deviceInfoFilter.edgeId.id,"/devices"):"/tenant/deviceInfos",t+=this.pageLink.toQuery(),Ur(this.deviceInfoFilter.type)?t+="&type=".concat(this.deviceInfoFilter.type):this.deviceInfoFilter.deviceProfileId&&(t+="&deviceProfileId=".concat(this.deviceInfoFilter.deviceProfileId.id)),kr(this.deviceInfoFilter.active)&&(t+="&active=".concat(this.deviceInfoFilter.active)),t},t}();!function(t){t.ACCESS_TOKEN="ACCESS_TOKEN",t.X509_CERTIFICATE="X509_CERTIFICATE",t.MQTT_BASIC="MQTT_BASIC",t.LWM2M_CREDENTIALS="LWM2M_CREDENTIALS"}(pl||(pl={}));var hl,yl=new Map([[pl.ACCESS_TOKEN,"Access token"],[pl.X509_CERTIFICATE,"X.509"],[pl.MQTT_BASIC,"MQTT Basic"],[pl.LWM2M_CREDENTIALS,"LwM2M Credentials"]]),ml=new Map([[Wc.DEFAULT,[pl.ACCESS_TOKEN,pl.X509_CERTIFICATE,pl.MQTT_BASIC]],[Wc.MQTT,[pl.ACCESS_TOKEN,pl.X509_CERTIFICATE,pl.MQTT_BASIC]],[Wc.COAP,[pl.ACCESS_TOKEN,pl.X509_CERTIFICATE]],[Wc.LWM2M,[pl.LWM2M_CREDENTIALS]],[Wc.SNMP,[pl.ACCESS_TOKEN]]]);!function(t){t.SUCCESS="SUCCESS",t.FAILURE="FAILURE",t.CLAIMED="CLAIMED"}(hl||(hl={}));var gl,vl=new Array("device-profile.schedule-day.monday","device-profile.schedule-day.tuesday","device-profile.schedule-day.wednesday","device-profile.schedule-day.thursday","device-profile.schedule-day.friday","device-profile.schedule-day.saturday","device-profile.schedule-day.sunday"),Tl=function(t){return _a("number"==typeof t||null===t?[1970,0,1,0,0,0,0]:[1970,0,1,t.getHours(),t.getMinutes(),0,0])};!function(t){t.ATTRIBUTE="ATTRIBUTE",t.CLIENT_ATTRIBUTE="CLIENT_ATTRIBUTE",t.SHARED_ATTRIBUTE="SHARED_ATTRIBUTE",t.SERVER_ATTRIBUTE="SERVER_ATTRIBUTE",t.TIME_SERIES="TIME_SERIES",t.ENTITY_FIELD="ENTITY_FIELD",t.ALARM_FIELD="ALARM_FIELD",t.CONSTANT="CONSTANT",t.COUNT="COUNT"}(gl||(gl={}));var El,bl=new Map([[gl.ATTRIBUTE,"filter.key-type.attribute"],[gl.TIME_SERIES,"filter.key-type.timeseries"],[gl.ENTITY_FIELD,"filter.key-type.entity-field"],[gl.CONSTANT,"filter.key-type.constant"],[gl.CLIENT_ATTRIBUTE,"filter.key-type.client-attribute"],[gl.SERVER_ATTRIBUTE,"filter.key-type.server-attribute"],[gl.SHARED_ATTRIBUTE,"filter.key-type.shared-attribute"]]);function Sl(t){switch(t){case gl.ATTRIBUTE:case gl.CLIENT_ATTRIBUTE:case gl.SHARED_ATTRIBUTE:case gl.SERVER_ATTRIBUTE:return ja.attribute;case gl.TIME_SERIES:return ja.timeseries;case gl.ENTITY_FIELD:return ja.entityField;case gl.ALARM_FIELD:return ja.alarm;case gl.COUNT:return ja.count}}function _l(t){switch(t){case ja.timeseries:return gl.TIME_SERIES;case ja.attribute:return gl.ATTRIBUTE;case ja.function:return gl.ENTITY_FIELD;case ja.alarm:return gl.ALARM_FIELD;case ja.entityField:return gl.ENTITY_FIELD;case ja.count:return gl.COUNT}}function Al(t){return{key:t.name,type:_l(t.type)}}!function(t){t.STRING="STRING",t.NUMERIC="NUMERIC",t.BOOLEAN="BOOLEAN",t.DATE_TIME="DATE_TIME"}(El||(El={}));var wl,Il,Dl=new Map([[El.STRING,{name:"filter.value-type.string",icon:"mdi:format-text"}],[El.NUMERIC,{name:"filter.value-type.numeric",icon:"mdi:numeric"}],[El.BOOLEAN,{name:"filter.value-type.boolean",icon:"mdi:checkbox-marked-outline"}],[El.DATE_TIME,{name:"filter.value-type.date-time",icon:"mdi:calendar-clock"}]]);function Rl(t){switch(t){case El.STRING:return wl.STRING;case El.NUMERIC:case El.DATE_TIME:return wl.NUMERIC;case El.BOOLEAN:return wl.BOOLEAN}}function Nl(){return{editable:!0,label:"",autogeneratedLabel:!0,order:0}}function Ol(t,e){var n={type:e?wl.COMPLEX:Rl(t)};switch(n.type){case wl.STRING:n.operation=Il.STARTS_WITH,n.value={defaultValue:""},n.ignoreCase=!1;break;case wl.NUMERIC:n.operation=Cl.EQUAL,n.value={defaultValue:t===El.DATE_TIME?Date.now():0};break;case wl.BOOLEAN:n.operation=kl.EQUAL,n.value={defaultValue:!1};break;case wl.COMPLEX:n.operation=Ul.AND,n.predicates=[]}return n}!function(t){t.STRING="STRING",t.NUMERIC="NUMERIC",t.BOOLEAN="BOOLEAN",t.COMPLEX="COMPLEX"}(wl||(wl={})),function(t){t.EQUAL="EQUAL",t.NOT_EQUAL="NOT_EQUAL",t.STARTS_WITH="STARTS_WITH",t.ENDS_WITH="ENDS_WITH",t.CONTAINS="CONTAINS",t.NOT_CONTAINS="NOT_CONTAINS",t.IN="IN",t.NOT_IN="NOT_IN"}(Il||(Il={}));var Cl,Ml=new Map([[Il.EQUAL,"filter.operation.equal"],[Il.NOT_EQUAL,"filter.operation.not-equal"],[Il.STARTS_WITH,"filter.operation.starts-with"],[Il.ENDS_WITH,"filter.operation.ends-with"],[Il.CONTAINS,"filter.operation.contains"],[Il.NOT_CONTAINS,"filter.operation.not-contains"],[Il.IN,"filter.operation.in"],[Il.NOT_IN,"filter.operation.not-in"]]);!function(t){t.EQUAL="EQUAL",t.NOT_EQUAL="NOT_EQUAL",t.GREATER="GREATER",t.LESS="LESS",t.GREATER_OR_EQUAL="GREATER_OR_EQUAL",t.LESS_OR_EQUAL="LESS_OR_EQUAL"}(Cl||(Cl={}));var kl,Ll=new Map([[Cl.EQUAL,"filter.operation.equal"],[Cl.NOT_EQUAL,"filter.operation.not-equal"],[Cl.GREATER,"filter.operation.greater"],[Cl.LESS,"filter.operation.less"],[Cl.GREATER_OR_EQUAL,"filter.operation.greater-or-equal"],[Cl.LESS_OR_EQUAL,"filter.operation.less-or-equal"]]);!function(t){t.EQUAL="EQUAL",t.NOT_EQUAL="NOT_EQUAL"}(kl||(kl={}));var Ul,Pl=new Map([[kl.EQUAL,"filter.operation.equal"],[kl.NOT_EQUAL,"filter.operation.not-equal"]]);!function(t){t.AND="AND",t.OR="OR"}(Ul||(Ul={}));var xl,Fl=new Map([[Ul.AND,"filter.operation.and"],[Ul.OR,"filter.operation.or"]]);!function(t){t.CURRENT_TENANT="CURRENT_TENANT",t.CURRENT_CUSTOMER="CURRENT_CUSTOMER",t.CURRENT_USER="CURRENT_USER",t.CURRENT_DEVICE="CURRENT_DEVICE"}(xl||(xl={}));var Wl=new Map([[xl.CURRENT_TENANT,"filter.current-tenant"],[xl.CURRENT_CUSTOMER,"filter.current-customer"],[xl.CURRENT_USER,"filter.current-user"],[xl.CURRENT_DEVICE,"filter.current-device"]]),Vl=[xl.CURRENT_CUSTOMER,xl.CURRENT_DEVICE];function jl(t,e,n,i){return Yl(t,e,n,n.predicate,i)}function Yl(t,e,n,i,r){if(i.type===wl.COMPLEX){var a=i,o=a.operation,s=a.predicates.map((function(i){return Yl(t,e,n,i,o)}));if(s.length>1){var u=t.instant(Fl.get(o)),c=s.join(' <span class="tb-filter-complex-operation">'+u+"</span> ");return o===Ul.OR&&r&&Ul.OR!==r&&(c='<span class="tb-filter-bracket"><span class="tb-left-bracket">(</span>'.concat(c,'<span class="tb-right-bracket">)</span></span>')),c}return s[0]}return function(t,e,n,i){var r,a,o=n.key.key,s=i.value,u=!!s.dynamicValue&&!!s.dynamicValue.sourceType;u&&(a='<span class="tb-filter-dynamic-value"><span class="tb-filter-dynamic-source">'+t.instant(Wl.get(s.dynamicValue.sourceType))+"</span>",a+='.<span class="tb-filter-value">'+s.dynamicValue.sourceAttribute+"</span></span>");switch(i.type){case wl.STRING:r=t.instant(Ml.get(i.operation)),i.ignoreCase&&(r+=" "+t.instant("filter.ignore-case")),u||(a="'".concat(i.value.defaultValue,"'"));break;case wl.NUMERIC:r=t.instant(Ll.get(i.operation)),u||(a=n.valueType===El.DATE_TIME?e.transform(i.value.defaultValue,"yyyy-MM-dd HH:mm"):i.value.defaultValue+"");break;case wl.BOOLEAN:r=t.instant(Pl.get(i.operation)),u||(a=t.instant(i.value.defaultValue?"value.true":"value.false"))}u||(a='<span class="tb-filter-value">'.concat(a,"</span>"));return'<span class="tb-filter-predicate"><span class="tb-filter-entity-key">'.concat(o,'</span> <span class="tb-filter-simple-operation">').concat(r,"</span> ").concat(a,"</span>")}(t,e,n,i)}function Hl(t){var e,n,i,r,a=t.keyFilters,o=[];try{for(var s=ve(a),u=s.next();!u.done;u=s.next()){var c=u.value,l=c.key;try{for(var p=(i=void 0,ve(c.predicates)),d=p.next();!d.done;d=p.next()){var f=d.value,h={key:l,valueType:c.valueType,value:c.value,predicate:Bl(f)};o.push(h)}}catch(t){i={error:t}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o}function Bl(t){var e=t.keyFilterPredicate;if(e.type===wl.COMPLEX){var n=e,i=n.predicates.map((function(t){return Bl(t)}));e={type:wl.COMPLEX,operation:n.operation,predicates:i}}return e}function Kl(t){var e={keyFilterPredicate:null,userInfo:null};if(t.type===wl.COMPLEX){var n=t,i=n.predicates.map((function(t){return Kl(t)}));e.keyFilterPredicate={predicates:i,operation:n.operation,type:wl.COMPLEX}}else e.keyFilterPredicate=t;return e}function Gl(t){return t.predicates.some((function(t){return ql(t)}))}function ql(t){return t.keyFilterPredicate.type===wl.COMPLEX?t.keyFilterPredicate.predicates.some((function(t){return ql(t)})):t.userInfo.editable}function zl(t,e){var n=t.predicates.map((function(n){return Ql(t.key,t.valueType,n,e)}));return[].concat.apply([],n)}function Ql(t,e,n,i){if(n.keyFilterPredicate.type===wl.COMPLEX){var r=n.keyFilterPredicate.predicates.map((function(n){return Ql(t,e,n,i)}));return[].concat.apply([],r)}if(n.userInfo.editable){var a={info:n,label:n.userInfo.label,valueType:e};return n.userInfo.autogeneratedLabel&&(a.label=Jl(t.key,e,n.keyFilterPredicate.operation,i)),[a]}return[]}function Jl(t,e,n,i){var r,a=t;switch(e){case El.STRING:r=Ml.get(n);break;case El.NUMERIC:case El.DATE_TIME:r=Ll.get(n);break;case El.BOOLEAN:r=Pl.get(n)}return a+=" "+i.instant(r)}function Xl(t){return{pageSize:t,page:0,sortOrder:{key:{type:gl.ENTITY_FIELD,key:"createdTime"},direction:yc.DESC}}}var $l=Xl(1),Zl=function(t){return{type:kc.singleEntity,singleEntity:{entityType:ur.DEVICE,id:t}}};function tp(t,e){var n=t.data.map((function(t){return t.entityId.id})),i=e.data.map((function(t){return t.entityId.id}));return!$r(n,i)}var ep,np,ip,rp=[{type:gl.ENTITY_FIELD,key:"name"},{type:gl.ENTITY_FIELD,key:"label"},{type:gl.ENTITY_FIELD,key:"additionalInfo"}];function ap(t){var e={id:t.entityId.id,entityType:t.entityId.entityType};if(t.latest&&t.latest[gl.ENTITY_FIELD]){var n=t.latest[gl.ENTITY_FIELD];if(n.name?e.name=n.name.value:e.name="",n.label?e.label=n.label.value:e.label="",e.entityDescription="",n.additionalInfo){var i=n.additionalInfo.value;if(i&&i.length)try{var r=JSON.parse(i);r&&r.description&&(e.entityDescription=r.description)}catch(t){}}n.queueName&&n.serviceId&&(e.name=n.queueName.value+"_"+n.serviceId.value)}return e}function op(t,e,n){void 0===n&&(n=!1),t.entity={id:{entityType:e.entityType,id:e.id}},t.entityId=e.id,t.entityType=e.entityType,t.type!==zs.entity&&t.type!==zs.entityCount&&t.type!==zs.alarmCount||(t.type===zs.entity&&(t.entityName=e.name,t.entityLabel=e.label,t.name=e.name,t.entityDescription=e.entityDescription,t.entity.label=e.label,t.entity.name=e.name),n&&(t.entityFilter={type:kc.singleEntity,singleEntity:{id:e.id,entityType:e.entityType}}))}!function(t){t.DASHBOARD="DASHBOARD",t.ASSET="ASSET",t.DEVICE="DEVICE",t.DEVICE_PROFILE="DEVICE_PROFILE",t.ASSET_PROFILE="ASSET_PROFILE",t.ENTITY_VIEW="ENTITY_VIEW",t.ALARM="ALARM",t.RULE_CHAIN="RULE_CHAIN",t.RULE_CHAIN_METADATA="RULE_CHAIN_METADATA",t.EDGE="EDGE",t.USER="USER",t.CUSTOMER="CUSTOMER",t.RELATION="RELATION",t.TENANT="TENANT",t.TENANT_PROFILE="TENANT_PROFILE",t.WIDGETS_BUNDLE="WIDGETS_BUNDLE",t.WIDGET_TYPE="WIDGET_TYPE",t.ADMIN_SETTINGS="ADMIN_SETTINGS",t.OTA_PACKAGE="OTA_PACKAGE",t.QUEUE="QUEUE"}(ep||(ep={})),function(t){t.ADDED="ADDED",t.DELETED="DELETED",t.UPDATED="UPDATED",t.POST_ATTRIBUTES="POST_ATTRIBUTES",t.ATTRIBUTES_UPDATED="ATTRIBUTES_UPDATED",t.ATTRIBUTES_DELETED="ATTRIBUTES_DELETED",t.TIMESERIES_UPDATED="TIMESERIES_UPDATED",t.CREDENTIALS_UPDATED="CREDENTIALS_UPDATED",t.ASSIGNED_TO_CUSTOMER="ASSIGNED_TO_CUSTOMER",t.UNASSIGNED_FROM_CUSTOMER="UNASSIGNED_FROM_CUSTOMER",t.RELATION_ADD_OR_UPDATE="RELATION_ADD_OR_UPDATE",t.RELATION_DELETED="RELATION_DELETED",t.RPC_CALL="RPC_CALL",t.ALARM_ACK="ALARM_ACK",t.ALARM_CLEAR="ALARM_CLEAR",t.ALARM_ASSIGNED="ALARM_ASSIGNED",t.ALARM_UNASSIGNED="ALARM_UNASSIGNED",t.ASSIGNED_TO_EDGE="ASSIGNED_TO_EDGE",t.UNASSIGNED_FROM_EDGE="UNASSIGNED_FROM_EDGE",t.CREDENTIALS_REQUEST="CREDENTIALS_REQUEST",t.ENTITY_MERGE_REQUEST="ENTITY_MERGE_REQUEST"}(np||(np={})),function(t){t.DEPLOYED="DEPLOYED",t.PENDING="PENDING"}(ip||(ip={}));var sp,up=new Map([[ep.DASHBOARD,"edge-event.type-dashboard"],[ep.ASSET,"edge-event.type-asset"],[ep.DEVICE,"edge-event.type-device"],[ep.DEVICE_PROFILE,"edge-event.type-device-profile"],[ep.ASSET_PROFILE,"edge-event.type-asset-profile"],[ep.ENTITY_VIEW,"edge-event.type-entity-view"],[ep.ALARM,"edge-event.type-alarm"],[ep.RULE_CHAIN,"edge-event.type-rule-chain"],[ep.RULE_CHAIN_METADATA,"edge-event.type-rule-chain-metadata"],[ep.EDGE,"edge-event.type-edge"],[ep.USER,"edge-event.type-user"],[ep.CUSTOMER,"edge-event.type-customer"],[ep.RELATION,"edge-event.type-relation"],[ep.TENANT,"edge-event.type-tenant"],[ep.TENANT_PROFILE,"edge-event.type-tenant-profile"],[ep.WIDGETS_BUNDLE,"edge-event.type-widgets-bundle"],[ep.WIDGET_TYPE,"edge-event.type-widgets-type"],[ep.ADMIN_SETTINGS,"edge-event.type-admin-settings"],[ep.OTA_PACKAGE,"edge-event.type-ota-package"],[ep.QUEUE,"edge-event.type-queue"]]),cp=new Map([[np.ADDED,"edge-event.action-type-added"],[np.DELETED,"edge-event.action-type-deleted"],[np.UPDATED,"edge-event.action-type-updated"],[np.POST_ATTRIBUTES,"edge-event.action-type-post-attributes"],[np.ATTRIBUTES_UPDATED,"edge-event.action-type-attributes-updated"],[np.ATTRIBUTES_DELETED,"edge-event.action-type-attributes-deleted"],[np.TIMESERIES_UPDATED,"edge-event.action-type-timeseries-updated"],[np.CREDENTIALS_UPDATED,"edge-event.action-type-credentials-updated"],[np.ASSIGNED_TO_CUSTOMER,"edge-event.action-type-assigned-to-customer"],[np.UNASSIGNED_FROM_CUSTOMER,"edge-event.action-type-unassigned-from-customer"],[np.RELATION_ADD_OR_UPDATE,"edge-event.action-type-relation-add-or-update"],[np.RELATION_DELETED,"edge-event.action-type-relation-deleted"],[np.RPC_CALL,"edge-event.action-type-rpc-call"],[np.ALARM_ACK,"edge-event.action-type-alarm-ack"],[np.ALARM_CLEAR,"edge-event.action-type-alarm-clear"],[np.ALARM_ASSIGNED,"edge-event.action-type-alarm-assigned"],[np.ALARM_UNASSIGNED,"edge-event.action-type-alarm-unassigned"],[np.ASSIGNED_TO_EDGE,"edge-event.action-type-assigned-to-edge"],[np.UNASSIGNED_FROM_EDGE,"edge-event.action-type-unassigned-from-edge"],[np.CREDENTIALS_REQUEST,"edge-event.action-type-credentials-request"],[np.ENTITY_MERGE_REQUEST,"edge-event.action-type-entity-merge-request"]]),lp=[np.POST_ATTRIBUTES,np.ATTRIBUTES_UPDATED,np.ATTRIBUTES_DELETED,np.TIMESERIES_UPDATED,np.RPC_CALL],pp=new Map([[ip.DEPLOYED,"#000000"],[ip.PENDING,"#9e9e9e"]]);!function(t){t[t.ubuntu=0]="ubuntu",t[t.centos=1]="centos",t[t.docker=2]="docker"}(sp||(sp={}));var dp;!function(t){t.CONNECTED="CONNECTED",t.DISCONNECTED="DISCONNECTED"}(dp||(dp={}));var fp,hp=new Map([[dp.CONNECTED,"edge.connected"],[dp.DISCONNECTED,"edge.disconnected"]]);!function(t){t.PSK="PSK",t.RPK="RPK",t.X509="X509",t.NO_SEC="NO_SEC"}(fp||(fp={})),new Map([[fp.PSK,"Pre-Shared Key"],[fp.RPK,"Raw Public Key"],[fp.X509,"X.509 Certificate"],[fp.NO_SEC,"No Security"]]),new Map([[fp.PSK,"device.lwm2m-security-config.client-publicKey-or-id-tooltip-psk"],[fp.RPK,"device.lwm2m-security-config.client-publicKey-or-id-tooltip-rpk"],[fp.X509,"device.lwm2m-security-config.client-publicKey-or-id-tooltip-x509"]]),new Map([[fp.PSK,"device.lwm2m-security-config.client-secret-key-tooltip-psk"],[fp.RPK,"device.lwm2m-security-config.client-secret-key-tooltip-prk"],[fp.X509,"device.lwm2m-security-config.client-secret-key-tooltip-x509"]]),new Map([[fp.PSK,"device.lwm2m-security-config.client-secret-key-tooltip-psk"],[fp.RPK,"device.lwm2m-security-config.client-secret-key-tooltip-prk"]]);var yp=function(){function t(t){this.http=t,this.lwm2mBootstrapSecurityInfoInMemoryCache=new Map}return t.prototype.getDeviceProfiles=function(t,e){return this.http.get("/api/deviceProfiles".concat(t.toQuery()),nr(e))},t.prototype.getDeviceProfile=function(t,e){return this.http.get("/api/deviceProfile/".concat(t),nr(e))},t.prototype.exportDeviceProfile=function(t,e){return this.http.get("/api/deviceProfile/".concat(t,"?inlineImages=true"),nr(e))},t.prototype.getLwm2mObjects=function(t,e,n,i){var r="/api/resource/lwm2m?sortProperty=".concat(t.property,"&sortOrder=").concat(t.direction);return kr(e)&&e.length>0&&(r+="&objectIds=".concat(e)),kr(n)&&!Lr(n)&&(r+="&searchText=".concat(n)),this.http.get(r,nr(i))},t.prototype.getLwm2mBootstrapSecurityInfo=function(t,e){var n=this,i=this.lwm2mBootstrapSecurityInfoInMemoryCache.get(t);return i?Un(i):this.http.get("/api/lwm2m/deviceProfile/bootstrap/".concat(t),nr(e)).pipe(pi((function(e){return n.lwm2mBootstrapSecurityInfoInMemoryCache.set(t,e)})))},t.prototype.getLwm2mBootstrapSecurityInfoBySecurityType=function(t,e,n){return void 0===e&&(e=fp.NO_SEC),this.getLwm2mBootstrapSecurityInfo(t,n).pipe(xn((function(t){var n=Xr(t);if(n)switch(e){case fp.PSK:n.port=n.securityPort,n.host=n.securityHost,n.serverPublicKey="";break;case fp.RPK:case fp.X509:n.port=n.securityPort,n.host=n.securityHost;break;case fp.NO_SEC:n.serverPublicKey=""}return n})))},t.prototype.getLwm2mObjectsPage=function(t,e){return this.http.get("/api/resource/lwm2m/page".concat(t.toQuery()),nr(e))},t.prototype.saveDeviceProfile=function(t,e){return this.http.post("/api/deviceProfile",t,nr(e))},t.prototype.deleteDeviceProfile=function(t,e){return this.http.delete("/api/deviceProfile/".concat(t),nr(e))},t.prototype.setDefaultDeviceProfile=function(t,e){return this.http.post("/api/deviceProfile/".concat(t,"/default"),nr(e))},t.prototype.getDefaultDeviceProfileInfo=function(t){return this.http.get("/api/deviceProfileInfo/default",nr(t))},t.prototype.getDeviceProfileInfo=function(t,e){return this.http.get("/api/deviceProfileInfo/".concat(t),nr(e))},t.prototype.getDeviceProfileInfos=function(t,e,n){var i="/api/deviceProfileInfos".concat(t.toQuery());return kr(e)&&(i+="&transportType=".concat(e)),this.http.get(i,nr(n))},t.prototype.getDeviceProfileDevicesAttributesKeys=function(t,e){var n="/api/deviceProfile/devices/keys/attributes";return kr(t)&&(n+="?deviceProfileId=".concat(t)),this.http.get(n,nr(e))},t.prototype.getDeviceProfileDevicesTimeseriesKeys=function(t,e){var n="/api/deviceProfile/devices/keys/timeseries";return kr(t)&&(n+="?deviceProfileId=".concat(t)),this.http.get(n,nr(e))},t.prototype.getDeviceProfileNames=function(t,e){void 0===t&&(t=!1);var n="/api/deviceProfile/names";return kr(t)&&(n+="?activeOnly=".concat(t)),this.http.get(n,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),mp=function(){function t(t){this.http=t,this.parseQueueStatName=function(t){return Object.defineProperty(t,"name",{get:function(){return"".concat(this.queueName," (").concat(this.serviceId,")")}})}}return t.prototype.getQueueById=function(t,e){return this.http.get("/api/queues/".concat(t),nr(e))},t.prototype.getQueueByName=function(t,e){return this.http.get("/api/queues/name/".concat(t),nr(e))},t.prototype.getTenantQueuesByServiceType=function(t,e,n){return this.http.get("/api/queues".concat(t.toQuery(),"&serviceType=").concat(e),nr(n))},t.prototype.saveQueue=function(t,e,n){return this.http.post("/api/queues?serviceType=".concat(e),t,nr(n))},t.prototype.deleteQueue=function(t){return this.http.delete("/api/queues/".concat(t))},t.prototype.getQueueStatistics=function(t,e){var n=this;return this.http.get("/api/queueStats".concat(t.toQuery()),nr(e)).pipe(xn((function(t){return t.data.map((function(t){return n.parseQueueStatName(t)})),t})))},t.prototype.getQueueStatisticsById=function(t,e){var n=this;return this.http.get("/api/queueStats/".concat(t),nr(e)).pipe(xn((function(t){return n.parseQueueStatName(t)})))},t.prototype.getQueueStatisticsByIds=function(t,e){var n=this;return this.http.get("/api/queueStats?QueueStatsIds=".concat(t.join(",")),nr(e)).pipe(xn((function(t){return t.map((function(t){return n.parseQueueStatName(t)}))})))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),gp=function(){function t(t){this.http=t}return t.prototype.getAssetProfiles=function(t,e){return this.http.get("/api/assetProfiles".concat(t.toQuery()),nr(e))},t.prototype.getAssetProfile=function(t,e){return this.http.get("/api/assetProfile/".concat(t),nr(e))},t.prototype.exportAssetProfile=function(t,e){return this.http.get("/api/assetProfile/".concat(t,"?inlineImages=true"),nr(e))},t.prototype.saveAssetProfile=function(t,e){return this.http.post("/api/assetProfile",t,nr(e))},t.prototype.deleteAssetProfile=function(t,e){return this.http.delete("/api/assetProfile/".concat(t),nr(e))},t.prototype.setDefaultAssetProfile=function(t,e){return this.http.post("/api/assetProfile/".concat(t,"/default"),nr(e))},t.prototype.getDefaultAssetProfileInfo=function(t){return this.http.get("/api/assetProfileInfo/default",nr(t))},t.prototype.getAssetProfileInfo=function(t,e){return this.http.get("/api/assetProfileInfo/".concat(t),nr(e))},t.prototype.getAssetProfileInfos=function(t,e){return this.http.get("/api/assetProfileInfos".concat(t.toQuery()),nr(e))},t.prototype.getAssetProfileNames=function(t,e){void 0===t&&(t=!1);var n="/api/assetProfile/names";return kr(t)&&(n+="?activeOnly=".concat(t)),this.http.get(n,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),vp=function(){function t(t){this.http=t}return t.prototype.getNotifications=function(t,e,n){return void 0===e&&(e=!1),this.http.get("/api/notifications".concat(t.toQuery(),"&unreadOnly=").concat(e),nr(n))},t.prototype.deleteNotification=function(t,e){return this.http.delete("/api/notification/".concat(t),nr(e))},t.prototype.markNotificationAsRead=function(t,e){return this.http.put("/api/notification/".concat(t,"/read"),nr(e))},t.prototype.markAllNotificationsAsRead=function(t){return this.http.put("/api/notifications/read",nr(t))},t.prototype.createNotificationRequest=function(t,e){return this.http.post("/api/notification/request",t,nr(e))},t.prototype.getNotificationRequestById=function(t,e){return this.http.get("/api/notification/request/".concat(t),nr(e))},t.prototype.getAvailableDeliveryMethods=function(t){return this.http.get("/api/notification/deliveryMethods",nr(t))},t.prototype.deleteNotificationRequest=function(t,e){return this.http.delete("/api/notification/request/".concat(t),nr(e))},t.prototype.getNotificationRequestPreview=function(t,e){return this.http.post("/api/notification/request/preview",t,nr(e))},t.prototype.getNotificationRequests=function(t,e){return this.http.get("/api/notification/requests".concat(t.toQuery()),nr(e))},t.prototype.getNotificationSettings=function(t){return this.http.get("/api/notification/settings",nr(t))},t.prototype.saveNotificationSettings=function(t,e){return this.http.post("/api/notification/settings",t,nr(e))},t.prototype.listSlackConversations=function(t,e,n){var i="/api/notification/slack/conversations?type=".concat(t);return Ur(e)&&(i+="&token=".concat(e)),this.http.get(i,nr(n))},t.prototype.saveNotificationRule=function(t,e){return this.http.post("/api/notification/rule",t,nr(e))},t.prototype.getNotificationRuleById=function(t,e){return this.http.get("/api/notification/rule/".concat(t),nr(e))},t.prototype.deleteNotificationRule=function(t,e){return this.http.delete("/api/notification/rule/".concat(t),nr(e))},t.prototype.getNotificationRules=function(t,e){return this.http.get("/api/notification/rules".concat(t.toQuery()),nr(e))},t.prototype.saveNotificationTarget=function(t,e){return this.http.post("/api/notification/target",t,nr(e))},t.prototype.getNotificationTargetById=function(t,e){return this.http.get("/api/notification/target/".concat(t),nr(e))},t.prototype.deleteNotificationTarget=function(t,e){return this.http.delete("/api/notification/target/".concat(t),nr(e))},t.prototype.getNotificationTargetsByIds=function(t,e){return this.http.get("/api/notification/targets?ids=".concat(t.join(",")),nr(e))},t.prototype.getNotificationTargets=function(t,e,n){var i="/api/notification/targets".concat(t.toQuery());return Ur(e)&&(i+="&notificationType=".concat(e)),this.http.get(i,nr(n))},t.prototype.getRecipientsForNotificationTargetConfig=function(t,e,n){return this.http.post("/api/notification/target/recipients".concat(e.toQuery()),t,nr(n))},t.prototype.saveNotificationTemplate=function(t,e){return this.http.post("/api/notification/template",t,nr(e))},t.prototype.getNotificationTemplateById=function(t,e){return this.http.get("/api/notification/template/".concat(t),nr(e))},t.prototype.deleteNotificationTemplate=function(t,e){return this.http.delete("/api/notification/template/".concat(t),nr(e))},t.prototype.getNotificationTemplates=function(t,e,n){var i="/api/notification/templates".concat(t.toQuery());return Ur(e)&&(i+="&notificationTypes=".concat(e)),this.http.get(i,nr(n))},t.prototype.getNotificationUserSettings=function(t){return this.http.get("/api/notification/settings/user",nr(t))},t.prototype.saveNotificationUserSettings=function(t,e){return this.http.post("/api/notification/settings/user",t,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();function Tp(t,e){return t.sort((function(t,n){var i=t.id.id,r=n.id.id;return e.indexOf(i)-e.indexOf(r)})),t}var Ep=function(){function t(t){this.http=t}return t.prototype.getTenantProfiles=function(t,e){return this.http.get("/api/tenantProfiles".concat(t.toQuery()),nr(e))},t.prototype.getTenantProfile=function(t,e){return this.http.get("/api/tenantProfile/".concat(t),nr(e))},t.prototype.saveTenantProfile=function(t,e){return this.http.post("/api/tenantProfile",t,nr(e))},t.prototype.deleteTenantProfile=function(t,e){return this.http.delete("/api/tenantProfile/".concat(t),nr(e))},t.prototype.setDefaultTenantProfile=function(t,e){return this.http.post("/api/tenantProfile/".concat(t,"/default"),nr(e))},t.prototype.getDefaultTenantProfileInfo=function(t){return this.http.get("/api/tenantProfileInfo/default",nr(t))},t.prototype.getTenantProfileInfo=function(t,e){return this.http.get("/api/tenantProfileInfo/".concat(t),nr(e))},t.prototype.getTenantProfileInfos=function(t,e){return this.http.get("/api/tenantProfileInfos".concat(t.toQuery()),nr(e))},t.prototype.getTenantProfilesByIds=function(t,e){return this.http.get("/api/tenantProfiles?ids=".concat(t.join(",")),nr(e)).pipe(xn((function(e){return Tp(e,t)})))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),bp=function(){function t(t){this.http=t}return t.prototype.getResources=function(t,e,n){var i="/api/resource".concat(t.toQuery());return Ur(e)&&(i+="&resourceType=".concat(e)),this.http.get(i,nr(n))},t.prototype.getTenantResources=function(t,e){return this.http.get("/api/resource/tenant".concat(t.toQuery()),nr(e))},t.prototype.getResource=function(t,e){return this.http.get("/api/resource/".concat(t),nr(e))},t.prototype.getResourceInfo=function(t,e){return this.http.get("/api/resource/info/".concat(t),nr(e))},t.prototype.saveResources=function(t,e){var n=this,i=100;i=t.length>i?i:t.length;for(var r=[],a=0;a<i;a++)r.push(this.saveResource(t[a],e).pipe(Xn((function(){return Un({})}))));return zn(r).pipe(Gn((function(r){return t.splice(0,i),t.length?n.saveResources(t,e):Un(r)})))},t.prototype.saveResource=function(t,e){return this.http.post("/api/resource",t,nr(e))},t.prototype.deleteResource=function(t,e){return this.http.delete("/api/resource/".concat(t),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();function Sp(t){return{tenantId:"000000",customerId:"111112",authority:va.SYS_ADMIN,userId:"111"}}var _p=function(){function t(t,e,n,i,r,a,o,s,u,c,l,p,d,f,h,y){this.http=t,this.deviceService=e,this.assetService=n,this.entityViewService=i,this.tenantService=r,this.customerService=a,this.userService=o,this.attributeService=s,this.deviceProfileService=u,this.tenantProfileService=c,this.assetProfileService=l,this.utils=p,this.queueService=d,this.alarmService=f,this.notificationService=h,this.resourceService=y}return t.prototype.getEntityObservable=function(t,e,n){var i;switch(t){case ur.DEVICE:i=this.deviceService.getDevice(e,n);break;case ur.ASSET:i=this.assetService.getAsset(e,n);break;case ur.ENTITY_VIEW:i=this.entityViewService.getEntityView(e,n);break;case ur.TENANT:i=this.tenantService.getTenant(e,n);break;case ur.CUSTOMER:i=this.customerService.getCustomer(e,n);break;case ur.USER:i=this.userService.getUser(e,n);break;case ur.ALARM:i=this.alarmService.getAlarm(e,n);break;case ur.QUEUE:i=this.queueService.getQueueById(e,n);break;case ur.QUEUE_STATS:i=this.queueService.getQueueStatisticsById(e,n)}return i},t.prototype.getEntity=function(t,e,n){var i=this.getEntityObservable(t,e,n);return i||Pn(null)},t.prototype.getEntitiesByIdsObservable=function(t,e){var n=[];return e.forEach((function(e){n.push(t(e))})),zn(n).pipe(xn((function(t){return t?(t.sort((function(t,n){return e.indexOf(t.id.id)-e.indexOf(n.id.id)})),t):[]})))},t.prototype.getEntitiesObservable=function(t,e,n){var i,r=this;switch(t){case ur.DEVICE:i=this.deviceService.getDevices(e,n);break;case ur.ASSET:i=this.assetService.getAssets(e,n);break;case ur.ENTITY_VIEW:i=this.getEntitiesByIdsObservable((function(t){return r.entityViewService.getEntityView(t,n)}),e);break;case ur.TENANT:i=this.getEntitiesByIdsObservable((function(t){return r.tenantService.getTenant(t,n)}),e);break;case ur.CUSTOMER:i=this.getEntitiesByIdsObservable((function(t){return r.customerService.getCustomer(t,n)}),e);break;case ur.USER:i=this.getEntitiesByIdsObservable((function(t){return r.userService.getUser(t,n)}),e);break;case ur.ALARM:console.error("Get Alarm Entity is not implemented!");break;case ur.DEVICE_PROFILE:i=this.getEntitiesByIdsObservable((function(t){return r.deviceProfileService.getDeviceProfileInfo(t,n)}),e);break;case ur.TENANT_PROFILE:i=this.tenantProfileService.getTenantProfilesByIds(e,n);break;case ur.ASSET_PROFILE:i=this.getEntitiesByIdsObservable((function(t){return r.assetProfileService.getAssetProfileInfo(t,n)}),e);break;case ur.NOTIFICATION_TARGET:i=this.notificationService.getNotificationTargetsByIds(e,n);break;case ur.QUEUE_STATS:i=this.queueService.getQueueStatisticsByIds(e,n)}return i},t.prototype.getEntities=function(t,e,n){var i=this.getEntitiesObservable(t,e,n);return i||Pn(null)},t.prototype.getSingleTenantByPageLinkObservable=function(t,e){var n=Sp(this.store).tenantId;return this.tenantService.getTenant(n,e).pipe(xn((function(e){var n={data:[],totalPages:0,totalElements:0,hasNext:!1};return e.title.toLowerCase().startsWith(t.textSearch.toLowerCase())&&(n.data.push(e),n.totalPages=1,n.totalElements=1),n})))},t.prototype.getSingleCustomerByPageLinkObservable=function(t,e){var n=Sp(this.store).customerId;return this.customerService.getCustomer(n,e).pipe(xn((function(e){var n={data:[],totalPages:0,totalElements:0,hasNext:!1};return e.title.toLowerCase().startsWith(t.textSearch.toLowerCase())&&(n.data.push(e),n.totalPages=1,n.totalElements=1),n})))},t.prototype.getEntitiesByPageLinkObservable=function(t,e,n,i){var r;void 0===n&&(n="");var a=Sp(this.store),o=a.customerId;switch(t){case ur.DEVICE:e.sortOrder.property="name",r=a.authority===va.CUSTOMER_USER?this.deviceService.getCustomerDeviceInfos(o,e,n,i):this.deviceService.getTenantDeviceInfos(e,n,i);break;case ur.ASSET:e.sortOrder.property="name",r=a.authority===va.CUSTOMER_USER?this.assetService.getCustomerAssetInfos(o,e,n,i):this.assetService.getTenantAssetInfos(e,n,i);break;case ur.EDGE:case ur.ENTITY_VIEW:e.sortOrder.property="name",r=a.authority===va.CUSTOMER_USER?this.entityViewService.getCustomerEntityViewInfos(o,e,n,i):this.entityViewService.getTenantEntityViewInfos(e,n,i);break;case ur.TENANT:e.sortOrder.property="title",r=a.authority===va.TENANT_ADMIN?this.getSingleTenantByPageLinkObservable(e,i):this.tenantService.getTenants(e,i);break;case ur.CUSTOMER:e.sortOrder.property="title",r=a.authority===va.CUSTOMER_USER?this.getSingleCustomerByPageLinkObservable(e,i):this.customerService.getCustomers(e,i);break;case ur.USER:e.sortOrder.property="email",r=this.userService.getUsers(e);break;case ur.ALARM:console.error("Get Alarm Entities is not implemented!");break;case ur.DEVICE_PROFILE:e.sortOrder.property="name",r=this.deviceProfileService.getDeviceProfileInfos(e,null,i);break;case ur.TENANT_PROFILE:e.sortOrder.property="name",r=this.tenantProfileService.getTenantProfiles(e,i);break;case ur.ASSET_PROFILE:e.sortOrder.property="name",r=this.assetProfileService.getAssetProfileInfos(e,i);break;case ur.NOTIFICATION_TARGET:e.sortOrder.property="name",r=this.notificationService.getNotificationTargets(e,n,i);break;case ur.NOTIFICATION_TEMPLATE:e.sortOrder.property="name",r=this.notificationService.getNotificationTemplates(e,n,i);break;case ur.NOTIFICATION_RULE:e.sortOrder.property="name",r=this.notificationService.getNotificationRules(e,i);break;case ur.TB_RESOURCE:e.sortOrder.property="title",r=this.resourceService.getTenantResources(e,i);break;case ur.QUEUE_STATS:e.sortOrder.property="createdTime",r=this.queueService.getQueueStatistics(e,i)}return r},t.prototype.getEntitiesByPageLink=function(t,e,n,i){var r=this;void 0===n&&(n="");var a,o,s,u=this.getEntitiesByPageLinkObservable(t,e,n,i);return u?u.pipe((a=function(a){return a.hasNext?(e.page+=1,r.getEntitiesByPageLinkObservable(t,e,n,i)):hn},void 0===o&&(o=1/0),o=(o||0)<1?1/0:o,Je((function(t,e){return Kn(t,e,a,o,void 0,!0,s)}))),xn((function(t){return t.data})),ti((function(t){return t})),Je((function(t,e){$n(Zn,[])(t).subscribe(e)}))):Un(null)},t.prototype.getEntitiesByNameFilter=function(t,e,n,i,r){void 0===i&&(i="");var a=new Lc(n,0,e,{property:"name",direction:yc.ASC});if(-1===n)return a.pageSize=100,this.getEntitiesByPageLink(t,a,i,r).pipe(xn((function(t){return t&&t.length?t:null})));var o=this.getEntitiesByPageLinkObservable(t,a,i,r);return o?o.pipe(xn((function(t){return t&&t.data.length?t.data:null}))):Un(null)},t.prototype.findEntityDataByQuery=function(t,e){return this.http.post("/api/entitiesQuery/find",t,nr(e))},t.prototype.findEntityKeysByQuery=function(t,e,n,i,r){void 0===e&&(e=!0),void 0===n&&(n=!0);var a="/api/entitiesQuery/find/keys?attributes=".concat(e,"&timeseries=").concat(n);return i&&(a+="&scope=".concat(i)),this.http.post(a,t,nr(r))},t.prototype.findAlarmDataByQuery=function(t,e){return this.http.post("/api/alarmsQuery/find",t,nr(e))},t.prototype.findEntityInfosByFilterAndName=function(t,e,n){var i={type:gl.ENTITY_FIELD,key:"name"},r={entityFilter:t,pageLink:{pageSize:10,page:0,sortOrder:{key:i,direction:yc.ASC}},entityFields:rp,keyFilters:e&&e.length?[{key:i,valueType:El.STRING,value:null,predicate:{type:wl.STRING,operation:Il.STARTS_WITH,ignoreCase:!0,value:{defaultValue:e}}}]:null};return this.findEntityDataByQuery(r,n).pipe(xn((function(t){return{data:t.data.map((function(t){return ap(t)})),hasNext:t.hasNext,totalElements:t.totalElements,totalPages:t.totalPages}})))},t.prototype.findSingleEntityInfoByEntityFilter=function(t,e){var n={entityFilter:t,pageLink:Xl(1),entityFields:rp};return this.findEntityDataByQuery(n,e).pipe(xn((function(t){return t.data.length?ap(t.data[0]):null})))},t.prototype.filterAliasByEntityTypes=function(t,e){var n,i,r,a,o=t.filter;if(this.filterAliasFilterTypeByEntityTypes(o.type,e))switch(o.type){case kc.singleEntity:return e.indexOf(o.singleEntity.entityType)>-1;case kc.entityList:case kc.entityName:case kc.entityType:return e.indexOf(o.entityType)>-1;case kc.stateEntity:return!0;case kc.assetType:return e.indexOf(ur.ASSET)>-1;case kc.deviceType:return e.indexOf(ur.DEVICE)>-1;case kc.edgeType:return e.indexOf(ur.EDGE)>-1;case kc.entityViewType:return e.indexOf(ur.ENTITY_VIEW)>-1;case kc.relationsQuery:if(o.filters&&o.filters.length){var s=!1;try{for(var u=ve(o.filters),c=u.next();!c.done;c=u.next()){var l=c.value;if(!l.entityTypes||!l.entityTypes.length){s=!0;break}try{for(var p=(r=void 0,ve(l.entityTypes)),d=p.next();!d.done;d=p.next()){var f=d.value;if(e.indexOf(f)>-1){s=!0;break}}}catch(t){r={error:t}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(r)throw r.error}}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return s}return!0;case kc.assetSearchQuery:return e.indexOf(ur.ASSET)>-1;case kc.deviceSearchQuery:return e.indexOf(ur.DEVICE)>-1;case kc.edgeSearchQuery:return e.indexOf(ur.EDGE)>-1;case kc.entityViewSearchQuery:return e.indexOf(ur.ENTITY_VIEW)>-1}return!1},t.prototype.filterAliasFilterTypeByEntityTypes=function(t,e){var n=this;if(!e||!e.length)return!0;var i=!1;return e.forEach((function(e){i=i||n.filterAliasFilterTypeByEntityType(t,e)})),i},t.prototype.filterAliasFilterTypeByEntityType=function(t,e){switch(t){case kc.singleEntity:case kc.entityList:case kc.entityName:case kc.entityType:case kc.stateEntity:return!0;case kc.assetType:return e===ur.ASSET;case kc.deviceType:return e===ur.DEVICE;case kc.edgeType:return e===ur.EDGE;case kc.entityViewType:return e===ur.ENTITY_VIEW;case kc.relationsQuery:case kc.apiUsageState:return!0;case kc.assetSearchQuery:return e===ur.ASSET;case kc.deviceSearchQuery:return e===ur.DEVICE;case kc.edgeSearchQuery:return e===ur.EDGE;case kc.entityViewSearchQuery:return e===ur.ENTITY_VIEW}return!1},t.prototype.getEntityFieldKeys=function(t,e){void 0===e&&(e="");var n=[Qa.createdTime.keyName],i=e.toLowerCase();switch(t){case ur.USER:n.push(Qa.name.keyName),n.push(Qa.email.keyName),n.push(Qa.firstName.keyName),n.push(Qa.lastName.keyName),n.push(Qa.phone.keyName),n.push(Qa.ownerName.keyName),n.push(Qa.ownerType.keyName);break;case ur.TENANT:case ur.CUSTOMER:n.push(Qa.title.keyName),n.push(Qa.email.keyName),n.push(Qa.country.keyName),n.push(Qa.state.keyName),n.push(Qa.city.keyName),n.push(Qa.address.keyName),n.push(Qa.address2.keyName),n.push(Qa.zip.keyName),n.push(Qa.phone.keyName);break;case ur.ENTITY_VIEW:n.push(Qa.name.keyName),n.push(Qa.type.keyName),n.push(Qa.ownerName.keyName),n.push(Qa.ownerType.keyName);break;case ur.DEVICE:case ur.EDGE:case ur.ASSET:n.push(Qa.name.keyName),n.push(Qa.type.keyName),n.push(Qa.label.keyName),n.push(Qa.ownerName.keyName),n.push(Qa.ownerType.keyName);break;case ur.DASHBOARD:n.push(Qa.title.keyName),n.push(Qa.ownerName.keyName),n.push(Qa.ownerType.keyName);break;case ur.API_USAGE_STATE:n.push(Qa.name.keyName);break;case ur.QUEUE_STATS:n.push(Qa.queueName.keyName),n.push(Qa.serviceId.keyName)}return i?n.filter((function(t){return 0===t.toLowerCase().indexOf(i)})):n},t.prototype.getAlarmKeys=function(t){void 0===t&&(t="");var e=Object.keys(Ga),n=t.toLowerCase();return n?e.filter((function(t){return 0===t.toLowerCase().indexOf(n)})):e},t.prototype.getEntityKeys=function(t,e,n,i){if(n===ja.entityField)return Un(this.getEntityFieldKeys(t.entityType,e));if(n===ja.alarm)return Un(this.getAlarmKeys(e));var r="/api/plugins/telemetry/".concat(t.entityType,"/").concat(t.id,"/keys/");return n===ja.timeseries?r+="timeseries":n===ja.attribute&&(r+="attributes"),this.http.get(r,nr(i)).pipe(xn((function(t){if(e){var n=e.toLowerCase();return t.filter((function(t){return 0===t.toLowerCase().indexOf(n)}))}return t})))},t.prototype.getEntityKeysByEntityFilter=function(t,e,n,i){return this.getEntityKeysByEntityFilterAndScope(t,e,n,null,i)},t.prototype.getEntityKeysByEntityFilterAndScope=function(t,e,n,i,r){var a,o=this;if(!e.length)return Un([]);if(null!==t&&e.some((function(t){return[ja.timeseries,ja.attribute].includes(t)}))){var s={entityFilter:t,pageLink:Xl(100)};a=this.findEntityKeysByQuery(s,e.includes(ja.attribute),e.includes(ja.timeseries),i,r)}else a=Un({attribute:[],timeseries:[],entityTypes:n||[]});return a.pipe(xn((function(t){var n=[];return e.forEach((function(e){var i;switch(e){case ja.entityField:if(t.entityTypes.length){var r=[];t.entityTypes.forEach((function(t){return r.push.apply(r,Ee([],Te(o.getEntityFieldKeys(t)),!1))})),i=Array.from(new Set(r))}break;case ja.alarm:i=o.getAlarmKeys();break;case ja.attribute:case ja.timeseries:t[e].length&&(i=t[e])}i&&n.push.apply(n,Ee([],Te(i.map((function(t){return{name:t,type:e}}))),!1))})),n})))},t.prototype.createDatasourcesFromSubscriptionsInfo=function(t){var e=this,n=t.map((function(t){return e.createDatasourceFromSubscriptionInfo(t)}));return this.utils.generateColors(n),n},t.prototype.createAlarmSourceFromSubscriptionInfo=function(t){if(t.entityId&&t.entityType){var e=this.createDatasourceFromSubscriptionInfo(t);return this.utils.generateColors([e]),e}throw new Error("Can't crate alarm source without entityId information!")},t.prototype.resolveAlias=function(t,e){var n=this,i=t.filter;return this.resolveAliasFilter(i,e).pipe(Gn((function(r){var a={alias:t.alias,entityFilter:r.entityFilter,stateEntity:r.stateEntity,entityParamName:r.entityParamName,resolveMultiple:i.resolveMultiple,currentEntity:null};if(!a.resolveMultiple&&a.entityFilter){var o=null;if(r.stateEntity&&a.entityFilter.type===kc.singleEntity&&e){var s=e;r.entityParamName&&r.entityParamName.length&&(s=e[r.entityParamName]),s&&s.entityId&&s.entityName&&(o={id:s.entityId.id,entityType:s.entityId.entityType,name:s.entityName,label:s.entityLabel})}return(o?Un(o):n.findSingleEntityInfoByEntityFilter(a.entityFilter,{ignoreLoading:!0,ignoreErrors:!0})).pipe(xn((function(t){return a.currentEntity=t,a})))}return Un(a)})))},t.prototype.resolveAliasFilter=function(t,e){var n={entityFilter:null,stateEntity:!1};t.stateEntityParamName&&t.stateEntityParamName.length&&(n.entityParamName=t.stateEntityParamName);var i=this.getStateEntityInfo(t,e).entityId;switch(t.type){case kc.singleEntity:var r=this.resolveAliasEntityId(t.singleEntity.entityType,t.singleEntity.id);return n.entityFilter={type:kc.singleEntity,singleEntity:r},Un(n);case kc.entityList:case kc.entityName:case kc.entityType:return n.entityFilter=Xr(t),Un(n);case kc.stateEntity:return n.stateEntity=!0,i&&(n.entityFilter={type:kc.singleEntity,singleEntity:i}),Un(n);case kc.assetType:case kc.deviceType:case kc.entityViewType:case kc.apiUsageState:case kc.edgeType:return n.entityFilter=Xr(t),Un(n);case kc.relationsQuery:case kc.assetSearchQuery:case kc.deviceSearchQuery:case kc.edgeSearchQuery:case kc.entityViewSearchQuery:var a=void 0,o=void 0;if(n.stateEntity=t.rootStateEntity,n.stateEntity&&i?(a=i.entityType,o=i.id):n.stateEntity||(a=t.rootEntity.entityType,o=t.rootEntity.id),a&&o){var s=this.resolveAliasEntityId(a,o);return n.entityFilter=Xr(t),n.entityFilter.rootEntity=s,Un(n)}return Un(n)}},t.prototype.checkEntityAlias=function(t){return this.resolveAliasFilter(t.filter,null).pipe(xn((function(t){return!!t.stateEntity||kr(t.entityFilter)})),Xn((function(t){return Un(!1)})))},t.prototype.resolveAlarmFilter=function(t,e){void 0===e&&(e=!0);var n={};if(t)if(n.typeList=t.typeList,n.severityList=t.severityList,n.statusList=t.statusList,n.searchPropagatedAlarms=Mr(t.searchPropagatedAlarms)?t.searchPropagatedAlarms:e,t.assignedToCurrentUser){var i=Sp(this.store);n.assigneeId=new La(i.userId)}else n.assigneeId=t.assigneeId;return n},t.prototype.saveEntityParameters=function(t,e,n,i){var r=this;return this.getSaveEntityObservable(t,e,i).pipe(Gn((function(t){return r.saveEntityData(t.id,e,i).pipe(xn((function(){return{create:{entity:1}}})),Xn((function(t){return Un({error:{entity:1,errors:t.message}})})))})),Xn((function(a){if(n){var o=void 0;switch(t){case ur.DEVICE:o=r.deviceService.findByName(e.name,i);break;case ur.ASSET:o=r.assetService.findByName(e.name,i)}return o.pipe(Gn((function(n){return zn(r.getUpdateEntityTasks(t,e,n,i)).pipe(xn((function(){return{update:{entity:1}}})),Xn((function(t){return Un({error:{entity:1,errors:t.message}})})))})),Xn((function(t){return Un({error:{entity:1,errors:"Line: ".concat(e.lineNumber,"; Error: ").concat(t.error.message)}})})))}return Un({error:{entity:1,errors:"Line: ".concat(e.lineNumber,"; Error: ").concat(a.error.message)}})})))},t.prototype.getSaveEntityObservable=function(t,e,n){var i;switch(t){case ur.DEVICE:var r={name:e.name,type:e.type,label:e.label,additionalInfo:{description:e.description}};null!==e.gateway&&(r.additionalInfo=de(de({},r.additionalInfo),{gateway:e.gateway})),i=this.deviceService.saveDevice(r,n);break;case ur.ASSET:var a={name:e.name,type:e.type,label:e.label,additionalInfo:{description:e.description}};i=this.assetService.saveAsset(a,n);break;case ur.EDGE:var o=e;o.name,o.type,o.label,o.description,""!==o.routingKey?o.routingKey:na(),""!==o.secret?o.secret:ha(20)}return i},t.prototype.getUpdateEntityTasks=function(t,e,n,i){var r,a,o=[];switch(t){case ur.ASSET:case ur.DEVICE:if(a=(r=n).additionalInfo||{},r.label!==e.label||r.type!==e.type||a.description!==e.description||r.id.entityType===ur.DEVICE&&a.gateway!==e.gateway)switch(r.label=e.label,r.type=e.type,r.additionalInfo=a,r.additionalInfo.description=e.description,r.id.entityType===ur.DEVICE&&(r.additionalInfo.gateway=e.gateway),r.id.entityType){case ur.DEVICE:o.push(this.deviceService.saveDevice(r,i));break;case ur.ASSET:o.push(this.assetService.saveAsset(r,i))}o.push(this.saveEntityData(n.id,e,i));break;case ur.EDGE:a=(r=n).additionalInfo||{};var s=e;(r.label!==s.label||r.type!==s.type||""!==s.routingKey&&r.routingKey!==s.routingKey||""!==s.secret&&r.secret!==s.secret||a.description!==s.description)&&(r.label=s.label,r.type=s.type,r.additionalInfo=a,r.additionalInfo.description=s.description,""!==s.routingKey&&(r.routingKey=s.routingKey),""!==s.secret&&(r.secret=s.secret)),o.push(this.saveEntityData(n.id,s,i))}return o},t.prototype.saveEntityData=function(t,e,n){var i,r=this,a=[];if(Object.keys(e.credential).length){var o,s=null,u=null;kr(e.credential.mqtt)?(o=pl.MQTT_BASIC,u=JSON.stringify(e.credential.mqtt)):kr(e.credential.lwm2m)?(o=pl.LWM2M_CREDENTIALS,u=JSON.stringify(e.credential.lwm2m)):Ur(e.credential.x509)?(o=pl.X509_CERTIFICATE,u=e.credential.x509):(o=pl.ACCESS_TOKEN,s=e.credential.accessToken),i=this.deviceService.getDeviceCredentials(t.id,!1,n).pipe(Gn((function(t){return t.credentialsId=s,t.credentialsType=o,t.credentialsValue=u,r.deviceService.saveDeviceCredentials(t,n).pipe(xn((function(){return"ok"})),Xn((function(t){return Un("Line: ".concat(e.lineNumber,"; Error: ").concat(t.error.message))})))}))),a.push(i)}return e.attributes.shared&&e.attributes.shared.length&&(i=this.attributeService.saveEntityAttributes(t,Ha.SHARED_SCOPE,e.attributes.shared,n).pipe(xn((function(){return"ok"})),Xn((function(t){return Un("Line: ".concat(e.lineNumber,"; Error: ").concat(t.error.message))}))),a.push(i)),e.attributes.server&&e.attributes.server.length&&(i=this.attributeService.saveEntityAttributes(t,Ha.SERVER_SCOPE,e.attributes.server,n).pipe(xn((function(){return"ok"})),Xn((function(t){return Un("Line: ".concat(e.lineNumber,"; Error: ").concat(t.error.message))}))),a.push(i)),e.timeseries&&e.timeseries.length&&(i=this.attributeService.saveEntityTimeseries(t,"time",e.timeseries,n).pipe(xn((function(){return"ok"})),Xn((function(t){return Un("Line: ".concat(e.lineNumber,"; Error: ").concat(t.error.message))}))),a.push(i)),a.length?zn(a).pipe(xn((function(t){var e=t.filter((function(t){return"ok"!==t}));if(e.length>0)throw Error(e.join("\n"));return t}))):Un(null)},t.prototype.getStateEntityInfo=function(t,e){var n=null;return e&&(t.stateEntityParamName&&t.stateEntityParamName.length?e[t.stateEntityParamName]&&(n=e[t.stateEntityParamName].entityId):n=e.entityId),n||(n=t.defaultStateEntity),n&&(n=this.resolveAliasEntityId(n.entityType,n.id)),{entityId:n}},t.prototype.resolveAliasEntityId=function(t,e){var n={entityType:t,id:e};if(t===cr.CURRENT_CUSTOMER){var i=Sp(this.store);n.entityType=ur.CUSTOMER,i.authority===va.CUSTOMER_USER&&(n.id=i.customerId)}else if(t===cr.CURRENT_TENANT){i=Sp(this.store);n.entityType=ur.TENANT,n.id=i.tenantId}else if(t===cr.CURRENT_USER){i=Sp(this.store);n.entityType=ur.USER,n.id=i.userId}else if(t===cr.CURRENT_USER_OWNER){(i=Sp(this.store)).authority===va.TENANT_ADMIN?(n.entityType=ur.TENANT,n.id=i.tenantId):i.authority===va.CUSTOMER_USER&&(n.entityType=ur.CUSTOMER,n.id=i.customerId)}return n},t.prototype.createDatasourceFromSubscriptionInfo=function(t){var e=null;if((t=this.validateSubscriptionInfo(t)).type===zs.entity?(e={type:t.type,entityName:t.entityName,name:t.entityName,entityType:t.entityType,entityId:t.entityId,dataKeys:[]},this.prepareEntityFilterFromSubscriptionInfo(e,t)):t.type!==zs.function&&t.type!==zs.entityCount&&t.type!==zs.alarmCount||(e={type:t.type,name:t.name||t.type,dataKeys:[]}),null!==e&&(t.timeseries&&this.createDatasourceKeys(t.timeseries,ja.timeseries,e),t.attributes&&this.createDatasourceKeys(t.attributes,ja.attribute,e),t.functions&&this.createDatasourceKeys(t.functions,ja.function,e),t.alarmFields&&this.createDatasourceKeys(t.alarmFields,ja.alarm,e),t.type===zs.entityCount||t.type===zs.alarmCount)){var n=this.utils.createKey({name:"count"},ja.count);e.dataKeys.push(n)}return e},t.prototype.validateSubscriptionInfo=function(t){return"device"===t.type&&(t.type=zs.entity,t.entityType=ur.DEVICE,t.deviceId?t.entityId=t.deviceId:t.deviceName?t.entityName=t.deviceName:t.deviceNamePrefix?t.entityNamePrefix=t.deviceNamePrefix:t.deviceIds&&(t.entityIds=t.deviceIds)),t},t.prototype.prepareEntityFilterFromSubscriptionInfo=function(t,e){if(e.entityId)t.entityFilter={type:kc.singleEntity,singleEntity:{entityType:e.entityType,id:e.entityId}},t.pageLink=$l;else if(e.entityName||e.entityNamePrefix){var n=void 0,i=void 0;if(Mr(e.entityName)&&e.entityName.length)n=e.entityName,i=Xr($l);else n=e.entityNamePrefix,i=Xl(r=kr(e.pageSize)&&e.pageSize>0?e.pageSize:1024);t.entityFilter={type:kc.entityName,entityType:e.entityType,entityNameFilter:n},t.pageLink=i}else if(e.entityIds){t.entityFilter={type:kc.entityList,entityType:e.entityType,entityList:e.entityIds};var r=kr(e.pageSize)&&e.pageSize>0?e.pageSize:1024;t.pageLink=Xl(r)}},t.prototype.createDatasourceKeys=function(t,e,n){var i=this;t.forEach((function(t){var r=i.utils.createKey(t,e);n.dataKeys.push(r)}))},t.prototype.getAssignedToEdgeEntitiesByType=function(t,e,n){var i;switch(e){case ur.ASSET:i=this.assetService.getEdgeAssets(t,n);break;case ur.DEVICE:i=this.deviceService.getEdgeDevices(t,n);break;case ur.ENTITY_VIEW:i=this.entityViewService.getEdgeEntityViews(t,n)}return i},t.prototype.getEdgeEventContent=function(t){var e,n=t.entityId,i=t.type;switch(i){case ep.DASHBOARD:case ep.ALARM:case ep.RULE_CHAIN:case ep.EDGE:case ep.USER:case ep.CUSTOMER:case ep.TENANT:case ep.ASSET:case ep.DEVICE:case ep.ENTITY_VIEW:e=lp.includes(t.action)?Un(t.body):this.getEntity(i,n,{ignoreLoading:!0,ignoreErrors:!0});break;case ep.DEVICE_PROFILE:e=this.deviceProfileService.getDeviceProfile(n);break;case ep.ASSET_PROFILE:e=this.assetProfileService.getAssetProfile(n);break;case ep.RELATION:e=Un(t.body)}return e},t.prototype.getEntitySubtypesObservable=function(t){var e;switch(t){case ur.ASSET:e=this.assetProfileService.getAssetProfileNames(!1,{ignoreLoading:!0}).pipe(xn((function(t){return t.map((function(t){return t.name}))})));break;case ur.DEVICE:e=this.deviceProfileService.getDeviceProfileNames(!1,{ignoreLoading:!0}).pipe(xn((function(t){return t.map((function(t){return t.name}))})));break;case ur.ENTITY_VIEW:e=this.entityViewService.getEntityViewTypes({ignoreLoading:!0}).pipe(xn((function(t){return t.map((function(t){return t.type}))})))}return e},t=fe([ae(),he(0,se(Zi.HttpClient)),he(1,se(Zi.DeviceService)),he(2,se(Zi.AssetService)),he(3,se(Zi.EntityViewService)),he(4,se(Zi.TenantService)),he(5,se(Zi.CustomerService)),he(6,se(Zi.UserService)),he(7,se(Zi.AttributeService)),he(8,se(Zi.DeviceProfileService)),he(9,se(Zi.TenantProfileService)),he(10,se(Zi.AssetProfileService)),he(11,se(Zi.UtilsService)),he(12,se(Zi.QueueService)),he(13,se(Zi.AlarmService)),he(14,se(Zi.NotificationService)),he(15,se(Zi.ResourceService)),ye("design:paramtypes",[Ci,Ic,Sc,Rc,Pc,wc,Ta,_c,yp,Ep,gp,gc,mp,bc,vp,bp])],t)}(),Ap=function(){function t(t){this.http=t}return t.prototype.getEvents=function(t,e,n,i,r){return this.http.get("/api/events/".concat(t.entityType,"/").concat(t.id,"/").concat(e)+"".concat(i.toQuery(),"&tenantId=").concat(n),nr(r))},t.prototype.getFilterEvents=function(t,e,n,i,r,a){return this.http.post("/api/events/".concat(t.entityType,"/").concat(t.id)+"".concat(r.toQuery(),"&tenantId=").concat(n),de(de({},i),{eventType:e}),nr(a))},t.prototype.clearEvents=function(t,e,n,i,r,a){return this.http.post("/api/events/".concat(t.entityType,"/").concat(t.id,"/clear?tenantId=").concat(i)+(r.startTime?"&startTime=".concat(r.startTime):"")+(r.endTime?"&endTime=".concat(r.endTime):""),de(de({},n),{eventType:e}),nr(a))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),wp=function(){function t(t){this.http=t}return t.prototype.getOAuth2Settings=function(t){return this.http.get("/api/oauth2/config",nr(t))},t.prototype.getOAuth2Template=function(t){return this.http.get("/api/oauth2/config/template",nr(t))},t.prototype.saveOAuth2Settings=function(t,e){return this.http.post("/api/oauth2/config",t,nr(e))},t.prototype.getLoginProcessingUrl=function(t){return this.http.get("/api/oauth2/loginProcessingUrl",nr(t))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Ip=function(){function t(t){this.http=t}return t.prototype.getOtaPackages=function(t,e){return this.http.get("/api/otaPackages".concat(t.toQuery()),nr(e))},t.prototype.getOtaPackagesInfoByDeviceProfileId=function(t,e,n,i){var r="/api/otaPackages/".concat(e,"/").concat(n).concat(t.toQuery());return this.http.get(r,nr(i))},t.prototype.getOtaPackage=function(t,e){return this.http.get("/api/otaPackages/".concat(t),nr(e))},t.prototype.getOtaPackageInfo=function(t,e){return this.http.get("/api/otaPackage/info/".concat(t),nr(e))},t.prototype.saveOtaPackage=function(t,e){var n=this;if(!t.file)return this.saveOtaPackageInfo(t,e);var i=Xr(t);return delete i.file,delete i.checksum,delete i.checksumAlgorithm,this.saveOtaPackageInfo(i,e).pipe(Gn((function(e){return n.uploadOtaPackageFile(e.id.id,t.file,t.checksumAlgorithm,t.checksum).pipe(Xn((function(){return n.deleteOtaPackage(e.id.id)})))})))},t.prototype.saveOtaPackageInfo=function(t,e){return this.http.post("/api/otaPackage",t,nr(e))},t.prototype.uploadOtaPackageFile=function(t,e,n,i,r){r||(r={});var a=new FormData;a.append("file",e);var o="/api/otaPackage/".concat(t,"?checksumAlgorithm=").concat(n);return i&&(o+="&checksum=".concat(i)),this.http.post(o,a,rr(r.ignoreLoading,r.ignoreErrors,r.resendRequest))},t.prototype.deleteOtaPackage=function(t,e){return this.http.delete("/api/otaPackage/".concat(t),nr(e))},t.prototype.countUpdateDeviceAfterChangePackage=function(t,e,n){return this.http.get("/api/devices/count/".concat(t,"/").concat(e.id),nr(n))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),Dp={url:"",deserializer:function(t){return JSON.parse(t.data)},serializer:function(t){return JSON.stringify(t)}},Rp=function(t){function e(e,n){var i=t.call(this)||this;if(i._socket=null,e instanceof qe)i.destination=n,i.source=e;else{var r=i._config=de({},Dp);if(i._output=new nn,"string"==typeof e)r.url=e;else for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);if(!r.WebSocketCtor&&WebSocket)r.WebSocketCtor=WebSocket;else if(!r.WebSocketCtor)throw new Error("no WebSocket constructor can be found");i.destination=new sn}return i}return pe(e,t),e.prototype.lift=function(t){var n=new e(this._config,this.destination);return n.operator=t,n.source=this,n},e.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new sn),this._output=new nn},e.prototype.multiplex=function(t,e,n){var i=this;return new qe((function(r){try{i.next(t())}catch(t){r.error(t)}var a=i.subscribe({next:function(t){try{n(t)&&r.next(t)}catch(t){r.error(t)}},error:function(t){return r.error(t)},complete:function(){return r.complete()}});return function(){try{i.next(e())}catch(t){r.error(t)}a.unsubscribe()}}))},e.prototype._connectSocket=function(){var t=this,e=this._config,n=e.WebSocketCtor,i=e.protocol,r=e.url,a=e.binaryType,o=this._output,s=null;try{s=i?new n(r,i):new n(r),this._socket=s,a&&(this._socket.binaryType=a)}catch(t){return void o.error(t)}var u=new Re((function(){t._socket=null,s&&1===s.readyState&&s.close()}));s.onopen=function(e){if(!t._socket)return s.close(),void t._resetState();var n=t._config.openObserver;n&&n.next(e);var i=t.destination;t.destination=Fe.create((function(e){if(1===s.readyState)try{var n=t._config.serializer;s.send(n(e))}catch(e){t.destination.error(e)}}),(function(e){var n=t._config.closingObserver;n&&n.next(void 0),e&&e.code?s.close(e.code,e.reason):o.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t._resetState()}),(function(){var e=t._config.closingObserver;e&&e.next(void 0),s.close(),t._resetState()})),i&&i instanceof sn&&u.add(i.subscribe(t.destination))},s.onerror=function(e){t._resetState(),o.error(e)},s.onclose=function(e){s===t._socket&&t._resetState();var n=t._config.closeObserver;n&&n.next(e),e.wasClean?o.complete():o.error(e)},s.onmessage=function(e){try{var n=t._config.deserializer;o.next(n(e))}catch(t){o.error(t)}}},e.prototype._subscribe=function(t){var e=this,n=this.source;return n?n.subscribe(t):(this._socket||this._connectSocket(),this._output.subscribe(t),t.add((function(){var t=e._socket;0===e._output.observers.length&&(!t||1!==t.readyState&&0!==t.readyState||t.close(),e._resetState())})),t)},e.prototype.unsubscribe=function(){var e=this._socket;!e||1!==e.readyState&&0!==e.readyState||e.close(),this._resetState(),t.prototype.unsubscribe.call(this)},e}(rn);var Np,Op=function(){function t(t,e,n,i,r){this.authService=t,this.ngZone=e,this.apiEndpoint=n,this.cmdWrapper=i,this.window=r,this.isActive=!1,this.isOpening=!1,this.isOpened=!1,this.isReconnect=!1,this.lastCmdId=0,this.subscribersCount=0,this.subscribersMap=new Map,this.reconnectSubscribers=new Set,this.errorName="WebSocket Error";var a=this.window.location.port;"https:"===this.window.location.protocol?(a||(a="443"),this.wsUri="wss:"):(a||(a="80"),this.wsUri="ws:"),this.wsUri+="//".concat(this.window.location.hostname,":").concat(a,"/").concat(n)}return t.prototype.nextCmdId=function(){return this.lastCmdId++,this.lastCmdId},t.prototype.publishCommands=function(){for(;this.isOpened&&this.cmdWrapper.hasCommands();)this.dataStream.next(this.cmdWrapper.preparePublishCommands(10)),this.checkToClose();this.subscribersCount>0&&this.tryOpenSocket()},t.prototype.checkToClose=function(){var t=this;0===this.subscribersCount&&this.isOpened&&(this.socketCloseTimer||(this.socketCloseTimer=setTimeout((function(){return t.closeSocket()}),9e4)))},t.prototype.reset=function(t){this.socketCloseTimer&&(clearTimeout(this.socketCloseTimer),this.socketCloseTimer=null),this.lastCmdId=0,this.subscribersMap.clear(),this.subscribersCount=0,this.cmdWrapper.clear(),t&&this.closeSocket()},t.prototype.closeSocket=function(){this.isActive=!1,this.isOpened&&this.dataStream.unsubscribe()},t.prototype.tryOpenSocket=function(){var t=this;this.isActive&&(this.isOpened||this.isOpening||(this.isOpening=!0,Ec.isJwtTokenValid()?this.openSocket(Ec.getJwtToken()):this.authService.refreshJwtToken().subscribe({next:function(){t.openSocket(Ec.getJwtToken())},error:function(){t.isOpening=!1,t.authService.logout()}})),this.socketCloseTimer&&(clearTimeout(this.socketCloseTimer),this.socketCloseTimer=null))},t.prototype.openSocket=function(t){var e=this,n="".concat(this.wsUri);this.dataStream=new Rp({url:n,openObserver:{next:function(){e.onOpen(t)}},closeObserver:{next:function(t){e.onClose(t)}}}),this.dataStream.subscribe({next:function(t){e.ngZone.runOutsideAngular((function(){e.onMessage(t)}))},error:function(t){e.onError(t)}})},t.prototype.onOpen=function(t){var e=this;this.isOpening=!1,this.isOpened=!0,this.cmdWrapper.setAuth(t),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.isReconnect?(this.isReconnect=!1,this.reconnectSubscribers.forEach((function(t){t.onReconnected(),e.subscribe(t)})),this.reconnectSubscribers.clear()):this.publishCommands()},t.prototype.onMessage=function(t){t.errorCode?this.showWsError(t.errorCode,t.errorMsg):this.processOnMessage(t),this.checkToClose()},t.prototype.onError=function(t){t&&console.warn("WebSocket error event",t),this.isOpening=!1},t.prototype.onClose=function(t){var e=this;t&&t.code>1001&&1006!==t.code&&1011!==t.code&&1012!==t.code&&4500!==t.code&&this.showWsError(t.code,t.reason),this.isOpening=!1,this.isOpened=!1,this.isActive&&(this.isReconnect||(this.reconnectSubscribers.clear(),this.subscribersMap.forEach((function(t){e.reconnectSubscribers.add(t)})),this.reset(!1),this.isReconnect=!0),this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout((function(){return e.tryOpenSocket()}),2e3))},t.prototype.showWsError=function(t,e){var n=e;n||(n+="".concat(this.errorName,": error code - ").concat(t,"."))},t}(),Cp=function(t){function e(e,n,i){var r=t.call(this,e,n,"api/ws",new Io,i)||this;return r.authService=e,r.ngZone=n,r.window=i,r}return pe(e,t),e.prototype.subscribe=function(t){var e=this;this.isActive=!0,t.subscriptionCommands.forEach((function(n){var i=e.nextCmdId();n instanceof vo||n instanceof To||e.subscribersMap.set(i,t),n.cmdId=i,e.cmdWrapper.cmds.push(n)})),this.subscribersCount++,this.publishCommands()},e.prototype.update=function(t){var e=this;this.isReconnect||(t.subscriptionCommands.forEach((function(t){t.cmdId&&(t instanceof po||t instanceof go)&&e.cmdWrapper.cmds.push(t)})),this.publishCommands())},e.prototype.unsubscribe=function(t){var e=this;this.isActive&&(t.subscriptionCommands.forEach((function(t){if(t instanceof oo)t.unsubscribe=!0,e.cmdWrapper.cmds.push(t);else if(t instanceof po){var n=new Eo;n.cmdId=t.cmdId,e.cmdWrapper.cmds.push(n)}else if(t instanceof ho){var i=new So;i.cmdId=t.cmdId,e.cmdWrapper.cmds.push(i)}else if(t instanceof fo){var r=new bo;r.cmdId=t.cmdId,e.cmdWrapper.cmds.push(r)}else if(t instanceof yo){var a=new _o;a.cmdId=t.cmdId,e.cmdWrapper.cmds.push(a)}else if(t instanceof mo||t instanceof go){var o=new Ao;o.cmdId=t.cmdId,e.cmdWrapper.cmds.push(o)}var s=t.cmdId;s&&e.subscribersMap.delete(s)})),this.reconnectSubscribers.delete(t),this.subscribersCount--,this.publishCommands())},e.prototype.processOnMessage=function(t){var e;"cmdId"in t&&t.cmdId?(e=this.subscribersMap.get(t.cmdId))instanceof Go?Lo(t)?e.onNotificationCountUpdate(new Ho(t)):Uo(t)&&e.onNotificationsUpdate(new Bo(t)):e instanceof Ko&&(Oo(t)?e.onEntityData(new Wo(t)):Co(t)?e.onAlarmData(new Vo(t)):Mo(t)?e.onEntityCount(new jo(t)):ko(t)&&e.onAlarmCount(new Yo(t))):"subscriptionId"in t&&t.subscriptionId&&(e=this.subscribersMap.get(t.subscriptionId))&&e.onData(new Po(t))},e=fe([ae(),he(0,se(Zi.AuthService)),he(1,se(Zi.NgZone)),he(2,se(Zi.Window)),ye("design:paramtypes",[Ec,Ea,Window])],e)}(Op),Mp=function(){function t(t,e){this.listener=t,this.telemetryService=e,this.alarmDataSubscriptionOptions=this.listener.alarmDataSubscriptionOptions,this.datasourceType=this.alarmDataSubscriptionOptions.datasourceType}return t.prototype.unsubscribe=function(){this.datasourceType===zs.entity&&this.subscriber&&(this.subscriber.unsubscribe(),this.subscriber=null)},t.prototype.subscribe=function(){var t=this;if(this.subsTw=this.alarmDataSubscriptionOptions.subscriptionTimewindow,this.history=this.alarmDataSubscriptionOptions.subscriptionTimewindow&&Pr(this.alarmDataSubscriptionOptions.subscriptionTimewindow.fixedWindow),this.realtime=this.alarmDataSubscriptionOptions.subscriptionTimewindow&&kr(this.alarmDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs),this.datasourceType===zs.entity){this.subscriber=new Ko(this.telemetryService),this.alarmDataCommand=new ho;var e=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===ja.alarm})).map((function(t){return{type:gl.ALARM_FIELD,key:t.name}})),n=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===ja.entityField})).map((function(t){return{type:gl.ENTITY_FIELD,key:t.name}})),i=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===ja.attribute})).map((function(t){return{type:gl.ATTRIBUTE,key:t.name}})),r=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===ja.timeseries})).map((function(t){return{type:gl.TIME_SERIES,key:t.name}})),a=i.concat(r),o=this.alarmDataSubscriptionOptions.keyFilters;this.alarmDataSubscriptionOptions.additionalKeyFilters&&(o=o?o.concat(this.alarmDataSubscriptionOptions.additionalKeyFilters):this.alarmDataSubscriptionOptions.additionalKeyFilters),this.alarmDataCommand.query={entityFilter:this.alarmDataSubscriptionOptions.entityFilter,pageLink:Xr(this.alarmDataSubscriptionOptions.pageLink),keyFilters:o,alarmFields:e,entityFields:n,latestValues:a},this.history?(this.alarmDataCommand.query.pageLink.startTs=this.subsTw.fixedWindow.startTimeMs,this.alarmDataCommand.query.pageLink.endTs=this.subsTw.fixedWindow.endTimeMs):this.alarmDataCommand.query.pageLink.timeWindow=this.subsTw.realtimeWindowMs,this.subscriber.setTsOffset(this.subsTw.tsOffset),this.subscriber.subscriptionCommands.push(this.alarmDataCommand),this.subscriber.alarmData$.subscribe((function(e){var n,i;if(e.data){if(t.onPageData(e.data,e.allowedEntities,e.totalEntities),t.prematureUpdates){try{for(var r=ve(t.prematureUpdates),a=r.next();!a.done;a=r.next()){var o=a.value;t.onDataUpdate(o)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.prematureUpdates=null}}else e.update&&(t.pageData?t.onDataUpdate(e.update):(t.prematureUpdates||(t.prematureUpdates=[]),t.prematureUpdates.push(e.update)))})),this.subscriber.subscribe()}else if(this.datasourceType===zs.function){var s=Xr(Ka);s.createdTime+=this.subsTw.tsOffset,s.startTs+=this.subsTw.tsOffset;var u={data:[de(de({},s),{entityId:"1",latest:{}})],hasNext:!1,totalElements:1,totalPages:1};this.onPageData(u,1024,1)}},t.prototype.resetData=function(){this.alarmIdToDataIndex={};for(var t=0;t<this.pageData.data.length;t++){var e=this.pageData.data[t];this.alarmIdToDataIndex[e.id.id]=t}},t.prototype.onPageData=function(t,e,n){this.pageData=t,this.resetData(),this.listener.alarmsLoaded(t,e,n)},t.prototype.onDataUpdate=function(t){var e,n;try{for(var i=ve(t),r=i.next();!r.done;r=i.next()){var a=r.value,o=this.alarmIdToDataIndex[a.id.id];Mr(o)&&o>=0&&(this.pageData.data[o]=a)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}this.listener.alarmsUpdated(t,this.pageData)},t}(),kp=function(){function t(t){this.telemetryService=t}return t.prototype.subscribeForAlarms=function(t,e,n){var i=t.alarmSource;if(t.alarmDataSubscriptionOptions=this.createAlarmSubscriptionOptions(t,e,n),i.type!==zs.entity||i.entityFilter&&e)return t.subscription=new Mp(t,this.telemetryService),t.subscription.subscribe();t.alarmsLoaded({data:[],totalPages:0,totalElements:0,hasNext:!1},0,0)},t.prototype.stopSubscription=function(t){t.subscription&&t.subscription.unsubscribe()},t.prototype.createAlarmSubscriptionOptions=function(t,e,n){var i=t.alarmSource,r=[];i.dataKeys.forEach((function(t){var e={name:t.name,type:t.type};r.push(e)}));var a={datasourceType:i.type,dataKeys:r,subscriptionTimewindow:Xr(t.subscriptionTimewindow)};return a.datasourceType===zs.entity&&(a.entityFilter=i.entityFilter,a.pageLink=e,a.keyFilters=i.keyFilters,a.additionalKeyFilters=n),a},t=fe([ae(),he(0,se(Zi.TelemetryWebsocketService)),ye("design:paramtypes",[Cp])],t)}(),Lp=function(){function t(t,e,n){this.subsTw=t,this.endTs=e,this.aggType=n,this.map=new Map,this.reusePair=[void 0,void 0]}return t.prototype.set=function(t,e){this.map.set(t,e)},t.prototype.get=function(t){return this.map.get(t)},t.prototype.delete=function(t){this.map.delete(t)},t.prototype.findDataForTs=function(t){t>=this.endTs&&this.updateLastInterval(t+1)},t.prototype.calculateAggInterval=function(t){return xs(this.subsTw,this.endTs,t,this.aggType)},t.prototype.getMaxTimestampKeyAndValue=function(t){var e,n;if(t instanceof Map){var i=null;try{for(var r=ve(t),a=r.next();!a.done;a=r.next()){var o=Te(a.value,2),s=o[0];o[1];"number"!=typeof s||isNaN(s)||(null===i||s>i)&&(i=s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}},t.prototype.updateLastInterval=function(t){if(t>this.endTs){this.endTs=t;var e=this.getMaxTimestampKeyAndValue(this.map);if(e){var n=this.map.get(e),i=xs(this.subsTw,t,n.ts,this.aggType);n.interval=i,n.ts=i[0]+Math.floor((i[1]-i[0])/2)}}},t.prototype.forEach=function(t,e){this.map.forEach(t,e)},t.prototype.size=function(){return this.map.size},t}(),Up=function(){this.aggMap={}},Pp=function(t,e){t.count++,xr(e)?(t.sum=t.aggValue*(t.count-1)+e,t.aggValue=t.sum/t.count):t.aggValue=e},xp=function(t,e){xr(e)?t.aggValue=Math.min(t.aggValue,e):t.aggValue=e},Fp=function(t,e){xr(e)?t.aggValue=Math.max(t.aggValue,e):t.aggValue=e},Wp=function(t,e){xr(e)?t.aggValue=t.aggValue+e:t.aggValue=e},Vp=function(t){t.count++,t.aggValue=t.count},jp=function(t,e){t.aggValue=e},Yp=Math.pow(2,31)-1,Hp=function(){function t(t,e,n,i,r,a){var o=this;this.onDataCb=t,this.tsKeys=e,this.isLatestDataAgg=n,this.subsTw=i,this.utils=r,this.ignoreDataUpdateOnIntervalTick=a,this.dataBuffer=[],this.dataReceived=!1,this.resetPending=!1,this.updatedData=!1,this.aggregationTimeout=this.isLatestDataAgg?1e3:Math.max(is.numberValue(this.subsTw.aggregation.interval),1e3),this.tsKeys.forEach((function(t){o.dataBuffer[t.id]||(o.dataBuffer[t.id]=[])})),this.subsTw.aggregation.stateData&&(this.lastPrevKvPairData={})}return t.convertValue=function(t,e){return t&&Fr(t)&&(!e||e&&Number(t).toString()===t)?Number(t):t},t.getAggFunction=function(t){switch(t){case ns.MIN:return xp;case ns.MAX:return Fp;case ns.AVG:return Pp;case ns.SUM:return Wp;case ns.COUNT:return Vp;case ns.NONE:return jp;default:return Pp}},t.prototype.updateOnDataCb=function(t){var e=this.onDataCb;return this.onDataCb=t,e},t.prototype.reset=function(t){this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null),this.subsTw=t,this.intervalScheduledTime=this.utils.currentPerfTime(),this.calculateStartEndTs(),this.elapsed=0,this.aggregationTimeout=this.isLatestDataAgg?1e3:Math.max(is.numberValue(this.subsTw.aggregation.interval),1e3),this.resetPending=!0,this.updatedData=!1,this.intervalTimeoutHandle=setTimeout(this.onInterval.bind(this),Math.min(this.aggregationTimeout,Yp))},t.prototype.destroy=function(){this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null),this.aggregationMap=null},t.prototype.onData=function(t,e,n,i){if(this.updatedData=!0,!this.dataReceived||this.resetPending){var r=!0;this.dataReceived||(this.elapsed=0,this.dataReceived=!0,this.calculateStartEndTs()),this.resetPending&&(this.resetPending=!1,r=!1),e?(this.aggregationMap=new Up,this.updateAggregatedData(t)):this.aggregationMap=this.processAggregatedData(t),r&&(this.intervalScheduledTime=this.utils.currentPerfTime()),this.onInterval(n,i)}else this.updateAggregatedData(t),n?(this.intervalScheduledTime=this.utils.currentPerfTime(),this.onInterval(n,i)):this.onInterval(!1,i,!0)},t.prototype.calculateStartEndTs=function(){if(this.startTs=this.subsTw.startTs+this.subsTw.tsOffset,this.subsTw.quickInterval)if("previousInterval"===this.subsTw.timeForComparison){var t=ks(this.subsTw.startTs,this.subsTw.timezone),e=gs(this.subsTw.timezone);this.endTs=_s(this.subsTw.quickInterval,t,e)+this.subsTw.tsOffset}else{t=ks(this.subsTw.startTs,this.subsTw.timezone);this.endTs=Ts(this.subsTw.quickInterval,t,this.subsTw.timezone)+this.subsTw.tsOffset}else this.endTs=this.startTs+this.subsTw.aggregation.timeWindow},t.prototype.onInterval=function(t,e,n){var i=this.utils.currentPerfTime();this.elapsed+=i-this.intervalScheduledTime,this.intervalScheduledTime=i,this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null);var r=n?this.aggregationTimeout-this.elapsed:this.aggregationTimeout;if(t)this.data=this.updateData();else{var a=Math.floor(this.elapsed/this.aggregationTimeout);if(a||!this.data||n){var o=a*this.aggregationTimeout;if(this.subsTw.quickInterval){var s=Es(this.subsTw.quickInterval,this.subsTw.timezone);this.startTs=s[0]+this.subsTw.tsOffset,this.endTs=s[1]+this.subsTw.tsOffset}else this.startTs+=o,this.endTs+=o;this.subsTw.aggregation.type!==ns.NONE&&this.updateLastInterval(),this.data=this.updateData(),this.elapsed=this.elapsed-a*this.aggregationTimeout}}!this.onDataCb||this.ignoreDataUpdateOnIntervalTick&&!this.updatedData||(this.onDataCb(this.data,e),this.updatedData=!1),t||(this.intervalTimeoutHandle=setTimeout(this.onInterval.bind(this),Math.min(r,Yp)))},t.prototype.updateData=function(){var t,e,n=this;this.dataBuffer=[],this.tsKeys.forEach((function(t){n.dataBuffer[t.id]||(n.dataBuffer[t.id]=[])}));var i=function(t){var e=Number(t),i=r.aggregationMap.aggMap[e],a=r.aggKeyById(e).agg===ns.NONE,o=r.dataBuffer[e],s=[];i.forEach((function(t,i){if(i<n.startTs)n.subsTw.aggregation.stateData&&(!n.lastPrevKvPairData[e]||n.lastPrevKvPairData[e][0]<t.ts)&&(n.lastPrevKvPairData[e]=[t.ts,t.aggValue,t.interval]),s.push(i),n.updatedData=!0;else if(t.ts<n.endTs||a){var r=[t.ts,t.aggValue,t.interval];o.push(r)}})),s.forEach((function(t){return i.delete(t)})),o.sort((function(t,e){return t[0]-e[0]})),r.subsTw.aggregation.stateData&&r.updateStateBounds(o,Xr(r.lastPrevKvPairData[e])),o.length>r.subsTw.aggregation.limit&&(o=o.slice(o.length-r.subsTw.aggregation.limit)),r.dataBuffer[e]=o},r=this;try{for(var a=ve(Object.keys(this.aggregationMap.aggMap)),o=a.next();!o.done;o=a.next()){i(o.value)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return this.dataBuffer},t.prototype.updateStateBounds=function(t,e){var n;if(e&&(e[0]=this.startTs,e[2]=[this.startTs,this.startTs]),t.length?n=t[0]:e&&(n=e,t.push(n)),n&&n[0]>this.startTs&&e&&t.unshift(e),t.length){var i=t[t.length-1];i[0]<this.endTs&&((i=Xr(i))[0]=this.endTs,i[2]=[this.endTs,this.endTs],t.push(i))}},t.prototype.processAggregatedData=function(e){var n,i,r=new Up,a=function(n){var i=Number(n),a=o.aggKeyById(i).agg,s=a===ns.COUNT,u=a===ns.NONE,c=r.aggMap[i];c||(c=new Lp(o.subsTw,o.endTs,a),r.aggMap[i]=c),e[i].forEach((function(e){var n=e[0],i=t.convertValue(e[1],u),r=[n,n];u||(r=c.calculateAggInterval(n));var a=r[0]+Math.floor((r[1]-r[0])/2),o={count:s?i:kr(e[2])?e[2]:1,sum:i,aggValue:i,ts:a,interval:r};c.set(r[0],o)}))},o=this;try{for(var s=ve(Object.keys(e)),u=s.next();!u.done;u=s.next()){a(u.value)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return r},t.prototype.updateAggregatedData=function(e){var n,i,r=function(n){var i=Number(n),r=a.aggKeyById(i).agg,o=r===ns.COUNT,s=r===ns.NONE,u=a.aggregationMap.aggMap[i];u||(u=new Lp(a.subsTw,a.endTs,r),a.aggregationMap.aggMap[i]=u),e[i].forEach((function(e){var n=e[0],i=t.convertValue(e[1],s),a=u.findDataForTs(n);if(a)t.getAggFunction(r)(a,i);else{var c=[n,n];s||(c=u.calculateAggInterval(n));var l=c[0]+Math.floor((c[1]-c[0])/2);a={count:kr(e[2])?e[2]:1,sum:i,aggValue:o?1:i,ts:l,interval:c},u.set(c[0],a)}}))},a=this;try{for(var o=ve(Object.keys(e)),s=o.next();!s.done;s=o.next()){r(s.value)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.updateLastInterval=function(){var t,e;try{for(var n=ve(Object.keys(this.aggregationMap.aggMap)),i=n.next();!i.done;i=n.next()){var r=i.value,a=Number(r);this.aggregationMap.aggMap[a].updateLastInterval(this.endTs)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.aggKeyById=function(t){return this.tsKeys.find((function(e){return e.id===t}))},t}(),Bp=function(){function t(t,e,n){this.listener=t,this.telemetryService=e,this.utils=n,this.entityDataSubscriptionOptions=this.listener.subscriptionOptions,this.datasourceType=this.entityDataSubscriptionOptions.datasourceType,this.dataKeys={},this.dataKeysList=[],this.tickScheduledTime=0,this.tickElapsed=0,this.dataResolved=!1,this.started=!1,this.initializeSubscription()}return t.convertValue=function(t){return t&&Fr(t)&&Number(t).toString()===t?Number(t):t},t.calculateComparisonValue=function(e,n){var i,r;switch(e.comparisonResultType){case Bs.PREVIOUS_VALUE:i=n.previous.ts,r=n.previous.value;break;case Bs.DELTA_ABSOLUTE:case Bs.DELTA_PERCENT:i=n.previous.ts;var a=t.convertValue(n.current.value),o=t.convertValue(n.previous.value);r=Fr(a)&&Fr(o)?e.comparisonResultType===Bs.DELTA_ABSOLUTE?a-o:0===o?100:(a-o)/o*100:""}return[[i,r]]},t.prototype.initializeSubscription=function(){for(var t=0;t<this.entityDataSubscriptionOptions.dataKeys.length;t++){var e=Xr(this.entityDataSubscriptionOptions.dataKeys[t]);this.dataKeysList.push(e),e.index=t,this.datasourceType===zs.function?e.func||(e.func=new Function("time","prevValue",e.funcBody)):e.postFuncBody&&!e.postFunc&&(e.postFunc=new Function("time","value","prevValue","timePrev","prevOrigValue",e.postFuncBody));var n=void 0;if(this.datasourceType===zs.entity||this.datasourceType===zs.entityCount||this.datasourceType===zs.alarmCount||this.entityDataSubscriptionOptions.type===Is.timeseries){if(this.datasourceType===zs.function)n="".concat(e.name,"_").concat(e.index,"_").concat(e.type).concat(e.latest?"_latest":"");else{var i=e.aggregationType&&e.aggregationType!==ns.NONE?"_".concat(e.index):"";n="".concat(e.name,"_").concat(e.type).concat(i).concat(e.latest?"_latest":"")}var r=this.dataKeys[n];r||(r=[],this.dataKeys[n]=r),r.push(e),e.listIndex=r.length-1}else n=String(Jr(e)),this.dataKeys[n]=e;e.key=n}},t.prototype.unsubscribe=function(){this.timeseriesTimer&&(clearTimeout(this.timeseriesTimer),this.timeseriesTimer=null),this.latestTimer&&(clearTimeout(this.latestTimer),this.latestTimer=null),this.datasourceType!==zs.entity&&this.datasourceType!==zs.entityCount&&this.datasourceType!==zs.alarmCount||this.subscriber&&(this.subscriber.unsubscribe(),this.subscriber=null),this.dataAggregators&&(this.dataAggregators.forEach((function(t){t.destroy()})),this.dataAggregators=null),this.tsLatestDataAggregators&&(this.tsLatestDataAggregators.forEach((function(t){t.destroy()})),this.tsLatestDataAggregators=null),this.pageData=null},t.prototype.subscribe=function(){var t=this;if(this.entityDataResolveSubject=new sn(1),this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&(this.started=!0,this.dataResolved=!0,this.prepareSubscriptionTimewindow()),this.datasourceType===zs.entity){var e=this.dataKeysList.filter((function(t){return t.type===ja.entityField})).map((function(t){return{type:gl.ENTITY_FIELD,key:t.name}}));if(e.find((function(t){return"name"===t.key}))||e.push({type:gl.ENTITY_FIELD,key:"name"}),e.find((function(t){return"label"===t.key}))||e.push({type:gl.ENTITY_FIELD,key:"label"}),e.find((function(t){return"additionalInfo"===t.key}))||e.push({type:gl.ENTITY_FIELD,key:"additionalInfo"}),this.attrFields=this.dataKeysList.filter((function(t){return t.type===ja.attribute})).map((function(t){return{type:gl.ATTRIBUTE,key:t.name}})),this.tsFields=this.dataKeysList.filter((function(t){return!(t.type!==ja.timeseries||t.aggregationType&&t.aggregationType!==ns.NONE||t.latest)})).map((function(t){return{type:gl.TIME_SERIES,key:t.name}})),this.entityDataSubscriptionOptions.type===Is.timeseries){var n=this.dataKeysList.filter((function(t){return t.type===ja.timeseries&&t.latest&&(!t.aggregationType||t.aggregationType===ns.NONE)})).map((function(t){return{type:gl.TIME_SERIES,key:t.name}}));this.latestValues=this.attrFields.concat(n)}else this.latestValues=this.attrFields.concat(this.tsFields);this.aggTsValues=this.dataKeysList.filter((function(t){return t.type===ja.timeseries&&t.aggregationType&&t.aggregationType!==ns.NONE&&!t.comparisonEnabled})).map((function(t){return{id:t.index,key:t.name,agg:t.aggregationType}})),this.aggTsComparisonValues=this.dataKeysList.filter((function(t){return t.type===ja.timeseries&&t.aggregationType&&t.aggregationType!==ns.NONE&&t.comparisonEnabled})).map((function(t){return{id:t.index,key:t.name,agg:t.aggregationType,previousValueOnly:t.comparisonResultType===Bs.PREVIOUS_VALUE}})),this.subscriber=new Ko(this.telemetryService),this.dataCommand=new po;var i=this.entityDataSubscriptionOptions.keyFilters;this.entityDataSubscriptionOptions.additionalKeyFilters&&(i=i?i.concat(this.entityDataSubscriptionOptions.additionalKeyFilters):this.entityDataSubscriptionOptions.additionalKeyFilters),this.dataCommand.query={entityFilter:this.entityDataSubscriptionOptions.entityFilter,pageLink:this.entityDataSubscriptionOptions.pageLink,keyFilters:i,entityFields:e,latestValues:this.latestValues},this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&(this.prepareSubscriptionCommands(this.dataCommand),this.entityDataSubscriptionOptions.type===Is.timeseries?this.subscriber.setTsOffset(this.subsTw.tsOffset):this.subscriber.setTsOffset(this.latestTsOffset)),this.subscriber.subscriptionCommands.push(this.dataCommand),this.subscriber.entityData$.subscribe((function(e){var n,i;if(e.data){if(t.onPageData(e.data),t.prematureUpdates){try{for(var r=ve(t.prematureUpdates),a=r.next();!a.done;a=r.next()){var o=a.value;t.onDataUpdate(o)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.prematureUpdates=null}}else e.update&&(t.pageData?t.onDataUpdate(e.update):(t.prematureUpdates||(t.prematureUpdates=[]),t.prematureUpdates.push(e.update)))})),this.subscriber.reconnect$.subscribe((function(){if(t.started){var e=t.entityDataSubscriptionOptions.isPaginatedDataSubscription?t.dataCommand:t.subsCommand;if(!t.history&&(t.entityDataSubscriptionOptions.type===Is.timeseries&&t.tsFields.length||t.aggTsValues.length>0&&!t.isFloatingTimewindow)){var n=t.listener.updateRealtimeSubscription();t.subsTw=n,t.entityDataSubscriptionOptions.type===Is.timeseries&&t.tsFields.length&&(e.tsCmd.startTs=t.subsTw.startTs,e.tsCmd.timeWindow=t.subsTw.aggregation.timeWindow,"number"==typeof t.subsTw.aggregation.interval?(e.tsCmd.interval=t.subsTw.aggregation.interval,e.tsCmd.intervalType=ao.MILLISECONDS):e.tsCmd.intervalType=t.subsTw.aggregation.interval,e.tsCmd.timeZoneId=t.subsTw.timezone,e.tsCmd.limit=t.subsTw.aggregation.limit,e.tsCmd.agg=t.subsTw.aggregation.type,e.tsCmd.fetchLatestPreviousPoint=t.subsTw.aggregation.stateData,t.dataAggregators.forEach((function(t){t.reset(n)}))),t.aggTsValues.length>0&&!t.isFloatingTimewindow&&(e.aggTsCmd.startTs=t.subsTw.startTs,e.aggTsCmd.timeWindow=t.subsTw.aggregation.timeWindow,t.tsLatestDataAggregators.forEach((function(t){t.reset(n)})))}t.entityDataSubscriptionOptions.type===Is.timeseries?t.subscriber.setTsOffset(t.subsTw.tsOffset):t.subscriber.setTsOffset(t.latestTsOffset),e.query=t.dataCommand.query,t.subscriber.subscriptionCommands=[e]}else t.subscriber.subscriptionCommands=[t.dataCommand]})),this.subscriber.subscribe()}else if(this.datasourceType===zs.function){var r=0;this.entityDataSubscriptionOptions.type===Is.latest?r=this.entityDataSubscriptionOptions.latestTsOffset:this.entityDataSubscriptionOptions.subscriptionTimewindow&&(r=this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset);var a={entityId:{id:pr,entityType:ur.DEVICE},timeseries:{},latest:{}},o=zs.function;a.latest[gl.ENTITY_FIELD]={name:{ts:Date.now()+r,value:o}};var s={data:[a],hasNext:!1,totalElements:1,totalPages:1};this.onPageData(s)}else if(this.datasourceType===zs.entityCount){this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.subscriber=new Ko(this.telemetryService),this.subscriber.setTsOffset(this.latestTsOffset),this.countCommand=new fo;i=this.entityDataSubscriptionOptions.keyFilters;this.entityDataSubscriptionOptions.additionalKeyFilters&&(i=i?i.concat(this.entityDataSubscriptionOptions.additionalKeyFilters):this.entityDataSubscriptionOptions.additionalKeyFilters),this.countCommand.query={entityFilter:this.entityDataSubscriptionOptions.entityFilter,keyFilters:i},this.subscriber.subscriptionCommands.push(this.countCommand);var u={id:pr,entityType:null},c=this.dataKeysList[0],l=!1;this.subscriber.entityCount$.subscribe((function(e){var n,i,r,a;if(l){var o=[{entityId:u,latest:(r={},r[gl.COUNT]=(a={},a[c.name]={ts:Date.now()+t.latestTsOffset,value:e.count+""},a),r),timeseries:{}}];t.onDataUpdate(o)}else{var s={data:[{entityId:u,latest:(n={},n[gl.ENTITY_FIELD]={name:{ts:Date.now()+t.latestTsOffset,value:zs.entityCount}},n[gl.COUNT]=(i={},i[c.name]={ts:Date.now()+t.latestTsOffset,value:e.count+""},i),n),timeseries:{}}],hasNext:!1,totalElements:1,totalPages:1};t.onPageData(s),l=!0}})),this.subscriber.subscribe()}else if(this.datasourceType===zs.alarmCount){this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.subscriber=new Ko(this.telemetryService),this.subscriber.setTsOffset(this.latestTsOffset),this.alarmCountCommand=new yo;i=this.entityDataSubscriptionOptions.keyFilters;this.entityDataSubscriptionOptions.additionalKeyFilters&&(i=i?i.concat(this.entityDataSubscriptionOptions.additionalKeyFilters):this.entityDataSubscriptionOptions.additionalKeyFilters),this.alarmCountCommand.query={entityFilter:this.entityDataSubscriptionOptions.entityFilter,keyFilters:i},this.entityDataSubscriptionOptions.alarmFilter&&(this.alarmCountCommand.query=de(de({},this.alarmCountCommand.query),this.entityDataSubscriptionOptions.alarmFilter)),this.subscriber.subscriptionCommands.push(this.alarmCountCommand);var p={id:pr,entityType:null},d=this.dataKeysList[0],f=!1;this.subscriber.alarmCount$.subscribe((function(e){var n,i,r,a;if(f){var o=[{entityId:p,latest:(r={},r[gl.COUNT]=(a={},a[d.name]={ts:Date.now()+t.latestTsOffset,value:e.count+""},a),r),timeseries:{}}];t.onDataUpdate(o)}else{var s={data:[{entityId:p,latest:(n={},n[gl.ENTITY_FIELD]={name:{ts:Date.now()+t.latestTsOffset,value:zs.alarmCount}},n[gl.COUNT]=(i={},i[d.name]={ts:Date.now()+t.latestTsOffset,value:e.count+""},i),n),timeseries:{}}],hasNext:!1,totalElements:1,totalPages:1};t.onPageData(s),f=!0}})),this.subscriber.subscribe()}return this.entityDataSubscriptionOptions.isPaginatedDataSubscription?Un(null):this.entityDataResolveSubject.asObservable()},t.prototype.start=function(){if(!this.entityDataSubscriptionOptions.isPaginatedDataSubscription){if(this.prepareSubscriptionTimewindow(),this.prepareData(!0),this.datasourceType===zs.entity){this.subsCommand=new po,this.subsCommand.cmdId=this.dataCommand.cmdId,this.prepareSubscriptionCommands(this.subsCommand);var t=!1;this.entityDataSubscriptionOptions.type===Is.timeseries?this.subscriber.setTsOffset(this.subsTw.tsOffset):t=this.subscriber.setTsOffset(this.latestTsOffset),t?this.listener.forceReInit&&this.listener.forceReInit():this.subsCommand.isEmpty()||(this.subscriber.subscriptionCommands=[this.subsCommand],this.subscriber.update())}else this.datasourceType===zs.entityCount||this.datasourceType===zs.alarmCount?this.subscriber.setTsOffset(this.latestTsOffset)&&this.listener.forceReInit&&this.listener.forceReInit():this.datasourceType===zs.function&&this.startFunction();this.started=!0}},t.prototype.prepareSubscriptionTimewindow=function(){this.subsTw=this.entityDataSubscriptionOptions.subscriptionTimewindow,this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.history=this.entityDataSubscriptionOptions.subscriptionTimewindow&&Pr(this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow),this.realtime=this.entityDataSubscriptionOptions.subscriptionTimewindow&&kr(this.entityDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs),this.isFloatingTimewindow=this.entityDataSubscriptionOptions.subscriptionTimewindow&&!this.entityDataSubscriptionOptions.subscriptionTimewindow.quickInterval&&!this.history},t.prototype.prepareSubscriptionCommands=function(t){var e,n,i=[];if(this.entityDataSubscriptionOptions.type===Is.timeseries?(this.tsFields.length>0&&(this.history?(t.historyCmd={keys:this.tsFields.map((function(t){return t.key})),startTs:this.subsTw.fixedWindow.startTimeMs,endTs:this.subsTw.fixedWindow.endTimeMs,interval:0,intervalType:ao.MILLISECONDS,limit:this.subsTw.aggregation.limit,timeZoneId:this.subsTw.timezone,agg:this.subsTw.aggregation.type,fetchLatestPreviousPoint:this.subsTw.aggregation.stateData},"number"==typeof this.subsTw.aggregation.interval?t.historyCmd.interval=this.subsTw.aggregation.interval:t.historyCmd.intervalType=this.subsTw.aggregation.interval):(t.tsCmd={keys:this.tsFields.map((function(t){return t.key})),startTs:this.subsTw.startTs,timeWindow:this.subsTw.aggregation.timeWindow,interval:0,intervalType:ao.MILLISECONDS,limit:this.subsTw.aggregation.limit,timeZoneId:this.subsTw.timezone,agg:this.subsTw.aggregation.type,fetchLatestPreviousPoint:this.subsTw.aggregation.stateData},"number"==typeof this.subsTw.aggregation.interval?t.tsCmd.interval=this.subsTw.aggregation.interval:t.tsCmd.intervalType=this.subsTw.aggregation.interval)),i=this.latestValues):this.entityDataSubscriptionOptions.type===Is.latest&&(i=this.latestValues),this.history&&(this.aggTsValues.length>0||this.aggTsComparisonValues.length>0)){try{for(var r=ve(this.aggTsComparisonValues),a=r.next();!a.done;a=r.next()){var o=a.value,s=this.dataKeyByIndex(o.id),u=As(this.subsTw,s.timeForComparison,s.comparisonCustomIntervalValue);o.previousStartTs=u.fixedWindow.startTimeMs,o.previousEndTs=u.fixedWindow.endTimeMs}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.aggHistoryCmd={keys:Ee(Ee([],Te(this.aggTsValues),!1),Te(this.aggTsComparisonValues),!1),startTs:this.subsTw.fixedWindow.startTimeMs,endTs:this.subsTw.fixedWindow.endTimeMs}}else if(!this.isFloatingTimewindow&&this.aggTsValues.length>0&&(t.aggTsCmd={keys:this.aggTsValues,startTs:this.subsTw.startTs,timeWindow:this.subsTw.aggregation.timeWindow},i.length>0)){var c=this.aggTsValues.map((function(t){return t.key}));i=i.filter((function(t){return t.type!==gl.TIME_SERIES||!c.includes(t.key)}))}i.length>0&&(t.latestCmd={keys:i})},t.prototype.startFunction=function(){this.frequency=1e3,this.latestFrequency=1e3,this.entityDataSubscriptionOptions.type===Is.timeseries&&(this.frequency=Math.min(is.numberValue(this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.interval),5e3)),this.tickScheduledTime=this.utils.currentPerfTime(),this.generateData(!0)},t.prototype.prepareData=function(t){var e=this;if(this.timeseriesTimer&&(clearTimeout(this.timeseriesTimer),this.timeseriesTimer=null),this.latestTimer&&(clearTimeout(this.latestTimer),this.latestTimer=null),this.dataAggregators&&this.dataAggregators.forEach((function(t){t.destroy()})),this.dataAggregators=[],this.tsLatestDataAggregators&&this.tsLatestDataAggregators.forEach((function(t){t.destroy()})),this.tsLatestDataAggregators=[],this.resetData(),this.entityDataSubscriptionOptions.type===Is.timeseries){var n=void 0;n=this.datasourceType===zs.function?this.dataKeysList.filter((function(t){return!t.latest})).map((function(t){return t.index})):this.dataKeysList.filter((function(t){return!(t.type!==ja.timeseries||t.aggregationType&&t.aggregationType!==ns.NONE||t.latest)})).map((function(t){return t.index}));var i=n.map((function(t){return{id:t,key:t+"",agg:e.subsTw.aggregation.type}}));if(i.length)for(var r=0;r<this.pageData.data.length;r++)this.dataAggregators[r]=this.createRealtimeDataAggregator(this.subsTw,i,!1,r,this.notifyListener.bind(this))}if(this.aggTsValues&&this.aggTsValues.length)if(this.isFloatingTimewindow)this.reportNotSupported(this.aggTsValues,t);else{var a=Xr(this.subsTw);a.aggregation.stateData=!1,a.aggregation.interval=a.aggregation.timeWindow;for(r=0;r<this.pageData.data.length;r++)this.tsLatestDataAggregators[r]=this.createRealtimeDataAggregator(a,this.aggTsValues,!0,r,this.notifyListener.bind(this))}!this.history&&this.aggTsComparisonValues&&this.aggTsComparisonValues.length&&this.reportNotSupported(this.aggTsComparisonValues,t)},t.prototype.reportNotSupported=function(t,e){var n,i,r=this,a=[];try{for(var o=ve(t),s=o.next();!s.done;s=o.next()){a[s.value.id]=[[0,$a,[0,0]]]}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}for(var u=0;u<this.pageData.data.length;u++)this.onIndexedData(a,u,!0,this.entityDataSubscriptionOptions.type===Is.timeseries,(function(t,n,i,a,o){r.data[n]||(r.data[n]=[]),r.data[n][i]=t,e&&r.notifyListener(t,n,i,a,o)}))},t.prototype.resetData=function(){var t,e,n,i,r,a;this.data=[],this.datasourceData=[],this.entityIdToDataIndex={};for(var o=0;o<this.pageData.data.length;o++){var s=this.pageData.data[o];this.entityIdToDataIndex[s.entityId.id]=o,this.datasourceData[o]={};try{for(var u=(t=void 0,ve(Object.keys(this.dataKeys))),c=u.next();!c.done;c=u.next()){var l=c.value,p=this.dataKeys[l];if(this.datasourceType===zs.entity||this.datasourceType===zs.entityCount||this.datasourceType===zs.alarmCount||this.entityDataSubscriptionOptions.type===Is.timeseries)for(var d=p,f=0;f<d.length;f++){var h="".concat(l,"_").concat(f);this.datasourceData[o][h]={data:[]}}else this.datasourceData[o][l]={data:[]}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}}if(this.datasourceOrigData=Xr(this.datasourceData),this.entityDataSubscriptionOptions.type===Is.timeseries)try{for(var y=ve(Object.keys(this.dataKeys)),m=y.next();!m.done;m=y.next()){l=m.value;this.dataKeys[l].forEach((function(t){delete t.lastUpdateTime}))}}catch(t){n={error:t}}finally{try{m&&!m.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}else if(this.entityDataSubscriptionOptions.type===Is.latest)try{for(var g=ve(Object.keys(this.dataKeys)),v=g.next();!v.done;v=g.next()){l=v.value;delete this.dataKeys[l].lastUpdateTime}}catch(t){r={error:t}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(r)throw r.error}}},t.prototype.onPageData=function(t){var e=this,n=!this.pageData;if(n||this.entityDataSubscriptionOptions.isPaginatedDataSubscription||!tp(this.pageData,t)){this.pageData=t,this.entityDataSubscriptionOptions.isPaginatedDataSubscription?this.prepareData(!1):n&&this.resetData();for(var i=0;i<t.data.length;i++){var r=t.data[i];this.processEntityData(r,i,!1,(function(t,n,i){e.data[n]||(e.data[n]=[]),e.data[n][i]=t}))}this.dataResolved?((n||this.entityDataSubscriptionOptions.isPaginatedDataSubscription)&&this.listener.dataLoaded(t,this.data,this.listener.configDatasourceIndex,this.entityDataSubscriptionOptions.pageLink),this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&n&&(this.datasourceType===zs.function&&this.startFunction(),this.entityDataResolveSubject.next({pageData:t,data:this.data,datasourceIndex:this.listener.configDatasourceIndex,pageLink:this.entityDataSubscriptionOptions.pageLink}),this.entityDataResolveSubject.complete())):(this.dataResolved=!0,this.entityDataResolveSubject.next({pageData:t,data:this.data,datasourceIndex:this.listener.configDatasourceIndex,pageLink:this.entityDataSubscriptionOptions.pageLink}),this.entityDataResolveSubject.complete())}else this.listener.initialPageDataChanged&&this.listener.initialPageDataChanged(t)},t.prototype.onDataUpdate=function(t){var e,n;try{for(var i=ve(t),r=i.next();!r.done;r=i.next()){var a=r.value,o=this.entityIdToDataIndex[a.entityId.id];Mr(o)&&o>=0&&this.processEntityData(a,o,!0,this.notifyListener.bind(this))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.notifyListener=function(t,e,n,i,r){this.listener.dataUpdated(t,this.listener.configDatasourceIndex,e,n,i,r)},t.prototype.processEntityData=function(e,n,i,r){var a,o,s,u,c,l,p=this;if(this.entityDataSubscriptionOptions.type===Is.latest||this.entityDataSubscriptionOptions.type===Is.timeseries){if(e.aggLatest){var d=[];try{for(var f=ve(Object.keys(e.aggLatest)),h=f.next();!h.done;h=f.next()){var y=h.value,m=Number(y),g=this.dataKeyByIndex(m),v=e.aggLatest[m];if(g.comparisonEnabled){var T=t.calculateComparisonValue(g,v);this.onKeyData(T,g.name,m,g.type,n,!0,this.entityDataSubscriptionOptions.type===Is.timeseries,!0,r)}else d[m]=[[v.current.ts,v.current.value,v.current.count]]}}catch(t){a={error:t}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(a)throw a.error}}if(Object.keys(d).length>0&&this.tsLatestDataAggregators&&this.tsLatestDataAggregators[n]){var E=this.tsLatestDataAggregators[n],b=void 0;i||(b=E.updateOnDataCb((function(t,e){p.onIndexedData(t,n,e,p.entityDataSubscriptionOptions.type===Is.timeseries,r)}))),E.onData(d,!1,this.history,!0),b&&E.updateOnDataCb(b)}}if(e.latest){var S=function(t){var a,o,s,u,c=_.toSubscriptionData(e.latest[t],!1),l=Sl(gl[t]);if(i&&gl[t]===gl.TIME_SERIES){var p=Object.keys(c),d=_.latestValues.filter((function(t){return t.type===gl.TIME_SERIES&&p.includes(t.key)}));if(d.length){var f={};try{for(var h=(a=void 0,ve(d)),y=h.next();!y.done;y=h.next()){var m=y.value;f[m.key]=c[m.key]}}catch(t){a={error:t}}finally{try{y&&!y.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}_.onData(f,l,n,!0,_.entityDataSubscriptionOptions.type===Is.timeseries,r)}var g=_.aggTsValues.filter((function(t){return p.includes(t.key)}));if(!_.history&&g.length&&_.tsLatestDataAggregators&&_.tsLatestDataAggregators[n]){var v=_.tsLatestDataAggregators[n],T=[];try{for(var E=(s=void 0,ve(g)),b=E.next();!b.done;b=E.next()){var S=b.value;T[S.id]=c[S.key]}}catch(t){s={error:t}}finally{try{b&&!b.done&&(u=E.return)&&u.call(E)}finally{if(s)throw s.error}}v.onData(T,!0,!1,!0)}}else _.onData(c,l,n,!0,_.entityDataSubscriptionOptions.type===Is.timeseries,r)},_=this;try{for(var A=ve(Object.keys(e.latest)),w=A.next();!w.done;w=A.next()){S(w.value)}}catch(t){s={error:t}}finally{try{w&&!w.done&&(u=A.return)&&u.call(A)}finally{if(s)throw s.error}}}}if(this.entityDataSubscriptionOptions.type===Is.timeseries&&e.timeseries){var I=this.toSubscriptionData(e.timeseries,!0);if(this.dataAggregators&&this.dataAggregators[n]){E=this.dataAggregators[n];var D=Object.keys(I),R=this.timeseriesDataKeysByKeyNames(D),N=[];try{for(var O=ve(R),C=O.next();!C.done;C=O.next()){N[(g=C.value).index]=I[g.name]}}catch(t){c={error:t}}finally{try{C&&!C.done&&(l=O.return)&&l.call(O)}finally{if(c)throw c.error}}b=void 0;i||(b=E.updateOnDataCb((function(t,e){p.onIndexedData(t,n,e,!1,r)}))),E.onData(N,!1,this.history,!0),b&&E.updateOnDataCb(b)}else this.history||i||this.onData(I,ja.timeseries,n,!0,!1,r)}},t.prototype.onData=function(t,e,n,i,r,a){var o,s;try{for(var u=ve(Object.keys(t)),c=u.next();!c.done;c=u.next()){var l=c.value,p=t[l];this.onKeyData(p.map((function(t){return[t[0],t[1],[t[0],t[0]]]})),l,0,e,n,i,r,!1,a)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}},t.prototype.onIndexedData=function(t,e,n,i,r){var a,o;try{for(var s=ve(Object.keys(t)),u=s.next();!u.done;u=s.next()){var c=u.value,l=Number(c),p=this.dataKeyByIndex(l),d=p.aggregationType&&p.aggregationType!==ns.NONE,f=t[l],h=p.name;p.type===ja.function&&(h+="_".concat(p.index)),this.onKeyData(f,h,l,p.type,e,n,i,d,r)}}catch(t){a={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}},t.prototype.onKeyData=function(e,n,i,r,a,o,s,u,c){for(var l=this,p=u?"_".concat(i):"",d="".concat(n,"_").concat(r).concat(p).concat(s?"_latest":""),f=this.dataKeys[d],h=function(n){var i="".concat(d,"_").concat(n);if(y.datasourceData[a][i].data){var r,u,p=f[n],h=[],m=void 0,g=void 0,v=!1;if(y.realtime&&!s?(m=[],g=[]):(m=y.datasourceData[a][i].data,g=y.datasourceOrigData[a][i].data),m.length>0?(r=m[m.length-1],u=g[g.length-1]):(r=[0,0,[0,0]],u=[0,0,[0,0]]),y.datasourceOrigData[a][i].data=[],y.entityDataSubscriptionOptions.type!==Is.timeseries||s){if(y.entityDataSubscriptionOptions.type===Is.latest||s){if(e.length>0){var T=e[0],E=T[0];y.datasourceOrigData[a][i].data.push([T[0],T[1],T[2]]);var b=t.convertValue(T[1]);p.postFunc&&(b=p.postFunc(E,b,r[1],u[0],u[1])),T=[E,b,T[2]],h.push([T[0],T[1],T[2]])}v=!0}}else e.forEach((function(e){var n=e,o=n[0];l.datasourceOrigData[a][i].data.push([n[0],n[1],n[2]]);var s=t.convertValue(n[1]);p.postFunc&&(s=p.postFunc(o,s,r[1],u[0],u[1])),u=[n[0],n[1],n[2]],n=[n[0],s,n[2]],h.push([n[0],n[1],n[2]]),r=[n[0],n[1],n[2]]})),v=!0;v&&(y.datasourceData[a][i].data=h,c(y.datasourceData[a][i],a,p.index,o,s))}},y=this,m=0;f&&m<f.length;m++)h(m)},t.prototype.toSubscriptionData=function(t,e){var n,i,r={},a=function(n){var i=t[n],a=[];if(e)i.forEach((function(t){a.push([t.ts,t.value,t.count])}));else{var o=i;a.push([o.ts,o.value,o.count])}r[n]=a};try{for(var o=ve(Object.keys(t)),s=o.next();!s.done;s=o.next()){a(s.value)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r},t.prototype.createRealtimeDataAggregator=function(t,e,n,i,r){var a=this;return new Hp((function(t,e){a.onIndexedData(t,i,e,n&&a.entityDataSubscriptionOptions.type===Is.timeseries,r)}),e,n,t,this.utils,this.entityDataSubscriptionOptions.ignoreDataUpdateOnIntervalTick||n)},t.prototype.dataKeyByIndex=function(t){return this.dataKeysList.find((function(e){return e.index===t}))},t.prototype.timeseriesDataKeysByKeyNames=function(t){var e,n,i=[];try{for(var r=ve(t),a=r.next();!a.done;a=r.next()){var o=a.value,s="".concat(o,"_").concat(ja.timeseries),u=this.dataKeys[s];i.push.apply(i,Ee([],Te(u),!1))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i},t.prototype.generateSeries=function(t,e,n){var i,r=[],a="".concat(t.key,"_").concat(t.listIndex),o=this.datasourceData[0][a].data;if(o.length>0){var s=o[o.length-1];i=[s[0],s[1]]}else i=[0,0];for(var u=e;u<=n&&(this.timeseriesTimer||this.history);u+=this.frequency){var c=[u,t.func(u,i[1])];r.push(c),i=c}return r.length>0&&(t.lastUpdateTime=r[r.length-1][0]),r},t.prototype.generateLatest=function(t,e){var n,i=t.latest?"".concat(t.key,"_").concat(t.listIndex):t.key,r=this.datasourceData[0][i].data;n=r.length>0?r[r.length-1]:[0,0];var a=Date.now()+this.latestTsOffset,o=[a,t.func(a,n[1])];this.datasourceData[0][i].data=[o],this.listener.dataUpdated(this.datasourceData[0][i],this.listener.configDatasourceIndex,0,t.index,e,t.latest)},t.prototype.generateData=function(t){var e,n,i,r,a,o=[],s=[];if(this.entityDataSubscriptionOptions.type===Is.timeseries)try{for(var u=ve(Object.keys(this.dataKeys)),c=u.next();!c.done;c=u.next()){a=c.value;var l=this.dataKeys[a];o=o.concat(l.filter((function(t){return!t.latest}))),s=s.concat(l.filter((function(t){return t.latest})))}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}else if(this.entityDataSubscriptionOptions.type===Is.latest)try{for(var p=ve(Object.keys(this.dataKeys)),d=p.next();!d.done;d=p.next())a=d.value,s.push(this.dataKeys[a])}catch(t){i={error:t}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}o.length&&(this.history?this.onTimeseriesTick(o,!0):this.timeseriesTimer=setTimeout(this.onTimeseriesTick.bind(this,o,!0),0)),s.length&&this.onLatestTick(s,t)},t.prototype.onTimeseriesTick=function(t,e){var n,i,r,a=this.utils.currentPerfTime();this.tickElapsed+=a-this.tickScheduledTime,this.tickScheduledTime=a,this.timeseriesTimer&&clearTimeout(this.timeseriesTimer);var o=[];this.history||(r=Math.floor(this.tickElapsed/this.frequency));var s=this.history?this.frequency:r*this.frequency;this.tickElapsed=this.tickElapsed-s;for(var u=0;u<t.length&&(this.timeseriesTimer||this.history);u++){var c=t[u];if(!n){if(this.realtime){if(c.lastUpdateTime)n=c.lastUpdateTime+this.frequency,i=c.lastUpdateTime+s;else if(i=(n=this.entityDataSubscriptionOptions.subscriptionTimewindow.startTs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset)+this.entityDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs+this.frequency,this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.type===ns.NONE){var l=i-this.frequency*this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.limit;n=Math.max(l,n)}}else n=this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow.startTimeMs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset,i=this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow.endTimeMs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset;if(this.entityDataSubscriptionOptions.subscriptionTimewindow.quickInterval){var p=gs().valueOf()+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset;i=Math.min(p,i)}}o[c.index]=this.generateSeries(c,n,i)}this.dataAggregators&&this.dataAggregators.length&&this.dataAggregators[0].onData(o,!0,this.history,e),this.history||(this.timeseriesTimer=setTimeout(this.onTimeseriesTick.bind(this,t,!0),this.frequency))},t.prototype.onLatestTick=function(t,e){var n=this;this.latestTimer&&clearTimeout(this.latestTimer),t.forEach((function(t){n.generateLatest(t,e)})),this.latestTimer=setTimeout(this.onLatestTick.bind(this,t,!0),this.latestFrequency)},t}(),Kp=function(){function t(t,e){this.telemetryService=t,this.utils=e}var e;return e=t,t.isUnresolvedDatasource=function(t,e){return t.type===zs.entity?!t.entityFilter||!e:t.type===zs.entityCount&&!t.entityFilter},t.toSubscriptionDataKey=function(t,e){return{name:t.name,type:t.type,aggregationType:t.aggregationType,comparisonEnabled:t.comparisonEnabled,timeForComparison:t.timeForComparison,comparisonCustomIntervalValue:t.comparisonCustomIntervalValue,comparisonResultType:t.comparisonResultType,funcBody:t.funcBody,postFuncBody:t.postFuncBody,latest:e}},t.prototype.prepareSubscription=function(t,n){void 0===n&&(n=!1);var i=t.configDatasource;return t.subscriptionOptions=this.createSubscriptionOptions(i,t.subscriptionType,i.pageLink,i.keyFilters,null,!1,n),e.isUnresolvedDatasource(i,i.pageLink)?Un(null):(t.subscription=new Bp(t,this.telemetryService,this.utils),t.subscription.subscribe())},t.prototype.startSubscription=function(t){t.subscription&&(t.useTimewindow&&(t.subscriptionOptions.subscriptionTimewindow=Xr(t.subscriptionTimewindow)),t.subscriptionType!==Is.timeseries&&t.subscriptionType!==Is.latest||(t.subscriptionOptions.latestTsOffset=t.latestTsOffset),t.subscription.start())},t.prototype.subscribeForPaginatedData=function(t,n,i,r){void 0===r&&(r=!1);var a=t.configDatasource;return t.subscriptionOptions=this.createSubscriptionOptions(a,t.subscriptionType,n,a.keyFilters,i,!0,r),e.isUnresolvedDatasource(a,n)?(t.dataLoaded({data:[],totalPages:0,totalElements:0,hasNext:!1},[],t.configDatasourceIndex,t.subscriptionOptions.pageLink),Un(null)):(t.subscription=new Bp(t,this.telemetryService,this.utils),t.useTimewindow&&(t.subscriptionOptions.subscriptionTimewindow=Xr(t.subscriptionTimewindow)),t.subscriptionType!==Is.timeseries&&t.subscriptionType!==Is.latest||(t.subscriptionOptions.latestTsOffset=t.latestTsOffset),t.subscription.subscribe())},t.prototype.stopSubscription=function(t){t.subscription&&t.subscription.unsubscribe()},t.prototype.createSubscriptionOptions=function(t,n,i,r,a,o,s){var u=[];t.dataKeys.forEach((function(t){u.push(e.toSubscriptionDataKey(t,!1))})),t.latestDataKeys&&t.latestDataKeys.forEach((function(t){u.push(e.toSubscriptionDataKey(t,!0))}));var c={datasourceType:t.type,dataKeys:u,type:n};return c.datasourceType!==zs.entity&&c.datasourceType!==zs.entityCount&&c.datasourceType!==zs.alarmCount||(c.entityFilter=t.entityFilter,c.alarmFilter=t.alarmFilter,c.keyFilters=r,c.additionalKeyFilters=a,c.datasourceType===zs.entity&&(c.pageLink=i)),c.isPaginatedDataSubscription=o,c.ignoreDataUpdateOnIntervalTick=s,c},t=e=fe([ae(),he(0,se(Zi.TelemetryWebsocketService)),he(1,se(Zi.UtilsService)),ye("design:paramtypes",[Cp,gc])],t)}(),Gp=function(){function t(t){this.dashboard=t}return Object.defineProperty(t.prototype,"aliasController",{get:function(){return this.dashboard.aliasController},enumerable:!1,configurable:!0}),t}();!function(t){t.QUEUED="QUEUED",t.DELIVERED="DELIVERED",t.SUCCESSFUL="SUCCESSFUL",t.TIMEOUT="TIMEOUT",t.FAILED="FAILED",t.SENT="SENT",t.EXPIRED="EXPIRED"}(Np||(Np={}));var qp=new Map([[Np.QUEUED,"black"],[Np.DELIVERED,"green"],[Np.SUCCESSFUL,"green"],[Np.TIMEOUT,"orange"],[Np.FAILED,"red"],[Np.SENT,"green"],[Np.EXPIRED,"red"]]),zp=new Map([[Np.QUEUED,"widgets.persistent-table.rpc-status.QUEUED"],[Np.DELIVERED,"widgets.persistent-table.rpc-status.DELIVERED"],[Np.SUCCESSFUL,"widgets.persistent-table.rpc-status.SUCCESSFUL"],[Np.TIMEOUT,"widgets.persistent-table.rpc-status.TIMEOUT"],[Np.FAILED,"widgets.persistent-table.rpc-status.FAILED"],[Np.SENT,"widgets.persistent-table.rpc-status.SENT"],[Np.EXPIRED,"widgets.persistent-table.rpc-status.EXPIRED"]]),Qp=_a,Jp=function(t){if(t.length>0){var e=0;return t.forEach((function(t){e+=Number(t[1])})),e}return null},Xp=function(){function t(t,e){var n,i,r=this;this.options=e,this.tsOffset=0,this.cafs={},this.hasResolvedData=!1,this.subscribed=!1,this.hasLatestData=!1,this.widgetTimewindowChangedSubject=new sn,this.widgetTimewindowChanged$=this.widgetTimewindowChangedSubject.asObservable().pipe(Je((function(t,e){var r=new Set;t.subscribe(Xe(e,(function(t){var i=n?n(t):t;r.has(i)||(r.add(i),e.next(t))}))),i&&Dn(i).subscribe(Xe(e,(function(){return r.clear()}),Ue))})));var a=new sn;this.init$=a.asObservable(),this.ctx=t,this.type=e.type,this.id=this.ctx.utils.guid(),this.callbacks=e.callbacks,this.type===Is.rpc?(this.callbacks.rpcStateChanged=this.callbacks.rpcStateChanged||function(){},this.callbacks.onRpcSuccess=this.callbacks.onRpcSuccess||function(){},this.callbacks.onRpcFailed=this.callbacks.onRpcFailed||function(){},this.callbacks.onRpcErrorCleared=this.callbacks.onRpcErrorCleared||function(){},this.targetDevice=e.targetDevice,eu(this.targetDevice)||(e.targetDeviceAliasIds&&e.targetDeviceAliasIds.length?this.targetDevice={type:Xs.entity,entityAliasId:e.targetDeviceAliasIds[0]}:e.targetDeviceIds&&e.targetDeviceIds.length&&(this.targetDevice={type:Xs.device,entityAliasId:e.targetDeviceIds[0]})),this.targetEntityId=null,this.targetEntityName=null,this.rpcRejection=null,this.rpcErrorText=null,this.rpcEnabled=!1,this.executingRpcRequest=!1,this.executingSubjects=[],this.initRpc().subscribe((function(){a.next(r),a.complete()}))):this.type===Is.alarm?(this.callbacks.onDataUpdated=this.callbacks.onDataUpdated||function(){},this.callbacks.onDataUpdateError=this.callbacks.onDataUpdateError||function(){},this.callbacks.onSubscriptionMessage=this.callbacks.onSubscriptionMessage||function(){},this.callbacks.dataLoading=this.callbacks.dataLoading||function(){},this.callbacks.timeWindowUpdated=this.callbacks.timeWindowUpdated||function(){},this.alarmSource=e.alarmSource,this.datasourcesOptional=e.datasourcesOptional,this.alarmDataListener=null,this.alarms={data:[],totalPages:0,totalElements:0,hasNext:!1},this.originalTimewindow=null,this.timeWindow={},this.useDashboardTimewindow=e.useDashboardTimewindow,this.useTimewindow=!0,this.onTimewindowChangeFunction=e.onTimewindowChangeFunction||function(t){return t},this.useDashboardTimewindow?this.timeWindowConfig=Xr(e.dashboardTimewindow):this.timeWindowConfig=Xr(e.timeWindowConfig),this.subscriptionTimewindow=null,this.loadingData=!1,this.displayLegend=!1,this.initAlarmSubscription().subscribe({next:function(){a.next(r),a.complete()},error:function(){a.error(null)}})):(this.callbacks.onDataUpdated=this.callbacks.onDataUpdated||function(){},this.callbacks.onLatestDataUpdated=this.callbacks.onLatestDataUpdated||function(){},this.callbacks.onDataUpdateError=this.callbacks.onDataUpdateError||function(){},this.callbacks.onLatestDataUpdateError=this.callbacks.onLatestDataUpdateError||function(){},this.callbacks.onSubscriptionMessage=this.callbacks.onSubscriptionMessage||function(){},this.callbacks.onInitialPageDataChanged=this.callbacks.onInitialPageDataChanged||function(){},this.callbacks.forceReInit=this.callbacks.forceReInit||function(){},this.callbacks.dataLoading=this.callbacks.dataLoading||function(){},this.callbacks.legendDataUpdated=this.callbacks.legendDataUpdated||function(){},this.callbacks.timeWindowUpdated=this.callbacks.timeWindowUpdated||function(){},this.configuredDatasources=this.ctx.utils.validateAndUpdateDatasources(e.datasources),this.datasourcesOptional=e.datasourcesOptional,this.entityDataListeners=[],this.hasDataPageLink=e.hasDataPageLink,this.singleEntity=e.singleEntity,this.pageSize=e.pageSize,this.warnOnPageDataOverflow=e.warnOnPageDataOverflow,this.ignoreDataUpdateOnIntervalTick=e.ignoreDataUpdateOnIntervalTick,this.datasourcePages=[],this.datasources=[],this.dataPages=[],this.data=[],this.latestData=[],this.hiddenData=[],this.originalTimewindow=null,this.timeWindow={},this.useDashboardTimewindow=e.useDashboardTimewindow,this.onTimewindowChangeFunction=e.onTimewindowChangeFunction||function(t){return t},this.stateData=e.stateData,this.useTimewindow=this.type===Is.timeseries||nu(this.configuredDatasources),this.useDashboardTimewindow?this.timeWindowConfig=Xr(e.dashboardTimewindow):this.timeWindowConfig=Xr(e.timeWindowConfig),this.type===Is.latest&&(this.timezone=this.useTimewindow?this.timeWindowConfig.timezone:e.dashboardTimewindow.timezone,this.updateTsOffset()),this.subscriptionTimewindow=null,this.comparisonEnabled=e.comparisonEnabled&&ms(this.timeWindowConfig),this.comparisonEnabled&&(this.timeForComparison=e.timeForComparison,this.comparisonCustomIntervalValue=e.comparisonCustomIntervalValue,this.comparisonTimeWindow={},this.timewindowForComparison=null),this.units=e.units||"",this.decimals=kr(e.decimals)?e.decimals:2,this.loadingData=!1,e.legendConfig?(this.legendConfig=e.legendConfig,this.legendData={keys:[],data:[]},this.displayLegend=!0):this.displayLegend=!1,this.caulculateLegendData=this.displayLegend&&this.type===Is.timeseries&&(!0===this.legendConfig.showMin||!0===this.legendConfig.showMax||!0===this.legendConfig.showAvg||!0===this.legendConfig.showTotal||!0===this.legendConfig.showLatest),this.initDataSubscription().subscribe({next:function(){a.next(r),a.complete()},error:function(){a.error(null)}}))}return Object.defineProperty(t.prototype,"firstDatasource",{get:function(){var t;return this.type===Is.alarm?this.alarmSource:(null===(t=this.datasources)||void 0===t?void 0:t.length)?this.datasources[0]:null},enumerable:!1,configurable:!0}),t.prototype.initRpc=function(){var t=this,e=new sn;return this.ctx.aliasController.resolveSingleEntityInfoForTargetDevice(this.targetDevice).subscribe({next:function(n){if((null==n?void 0:n.id)&&(t.targetEntityId={id:n.id,entityType:n.entityType},t.targetEntityName=n.name),(null==n?void 0:n.entityType)===ur.DEVICE&&(t.targetDeviceId=n.id),t.targetDeviceId)t.rpcEnabled=!0;else if(t.rpcEnabled=t.ctx.utils.widgetEditMode,!t.rpcEnabled)if(t.targetEntityId){var i=t.ctx.translate.instant(hr.get(t.targetEntityId.entityType).type);t.rpcDisabledReason=t.ctx.translate.instant("rpc.error.invalid-target-entity",{entityType:i})}else t.rpcDisabledReason=t.ctx.translate.instant("rpc.error.target-device-is-not-set");t.hasResolvedData=!0,t.callbacks.rpcStateChanged(t),e.next(),e.complete()},error:function(){t.rpcEnabled=!1,t.rpcDisabledReason=t.ctx.translate.instant("rpc.error.failed-to-resolve-target-device"),t.callbacks.rpcStateChanged(t),e.next(),e.complete()}}),e.asObservable()},t.prototype.initAlarmSubscription=function(){var t=this,e=new sn(1);return this.loadStDiff().subscribe((function(){t.ctx.aliasController?t.ctx.aliasController.resolveAlarmSource(t.alarmSource).subscribe({next:function(n){t.alarmSource=n,n&&(t.hasResolvedData=!0),t.configureAlarmsData(),e.next(),e.complete()},error:function(t){e.error(t)}}):(t.hasResolvedData=!0,t.configureAlarmsData(),e.next(),e.complete())})),e.asObservable()},t.prototype.configureAlarmsData=function(){this.notifyDataLoaded()},t.prototype.initDataSubscription=function(){var t=this;this.notifyDataLoading();var e=new sn(1);return this.loadStDiff().subscribe((function(){t.ctx.aliasController?t.ctx.aliasController.resolveDatasources(t.configuredDatasources,t.singleEntity,t.pageSize).subscribe({next:function(n){t.configuredDatasources=n,t.prepareDataSubscriptions().subscribe((function(){e.next(),e.complete()}))},error:function(n){t.notifyDataLoaded(),e.error(n)}}):(t.configuredDatasources=Xr(t.configuredDatasources),t.hasResolvedData=!0,t.prepareDataSubscriptions().subscribe((function(){e.next(),e.complete()})))})),e.asObservable()},t.prototype.prepareDataSubscriptions=function(){var t=this;if(this.hasDataPageLink||!this.configuredDatasources||!this.configuredDatasources.length)return this.hasResolvedData=!0,this.notifyDataLoaded(),Un(null);if(this.comparisonEnabled){var e=[];this.configuredDatasources.forEach((function(t,n){var i=[];if(t.dataKeys.forEach((function(t,e){if(su(t.settings)&&t.settings.comparisonSettings.showValuesForComparison){var n=Xr(t);n.isAdditional=!0,n.origDataKeyIndex=e,i.push(n)}})),i.length){var r=Xr(t);r.dataKeys=i,r.isAdditional=!0,r.origDatasourceIndex=n,e.push(r)}})),this.configuredDatasources=this.configuredDatasources.concat(e)}return zn(this.configuredDatasources.map((function(e,n){var i={subscriptionType:t.type,useTimewindow:t.useTimewindow,configDatasource:e,configDatasourceIndex:n,dataLoaded:function(e,n,i,r){t.dataLoaded(e,n,i,r,!0)},initialPageDataChanged:t.initialPageDataChanged.bind(t),forceReInit:t.forceReInit.bind(t),dataUpdated:t.dataUpdated.bind(t),updateRealtimeSubscription:function(){return t.updateRealtimeSubscription()},setRealtimeSubscription:function(e){t.updateRealtimeSubscription(Xr(e))}};return t.entityDataListeners.push(i),t.ctx.entityDataService.prepareSubscription(i,t.ignoreDataUpdateOnIntervalTick)}))).pipe(xn((function(e){e.forEach((function(e){e&&t.dataLoaded(e.pageData,e.data,e.datasourceIndex,e.pageLink,!1)})),t.configureLoadedData(),t.hasResolvedData=t.datasources.length>0||t.datasourcesOptional,t.updateDataTimewindow(),t.notifyDataLoaded(),t.onDataUpdated(!0),t.hasLatestData&&t.onLatestDataUpdated(!0)})))},t.prototype.resetData=function(){this.data.length=0,this.latestData.length=0,this.hiddenData.length=0,this.displayLegend&&(this.legendData.keys.length=0,this.legendData.data.length=0),this.onDataUpdated(),this.hasLatestData&&this.onLatestDataUpdated()},t.prototype.getFirstEntityInfo=function(){var t,e,n,i,r,a;if(this.type===Is.rpc)this.targetEntityId&&(n=this.targetEntityId,i=this.targetEntityName,r=this.targetEntityName);else if(this.type===Is.alarm){if(this.alarmSource&&this.alarmSource.entityType&&this.alarmSource.entityId)n={entityType:this.alarmSource.entityType,id:this.alarmSource.entityId},i=this.alarmSource.entityName,r=this.alarmSource.entityLabel,a=this.alarmSource.entityDescription;else if(this.alarms&&this.alarms.data.length){var o=this.alarms.data[0];if(n=o.originator,i=o.originatorName,r=o.originatorLabel,o.latest&&o.latest[gl.ENTITY_FIELD]){var s=o.latest[gl.ENTITY_FIELD].additionalInfo;if(s){var u=s.value;if(u&&u.length)try{var c=JSON.parse(u);c&&c.description&&(a=c.description)}catch(t){}}}}}else try{for(var l=ve(this.datasources),p=l.next();!p.done;p=l.next()){var d=p.value;if(d&&d.entityType&&d.entityId){n={entityType:d.entityType,id:d.entityId},i=d.entityName,r=d.entityLabel,a=d.entityDescription;break}}}catch(e){t={error:e}}finally{try{p&&!p.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}return n?{entityId:n,entityName:i,entityLabel:r,entityDescription:a}:null},t.prototype.onAliasesChanged=function(t){return this.type===Is.rpc?this.checkRpcTarget(t):this.type===Is.alarm?this.checkAlarmSource(t):this.checkSubscriptions(t)},t.prototype.onFiltersChanged=function(t){return this.type!==Is.rpc&&(this.type===Is.alarm?this.checkAlarmSourceFilters(t):this.checkSubscriptionsFilters(t))},t.prototype.onDataUpdated=function(t){var e=this;this.cafs.dataUpdated&&(this.cafs.dataUpdated(),this.cafs.dataUpdated=null),this.cafs.dataUpdated=this.ctx.raf.raf((function(){try{e.callbacks.onDataUpdated(e,t)}catch(t){e.callbacks.onDataUpdateError(e,t)}}))},t.prototype.onLatestDataUpdated=function(t){var e=this;this.cafs.latestDataUpdated&&(this.cafs.latestDataUpdated(),this.cafs.latestDataUpdated=null),this.cafs.latestDataUpdated=this.ctx.raf.raf((function(){try{e.callbacks.onLatestDataUpdated(e,t)}catch(t){e.callbacks.onLatestDataUpdateError(e,t)}}))},t.prototype.onSubscriptionMessage=function(t){var e=this;this.cafs.message&&(this.cafs.message(),this.cafs.message=null),this.cafs.message=this.ctx.raf.raf((function(){e.callbacks.onSubscriptionMessage(e,t)}))},t.prototype.onDashboardTimewindowChanged=function(t){var e=!1,n=!1;this.useTimewindow?this.useDashboardTimewindow&&(this.type===Is.latest&&t&&this.timezone!==t.timezone&&(this.timezone=t.timezone,e=this.updateTsOffset()),!$r(this.timeWindowConfig,t)&&t&&(n=fs(this.timeWindowConfig,t),this.timeWindowConfig=Xr(t),e=!0)):this.type===Is.latest&&t&&this.timezone!==t.timezone&&(this.timezone=t.timezone,e=this.updateTsOffset()),e&&this.update(n)},t.prototype.updateDataVisibility=function(t){if(this.displayLegend){var e=this.legendData.keys.find((function(e){return e.dataIndex===t})).dataKey.hidden;e?(this.hiddenData[t].data=this.data[t].data,this.data[t].data=[]):(this.data[t].data=this.hiddenData[t].data,this.hiddenData[t].data=[]),this.onDataUpdated()}},t.prototype.updateTimewindowConfig=function(t){if(!this.useDashboardTimewindow){this.type===Is.latest&&t&&this.timezone!==t.timezone&&(this.timezone=t.timezone,this.updateTsOffset());var e=fs(this.timeWindowConfig,t);this.timeWindowConfig=t,this.update(e)}},t.prototype.onResetTimewindow=function(){if(this.useDashboardTimewindow)this.ctx.dashboardTimewindowApi.onResetTimewindow();else if(this.originalTimewindow){var t=fs(this.timeWindowConfig,this.originalTimewindow);this.timeWindowConfig=Xr(this.originalTimewindow),this.originalTimewindow=null,this.callbacks.timeWindowUpdated(this,this.timeWindowConfig),this.update(t)}},t.prototype.onUpdateTimewindow=function(t,e,n){if(this.useDashboardTimewindow)this.ctx.dashboardTimewindowApi.onUpdateTimewindow(t,e);else{this.originalTimewindow||(this.originalTimewindow=Xr(this.timeWindowConfig)),this.timeWindowConfig=ds(this.timeWindowConfig,t,e,n,this.ctx.timeService),this.callbacks.timeWindowUpdated(this,this.timeWindowConfig);var i=fs(this.timeWindowConfig,this.originalTimewindow);this.update(i)}},t.prototype.sendOneWayCommand=function(t,e,n,i,r,a,o,s){return this.sendCommand(!0,t,e,n,i,r,a,o,s)},t.prototype.sendTwoWayCommand=function(t,e,n,i,r,a,o,s){return this.sendCommand(!1,t,e,n,i,r,a,o,s)},t.prototype.clearRpcError=function(){this.rpcRejection=null,this.rpcErrorText=null,this.callbacks.onRpcErrorCleared(this)},t.prototype.completedCommand=function(){this.executingSubjects.forEach((function(t){t.next(),t.complete()}))},t.prototype.sendCommand=function(t,e,n,i,r,a,o,s,u){var c=this;if(this.rpcEnabled){!this.rpcRejection||this.rpcRejection.status&&504===this.rpcRejection.status||(this.rpcRejection=null,this.rpcErrorText=null,this.callbacks.onRpcErrorCleared(this));var l={method:e,params:n,persistent:r,retries:o,additionalInfo:s,requestUUID:u};i&&i>0&&(l.timeout=i);var p=new nn;return this.executingRpcRequest=!0,this.callbacks.rpcStateChanged(this),this.ctx.utils.widgetEditMode?setTimeout((function(){c.executingRpcRequest=!1,c.callbacks.rpcStateChanged(c),t?(p.next(),p.complete()):(p.next(l),p.complete())}),500):(this.executingSubjects.push(p),(t?this.ctx.deviceService.sendOneWayRpcCommand(this.targetDeviceId,l):this.ctx.deviceService.sendTwoWayRpcCommand(this.targetDeviceId,l)).pipe(li((function(t){if(r&&a>0){var e=Math.max(a,1e3);return Qn(i?Math.min(i+1e3,e):e,e).pipe(li((function(){return c.ctx.deviceService.getPersistedRpc(t.rpcId,!0)})),Jn((function(t){return t.status!==Np.DELIVERED&&t.status!==Np.QUEUED})),li((function(t){return[Np.TIMEOUT,Np.EXPIRED].includes(t.status)?Pn((function(){return{status:504}})):t.status===Np.FAILED?Pn((function(){return{status:502,statusText:t.response.error}})):Un(t.response)})),(n=p,Je((function(t,e){Dn(n).subscribe(Xe(e,(function(){return e.complete()}),Ue)),!e.closed&&t.subscribe(e)}))))}var n;return Un(t)}))).subscribe({next:function(t){c.rpcRejection=null,c.rpcErrorText=null;var e=c.executingSubjects.indexOf(p);e>=0&&c.executingSubjects.splice(e,1),c.executingRpcRequest=c.executingSubjects.length>0,c.callbacks.onRpcSuccess(c),p.next(t),p.complete()},error:function(t){var e=c.executingSubjects.indexOf(p);if(e>=0&&c.executingSubjects.splice(e,1),c.executingRpcRequest=c.executingSubjects.length>0,c.callbacks.rpcStateChanged(c),!c.executingRpcRequest||504===t.status){if(c.rpcRejection=t,504===t.status)c.rpcErrorText=c.ctx.translate.instant("rpc.error.request-timeout");else{c.rpcErrorText=c.ctx.translate.instant("rpc.error.rpc-http-error",{status:t.status,statusText:t.statusText});var n=ga(t,c.ctx.translate);n&&(c.rpcErrorText+="</br>",c.rpcErrorText+=n.message)}c.callbacks.onRpcFailed(c)}p.error(t)}})),p.asObservable()}return this.rpcErrorText=this.rpcDisabledReason,this.rpcRejection=new Error(this.rpcErrorText),Pn((function(){return c.rpcRejection}))},t.prototype.update=function(t){void 0===t&&(t=!1),this.type!==Is.rpc&&(this.widgetTimewindowChangedSubject.next(this.timeWindowConfig),this.type===Is.alarm?this.updateAlarmDataSubscription():this.type===Is.timeseries&&this.options.comparisonEnabled&&t?this.forceReInit():this.hasDataPageLink?this.updateDataSubscriptions():(this.notifyDataLoading(),this.dataSubscribe()))},t.prototype.subscribe=function(){var t=this;this.subscribed||(this.subscribed=!0,this.cafs.subscribe&&(this.cafs.subscribe(),this.cafs.subscribe=null),this.cafs.subscribe=this.ctx.raf.raf((function(){t.doSubscribe()})))},t.prototype.subscribeAllForPaginatedData=function(t,e){var n=this,i=[];return this.configuredDatasources.forEach((function(r,a){i.push(n.subscribeForPaginatedData(a,t,e))})),i.length?zn(i):Un(null)},t.prototype.stopSubscription=function(t){var e=this.entityDataListeners[t];e&&this.ctx.entityDataService.stopSubscription(e)},t.prototype.subscribeForPaginatedData=function(t,e,n){var i=this,r=this.entityDataListeners[t];r&&this.ctx.entityDataService.stopSubscription(r);var a=this.configuredDatasources[t];return a?(this.useTimewindow&&this.timeWindowConfig&&this.updateRealtimeSubscription(),r={subscriptionType:this.type,useTimewindow:this.useTimewindow,configDatasource:a,configDatasourceIndex:t,subscriptionTimewindow:this.subscriptionTimewindow,latestTsOffset:this.tsOffset,dataLoaded:function(t,e,n,r){i.dataLoaded(t,e,n,r,!0)},dataUpdated:this.dataUpdated.bind(this),updateRealtimeSubscription:function(){return i.updateRealtimeSubscription()},setRealtimeSubscription:function(t){i.updateRealtimeSubscription(Xr(t))}},this.entityDataListeners[t]=r,this.ctx.entityDataService.subscribeForPaginatedData(r,e,n,this.ignoreDataUpdateOnIntervalTick)):Un(null)},t.prototype.subscribeForAlarms=function(t,e){this.alarmDataListener&&this.ctx.alarmDataService.stopSubscription(this.alarmDataListener),this.timeWindowConfig&&this.updateRealtimeSubscription(),this.alarmDataListener={subscriptionTimewindow:this.subscriptionTimewindow,alarmSource:this.alarmSource,alarmsLoaded:this.alarmsLoaded.bind(this),alarmsUpdated:this.alarmsUpdated.bind(this)},this.alarms={data:[],totalPages:0,totalElements:0,hasNext:!1},this.ctx.alarmDataService.subscribeForAlarms(this.alarmDataListener,t,e);var n=!1;this.alarmSource.unresolvedStateEntity&&(n=!0),n&&this.onDataUpdated()},t.prototype.doSubscribe=function(){this.type!==Is.rpc&&this.type!==Is.alarm&&this.dataSubscribe()},t.prototype.updateDataTimewindow=function(){this.hasDataPageLink||this.useTimewindow&&this.timeWindowConfig&&(this.updateRealtimeSubscription(),this.comparisonEnabled&&this.updateSubscriptionForComparison())},t.prototype.dataSubscribe=function(){var t=this;if(this.updateDataTimewindow(),!this.hasDataPageLink){this.useTimewindow&&this.timeWindowConfig&&this.subscriptionTimewindow.fixedWindow&&this.onDataUpdated();var e=!this.datasources.length,n=!this.entityDataListeners.filter((function(t){return!!t.subscription})).length;this.entityDataListeners.forEach((function(e){t.comparisonEnabled&&e.configDatasource.isAdditional?e.subscriptionTimewindow=t.timewindowForComparison:(e.subscriptionTimewindow=t.subscriptionTimewindow,e.latestTsOffset=t.tsOffset),t.ctx.entityDataService.startSubscription(e)})),e&&this.onDataUpdated(),n&&this.notifyDataLoaded()}},t.prototype.unsubscribe=function(){var t=this;this.type!==Is.rpc&&(this.type===Is.alarm?this.alarmsUnsubscribe():(this.entityDataListeners.forEach((function(e){null!=e&&t.ctx.entityDataService.stopSubscription(e)})),this.entityDataListeners.length=0,this.resetData())),this.subscribed=!1},t.prototype.alarmsUnsubscribe=function(){this.alarmDataListener&&(this.ctx.alarmDataService.stopSubscription(this.alarmDataListener),this.alarmDataListener=null)},t.prototype.checkRpcTarget=function(t){var e;return(null===(e=this.targetDevice)||void 0===e?void 0:e.type)===Xs.entity&&t.indexOf(this.targetDevice.entityAliasId)>-1},t.prototype.checkAlarmSource=function(t){return this.options.alarmSource&&this.options.alarmSource.entityAliasId&&t.indexOf(this.options.alarmSource.entityAliasId)>-1&&this.updateAlarmSubscription(),!1},t.prototype.checkAlarmSourceFilters=function(t){return this.options.alarmSource&&this.options.alarmSource.filterId&&t.indexOf(this.options.alarmSource.filterId)>-1&&this.updateAlarmSubscription(),!1},t.prototype.updateAlarmSubscription=function(){var t=this;this.alarmSource=this.options.alarmSource,this.ctx.aliasController?this.ctx.aliasController.resolveAlarmSource(this.alarmSource).subscribe({next:function(e){t.alarmSource=e,e&&(t.hasResolvedData=!0),t.configureAlarmsData(),t.updateAlarmDataSubscription()},error:function(){t.notifyDataLoaded()}}):(this.hasResolvedData=!0,this.configureAlarmsData(),this.updateAlarmDataSubscription())},t.prototype.updateAlarmDataSubscription=function(){if(this.alarmDataListener){var t=this.alarmDataListener.alarmDataSubscriptionOptions.pageLink,e=this.alarmDataListener.alarmDataSubscriptionOptions.additionalKeyFilters;this.subscribeForAlarms(t,e)}},t.prototype.checkSubscriptions=function(t){var e,n,i=!1,r=this.options.datasources;if(r)try{for(var a=ve(r),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.entityAliasId&&t.indexOf(s.entityAliasId)>-1){i=!0;break}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i&&this.hasDataPageLink&&(i=!1,this.updateDataSubscriptions()),i},t.prototype.checkSubscriptionsFilters=function(t){var e,n,i=!1,r=this.options.datasources;if(r)try{for(var a=ve(r),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.filterId&&t.indexOf(s.filterId)>-1){i=!0;break}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i&&this.hasDataPageLink&&(i=!1,this.updateDataSubscriptions()),i},t.prototype.updateDataSubscriptions=function(){var t=this;this.configuredDatasources=this.ctx.utils.validateAndUpdateDatasources(this.options.datasources),this.ctx.aliasController?this.ctx.aliasController.resolveDatasources(this.configuredDatasources,this.singleEntity,this.pageSize).subscribe({next:function(e){t.configuredDatasources=e,t.prepareDataSubscriptions().subscribe((function(){t.updatePaginatedDataSubscriptions()}))},error:function(){t.notifyDataLoaded()}}):(this.configuredDatasources=Xr(this.configuredDatasources),this.hasResolvedData=!0,this.prepareDataSubscriptions().subscribe((function(){t.updatePaginatedDataSubscriptions()})))},t.prototype.updatePaginatedDataSubscriptions=function(){for(var t=0;t<this.entityDataListeners.length;t++)this.stopSubscription(t);for(t=0;t<this.entityDataListeners.length;t++){var e=this.entityDataListeners[t];if(e){var n=e.subscriptionOptions.pageLink,i=e.subscriptionOptions.additionalKeyFilters;this.subscribeForPaginatedData(t,n,i)}}},t.prototype.isDataResolved=function(){return this.hasResolvedData},t.prototype.destroy=function(){var t,e;this.unsubscribe(),this.widgetTimewindowChangedSubject.complete();try{for(var n=ve(Object.keys(this.cafs)),i=n.next();!i.done;i=n.next()){var r=i.value;this.cafs[r]&&(this.cafs[r](),this.cafs[r]=null)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.notifyDataLoading=function(){this.loadingData=!0,this.callbacks.dataLoading(this)},t.prototype.notifyDataLoaded=function(){this.loadingData=!1,this.callbacks.dataLoading(this)},t.prototype.updateTimewindow=function(){if(this.timeWindow.interval=this.subscriptionTimewindow.aggregation.interval||1e3,this.timeWindow.timezone=this.subscriptionTimewindow.timezone,this.timeWindow.tsOffset=this.subscriptionTimewindow.tsOffset,this.subscriptionTimewindow.realtimeWindowMs)if(this.subscriptionTimewindow.quickInterval){var t=Es(this.subscriptionTimewindow.quickInterval,this.subscriptionTimewindow.timezone);this.timeWindow.maxTime=t[1]+this.subscriptionTimewindow.tsOffset,this.timeWindow.minTime=t[0]+this.subscriptionTimewindow.tsOffset}else{var e=Qp().valueOf()+this.subscriptionTimewindow.tsOffset+this.timeWindow.stDiff;(!this.timeWindow.maxTime||Math.abs(e-this.timeWindow.maxTime)>500)&&(this.timeWindow.maxTime=e,this.timeWindow.maxTime-=this.timeWindow.maxTime%1e3,this.timeWindow.minTime=this.timeWindow.maxTime-this.subscriptionTimewindow.realtimeWindowMs)}else this.subscriptionTimewindow.fixedWindow&&(this.timeWindow.maxTime=this.subscriptionTimewindow.fixedWindow.endTimeMs+this.subscriptionTimewindow.tsOffset,this.timeWindow.minTime=this.subscriptionTimewindow.fixedWindow.startTimeMs+this.subscriptionTimewindow.tsOffset)},t.prototype.updateTsOffset=function(){var t=ys(this.timezone);return this.tsOffset!==t&&(this.tsOffset=t,!0)},t.prototype.updateRealtimeSubscription=function(t){return this.subscriptionTimewindow=t||bs(this.timeWindowConfig,this.timeWindow.stDiff,this.stateData,this.ctx.timeService),this.updateTimewindow(),this.subscriptionTimewindow},t.prototype.updateComparisonTimewindow=function(){this.comparisonTimeWindow.interval=this.timewindowForComparison.aggregation.interval||1e3,this.comparisonTimeWindow.timezone=this.timewindowForComparison.timezone,this.timewindowForComparison.fixedWindow&&(this.comparisonTimeWindow.maxTime=this.timewindowForComparison.fixedWindow.endTimeMs+this.timewindowForComparison.tsOffset,this.comparisonTimeWindow.minTime=this.timewindowForComparison.fixedWindow.startTimeMs+this.timewindowForComparison.tsOffset)},t.prototype.updateSubscriptionForComparison=function(){return this.timewindowForComparison=As(this.subscriptionTimewindow,this.timeForComparison,this.comparisonCustomIntervalValue),this.updateComparisonTimewindow(),this.timewindowForComparison},t.prototype.initialPageDataChanged=function(t){this.callbacks.onInitialPageDataChanged(this,t)},t.prototype.forceReInit=function(){this.callbacks.forceReInit()},t.prototype.dataLoaded=function(t,e,n,i,r){var a=this,o=this.configuredDatasources[n];o.dataReceived=!0;var s=t.data.map((function(t,e){return a.entityDataToDatasource(o,t,e)}));this.datasourcePages[n]={data:s,hasNext:t.hasNext,totalElements:t.totalElements,totalPages:t.totalPages};var u=s.map((function(t,n){return a.entityDataToDatasourceData(t,e[n])}));if(this.dataPages[n]={data:u,hasNext:t.hasNext,totalElements:t.totalElements,totalPages:t.totalPages},o.type===zs.entity&&t.hasNext&&!this.singleEntity&&this.warnOnPageDataOverflow){var c=this.ctx.translate.instant("widget.data-overflow",{count:t.data.length,total:t.totalElements});this.onSubscriptionMessage({severity:"warn",message:c})}r&&(this.configureLoadedData(),this.onDataUpdated(!0),this.hasLatestData&&this.onLatestDataUpdated(!0))},t.prototype.configureLoadedData=function(){var t=this;this.datasources.length=0,this.data.length=0,this.latestData.length=0,this.hiddenData.length=0,this.hasLatestData=!1,this.displayLegend&&(this.legendData.keys.length=0,this.legendData.data.length=0);var e=0,n=0;this.configuredDatasources.forEach((function(i,r){i.dataKeyStartIndex=e,i.latestDataKeyStartIndex=n;var a=t.datasourcePages[r],o=t.dataPages[r];a&&a.data.forEach((function(i,r){i.dataKeys.forEach((function(n,i){var a=o.data[r][i];if(t.data.push(a),t.hiddenData.push({data:[]}),t.displayLegend){var s={dataKey:n,dataIndex:e};t.legendData.keys.push(s);t.legendData.data.push({min:null,max:null,avg:null,total:null,latest:null,hidden:!1})}e++})),i.latestDataKeys&&i.latestDataKeys.length&&(t.hasLatestData=!0,i.latestDataKeys.forEach((function(e,a){var s=i.dataKeys.length+a,u=o.data[r][s];t.latestData.push(u),n++}))),t.datasources.push(i)}))}));var i=0;this.datasources.forEach((function(e){e.dataKeys.forEach((function(n){(e.generated||e.isAdditional)&&(n._hash=Math.random(),n.color=t.ctx.utils.getMaterialColor(i)),i++})),e.latestDataKeys&&e.latestDataKeys.forEach((function(t){(e.generated||e.isAdditional)&&(t._hash=Math.random())}))})),this.comparisonEnabled&&this.datasourcePages.forEach((function(e){e.data.forEach((function(e,n){if(e.isAdditional){var i=t.datasourcePages[e.origDatasourceIndex].data[n];e.dataKeys.forEach((function(t){t.settings.comparisonSettings.color&&(t.color=t.settings.comparisonSettings.color),i.dataKeys[t.origDataKeyIndex].settings.comparisonSettings.color=t.color}))}}))})),this.caulculateLegendData&&(this.data.forEach((function(e,n){t.updateLegend(n,e.data,!1)})),this.callbacks.legendDataUpdated(this,!0))},t.prototype.entityDataToDatasourceData=function(t,e){var n=this,i=[];i=i.concat(t.dataKeys.map((function(i,r){i.hidden=!!i.settings.hideDataByDefault,i.inLegend=i.settings.showInLegend||Or(i.settings.showInLegend)&&!i.settings.removeFromLegend,i.label=n.ctx.utils.customTranslation(i.label,i.label);var a={datasource:t,dataKey:i,data:[]};return e&&e[r]&&e[r].data&&(a.data=e[r].data),a}))),t.latestDataKeys&&(i=i.concat(t.latestDataKeys.map((function(i,r){i.label=n.ctx.utils.customTranslation(i.label,i.label);var a={datasource:t,dataKey:i,data:[]},o=t.dataKeys.length+r;return e&&e[o]&&e[o].data&&(a.data=e[o].data),a}))));var r=ua(oa(i));return t.dataKeys.forEach((function(t){n.comparisonEnabled&&t.isAdditional&&su(t.settings)&&t.settings.comparisonSettings.comparisonValuesLabel?t.label=pa(t.settings.comparisonSettings.comparisonValuesLabel,r):(n.comparisonEnabled&&t.isAdditional&&(t.label=t.label+" "+n.ctx.translate.instant("legend.comparison-time-ago."+n.timeForComparison)),t.pattern=t.label,t.label=pa(t.pattern,r))})),i},t.prototype.entityDataToDatasource=function(t,e,n){var i=Xr(t);return op(i,ap(e)),i.generated=n>0,i},t.prototype.dataUpdated=function(t,e,n,i,r,a){a?this.processLatestDataUpdated(t,e,n,i,r):this.processDataUpdated(t,e,n,i,r)},t.prototype.processDataUpdated=function(t,e,n,i,r){var a,o=this.configuredDatasources[e],s=o.dataKeyStartIndex+n*o.dataKeys.length+i,u=!0;if(a=this.displayLegend&&this.legendData.keys.find((function(t){return t.dataIndex===s})).dataKey.hidden?this.hiddenData[s]:this.data[s],this.type===Is.latest){var c=a.data;if(t.data.length||c.length){if(c&&c[0]&&c[0].length>1&&t.data.length>0){var l=c[0][0],p=c[0][1];l===t.data[0][0]&&p===t.data[0][1]&&t.data[0][1]!==$a&&(u=!1)}}else u=!1}u?(this.subscriptionTimewindow&&this.subscriptionTimewindow.realtimeWindowMs&&(this.updateTimewindow(),this.timewindowForComparison&&this.timewindowForComparison.realtimeWindowMs&&this.updateComparisonTimewindow()),a.data=t.data,this.caulculateLegendData&&this.updateLegend(s,t.data,r),this.notifyDataLoaded(),this.onDataUpdated(r)):this.loadingData&&this.notifyDataLoaded()},t.prototype.processLatestDataUpdated=function(t,e,n,i,r){var a=this.configuredDatasources[e],o=a.latestDataKeyStartIndex+n*a.latestDataKeys.length+i-a.dataKeys.length,s=!0,u=this.latestData[o],c=u.data;if(t.data.length){if(c&&c[0]&&c[0].length>1&&t.data.length>0){var l=c[0][0],p=c[0][1];l===t.data[0][0]&&p===t.data[0][1]&&(s=!1)}}else s=!1;s&&(u.data=t.data,this.onLatestDataUpdated(r))},t.prototype.alarmsLoaded=function(t,e,n){if(this.alarms=t,n>e){var i=this.ctx.translate.instant("widget.alarm-data-overflow",{allowedEntities:e,totalEntities:n});this.onSubscriptionMessage({severity:"warn",message:i})}this.subscriptionTimewindow&&this.subscriptionTimewindow.realtimeWindowMs&&this.updateTimewindow(),this.onDataUpdated()},t.prototype.alarmsUpdated=function(t,e){this.alarmsLoaded(e,0,0)},t.prototype.updateLegend=function(t,e,n){var i=this.legendData.keys.find((function(e){return e.dataIndex===t})).dataKey,r=kr(i.decimals)?i.decimals:this.decimals,a=i.units&&i.units.length?i.units:this.units,o=this.legendData.data[t];this.legendConfig.showMin&&(o.min=this.ctx.widgetUtils.formatValue(function(t){if(t.length>0){for(var e=Number(t[0][1]),n=1;n<t.length;n++)e=Math.min(e,Number(t[n][1]));return e}return null}(e),r,a)),this.legendConfig.showMax&&(o.max=this.ctx.widgetUtils.formatValue(function(t){if(t.length>0){for(var e=Number(t[0][1]),n=1;n<t.length;n++)e=Math.max(e,Number(t[n][1]));return e}return null}(e),r,a)),this.legendConfig.showAvg&&(o.avg=this.ctx.widgetUtils.formatValue(function(t){return t.length>0?Jp(t)/t.length:null}(e),r,a)),this.legendConfig.showTotal&&(o.total=this.ctx.widgetUtils.formatValue(Jp(e),r,a)),this.legendConfig.showLatest&&(o.latest=this.ctx.widgetUtils.formatValue(function(t){return t.length>0?Number(t[t.length-1][1]):null}(e),r,a)),this.callbacks.legendDataUpdated(this,!1!==n)},t.prototype.loadStDiff=function(){var t=this,e=new sn(1);return this.ctx.getServerTimeDiff&&this.timeWindow?this.ctx.getServerTimeDiff().subscribe({next:function(n){t.timeWindow.stDiff=n,e.next(),e.complete()},error:function(){t.timeWindow.stDiff=0,e.next(),e.complete()}}):(this.timeWindow&&(this.timeWindow.stDiff=0),e.next(),e.complete()),e.asObservable()},t}(),$p=zo,Zp=7300*Xo,td=function(){function t(t){this.http=t,this.maxDatapointsLimit=500}return t.prototype.setMaxDatapointsLimit=function(t){this.maxDatapointsLimit=t,(!this.maxDatapointsLimit||this.maxDatapointsLimit<=1)&&(this.maxDatapointsLimit=2)},t.prototype.matchesExistingInterval=function(t,e,n,i){return void 0===i&&(i=!1),this.getIntervals(t,e,i).findIndex((function(t){return t.value===n}))>-1},t.prototype.getIntervals=function(t,e,n){return void 0===n&&(n=!1),t=this.boundMinInterval(t),e=this.boundMaxInterval(e),ws.filter((function(i){return(n||"number"==typeof i.value)&&is.numberValue(i.value)>=t&&is.numberValue(i.value)<=e}))},t.prototype.boundMinInterval=function(t){return Mr(t)&&(t=1e3*Math.ceil(t/1e3)),this.toBound(t,$p,Zp,$p)},t.prototype.boundMaxInterval=function(t){return Mr(t)&&(t=1e3*Math.floor(t/1e3)),this.toBound(t,$p,Zp,Zp)},t.prototype.boundToPredefinedInterval=function(t,e,n,i){void 0===i&&(i=!1);var r=this.getIntervals(t,e,i),a=Zp,o=n||t;if(!r.length)return o;var s=r.find((function(t){return t.value===o}));if(s)return s.value;var u=r[0];return r.forEach((function(t){var e=Math.abs(is.numberValue(t.value)-is.numberValue(o));e<=a&&(u=t,a=e)})),u.value},t.prototype.boundIntervalToTimewindow=function(t,e,n){if(n===ns.NONE)return zo;var i=this.minIntervalLimit(t),r=this.maxIntervalLimit(t);return e?this.toIntervalBound(e,i,r,e):this.boundToPredefinedInterval(i,r,this.avgInterval(t))},t.prototype.getMaxDatapointsLimit=function(){return this.maxDatapointsLimit},t.prototype.getMinDatapointsLimit=function(){return 1},t.prototype.avgInterval=function(t){var e=t/200;return this.boundMinInterval(e)},t.prototype.minIntervalLimit=function(t){var e=t/500;return this.boundMinInterval(e)},t.prototype.maxIntervalLimit=function(t){var e=t/1;return this.boundMaxInterval(e)},t.prototype.defaultTimewindow=function(){return ls(this)},t.prototype.toBound=function(t,e,n,i){return Mr(t)?(t=Math.max(t,e),t=Math.min(t,n)):i},t.prototype.toIntervalBound=function(t,e,n,i){return Mr(t)?(t=is.max(t,e),t=is.min(t,n)):i},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),ed=function(){function t(t,e){this.window=t,this.ngZone=e;var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame;this.rafSupported=!!n,this.rafSupported?this.rafFunction=function(t){var e=n(t);return function(){i(e)}}:this.rafFunction=function(t){var e=setTimeout(t,16.66);return function(){clearTimeout(e)}}}return t.prototype.raf=function(t,e){var n=this;return void 0===e&&(e=!1),e?this.rafFunction(t):this.ngZone.runOutsideAngular((function(){return n.rafFunction(t)}))},t=fe([ae(),he(0,se(Zi.Window)),he(1,se(Zi.NgZone)),ye("design:paramtypes",[Window,Ea])],t)}(),nd=function(){function t(t,e,n,i,r,a,o,s,u,c){this.utils=t,this.timeService=e,this.deviceService=n,this.entityDataService=i,this.alarmDataService=r,this.rafService=a,this.translate=o,this.http=s,this.entityService=u,this.telemetryService=c}return t.prototype.createEntityAttributesSubscription=function(t,e,n){var i=Ko.createEntityAttributesSubscription(this.telemetryService,t,e,null,n);return i.subscribe(),i.attributeData$().pipe(oi((function(){try{i.unsubscribe()}catch(t){}})))},t.prototype.createSubscriptionContext=function(){var t=new Gp({aliasController:void 0});return t.dashboardTimewindowApi={onResetTimewindow:function(){},onUpdateTimewindow:function(){}},t.timeService=this.timeService,t.deviceService=this.deviceService,t.translate=this.translate,t.entityDataService=this.entityDataService,t.alarmDataService=this.alarmDataService,t.utils=this.utils,t.raf=this.rafService,t.widgetUtils={formatValue:Vr,getEntityDetailsPageURL:ma},t.getServerTimeDiff=this.getServerTimeDiff.bind(this),t},t.prototype.createDefaultSubscription=function(t){var e,n=new sn;return t.type!==Is.rpc&&t.type!==Is.static?(e={type:t.type,stateData:!1,datasourcesOptional:!1,hasDataPageLink:t.hasDataPageLink,singleEntity:!1,warnOnPageDataOverflow:!1,ignoreDataUpdateOnIntervalTick:!0,pageSize:t.pageSize,dashboardTimewindow:{timezone:"Asia/Shanghai"},timeWindowConfig:t.timeWindowConfig,callbacks:t.callbacks},t.type===Is.alarm?e.alarmSource=Xr(t.alarmSource):e.datasources=Xr(t.datasources),this.createSubscription(e).subscribe((function(t){n.next(t),n.complete()}),(function(t){n.error(t)}))):t.type===Is.rpc?((e={type:t.type,targetDevice:t.targetDevice}).callbacks={rpcStateChanged:function(t){},onRpcSuccess:function(t){},onRpcFailed:function(t){},onRpcErrorCleared:function(t){}},this.createSubscription(e).subscribe((function(t){n.next(t),n.complete()}),(function(t){n.error(t)}))):(t.type,Is.static,n.next(null),n.complete()),n.asObservable()},t.prototype.createSubscriptionFromInfo=function(t,e,n){var i=new sn,r={type:t.type,stateData:!1,datasourcesOptional:!1,hasDataPageLink:t.hasDataPageLink,singleEntity:!1,warnOnPageDataOverflow:!1,ignoreDataUpdateOnIntervalTick:!0,pageSize:t.pageSize,dashboardTimewindow:{timezone:"Asia/Shanghai"},timeWindowConfig:t.timeWindowConfig||{},callbacks:t.callbacks||{}};return r.type===Is.alarm?r.alarmSource=this.entityService.createAlarmSourceFromSubscriptionInfo(e[0]):r.datasources=this.entityService.createDatasourcesFromSubscriptionsInfo(e),this.createSubscription(r,n).subscribe((function(t){i.next(t),i.complete()}),(function(t){i.error(t)})),i.asObservable()},t.prototype.createSubscription=function(t,e){var n=new sn,i=this.createSubscriptionContext(),r=new Xp(i,t);return r.init$.subscribe((function(){e&&r.subscribe(),n.next(r),n.complete()}),(function(t){n.error(t)})),n.asObservable()},t.prototype.datasourceToEntityData=function(t,e,n){var i={entityId:"",entityName:t.entityName,entityLabel:t.entityLabel};return t.entityId&&(i.entityId=t.entityId),t.entityType?i.entityType=t.entityType:i.entityType="",i.ts={},n.forEach((function(t,n){var r=e[n].data;r&&r.length&&r[0].length>1?e[n].dataKey.type===ja.entityField&&i.hasOwnProperty(t.label)||(i[t.label]=r[0][1],i.ts[t.label]=r[0][0]):i[t.label]=""})),i},t.prototype.subscribeForLatestTelemetry=function(t,e){return this.createEntityAttributesSubscription(t,Ya.LATEST_TELEMETRY,e)},t.prototype.subscribeForLatestPaginatedData=function(t,e,n,i){var r=this;void 0===i&&(i=[]);var a={type:zs.entity,dataKeys:Ee([{type:ja.entityField,name:"type",label:"entityProfileType"},{type:ja.entityField,name:"createdTime",label:"createdTime"}],Te(e),!1),entityFilter:t},o=[];return a&&a.dataKeys&&a.dataKeys.forEach((function(t){t.settings||(t.settings={});var e=Xr(t);e.entityKey=Al(t),e.type===ja.function&&(e.name=e.label),o.push(e)})),this.subscribeForPaginatedData(Is.latest,a,n,i).pipe(xn((function(t){var e=t.datasourcePages[0],n=t.dataPages[0],i=new Array;return e.data.forEach((function(t,e){var a=r.datasourceToEntityData(t,n.data[e],o);i.push(a)})),{data:i,totalPages:e.totalPages,totalElements:e.totalElements,hasNext:e.hasNext}})))},t.prototype.subscribeForHistoryPaginatedData=function(t,e,n,i,r){void 0===r&&(r=[]);var a={type:zs.entity,dataKeys:e,entityFilter:t};return this.subscribeForPaginatedData(Is.latest,a,n,r,{selectedTab:Do.HISTORY,history:i}).pipe(xn((function(t){return t.data})))},t.prototype.subscribeForRealtimePaginatedData=function(t,e,n,i,r){void 0===r&&(r=[]);var a={type:zs.entity,dataKeys:e,entityFilter:t};return this.subscribeForPaginatedData(Is.latest,a,n,r,{selectedTab:Do.REALTIME,realtime:i}).pipe(xn((function(t){return t.data})))},t.prototype.subscribeForPaginatedData=function(t,e,n,i,r){var a,o=new nn;return this.createDefaultSubscription({type:t,datasources:[e],hasDataPageLink:!0,callbacks:{onDataUpdated:function(){o.next(a)}},timeWindowConfig:r}).subscribe((function(t){a=t,t.subscribeForPaginatedData(0,n,i)})),o.asObservable().pipe(oi((function(){if(a)try{a.destroy()}catch(t){}})))},t.prototype.subscribeForHistoryTimeseries=function(t,e,n,i,r){return this.subscribeForTimeseriesWithTimewindow(t,e,n,{selectedTab:Do.HISTORY,history:i,aggregation:r}).pipe(ci(1),ii(100))},t.prototype.subscribeForRealtimeTimeseries=function(t,e,n,i,r){return this.subscribeForTimeseriesWithTimewindow(t,e,n,{selectedTab:Do.REALTIME,realtime:i,aggregation:r}).pipe(ii(100))},t.prototype.subscribeForTimeseriesWithTimewindow=function(t,e,n,i){var r={type:zs.entity,dataKeys:n,entityFilter:t,pageLink:e};return this.subscribeData(Is.timeseries,r,i).pipe(xn((function(t){var e=t.datasourcePages[0],n=t.dataPages[0],i=new Array;return e.data.forEach((function(t,e){var r={entityId:t.entityId,entityName:t.entityName,entityLabel:t.entityLabel};n.data[e].forEach((function(t){r[t.dataKey.name]=t.data})),i.push(r)})),{data:i,totalPages:e.totalPages,totalElements:e.totalElements,hasNext:e.hasNext}})))},t.prototype.subscribeData=function(t,e,n){var i,r=new nn;return this.createDefaultSubscription({type:t,datasources:[e],hasDataPageLink:!1,callbacks:{onDataUpdated:function(t,e){r.next(i)},onLatestDataUpdated:function(t){r.next(i)}},timeWindowConfig:n}).subscribe((function(t){(i=t).subscribe()})),r.asObservable().pipe(oi((function(){if(i)try{i.destroy()}catch(t){}})))},t.prototype.sendOneWayCommand=function(t,e,n,i,r,a,o,s,u){var c;return(c={type:Is.rpc,targetDevice:{type:Xs.device,deviceId:t},targetDeviceIds:[t]}).callbacks={rpcStateChanged:function(t){},onRpcSuccess:function(t){},onRpcFailed:function(t){},onRpcErrorCleared:function(t){}},this.createSubscription(c).pipe(li((function(t){return t.sendOneWayCommand(e,n,i,r,a,o,s,u)})))},t.prototype.sendTwoWayCommand=function(t,e,n,i,r,a,o,s,u){var c;return(c={type:Is.rpc,targetDevice:{type:Xs.device,deviceId:t},targetDeviceIds:[t]}).callbacks={rpcStateChanged:function(t){},onRpcSuccess:function(t){},onRpcFailed:function(t){},onRpcErrorCleared:function(t){}},this.createSubscription(c).pipe(li((function(t){return t.sendTwoWayCommand(e,n,i,r,a,o,s,u)})))},t.prototype.subscribeForAlarms=function(t,e,n,i){var r=new nn,a={alarmSource:{type:zs.entity,dataKeys:[{type:ja.alarm,name:"createdTime"},{type:ja.alarm,name:"originator"},{type:ja.alarm,name:"type"},{type:ja.alarm,name:"severity"},{type:ja.alarm,name:"status"}],entityFilter:t},alarmsLoaded:function(t,e,n){r.next({pageData:t})},alarmsUpdated:function(t,e){r.next({pageData:e,update:t})},subscriptionTimewindow:i};return this.alarmDataService.subscribeForAlarms(a,e,n),r.asObservable()},t.prototype.subscribeForLatestPaginatedAlarmsData=function(t,e,n){return this.subscribeForAlarms(t,e,n)},t.prototype.subscribeForHistoryPaginatedAlarmsData=function(t,e,n,i){var r={fixedWindow:i,realtimeWindowMs:null,timezone:"Asia/Shanghai",tsOffset:ys("Asia/Shanghai")};return this.subscribeForAlarms(t,e,n,r)},t.prototype.subscribeForRealtimePaginatedAlarmsData=function(t,e,n,i){var r={fixedWindow:null,realtimeWindowMs:i,timezone:"Asia/Shanghai",tsOffset:ys("Asia/Shanghai")};return this.subscribeForAlarms(t,e,n,r)},t.prototype.getServerTimeDiff=function(){if(!this.stDiffObservable){var t=Date.now();this.stDiffObservable=this.http.get("/api/dashboard/serverTime",ir(!0)).pipe(xn((function(e){var n=Date.now();return Math.ceil(e-(t+n)/2)})),si(1),Ze())}return this.stDiffObservable},t=fe([ae(),he(0,se(Zi.UtilsService)),he(1,se(Zi.TimeService)),he(2,se(Zi.DeviceService)),he(3,se(Zi.EntityDataService)),he(4,se(Zi.AlarmDataService)),he(5,se(Zi.RafService)),he(6,se(Zi.TranslateService)),he(7,se(Zi.HttpClient)),he(8,se(Zi.EntityService)),he(9,se(Zi.TelemetryWebsocketService)),ye("design:paramtypes",[gc,td,Ic,Kp,kp,ed,ba,Ci,_p,Cp])],t)}(),id=function(){function t(t){this.http=t}return t.prototype.getAdminSettings=function(t,e){return this.http.get("/api/admin/settings/".concat(t),nr(e))},t.prototype.saveAdminSettings=function(t,e){return this.http.post("/api/admin/settings",t,nr(e))},t.prototype.sendTestMail=function(t,e){return this.http.post("/api/admin/settings/testMail",t,nr(e))},t.prototype.sendTestSms=function(t,e){return this.http.post("/api/admin/settings/testSms",t,nr(e))},t.prototype.getSecuritySettings=function(t){return this.http.get("/api/admin/securitySettings",nr(t))},t.prototype.saveSecuritySettings=function(t,e){return this.http.post("/api/admin/securitySettings",t,nr(e))},t.prototype.getJwtSettings=function(t){return this.http.get("/api/admin/jwtSettings",nr(t))},t.prototype.saveJwtSettings=function(t,e){return this.http.post("/api/admin/jwtSettings",t,nr(e))},t.prototype.getRepositorySettings=function(t){return this.http.get("/api/admin/repositorySettings",nr(t))},t.prototype.saveRepositorySettings=function(t,e){return this.http.post("/api/admin/repositorySettings",t,nr(e))},t.prototype.deleteRepositorySettings=function(t){return this.http.delete("/api/admin/repositorySettings",nr(t))},t.prototype.checkRepositoryAccess=function(t,e){return this.http.post("/api/admin/repositorySettings/checkAccess",t,nr(e))},t.prototype.getRepositorySettingsInfo=function(t){return this.http.get("/api/admin/repositorySettings/info",nr(t))},t.prototype.getAutoCommitSettings=function(t){return this.http.get("/api/admin/autoCommitSettings",nr(t))},t.prototype.autoCommitSettingsExists=function(t){return this.http.get("/api/admin/autoCommitSettings/exists",nr(t))},t.prototype.saveAutoCommitSettings=function(t,e){return this.http.post("/api/admin/autoCommitSettings",t,nr(e))},t.prototype.deleteAutoCommitSettings=function(t){return this.http.delete("/api/admin/autoCommitSettings",nr(t))},t.prototype.checkUpdates=function(t){return this.http.get("/api/admin/updates",nr(t))},t.prototype.getFeaturesInfo=function(t){return this.http.get("/api/admin/featuresInfo",nr(t))},t.prototype.getLoginProcessingUrl=function(t){return this.http.get("/api/admin/mail/oauth2/loginProcessingUrl",nr(t))},t.prototype.generateAccessToken=function(t){return this.http.get("/api/admin/mail/oauth2/authorize",nr(t))},t.prototype.getMailConfigTemplate=function(t){return this.http.get("/api/mail/config/template",nr(t))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),rd=function(){function t(t){this.http=t}return t.prototype.getEntityGroup=function(t,e){return this.http.get("/api/entityGroups/".concat(t),nr(e))},t.prototype.saveEntityGroup=function(t,e){return this.http.post("/api/entityGroup",t,nr(e))},t.prototype.getEntityCustomerList=function(t,e,n){return this.http.get("/api/entityGroup/".concat(t,"/customers?pageSize=1024&page=0&sortProperty=name&sortOrder=ASC"),nr(n))},t.prototype.getCustomerGroup=function(t,e,n,i,r){return this.http.get("/api/entityGroups/".concat(t,"/").concat(n,"/").concat(e),nr(r))},t.prototype.getEntityGroupList=function(t,e,n){return this.http.get("/api/entityGroup/".concat(t,"/entities?pageSize=1024&page=0&sortProperty=name&sortOrder=ASC"),nr(n))},t.prototype.getEntityGroupUserList=function(t,e,n){return this.http.get("/api/entityGroup/".concat(t,"/users").concat(e.toQuery()),nr(n))},t.prototype.delEntityGroup=function(t,e){return this.http.delete("/api/entityGroup/".concat(t),nr(e))},t.prototype.getEntityGroupsByPage=function(t,e,n){return this.http.get("/api/entityGroups/".concat(t).concat(e.toQuery()),nr(n))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),ad={},od=Object.prototype.hasOwnProperty;function sd(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function ud(t){try{return encodeURIComponent(t)}catch(t){return null}}ad.stringify=function(t,e){e=e||"";var n,i,r=[];for(i in"string"!=typeof e&&(e="?"),t)if(od.call(t,i)){if((n=t[i])||null!=n&&!isNaN(n)||(n=""),i=ud(i),n=ud(n),null===i||null===n)continue;r.push(i+"="+n)}return r.length?e+r.join("&"):""},ad.parse=function(t){for(var e,n=/([^=?#&]+)=?([^&]*)/g,i={};e=n.exec(t);){var r=sd(e[1]),a=sd(e[2]);null===r||null===a||r in i||(i[r]=a)}return i};var cd=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},ld=ad,pd=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,dd=/[\n\r\t]/g,fd=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,hd=/:\d+$/,yd=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,md=/^[a-zA-Z]:/;function gd(t){return(t||"").toString().replace(pd,"")}var vd=[["#","hash"],["?","query"],function(t,e){return bd(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Td={hash:1,query:1};function Ed(t){var n,i=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},r={},a=typeof(t=t||i);if("blob:"===t.protocol)r=new _d(unescape(t.pathname),{});else if("string"===a)for(n in r=new _d(t,{}),Td)delete r[n];else if("object"===a){for(n in t)n in Td||(r[n]=t[n]);void 0===r.slashes&&(r.slashes=fd.test(t.href))}return r}function bd(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function Sd(t,e){t=(t=gd(t)).replace(dd,""),e=e||{};var n,i=yd.exec(t),r=i[1]?i[1].toLowerCase():"",a=!!i[2],o=!!i[3],s=0;return a?o?(n=i[2]+i[3]+i[4],s=i[2].length+i[3].length):(n=i[2]+i[4],s=i[2].length):o?(n=i[3]+i[4],s=i[3].length):n=i[4],"file:"===r?s>=2&&(n=n.slice(2)):bd(r)?n=i[4]:r?a&&(n=n.slice(2)):s>=2&&bd(e.protocol)&&(n=i[4]),{protocol:r,slashes:a||bd(r),slashesCount:s,rest:n}}function _d(t,e,n){if(t=(t=gd(t)).replace(dd,""),!(this instanceof _d))return new _d(t,e,n);var i,r,a,o,s,u,c=vd.slice(),l=typeof e,p=this,d=0;for("object"!==l&&"string"!==l&&(n=e,e=null),n&&"function"!=typeof n&&(n=ld.parse),i=!(r=Sd(t||"",e=Ed(e))).protocol&&!r.slashes,p.slashes=r.slashes||i&&e.slashes,p.protocol=r.protocol||e.protocol||"",t=r.rest,("file:"===r.protocol&&(2!==r.slashesCount||md.test(t))||!r.slashes&&(r.protocol||r.slashesCount<2||!bd(p.protocol)))&&(c[3]=[/(.*)/,"pathname"]);d<c.length;d++)"function"!=typeof(o=c[d])?(a=o[0],u=o[1],a!=a?p[u]=t:"string"==typeof a?~(s="@"===a?t.lastIndexOf(a):t.indexOf(a))&&("number"==typeof o[2]?(p[u]=t.slice(0,s),t=t.slice(s+o[2])):(p[u]=t.slice(s),t=t.slice(0,s))):(s=a.exec(t))&&(p[u]=s[1],t=t.slice(0,s.index)),p[u]=p[u]||i&&o[3]&&e[u]||"",o[4]&&(p[u]=p[u].toLowerCase())):t=o(t,p);n&&(p.query=n(p.query)),i&&e.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==e.pathname)&&(p.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),i=n.length,r=n[i-1],a=!1,o=0;i--;)"."===n[i]?n.splice(i,1):".."===n[i]?(n.splice(i,1),o++):o&&(0===i&&(a=!0),n.splice(i,1),o--);return a&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(p.pathname,e.pathname)),"/"!==p.pathname.charAt(0)&&bd(p.protocol)&&(p.pathname="/"+p.pathname),cd(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(~(s=p.auth.indexOf(":"))?(p.username=p.auth.slice(0,s),p.username=encodeURIComponent(decodeURIComponent(p.username)),p.password=p.auth.slice(s+1),p.password=encodeURIComponent(decodeURIComponent(p.password))):p.username=encodeURIComponent(decodeURIComponent(p.auth)),p.auth=p.password?p.username+":"+p.password:p.username),p.origin="file:"!==p.protocol&&bd(p.protocol)&&p.host?p.protocol+"//"+p.host:"null",p.href=p.toString()}_d.prototype={set:function(t,e,n){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||ld.parse)(e)),i[t]=e;break;case"port":i[t]=e,cd(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,hd.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(e){var r="pathname"===t?"/":"#";i[t]=e.charAt(0)!==r?r+e:e}else i[t]=e;break;case"username":case"password":i[t]=encodeURIComponent(e);break;case"auth":var a=e.indexOf(":");~a?(i.username=e.slice(0,a),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=e.slice(a+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(e))}for(var o=0;o<vd.length;o++){var s=vd[o];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&bd(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=ld.stringify);var e,n=this,i=n.host,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var a=r+(n.protocol&&n.slashes||bd(n.protocol)?"//":"");return n.username?(a+=n.username,n.password&&(a+=":"+n.password),a+="@"):n.password?(a+=":"+n.password,a+="@"):"file:"!==n.protocol&&bd(n.protocol)&&!i&&"/"!==n.pathname&&(a+="@"),(":"===i[i.length-1]||hd.test(n.hostname)&&!n.port)&&(i+=":"),a+=i+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(a+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(a+=n.hash),a}},_d.extractProtocol=Sd,_d.location=Ed,_d.trimLeft=gd,_d.qs=ld;var Ad,wd=_d,Id=function(){function t(t){this.http=t}return t.prototype.getAllSchedulerEvents=function(t,e){return this.http.get("api/edge/".concat(t,"/allSchedulerEvents"),nr(e))},t.prototype.assignSchedulerEventToEdge=function(t,e,n){return this.http.post("/api/edge/".concat(t,"/schedulerEvent/").concat(e),nr(n))},t.prototype.unassignSchedulerEventFromEdge=function(t,e,n){return this.http.delete("/api/edge/".concat(t,"/schedulerEvent/").concat(e),nr(n))},t.prototype.getEdgeSchedulerEvents=function(t,e,n){return this.http.get("/api/edge/".concat(t,"/schedulerEvents").concat(e.toQuery()),nr(n))},t.prototype.saveSchedulerEvent=function(t,e){return this.http.post("/api/schedulerEvent",t,nr(e))},t.prototype.getSchedulerEventById=function(t,e){return this.http.get("/api/schedulerEvent/".concat(t),nr(e))},t.prototype.deleteSchedulerEvent=function(t,e){return this.http.delete("/api/schedulerEvent/".concat(t),nr(e))},t.prototype.getSchedulerEventInfoById=function(t,e){return this.http.get("/api/schedulerEvent/info/".concat(t),nr(e))},t.prototype.getSchedulerEventsByIds=function(t,e){return this.http.get("/api/schedulerEvents?schedulerEventIds=".concat(t.join(",")),nr(e))},t.prototype.getSchedulerEvents=function(t,e){return this.http.get("/api/schedulerEvents?type=".concat(t),nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}();!function(t){t.LWM2M_MODEL="LWM2M_MODEL",t.PKCS_12="PKCS_12",t.JKS="JKS",t.JS_MODULE="JS_MODULE"}(Ad||(Ad={}));var Dd=new Map([[Ad.LWM2M_MODEL,"application/xml,text/xml"],[Ad.PKCS_12,"application/x-pkcs12"],[Ad.JKS,"application/x-java-keystore"],[Ad.JS_MODULE,"text/javascript,application/javascript"]]),Rd=new Map([[Ad.LWM2M_MODEL,"xml"],[Ad.PKCS_12,"p12,pfx"],[Ad.JKS,"jks"],[Ad.JS_MODULE,"js"]]),Nd=new Map([[Ad.LWM2M_MODEL,"resource.type.lwm2m-model"],[Ad.PKCS_12,"resource.type.pkcs-12"],[Ad.JKS,"resource.type.jks"],[Ad.JS_MODULE,"resource.type.js-module"]]),Od=function(t){var e;return t.tenantId&&(null===(e=t.tenantId)||void 0===e?void 0:e.id)!==pr?"tenant":"system"},Cd="tb-image;",Md=/\/api\/images\/(tenant|system)\/(.*)/,kd="/api/images",Ld="data:image/",Ud=function(t){return t?t.replace(Cd,""):t},Pd=function(t){return t&&!t.startsWith(Cd)&&(t=Cd+t),t},xd=function(t){return t&&Md.test(t)},Fd="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";var Wd=function(){function t(t,e){this.http=t,this.resourcesService=e,this.imagesLoading={}}return t.prototype.uploadImage=function(t,e,n){n||(n={});var i=new FormData;return i.append("file",t),i.append("title",e),this.http.post("/api/image",i,rr(n.ignoreLoading,n.ignoreErrors,n.resendRequest))},t.prototype.updateImage=function(t,e,n,i){i||(i={});var r=new FormData;return r.append("file",n),this.http.put("".concat(kd,"/").concat(t,"/").concat(encodeURIComponent(e)),r,rr(i.ignoreLoading,i.ignoreErrors,i.resendRequest))},t.prototype.updateImageInfo=function(t,e){var n=Od(t),i=encodeURIComponent(t.resourceKey);return this.http.put("".concat(kd,"/").concat(n,"/").concat(i,"/info"),t,nr(e))},t.prototype.updateImagePublicStatus=function(t,e,n){var i=Od(t),r=encodeURIComponent(t.resourceKey);return this.http.put("".concat(kd,"/").concat(i,"/").concat(r,"/public/").concat(e),t,nr(n))},t.prototype.getImages=function(t,e,n){return void 0===e&&(e=!1),this.http.get("".concat(kd).concat(t.toQuery(),"&includeSystemImages=").concat(e),nr(n))},t.prototype.getImageInfo=function(t,e,n){return this.http.get("".concat(kd,"/").concat(t,"/").concat(encodeURIComponent(e),"/info"),nr(n))},t.prototype.getImageDataUrl=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=Fd);var r=t.split("/"),a=r[r.length-1];r[r.length-1]=encodeURIComponent(a);var o=r.join("/"),s=e?o+"/preview":o;return this.loadImageDataUrl(s,n,i)},t.prototype.loadImageDataUrl=function(t,e,n){var i,r=this;if(void 0===e&&(e=!1),void 0===n&&(n=Fd),this.imagesLoading[t])i=this.imagesLoading[t];else{i=new sn(1),this.imagesLoading[t]=i;var a=nr({ignoreLoading:!0,ignoreErrors:!0});this.http.get(t,de(de({},a),{responseType:"blob"})).subscribe({next:function(t){i.next(t),i.complete()},error:function(t){i.error(t)},complete:function(){delete r.imagesLoading[t]}})}return i.pipe(li((function(t){return Kr(t).pipe(xn((function(t){return t})))})),Xn((function(){return Un(n)})))},t.prototype.resolveImageUrl=function(t,e,n,i){return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=Fd),t=Ud(t),xd(t)?this.getImageDataUrl(t,e,n,i):Un(t)},t.prototype.downloadImage=function(t,e){return this.resourcesService.downloadResource("".concat(kd,"/").concat(t,"/").concat(encodeURIComponent(e)))},t.prototype.deleteImage=function(t,e,n,i){return void 0===n&&(n=!1),this.http.delete("".concat(kd,"/").concat(t,"/").concat(encodeURIComponent(e),"?force=").concat(n),nr(i))},t.prototype.exportImage=function(t,e,n){return this.http.get("".concat(kd,"/").concat(t,"/").concat(encodeURIComponent(e),"/export"),nr(n))},t.prototype.importImage=function(t,e){return this.http.put("/api/image/import",t,nr(e))},t=fe([ae(),he(0,se(Zi.HttpClient)),he(1,se(Zi.ResourceService)),ye("design:paramtypes",[Ci,Object])],t)}(),Vd=function(t){function e(e,n,i,r){var a=t.call(this,n,i,"api/ws/plugins/telemetry",new Io,r)||this;return a.telemetryWebsocketService=e,a.authService=n,a.ngZone=i,a.window=r,a}return pe(e,t),e.prototype.subscribe=function(t){this.telemetryWebsocketService.subscribe(t)},e.prototype.update=function(t){this.telemetryWebsocketService.update(t)},e.prototype.unsubscribe=function(t){this.telemetryWebsocketService.unsubscribe(t)},e.prototype.processOnMessage=function(t){this.telemetryWebsocketService.processOnMessage(t)},e=fe([ae(),he(0,se(Zi.TelemetryWebsocketService)),he(1,se(Zi.AuthService)),he(2,se(Zi.NgZone)),he(3,se(Zi.Window)),ye("design:paramtypes",[Cp,Ec,Ea,Window])],e)}(Op),jd=new te;jd.bind(Zi.AuthService).to(Ec),jd.bind(Zi.TelemetryWebsocketService).to(Cp).inSingletonScope(),jd.bind(Zi.Window).toDynamicValue((function(){if(window&&window.XMLHttpRequest)return window;var t=wx.getStorageSync("baseUrl");return{location:t?new wd(t):null}})).inSingletonScope(),jd.bind(Zi.LocalStorage).to(Tc),jd.bind(Zi.NgZone).to(Ea),jd.bind(Zi.AlarmDataService).to(kp),jd.bind(Zi.EntityDataService).to(Kp),jd.bind(Zi.DataSubscriptionService).to(nd),jd.bind(Zi.UtilsService).to(gc),jd.bind(Zi.TimeService).to(td),jd.bind(Zi.RafService).to(ed),jd.bind(Zi.TranslateService).to(ba),jd.bind(Zi.AdminService).to(id),jd.bind(Zi.AlarmService).to(bc),jd.bind(Zi.AssetService).to(Sc),jd.bind(Zi.AttributeService).to(_c),jd.bind(Zi.AuditLogService).to(Ac),jd.bind(Zi.CustomerService).to(wc),jd.bind(Zi.DeviceService).to(Ic),jd.bind(Zi.EntityRelationService).to(Dc),jd.bind(Zi.EntityViewService).to(Rc),jd.bind(Zi.EntityService).to(_p),jd.bind(Zi.EventService).to(Ap),jd.bind(Zi.OAuth2Service).to(wp),jd.bind(Zi.OtaPackageService).to(Ip),jd.bind(Zi.QueueService).to(mp),jd.bind(Zi.ResourceService).to(bp),jd.bind(Zi.TenantProfileService).to(Ep),jd.bind(Zi.TenantService).to(Pc),jd.bind(Zi.UserService).to(Ta),jd.bind(Zi.DeviceProfileService).to(yp),jd.bind(Zi.AssetProfileService).to(gp),jd.bind(Zi.EntityGroupService).to(rd),jd.bind(Zi.SchedulerService).to(Id),jd.bind(Zi.NotificationService).to(vp),jd.bind(Zi.ImageService).to(Wd),jd.bind(Zi.NotificationWebsocketService).to(Vd);var Yd={},Hd={};Object.defineProperty(Hd,"__esModule",{value:!0});var Bd=Symbol.for("INJECTION");function Kd(t,e,n,i){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i&&!Reflect.hasMetadata(Bd,this,e)&&Reflect.defineMetadata(Bd,n(),this,e),Reflect.hasMetadata(Bd,this,e)?Reflect.getMetadata(Bd,this,e):n()},set:function(t){Reflect.defineMetadata(Bd,t,this,e)}})}Hd.makePropertyInjectDecorator=function(t,e){return function(n){return function(i,r){Kd(i,r,(function(){return t.get(n)}),e)}}},Hd.makePropertyInjectNamedDecorator=function(t,e){return function(n,i){return function(r,a){Kd(r,a,(function(){return t.getNamed(n,i)}),e)}}},Hd.makePropertyInjectTaggedDecorator=function(t,e){return function(n,i,r){return function(a,o){Kd(a,o,(function(){return t.getTagged(n,i,r)}),e)}}},Hd.makePropertyMultiInjectDecorator=function(t,e){return function(n){return function(i,r){Kd(i,r,(function(){return t.getAll(n)}),e)}}},Object.defineProperty(Yd,"__esModule",{value:!0});var Gd=Hd;var qd=Yd.default=function(t,e){return void 0===e&&(e=!0),{lazyInject:Gd.makePropertyInjectDecorator(t,e),lazyInjectNamed:Gd.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:Gd.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:Gd.makePropertyMultiInjectDecorator(t,e)}},zd={},Qd=qd(jd).lazyInject,Jd=function(){function t(){this.AUTH_SCHEME="Bearer ",this.AUTH_HEADER_NAME="X-Authorization",this.internalUrlPrefixes=["/api/auth/token","/api/rpc"],this.activeRequests=0}return t.prototype.intercept=function(t,e){var n=this;if(t.url.startsWith("/api/")){var i=this.getInterceptorConfig(t);this.updateLoadingState(i,!0);return(this.isTokenBasedAuthEntryPoint(t.url)?Ec.getJwtToken()||this.authService.refreshTokenPending()?Ec.isJwtTokenValid()?this.jwtIntercept(t,e):this.handleResponseError(t,e,new Ni({error:{refreshTokenPending:!0}})):this.handleResponseError(t,e,new Ni({error:{message:"Unauthorized!"},status:401})):this.handleRequest(t,e)).pipe(oi((function(){t.url.startsWith("/api/")&&n.updateLoadingState(i,!1)})))}return e.handle(t)},t.prototype.jwtIntercept=function(t,e){var n=this.updateAuthorizationHeader(t);return n?this.handleRequest(n,e):Pn((function(){return new Error("Could not get JWT token from store.")}))},t.prototype.handleRequest=function(t,e){var n=this;return e.handle(t).pipe(Xn((function(i){var r=i;return n.handleResponseError(t,e,r)})))},t.prototype.handleResponseError=function(t,e,n){var i=this.getInterceptorConfig(t),r=!1,a=i.ignoreErrors,o=i.resendRequest,s=n.error?n.error.errorCode:null;if(n.error&&n.error.refreshTokenPending||401===n.status&&t.url!==gr.entryPoints.tokenRefresh){if(n.error&&n.error.refreshTokenPending||s&&s===gr.serverErrorCode.jwtTokenExpired)return this.refreshTokenAndRetry(t,e);s!==gr.serverErrorCode.credentialsExpired&&(r=!0)}else if(429===n.status){if(o)return this.retryRequest(t,e)}else 403===n.status||(0===n.status||-1===n.status?this.showError("Unable to connect"):t.url.startsWith("/api/rpc")||t.url.startsWith("/api/plugins/rpc")||(404===n.status?a||this.showError(t.method+": "+t.url+"<br/>"+n.status+": "+n.statusText):r=!0));if(r&&!a){var u=ga(n,{instant:function(t){return t}},t.responseType);this.showError(u.message,u.timeout)}return Pn((function(){return n}))},t.prototype.retryRequest=function(t,e){var n=this,i=1e3+3e3*Math.random();return Un(null).pipe(function(t,e){void 0===e&&(e=dn);var n=Qn(t,e);return ai((function(){return n}))}(i),Gn((function(){return n.jwtIntercept(t,e)})))},t.prototype.refreshTokenAndRetry=function(t,e){var n=this;return this.authService.refreshJwtToken().pipe(Xn((function(i){n.authService.logout();var r=i?i.message:"Unauthorized!";return n.handleResponseError(t,e,new Ni({error:{message:r,timeout:200},status:401}))})),li((function(){return n.jwtIntercept(t,e)})))},t.prototype.updateAuthorizationHeader=function(t){var e=Ec.getJwtToken();return e?(zd[this.AUTH_HEADER_NAME]="".concat(this.AUTH_SCHEME).concat(e),t=t.clone({setHeaders:zd})):null},t.prototype.isInternalUrlPrefix=function(t){for(var e in this.internalUrlPrefixes)if(t.startsWith(this.internalUrlPrefixes[e]))return!0;return!1},t.prototype.isTokenBasedAuthEntryPoint=function(t){return t.startsWith("/api/")&&!t.startsWith(gr.entryPoints.login)&&!t.startsWith(gr.entryPoints.tokenRefresh)&&!t.startsWith(gr.entryPoints.nonTokenBased)},t.prototype.updateLoadingState=function(t,e){t.ignoreLoading||(e?this.activeRequests++:this.activeRequests--,1===this.activeRequests&&e||this.activeRequests)},t.prototype.getInterceptorConfig=function(t){var e;return e=t.params&&t.params instanceof tr?t.params.interceptorConfig:new er(!1,!1),this.isInternalUrlPrefix(t.url)&&(e.ignoreLoading=!0),e},t.prototype.showError=function(t,e){void 0===e&&(e=0),setTimeout((function(){}),e)},fe([Qd(Zi.AuthService),ye("design:type",Ec)],t.prototype,"authService",void 0),t=fe([ae(),ye("design:paramtypes",[])],t)}();Xi.bind(ce.HTTP_INTERCEPTORS).to(Jd),jd.bind(Zi.HttpClient).toConstantValue(Xi.get(ce.HttpClientInternal));var Xd=te.merge(Xi,jd);Xd.options.skipBaseClassChecks=!0;var $d=function(t){this.entityType=ur.ASSET,this.id=t},Zd=function(t){this.id=t},tf=function(t){this.entityType=ur.DASHBOARD,this.id=t},ef=function(t){this.id=t},nf=function(t){this.entityType=ur.DEVICE,this.id=t},rf=function(t){this.entityType=ur.DEVICE_PROFILE,this.id=t};var af,of=function(t){this.entityType=ur.ENTITY_VIEW,this.id=t},sf=function(t){this.id=t},uf=function(t){this.entityType=ur.NOTIFICATION,this.id=t},cf=function(t){this.entityType=ur.NOTIFICATION_REQUEST,this.id=t},lf=function(t){this.entityType=ur.NOTIFICATION_RULE,this.id=t},pf=function(t){this.entityType=ur.NOTIFICATION_TARGET,this.id=t},df=function(t){this.entityType=ur.NOTIFICATION_TEMPLATE,this.id=t},ff=function(t){this.entityType=ur.OTA_PACKAGE,this.id=t},hf=function(t){this.entityType=ur.RPC,this.id=t},yf=function(t){this.entityType=ur.RULE_CHAIN,this.id=t},mf=function(t){this.entityType=ur.RULE_NODE,this.id=t},gf=function(t){this.entityType=ur.TENANT_PROFILE,this.id=t},vf=function(t){this.entityType=ur.WIDGET_TYPE,this.id=t},Tf=function(t){this.entityType=ur.WIDGETS_BUNDLE,this.id=t},Ef=function(t){this.entityType=ur.EDGE,this.id=t};!function(t){t.ENABLED="ENABLED",t.WARNING="WARNING",t.DISABLED="DISABLED"}(af||(af={}));var bf,Sf=new Map([[af.ENABLED,"notification.enabled"],[af.WARNING,"notification.warning"],[af.DISABLED,"notification.disabled"]]);!function(t){t.TRANSPORT="TRANSPORT",t.DB="DB",t.RE="RE",t.JS="JS",t.TBEL="TBEL",t.EMAIL="EMAIL",t.SMS="SMS",t.ALARM="ALARM"}(bf||(bf={}));var _f,Af,wf,If=new Map([[bf.TRANSPORT,"api-usage.device-api"],[bf.DB,"api-usage.telemetry-persistence"],[bf.RE,"api-usage.rule-engine-executions"],[bf.JS,"api-usage.javascript-executions"],[bf.TBEL,"api-usage.tbel-executions"],[bf.EMAIL,"api-usage.email-messages"],[bf.SMS,"api-usage.sms-messages"],[bf.ALARM,"api-usage.alarm"]]);!function(t){t[t.TENANT=0]="TENANT",t[t.ENTITY=1]="ENTITY",t[t.USER=2]="USER",t[t.CUSTOMER=3]="CUSTOMER"}(_f||(_f={})),function(t){t.ADDED="ADDED",t.DELETED="DELETED",t.UPDATED="UPDATED",t.ATTRIBUTES_UPDATED="ATTRIBUTES_UPDATED",t.ATTRIBUTES_DELETED="ATTRIBUTES_DELETED",t.RPC_CALL="RPC_CALL",t.CREDENTIALS_UPDATED="CREDENTIALS_UPDATED",t.ASSIGNED_TO_CUSTOMER="ASSIGNED_TO_CUSTOMER",t.UNASSIGNED_FROM_CUSTOMER="UNASSIGNED_FROM_CUSTOMER",t.ACTIVATED="ACTIVATED",t.SUSPENDED="SUSPENDED",t.CREDENTIALS_READ="CREDENTIALS_READ",t.ATTRIBUTES_READ="ATTRIBUTES_READ",t.RELATION_ADD_OR_UPDATE="RELATION_ADD_OR_UPDATE",t.RELATION_DELETED="RELATION_DELETED",t.RELATIONS_DELETED="RELATIONS_DELETED",t.ALARM_ACK="ALARM_ACK",t.ALARM_CLEAR="ALARM_CLEAR",t.ALARM_ASSIGNED="ALARM_ASSIGNED",t.ALARM_UNASSIGNED="ALARM_UNASSIGNED",t.ADDED_COMMENT="ADDED_COMMENT",t.UPDATED_COMMENT="UPDATED_COMMENT",t.DELETED_COMMENT="DELETED_COMMENT",t.LOGIN="LOGIN",t.LOGOUT="LOGOUT",t.LOCKOUT="LOCKOUT",t.ASSIGNED_FROM_TENANT="ASSIGNED_FROM_TENANT",t.ASSIGNED_TO_TENANT="ASSIGNED_TO_TENANT",t.PROVISION_SUCCESS="PROVISION_SUCCESS",t.PROVISION_FAILURE="PROVISION_FAILURE",t.TIMESERIES_UPDATED="TIMESERIES_UPDATED",t.TIMESERIES_DELETED="TIMESERIES_DELETED",t.ASSIGNED_TO_EDGE="ASSIGNED_TO_EDGE",t.UNASSIGNED_FROM_EDGE="UNASSIGNED_FROM_EDGE",t.SMS_SENT="SMS_SENT"}(Af||(Af={})),function(t){t.SUCCESS="SUCCESS",t.FAILURE="FAILURE"}(wf||(wf={}));var Df,Rf,Nf=new Map([[Af.ADDED,"audit-log.type-added"],[Af.DELETED,"audit-log.type-deleted"],[Af.UPDATED,"audit-log.type-updated"],[Af.ATTRIBUTES_UPDATED,"audit-log.type-attributes-updated"],[Af.ATTRIBUTES_DELETED,"audit-log.type-attributes-deleted"],[Af.RPC_CALL,"audit-log.type-rpc-call"],[Af.CREDENTIALS_UPDATED,"audit-log.type-credentials-updated"],[Af.ASSIGNED_TO_CUSTOMER,"audit-log.type-assigned-to-customer"],[Af.UNASSIGNED_FROM_CUSTOMER,"audit-log.type-unassigned-from-customer"],[Af.ACTIVATED,"audit-log.type-activated"],[Af.SUSPENDED,"audit-log.type-suspended"],[Af.CREDENTIALS_READ,"audit-log.type-credentials-read"],[Af.ATTRIBUTES_READ,"audit-log.type-attributes-read"],[Af.RELATION_ADD_OR_UPDATE,"audit-log.type-relation-add-or-update"],[Af.RELATION_DELETED,"audit-log.type-relation-delete"],[Af.RELATIONS_DELETED,"audit-log.type-relations-delete"],[Af.ALARM_ACK,"audit-log.type-alarm-ack"],[Af.ALARM_CLEAR,"audit-log.type-alarm-clear"],[Af.ALARM_ASSIGNED,"audit-log.type-alarm-assign"],[Af.ALARM_UNASSIGNED,"audit-log.type-alarm-unassign"],[Af.ADDED_COMMENT,"audit-log.type-added-comment"],[Af.UPDATED_COMMENT,"audit-log.type-updated-comment"],[Af.DELETED_COMMENT,"audit-log.type-deleted-comment"],[Af.LOGIN,"audit-log.type-login"],[Af.LOGOUT,"audit-log.type-logout"],[Af.LOCKOUT,"audit-log.type-lockout"],[Af.ASSIGNED_FROM_TENANT,"audit-log.type-assigned-from-tenant"],[Af.ASSIGNED_TO_TENANT,"audit-log.type-assigned-to-tenant"],[Af.PROVISION_SUCCESS,"audit-log.type-provision-success"],[Af.PROVISION_FAILURE,"audit-log.type-provision-failure"],[Af.TIMESERIES_UPDATED,"audit-log.type-timeseries-updated"],[Af.TIMESERIES_DELETED,"audit-log.type-timeseries-deleted"],[Af.ASSIGNED_TO_EDGE,"audit-log.type-assigned-to-edge"],[Af.UNASSIGNED_FROM_EDGE,"audit-log.type-unassigned-from-edge"],[Af.SMS_SENT,"audit-log.type-sms-sent"]]),Of=new Map([[wf.SUCCESS,"audit-log.status-success"],[wf.FAILURE,"audit-log.status-failure"]]);!function(t){t.ERROR="ERROR",t.LC_EVENT="LC_EVENT",t.STATS="STATS"}(Df||(Df={})),function(t){t.DEBUG_RULE_NODE="DEBUG_RULE_NODE",t.DEBUG_RULE_CHAIN="DEBUG_RULE_CHAIN"}(Rf||(Rf={}));var Cf,Mf=new Map([[Df.ERROR,"event.type-error"],[Df.LC_EVENT,"event.type-lc-event"],[Df.STATS,"event.type-stats"],[Rf.DEBUG_RULE_NODE,"event.type-debug-rule-node"],[Rf.DEBUG_RULE_CHAIN,"event.type-debug-rule-chain"]]);!function(t){t.ENTITY_EXPORT="ENTITY_EXPORT",t.ENTITY_IMPORT="ENTITY_IMPORT",t.NOTIFICATION_REQUESTS="NOTIFICATION_REQUESTS",t.NOTIFICATION_REQUESTS_PER_RULE="NOTIFICATION_REQUESTS_PER_RULE",t.REST_REQUESTS_PER_TENANT="REST_REQUESTS_PER_TENANT",t.REST_REQUESTS_PER_CUSTOMER="REST_REQUESTS_PER_CUSTOMER",t.WS_UPDATES_PER_SESSION="WS_UPDATES_PER_SESSION",t.CASSANDRA_QUERIES="CASSANDRA_QUERIES",t.TRANSPORT_MESSAGES_PER_TENANT="TRANSPORT_MESSAGES_PER_TENANT",t.TRANSPORT_MESSAGES_PER_DEVICE="TRANSPORT_MESSAGES_PER_DEVICE",t.TRANSPORT_MESSAGES_PER_GATEWAY="TRANSPORT_MESSAGES_PER_GATEWAY",t.TRANSPORT_MESSAGES_PER_GATEWAY_DEVICE="TRANSPORT_MESSAGES_PER_GATEWAY_DEVICE",t.EDGE_EVENTS="EDGE_EVENTS",t.EDGE_EVENTS_PER_EDGE="EDGE_EVENTS_PER_EDGE",t.EDGE_UPLINK_MESSAGES="EDGE_UPLINK_MESSAGES",t.EDGE_UPLINK_MESSAGES_PER_EDGE="EDGE_UPLINK_MESSAGES_PER_EDGE"}(Cf||(Cf={}));var kf,Lf=new Map([[Cf.ENTITY_EXPORT,"api-limit.entity-version-creation"],[Cf.ENTITY_IMPORT,"api-limit.entity-version-load"],[Cf.NOTIFICATION_REQUESTS,"api-limit.notification-requests"],[Cf.NOTIFICATION_REQUESTS_PER_RULE,"api-limit.notification-requests-per-rule"],[Cf.REST_REQUESTS_PER_TENANT,"api-limit.rest-api-requests"],[Cf.REST_REQUESTS_PER_CUSTOMER,"api-limit.rest-api-requests-per-customer"],[Cf.WS_UPDATES_PER_SESSION,"api-limit.ws-updates-per-session"],[Cf.CASSANDRA_QUERIES,"api-limit.cassandra-queries"],[Cf.TRANSPORT_MESSAGES_PER_TENANT,"api-limit.transport-messages"],[Cf.TRANSPORT_MESSAGES_PER_DEVICE,"api-limit.transport-messages-per-device"],[Cf.TRANSPORT_MESSAGES_PER_GATEWAY,"api-limit.transport-messages-per-gateway"],[Cf.TRANSPORT_MESSAGES_PER_GATEWAY_DEVICE,"api-limit.transport-messages-per-gateway-device"],[Cf.EDGE_EVENTS,"api-limit.edge-events"],[Cf.EDGE_EVENTS_PER_EDGE,"api-limit.edge-events-per-edge"],[Cf.EDGE_UPLINK_MESSAGES,"api-limit.edge-uplink-messages"],[Cf.EDGE_UPLINK_MESSAGES_PER_EDGE,"api-limit.edge-uplink-messages-per-edge"]]);!function(t){t.STARTED="STARTED",t.UPDATED="UPDATED",t.STOPPED="STOPPED"}(kf||(kf={}));var Uf,Pf=new Map([[kf.STARTED,"event.started"],[kf.UPDATED,"event.updated"],[kf.STOPPED,"event.stopped"]]);!function(t){t.CREATED="CREATED",t.SEVERITY_CHANGED="SEVERITY_CHANGED",t.ACKNOWLEDGED="ACKNOWLEDGED",t.CLEARED="CLEARED"}(Uf||(Uf={}));var xf,Ff=new Map([[Uf.CREATED,"notification.notify-alarm-action.created"],[Uf.SEVERITY_CHANGED,"notification.notify-alarm-action.severity-changed"],[Uf.ACKNOWLEDGED,"notification.notify-alarm-action.acknowledged"],[Uf.CLEARED,"notification.notify-alarm-action.cleared"]]);!function(t){t.ASSIGNED="ASSIGNED",t.UNASSIGNED="UNASSIGNED"}(xf||(xf={}));var Wf,Vf=new Map([[xf.ASSIGNED,"notification.notify-alarm-action.assigned"],[xf.UNASSIGNED,"notification.notify-alarm-action.unassigned"]]);!function(t){t.ACTIVE="ACTIVE",t.INACTIVE="INACTIVE"}(Wf||(Wf={}));var jf,Yf=new Map([[Wf.ACTIVE,"notification.active"],[Wf.INACTIVE,"notification.inactive"]]);!function(t){t.PLATFORM_USERS="PLATFORM_USERS",t.SLACK="SLACK",t.MICROSOFT_TEAMS="MICROSOFT_TEAMS"}(jf||(jf={}));var Hf,Bf,Kf=new Map([[jf.PLATFORM_USERS,"notification.platform-users"],[jf.SLACK,"notification.delivery-method.slack"],[jf.MICROSOFT_TEAMS,"notification.delivery-method.microsoft-teams"]]);!function(t){t.SENT="SENT",t.READ="READ"}(Hf||(Hf={})),function(t){t.WEB="WEB",t.MOBILE_APP="MOBILE_APP",t.SMS="SMS",t.EMAIL="EMAIL",t.SLACK="SLACK",t.MICROSOFT_TEAMS="MICROSOFT_TEAMS"}(Bf||(Bf={}));var Gf,qf=new Map([[Bf.WEB,{name:"notification.delivery-method.web",icon:"mdi:bell-badge"}],[Bf.SMS,{name:"notification.delivery-method.sms",icon:"mdi:message-processing"}],[Bf.EMAIL,{name:"notification.delivery-method.email",icon:"mdi:email"}],[Bf.SLACK,{name:"notification.delivery-method.slack",icon:"mdi:slack"}],[Bf.MOBILE_APP,{name:"notification.delivery-method.mobile-app",icon:"mdi:cellphone-text"}],[Bf.MICROSOFT_TEAMS,{name:"notification.delivery-method.microsoft-teams",icon:"mdi:microsoft-teams"}]]);!function(t){t.PROCESSING="PROCESSING",t.SCHEDULED="SCHEDULED",t.SENT="SENT"}(Gf||(Gf={}));var zf,Qf=new Map([[Gf.PROCESSING,"notification.request-status.processing"],[Gf.SCHEDULED,"notification.request-status.scheduled"],[Gf.SENT,"notification.request-status.sent"]]);!function(t){t.PUBLIC_CHANNEL="PUBLIC_CHANNEL",t.PRIVATE_CHANNEL="PRIVATE_CHANNEL",t.DIRECT="DIRECT"}(zf||(zf={}));var Jf,Xf=new Map([[zf.DIRECT,"notification.slack-chanel-types.direct"],[zf.PUBLIC_CHANNEL,"notification.slack-chanel-types.public-channel"],[zf.PRIVATE_CHANNEL,"notification.slack-chanel-types.private-channel"]]);!function(t){t.ALL_USERS="ALL_USERS",t.TENANT_ADMINISTRATORS="TENANT_ADMINISTRATORS",t.CUSTOMER_USERS="CUSTOMER_USERS",t.USER_LIST="USER_LIST",t.ORIGINATOR_ENTITY_OWNER_USERS="ORIGINATOR_ENTITY_OWNER_USERS",t.AFFECTED_USER="AFFECTED_USER",t.SYSTEM_ADMINISTRATORS="SYSTEM_ADMINISTRATORS",t.AFFECTED_TENANT_ADMINISTRATORS="AFFECTED_TENANT_ADMINISTRATORS"}(Jf||(Jf={}));var $f,Zf=new Map([[Jf.ALL_USERS,{name:"notification.recipient-type.all-users"}],[Jf.TENANT_ADMINISTRATORS,{name:"notification.recipient-type.tenant-administrators"}],[Jf.CUSTOMER_USERS,{name:"notification.recipient-type.customer-users"}],[Jf.USER_LIST,{name:"notification.recipient-type.user-list"}],[Jf.ORIGINATOR_ENTITY_OWNER_USERS,{name:"notification.recipient-type.users-entity-owner"}],[Jf.AFFECTED_USER,{name:"notification.recipient-type.affected-user"}],[Jf.SYSTEM_ADMINISTRATORS,{name:"notification.recipient-type.system-administrators"}],[Jf.AFFECTED_TENANT_ADMINISTRATORS,{name:"notification.recipient-type.affected-tenant-administrators"}]]);!function(t){t.GENERAL="GENERAL",t.ALARM="ALARM",t.DEVICE_ACTIVITY="DEVICE_ACTIVITY",t.ENTITY_ACTION="ENTITY_ACTION",t.ALARM_COMMENT="ALARM_COMMENT",t.ALARM_ASSIGNMENT="ALARM_ASSIGNMENT",t.RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT="RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT",t.ENTITIES_LIMIT="ENTITIES_LIMIT",t.API_USAGE_LIMIT="API_USAGE_LIMIT",t.NEW_PLATFORM_VERSION="NEW_PLATFORM_VERSION",t.RULE_NODE="RULE_NODE",t.RATE_LIMITS="RATE_LIMITS",t.EDGE_CONNECTION="EDGE_CONNECTION",t.EDGE_COMMUNICATION_FAILURE="EDGE_COMMUNICATION_FAILURE",t.TASK_PROCESSING_FAILURE="TASK_PROCESSING_FAILURE"}($f||($f={}));var th,eh=new Map([[$f.ALARM,"warning"],[$f.DEVICE_ACTIVITY,"phonelink_off"],[$f.ENTITY_ACTION,"devices"],[$f.ALARM_COMMENT,"comment"],[$f.ALARM_ASSIGNMENT,"assignment_turned_in"],[$f.RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT,"settings_ethernet"],[$f.ENTITIES_LIMIT,"data_thresholding"],[$f.API_USAGE_LIMIT,"insert_chart"],[$f.TASK_PROCESSING_FAILURE,"warning"]]),nh=new Map([[Ra.CRITICAL,"#D12730"],[Ra.MAJOR,"#FEAC0C"],[Ra.MINOR,"#F2DA05"],[Ra.WARNING,"#F66716"],[Ra.INDETERMINATE,"#00000061"]]);!function(t){t.LINK="LINK",t.DASHBOARD="DASHBOARD"}(th||(th={}));var ih,rh=new Map([[th.LINK,"notification.link-type.link"],[th.DASHBOARD,"notification.link-type.dashboard"]]),ah=new Map([[$f.GENERAL,{name:"notification.template-type.general",helpId:"notification/general"}],[$f.ALARM,{name:"notification.template-type.alarm",helpId:"notification/alarm"}],[$f.DEVICE_ACTIVITY,{name:"notification.template-type.device-activity",helpId:"notification/device_activity"}],[$f.ENTITY_ACTION,{name:"notification.template-type.entity-action",helpId:"notification/entity_action"}],[$f.ALARM_COMMENT,{name:"notification.template-type.alarm-comment",helpId:"notification/alarm_comment"}],[$f.ALARM_ASSIGNMENT,{name:"notification.template-type.alarm-assignment",helpId:"notification/alarm_assignment"}],[$f.RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT,{name:"notification.template-type.rule-engine-lifecycle-event",helpId:"notification/rule_engine_lifecycle_event"}],[$f.ENTITIES_LIMIT,{name:"notification.template-type.entities-limit",helpId:"notification/entities_limit"}],[$f.API_USAGE_LIMIT,{name:"notification.template-type.api-usage-limit",helpId:"notification/api_usage_limit"}],[$f.NEW_PLATFORM_VERSION,{name:"notification.template-type.new-platform-version",helpId:"notification/new_platform_version"}],[$f.RULE_NODE,{name:"notification.template-type.rule-node",helpId:"notification/rule_node"}],[$f.RATE_LIMITS,{name:"notification.template-type.rate-limits",helpId:"notification/rate_limits"}],[$f.EDGE_CONNECTION,{name:"notification.template-type.edge-connection",helpId:"notification/edge_connection"}],[$f.EDGE_COMMUNICATION_FAILURE,{name:"notification.template-type.edge-communication-failure",helpId:"notification/edge_communication_failure"}],[$f.TASK_PROCESSING_FAILURE,{name:"notification.template-type.task-processing-failure",helpId:"notification/task_processing_failure"}]]);!function(t){t.ALARM="ALARM",t.DEVICE_ACTIVITY="DEVICE_ACTIVITY",t.ENTITY_ACTION="ENTITY_ACTION",t.ALARM_COMMENT="ALARM_COMMENT",t.ALARM_ASSIGNMENT="ALARM_ASSIGNMENT",t.RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT="RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT",t.ENTITIES_LIMIT="ENTITIES_LIMIT",t.API_USAGE_LIMIT="API_USAGE_LIMIT",t.NEW_PLATFORM_VERSION="NEW_PLATFORM_VERSION",t.RATE_LIMITS="RATE_LIMITS",t.EDGE_CONNECTION="EDGE_CONNECTION",t.EDGE_COMMUNICATION_FAILURE="EDGE_COMMUNICATION_FAILURE",t.TASK_PROCESSING_FAILURE="TASK_PROCESSING_FAILURE"}(ih||(ih={}));var oh,sh=new Map([[ih.ALARM,"notification.trigger.alarm"],[ih.DEVICE_ACTIVITY,"notification.trigger.device-activity"],[ih.ENTITY_ACTION,"notification.trigger.entity-action"],[ih.ALARM_COMMENT,"notification.trigger.alarm-comment"],[ih.ALARM_ASSIGNMENT,"notification.trigger.alarm-assignment"],[ih.RULE_ENGINE_COMPONENT_LIFECYCLE_EVENT,"notification.trigger.rule-engine-lifecycle-event"],[ih.ENTITIES_LIMIT,"notification.trigger.entities-limit"],[ih.API_USAGE_LIMIT,"notification.trigger.api-usage-limit"],[ih.NEW_PLATFORM_VERSION,"notification.trigger.new-platform-version"],[ih.RATE_LIMITS,"notification.trigger.rate-limits"],[ih.EDGE_CONNECTION,"notification.trigger.edge-connection"],[ih.EDGE_COMMUNICATION_FAILURE,"notification.trigger.edge-communication-failure"],[ih.TASK_PROCESSING_FAILURE,"notification.trigger.task-processing-failure"]]);!function(t){t.HTTP="HTTP",t.HTTPS="HTTPS",t.MIXED="MIXED"}(oh||(oh={}));var uh,ch,lh,ph=new Map([[oh.HTTP,"admin.oauth2.domain-schema-http"],[oh.HTTPS,"admin.oauth2.domain-schema-https"],[oh.MIXED,"admin.oauth2.domain-schema-mixed"]]);!function(t){t.BASIC="BASIC",t.CUSTOM="CUSTOM",t.GITHUB="GITHUB",t.APPLE="APPLE"}(uh||(uh={})),function(t){t.DOMAIN="DOMAIN",t.EMAIL="EMAIL",t.CUSTOM="CUSTOM"}(ch||(ch={})),function(t){t.WEB="WEB",t.ANDROID="ANDROID",t.IOS="IOS"}(lh||(lh={}));var dh,fh,hh=new Map([[lh.WEB,"admin.oauth2.platform-web"],[lh.ANDROID,"admin.oauth2.platform-android"],[lh.IOS,"admin.oauth2.platform-ios"]]);!function(t){t.BASIC="BASIC",t.POST="POST"}(dh||(dh={})),function(t){t.MD5="MD5",t.SHA256="SHA256",t.SHA384="SHA384",t.SHA512="SHA512",t.CRC32="CRC32",t.MURMUR3_32="MURMUR3_32",t.MURMUR3_128="MURMUR3_128"}(fh||(fh={}));var yh,mh=new Map([[fh.MD5,"MD5"],[fh.SHA256,"SHA-256"],[fh.SHA384,"SHA-384"],[fh.SHA512,"SHA-512"],[fh.CRC32,"CRC-32"],[fh.MURMUR3_32,"MURMUR3-32"],[fh.MURMUR3_128,"MURMUR3-128"]]);!function(t){t.FIRMWARE="FIRMWARE",t.SOFTWARE="SOFTWARE"}(yh||(yh={}));var gh,vh,Th=new Map([[yh.FIRMWARE,"ota-update.types.firmware"],[yh.SOFTWARE,"ota-update.types.software"]]),Eh=new Map([[yh.FIRMWARE,{label:"ota-update.assign-firmware",required:"ota-update.assign-firmware-required",noFound:"ota-update.no-firmware-text",noMatching:"ota-update.no-firmware-matching",hint:"ota-update.chose-firmware-distributed-device"}],[yh.SOFTWARE,{label:"ota-update.assign-software",required:"ota-update.assign-software-required",noFound:"ota-update.no-software-text",noMatching:"ota-update.no-software-matching",hint:"ota-update.chose-software-distributed-device"}]]);!function(t){t.TB_CORE="TB_CORE",t.TB_RULE_ENGINE="TB_RULE_ENGINE",t.TB_TRANSPORT="TB_TRANSPORT",t.JS_EXECUTOR="JS_EXECUTOR"}(gh||(gh={})),function(t){t.SEQUENTIAL_BY_ORIGINATOR="SEQUENTIAL_BY_ORIGINATOR",t.SEQUENTIAL_BY_TENANT="SEQUENTIAL_BY_TENANT",t.SEQUENTIAL="SEQUENTIAL",t.BURST="BURST",t.BATCH="BATCH"}(vh||(vh={}));var bh,Sh=new Map([[vh.SEQUENTIAL_BY_ORIGINATOR,{label:"queue.strategies.sequential-by-originator-label",hint:"queue.strategies.sequential-by-originator-hint"}],[vh.SEQUENTIAL_BY_TENANT,{label:"queue.strategies.sequential-by-tenant-label",hint:"queue.strategies.sequential-by-tenant-hint"}],[vh.SEQUENTIAL,{label:"queue.strategies.sequential-label",hint:"queue.strategies.sequential-hint"}],[vh.BURST,{label:"queue.strategies.burst-label",hint:"queue.strategies.burst-hint"}],[vh.BATCH,{label:"queue.strategies.batch-label",hint:"queue.strategies.batch-hint"}]]);!function(t){t.RETRY_FAILED_AND_TIMED_OUT="RETRY_FAILED_AND_TIMED_OUT",t.SKIP_ALL_FAILURES="SKIP_ALL_FAILURES",t.SKIP_ALL_FAILURES_AND_TIMED_OUT="SKIP_ALL_FAILURES_AND_TIMED_OUT",t.RETRY_ALL="RETRY_ALL",t.RETRY_FAILED="RETRY_FAILED",t.RETRY_TIMED_OUT="RETRY_TIMED_OUT"}(bh||(bh={}));var _h,Ah,wh=new Map([[bh.RETRY_FAILED_AND_TIMED_OUT,{label:"queue.strategies.retry-failed-and-timeout-label",hint:"queue.strategies.retry-failed-and-timeout-hint"}],[bh.SKIP_ALL_FAILURES,{label:"queue.strategies.skip-all-failures-label",hint:"queue.strategies.skip-all-failures-hint"}],[bh.SKIP_ALL_FAILURES_AND_TIMED_OUT,{label:"queue.strategies.skip-all-failures-and-timeouts-label",hint:"queue.strategies.skip-all-failures-and-timeouts-hint"}],[bh.RETRY_ALL,{label:"queue.strategies.retry-all-label",hint:"queue.strategies.retry-all-hint"}],[bh.RETRY_FAILED,{label:"queue.strategies.retry-failed-label",hint:"queue.strategies.retry-failed-hint"}],[bh.RETRY_TIMED_OUT,{label:"queue.strategies.retry-timeout-label",hint:"queue.strategies.retry-timeout-hint"}]]),Ih="Contains",Dh="Manages",Rh=[Ih,Dh];!function(t){t.COMMON="COMMON",t.ALARM="ALARM",t.DASHBOARD="DASHBOARD",t.RULE_CHAIN="RULE_CHAIN",t.RULE_NODE="RULE_NODE"}(_h||(_h={})),function(t){t.FROM="FROM",t.TO="TO"}(Ah||(Ah={}));var Nh,Oh,Ch=new Map([[Ah.FROM,"relation.search-direction.FROM"],[Ah.TO,"relation.search-direction.TO"]]),Mh=new Map([[Ah.FROM,"relation.direction-type.FROM"],[Ah.TO,"relation.direction-type.TO"]]);!function(t){t.SMTP="smtp",t.SMTPS="smtps"}(Nh||(Nh={})),function(t){t.OFFICE_365="OFFICE_365",t.CUSTOM="CUSTOM"}(Oh||(Oh={}));var kh;!function(t){t.AWS_SNS="AWS_SNS",t.TWILIO="TWILIO",t.SMPP="SMPP"}(kh||(kh={}));var Lh,Uh=new Map([[kh.AWS_SNS,"admin.sms-provider-type-aws-sns"],[kh.TWILIO,"admin.sms-provider-type-twilio"],[kh.SMPP,"admin.sms-provider-type-smpp"]]);!function(t){t.TX="TX",t.RX="RX",t.TRX="TRX"}(Lh||(Lh={}));var Ph,xh=new Map([[Lh.TX,"admin.smpp-provider.bind-type-tx"],[Lh.RX,"admin.smpp-provider.bind-type-rx"],[Lh.TRX,"admin.smpp-provider.bind-type-trx"]]);!function(t){t.Unknown="Unknown",t.International="International",t.National="National",t.NetworkSpecific="NetworkSpecific",t.SubscriberNumber="SubscriberNumber",t.Alphanumeric="Alphanumeric",t.Abbreviated="Abbreviated"}(Ph||(Ph={}));var Fh,Wh=new Map([[Ph.Unknown,{name:"admin.smpp-provider.ton-unknown",value:0}],[Ph.International,{name:"admin.smpp-provider.ton-international",value:1}],[Ph.National,{name:"admin.smpp-provider.ton-national",value:2}],[Ph.NetworkSpecific,{name:"admin.smpp-provider.ton-network-specific",value:3}],[Ph.SubscriberNumber,{name:"admin.smpp-provider.ton-subscriber-number",value:4}],[Ph.Alphanumeric,{name:"admin.smpp-provider.ton-alphanumeric",value:5}],[Ph.Abbreviated,{name:"admin.smpp-provider.ton-abbreviated",value:6}]]);!function(t){t.Unknown="Unknown",t.ISDN="ISDN",t.DataNumberingPlan="DataNumberingPlan",t.TelexNumberingPlan="TelexNumberingPlan",t.LandMobile="LandMobile",t.NationalNumberingPlan="NationalNumberingPlan",t.PrivateNumberingPlan="PrivateNumberingPlan",t.ERMESNumberingPlan="ERMESNumberingPlan",t.Internet="Internet",t.WAPClientId="WAPClientId"}(Fh||(Fh={}));var Vh,jh=new Map([[Fh.Unknown,{name:"admin.smpp-provider.npi-unknown",value:0}],[Fh.ISDN,{name:"admin.smpp-provider.npi-isdn",value:1}],[Fh.DataNumberingPlan,{name:"admin.smpp-provider.npi-data-numbering-plan",value:3}],[Fh.TelexNumberingPlan,{name:"admin.smpp-provider.npi-telex-numbering-plan",value:4}],[Fh.LandMobile,{name:"admin.smpp-provider.npi-land-mobile",value:5}],[Fh.NationalNumberingPlan,{name:"admin.smpp-provider.npi-national-numbering-plan",value:8}],[Fh.PrivateNumberingPlan,{name:"admin.smpp-provider.npi-private-numbering-plan",value:9}],[Fh.ERMESNumberingPlan,{name:"admin.smpp-provider.npi-ermes-numbering-plan",value:10}],[Fh.Internet,{name:"admin.smpp-provider.npi-internet",value:13}],[Fh.WAPClientId,{name:"admin.smpp-provider.npi-wap-client-id",value:18}]]);!function(t){t.SMSC="SMSC",t.IA5="IA5",t.OctetUnspecified2="OctetUnspecified2",t.Latin1="Latin1",t.OctetUnspecified4="OctetUnspecified4",t.JIS="JIS",t.Cyrillic="Cyrillic",t.LatinHebrew="LatinHebrew",t.UCS2UTF16="UCS2UTF16",t.PictogramEncoding="PictogramEncoding",t.MusicCodes="MusicCodes",t.ExtendedKanjiJIS="ExtendedKanjiJIS",t.KoreanGraphicCharacterSet="KoreanGraphicCharacterSet"}(Vh||(Vh={}));var Yh,Hh=new Map([[Vh.SMSC,{name:"admin.smpp-provider.scheme-smsc",value:0}],[Vh.IA5,{name:"admin.smpp-provider.scheme-ia5",value:1}],[Vh.OctetUnspecified2,{name:"admin.smpp-provider.scheme-octet-unspecified-2",value:2}],[Vh.Latin1,{name:"admin.smpp-provider.scheme-latin-1",value:3}],[Vh.OctetUnspecified4,{name:"admin.smpp-provider.scheme-octet-unspecified-4",value:4}],[Vh.JIS,{name:"admin.smpp-provider.scheme-jis",value:5}],[Vh.Cyrillic,{name:"admin.smpp-provider.scheme-cyrillic",value:6}],[Vh.LatinHebrew,{name:"admin.smpp-provider.scheme-latin-hebrew",value:7}],[Vh.UCS2UTF16,{name:"admin.smpp-provider.scheme-ucs-utf",value:8}],[Vh.PictogramEncoding,{name:"admin.smpp-provider.scheme-pictogram-encoding",value:9}],[Vh.MusicCodes,{name:"admin.smpp-provider.scheme-music-codes",value:10}],[Vh.ExtendedKanjiJIS,{name:"admin.smpp-provider.scheme-extended-kanji-jis",value:13}],[Vh.KoreanGraphicCharacterSet,{name:"admin.smpp-provider.scheme-korean-graphic-character-set",value:14}]]);!function(t){t.USERNAME_PASSWORD="USERNAME_PASSWORD",t.PRIVATE_KEY="PRIVATE_KEY"}(Yh||(Yh={}));var Bh,Kh=new Map([[Yh.USERNAME_PASSWORD,"admin.auth-method-username-password"],[Yh.PRIVATE_KEY,"admin.auth-method-private-key"]]);!function(t){t.DEFAULT="DEFAULT"}(Bh||(Bh={}));var Gh=function(){function t(t,e,n,i,r,a){this.utils=t,this.entityService=e,this.translate=n,this.stateControllerHolder=i,this.origEntityAliases=r,this.origFilters=a,this.entityAliasesChangedSubject=new nn,this.entityAliasesChanged=this.entityAliasesChangedSubject.asObservable(),this.filtersChangedSubject=new nn,this.filtersChanged=this.filtersChangedSubject.asObservable(),this.entityAliasResolvedSubject=new nn,this.entityAliasResolved=this.entityAliasResolvedSubject.asObservable(),this.resolvedAliases={},this.resolvedAliasesObservable={},this.resolvedAliasesToStateEntities={},this.entityAliases=Xr(this.origEntityAliases)||{},this.filters=Xr(this.origFilters)||{},this.userFilters={}}return t.prototype.updateEntityAliases=function(t){var e,n,i,r,a=[];try{for(var o=ve(Object.keys(t)),s=o.next();!s.done;s=o.next()){var u=t[d=s.value],c=this.entityAliases[d];$r(u,c)||(a.push(d),this.setAliasUnresolved(d))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}try{for(var l=ve(Object.keys(this.entityAliases)),p=l.next();!p.done;p=l.next()){var d;t[d=p.value]||(a.push(d),this.setAliasUnresolved(d))}}catch(t){i={error:t}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}this.entityAliases=Xr(t),a.length&&this.entityAliasesChangedSubject.next(a)},t.prototype.updateFilters=function(t){var e,n,i,r,a,o,s=[];try{for(var u=ve(Object.keys(t)),c=u.next();!c.done;c=u.next()){var l=t[m=c.value],p=this.filters[m];$r(l,p)||s.push(m)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}try{for(var d=ve(Object.keys(this.filters)),f=d.next();!f.done;f=d.next()){t[m=f.value]||s.push(m)}}catch(t){i={error:t}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}if(this.filters=Xr(t),s.length){try{for(var h=ve(s),y=h.next();!y.done;y=h.next()){var m=y.value;delete this.userFilters[m]}}catch(t){a={error:t}}finally{try{y&&!y.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}this.filtersChangedSubject.next(s)}},t.prototype.updateAliases=function(t){var e,n,i,r,a=this;if(!t){t=[];try{for(var o=ve(Object.keys(this.resolvedAliases)),s=o.next();!s.done;s=o.next()){var u=s.value;t.push(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}var c=[];try{for(var l=ve(t),p=l.next();!p.done;p=l.next()){u=p.value;this.setAliasUnresolved(u),c.push(this.getAliasInfo(u))}}catch(t){i={error:t}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}zn(c).subscribe((function(){a.entityAliasesChangedSubject.next(t)}))},t.prototype.dashboardStateChanged=function(){var t,e,n=[];try{for(var i=ve(Object.keys(this.resolvedAliasesToStateEntities)),r=i.next();!r.done;r=i.next()){var a=r.value,o=this.resolvedAliasesToStateEntities[a],s=this.stateControllerHolder().getEntityId(o.entityParamName),u=o.entityId;$r(s,u)||(n.push(a),this.setAliasUnresolved(a))}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}n.length&&this.entityAliasesChangedSubject.next(n)},t.prototype.setAliasUnresolved=function(t){delete this.resolvedAliases[t],delete this.resolvedAliasesObservable[t],delete this.resolvedAliasesToStateEntities[t]},t.prototype.getEntityAliases=function(){return this.entityAliases},t.prototype.getFilters=function(){return this.filters},t.prototype.getFilterInfo=function(t){return this.userFilters[t]?this.userFilters[t]:this.filters[t]},t.prototype.getKeyFilters=function(t){var e=this.getFilterInfo(t);return e?Hl(e):[]},t.prototype.getEntityAliasId=function(t){var e,n;try{for(var i=ve(Object.keys(this.entityAliases)),r=i.next();!r.done;r=i.next()){var a=r.value;if(this.entityAliases[a].alias===t)return a}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return null},t.prototype.getAliasInfo=function(t){var e=this,n=this.resolvedAliases[t];if(n)return Un(n);if(this.resolvedAliasesObservable[t])return this.resolvedAliasesObservable[t];var i=new sn;this.resolvedAliasesObservable[t]=i.asObservable();var r=this.entityAliases[t];if(!r){i.error(null);var a=this.resolvedAliasesObservable[t];return delete this.resolvedAliasesObservable[t],a}return this.entityService.resolveAlias(r,this.stateControllerHolder().getStateParams()).subscribe((function(n){e.resolvedAliases[t]=n,delete e.resolvedAliasesObservable[t],n.stateEntity&&(e.resolvedAliasesToStateEntities[t]={entityParamName:n.entityParamName,entityId:e.stateControllerHolder().getEntityId(n.entityParamName)}),e.entityAliasResolvedSubject.next(t),i.next(n),i.complete()}),(function(){i.error(null),delete e.resolvedAliasesObservable[t]})),(n=this.resolvedAliases[t])?Un(n):this.resolvedAliasesObservable[t]},t.prototype.resolveSingleEntityInfo=function(t){var e=this;return this.getAliasInfo(t).pipe(Gn((function(t){return t.resolveMultiple?t.entityFilter?e.entityService.findSingleEntityInfoByEntityFilter(t.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}):Un(null):Un(t.currentEntity)})))},t.prototype.resolveSingleEntityInfoForDeviceId=function(t){var e=Zl(t);return this.entityService.findSingleEntityInfoByEntityFilter(e,{ignoreLoading:!0,ignoreErrors:!0})},t.prototype.resolveSingleEntityInfoForTargetDevice=function(t){return eu(t)?t.type===Xs.entity?this.resolveSingleEntityInfo(t.entityAliasId):this.resolveSingleEntityInfoForDeviceId(t.deviceId):Un(null)},t.prototype.resolveDatasource=function(t,e){var n=this;void 0===e&&(e=!1);var i=Xr(t);return i.type===zs.entity||i.type===zs.device||i.type===zs.entityCount||i.type===zs.alarmCount?(i.filterId&&(i.keyFilters=this.getKeyFilters(i.filterId)),i.type===zs.alarmCount&&(i.alarmFilter=this.entityService.resolveAlarmFilter(i.alarmFilterConfig,!1)),i.type===zs.device?(i.type=zs.entity,i.entityFilter=Zl(i.deviceId),e?this.entityService.findSingleEntityInfoByEntityFilter(i.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}).pipe(xn((function(t){return t&&op(i,t,!0),i}))):Un(i)):i.entityAliasId?this.getAliasInfo(i.entityAliasId).pipe(Gn((function(t){return i.aliasName=t.alias,t.entityFilter?t.resolveMultiple?(i.entityFilter=t.entityFilter,e?n.entityService.findSingleEntityInfoByEntityFilter(t.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}).pipe(xn((function(t){return t&&op(i,t,!0),i}))):Un(i)):(t.currentEntity?op(i,t.currentEntity,!0):t.stateEntity&&(i.unresolvedStateEntity=!0,i.name="Unresolved",i.entityName="Unresolved"),Un(i)):(i.unresolvedStateEntity=!0,i.name="Unresolved",i.entityName="Unresolved",Un(i))}))):i.entityId&&!i.entityFilter?(i.entityFilter={singleEntity:{id:i.entityId,entityType:i.entityType},type:kc.singleEntity},Un(i)):(i.aliasName=i.entityName,i.name=i.entityName,Un(i))):Un(i)},t.prototype.resolveAlarmSource=function(t){return this.resolveDatasource(t).pipe(xn((function(t){var e;t.type===zs.function&&(e=t.name&&t.name.length?t.name:zs.function,t.name=e,t.aliasName=e,t.entityName=e);return t})))},t.prototype.resolveDatasources=function(t,e,n){var i=this;if(void 0===n&&(n=1024),!t||!t.length)return Un([]);var r=e?[t[0]]:t,a=new Array;return r.forEach((function(t){a.push(i.resolveDatasource(t))})),zn(a).pipe(xn((function(t){var r=0,a=0,o=0;return t.forEach((function(t){var s;t.type===zs.function||t.type===zs.entityCount||t.type===zs.alarmCount?(t.name&&t.name.length?s=t.name:(s=i.translate.instant($s.get(t.type)),t.type===zs.function?++r>1&&(s+=" "+r):t.type===zs.entityCount?++a>1&&(s+=" "+a):++o>1&&(s+=" "+o)),t.name=s,t.aliasName=s,t.entityName=s):e?t.pageLink=Xr($l):t.pageLink||(n=kr(n)&&n>0?n:1024,t.pageLink=Xl(n))})),t})))},t.prototype.getInstantAliasInfo=function(t){return this.resolvedAliases[t]},t.prototype.updateCurrentAliasEntity=function(t,e){var n=this.resolvedAliases[t];if(n){var i=n.currentEntity;$r(e,i)||(n.currentEntity=e,this.entityAliasesChangedSubject.next([t]))}},t.prototype.updateUserFilter=function(t){var e=this.userFilters[t.id];e||(e=this.filters[t.id]),e&&!$r(e,t)&&(this.userFilters[t.id]=t,this.filtersChangedSubject.next([t.id]))},t}(),qh=function(){function t(t){this.http=t}return t.prototype.saveAlarmComment=function(t,e,n){return this.http.post("/api/alarm/".concat(t,"/comment"),e,nr(n))},t.prototype.getAlarmComments=function(t,e,n){return this.http.get("/api/alarm/".concat(t,"/comment").concat(e.toQuery()),nr(n))},t.prototype.deleteAlarmComments=function(t,e,n){return this.http.delete("/api/alarm/".concat(t,"/comment/").concat(e),nr(n))},t=fe([ae(),he(0,se(Zi.HttpClient)),ye("design:paramtypes",[Ci])],t)}(),zh=Xd.get(Zi.AdminService),Qh=Xd.get(Zi.OAuth2Service),Jh=Xd.get(Zi.OtaPackageService),Xh=Xd.get(Zi.QueueService),$h=Xd.get(Zi.TenantProfileService),Zh=Xd.get(Zi.TenantService),ty=Xd.get(Zi.UserService),ey=Xd.get(Zi.AlarmService),ny=Xd.get(Zi.AssetService),iy=Xd.get(Zi.AttributeService),ry=Xd.get(Zi.AuditLogService),ay=Xd.get(Zi.CustomerService),oy=Xd.get(Zi.DeviceService),sy=Xd.get(Zi.EntityRelationService),uy=Xd.get(Zi.EntityViewService),cy=Xd.get(Zi.EntityService),ly=Xd.get(Zi.EventService),py=Xd.get(Zi.AuthService),dy=Xd.get(Zi.DeviceProfileService),fy=Xd.get(Zi.AssetProfileService),hy=Xd.get(Zi.DataSubscriptionService),yy=Xd.get(Zi.EntityGroupService),my=Xd.get(Zi.SchedulerService),gy=Xd.get(Zi.ImageService),vy=Xd.get(Zi.NotificationService),Ty=Xd.get(Zi.NotificationWebsocketService),Ey=Xd.get(ce.HttpClientInternal),by=Object.freeze({__proto__:null,AuthService:py,AdminService:zh,OAuth2Service:Qh,QueueService:Xh,OtaPackageService:Jh,TenantProfileService:$h,TenantService:Zh,UserService:ty,AlarmService:ey,AssetService:ny,AttributeService:iy,AuditLogService:ry,CustomerService:ay,DeviceService:oy,EntityRelationService:sy,EntityViewService:uy,EntityService:cy,EventService:ly,DataSubscriptionService:hy,DeviceProfileService:dy,AssetProfileService:fy,EntityGroupService:yy,SchedulerService:my,ImageService:gy,NotificationService:vy,NotificationWebsocketService:Ty,HttpService:Ey,AlarmId:Ma,AssetId:$d,AuditLogId:Zd,CustomerId:ka,DashboardId:tf,DeviceCredentialsId:ef,DeviceId:nf,DeviceProfileId:rf,entityIdEquals:function(t,e){return kr(t)&&kr(e)?t.id===e.id&&t.entityType===e.entityType:t===e},EntityViewId:of,EventId:sf,NULL_UUID:pr,NotificationId:uf,NotificationRequestId:cf,NotificationRuleId:lf,NotificationTargetId:pf,NotificationTemplateId:df,OtaPackageId:ff,RpcId:hf,RuleChainId:yf,RuleNodeId:mf,TenantId:Ca,TenantProfileId:gf,UserId:La,WidgetTypeId:vf,WidgetsBundleId:Tf,EdgeId:Ef,emptyPageData:Nc,MAX_SAFE_PAGE_SIZE:2147483647,defaultPageLinkSearchFunction:Oc,sortItems:Mc,PageLink:Lc,TimePageLink:Uc,get Direction(){return yc},sortOrderFromString:function(t){var e,n=yc.ASC;return t.startsWith("-")?(n=yc.DESC,e=t.substring(1)):e=t.startsWith("+")?t.substring(1):t,{property:e,direction:n}},NOT_SUPPORTED:$a,get DataKeyType(){return ja},get LatestTelemetry(){return Ya},get AttributeScope(){return Ha},get TimeseriesDeleteStrategy(){return Ba},toTelemetryType:function(t){return Ya[t]?Ya[t]:Ha[t]},telemetryTypeTranslations:eo,telemetryTypeTranslationsShort:no,isClientSideTelemetryType:io,timeseriesDeleteStrategyTranslations:ro,get DataSortOrder(){return Za},get WsCmdType(){return to},SubscriptionCmd:oo,AttributesSubscriptionCmd:so,get IntervalType(){return ao},TimeseriesSubscriptionCmd:co,GetHistoryCmd:lo,EntityDataCmd:po,EntityCountCmd:fo,AlarmDataCmd:ho,AlarmCountCmd:yo,UnreadCountSubCmd:mo,UnreadSubCmd:go,MarkAsReadCmd:vo,MarkAllAsReadCmd:To,EntityDataUnsubscribeCmd:Eo,EntityCountUnsubscribeCmd:bo,AlarmDataUnsubscribeCmd:So,AlarmCountUnsubscribeCmd:_o,UnsubscribeCmd:Ao,AuthCmd:wo,TelemetryPluginCmdsWrapper:Io,get CmdUpdateType(){return uo},isEntityDataUpdateMsg:Oo,isAlarmDataUpdateMsg:Co,isEntityCountUpdateMsg:Mo,isAlarmCountUpdateMsg:ko,isNotificationCountUpdateMsg:Lo,isNotificationsUpdateMsg:Uo,SubscriptionUpdate:Po,CmdUpdate:xo,DataUpdate:Fo,EntityDataUpdate:Wo,AlarmDataUpdate:Vo,EntityCountUpdate:jo,AlarmCountUpdate:Yo,NotificationCountUpdate:Ho,NotificationsUpdate:Bo,TelemetrySubscriber:Ko,NotificationSubscriber:Go,SECOND:zo,MINUTE:Qo,HOUR:Jo,DAY:Xo,WEEK:$o,AVG_MONTH:Zo,AVG_QUARTER:ts,YEAR:es,get TimewindowType(){return Do},get RealtimeWindowType(){return Ro},get HistoryWindowType(){return No},IntervalMath:is,get AggregationType(){return ns},aggregationTranslations:as,get QuickTimeInterval(){return rs},QuickTimeIntervalTranslationMap:us,IntervalTypeValuesMap:cs,forAllTimeInterval:function(){return{selectedTab:Do.HISTORY,history:{historyType:No.FOR_ALL_TIME}}},historyInterval:function(t){return{selectedTab:Do.HISTORY,history:{historyType:No.LAST_INTERVAL,timewindowMs:t}}},defaultTimewindow:ls,initModelFromDefaultTimewindow:function(t,e,n,i){var r=ls(i);return t&&(r.hideInterval=t.hideInterval,r.hideLastInterval=t.hideLastInterval,r.hideQuickInterval=t.hideQuickInterval,r.hideAggregation=t.hideAggregation,r.hideAggInterval=t.hideAggInterval,r.hideTimezone=t.hideTimezone,r.selectedTab=ps(t),Mr(t.realtime)&&(Mr(t.realtime.interval)&&(r.realtime.interval=t.realtime.interval),Or(t.realtime.realtimeType)?Mr(t.realtime.quickInterval)?r.realtime.realtimeType=Ro.INTERVAL:r.realtime.realtimeType=Ro.LAST_INTERVAL:r.realtime.realtimeType=t.realtime.realtimeType,Mr(t.realtime.quickInterval)&&(r.realtime.quickInterval=t.realtime.quickInterval),Mr(t.realtime.timewindowMs)&&(r.realtime.timewindowMs=t.realtime.timewindowMs)),Mr(t.history)&&(Mr(t.history.interval)&&(r.history.interval=t.history.interval),Or(t.history.historyType)?Mr(t.history.timewindowMs)?r.history.historyType=No.LAST_INTERVAL:Mr(t.history.quickInterval)?r.history.historyType=No.INTERVAL:r.history.historyType=No.FIXED:r.history.historyType=t.history.historyType,Mr(t.history.timewindowMs)&&(r.history.timewindowMs=t.history.timewindowMs),Mr(t.history.quickInterval)&&(r.history.quickInterval=t.history.quickInterval),Mr(t.history.fixedTimewindow)&&(Mr(t.history.fixedTimewindow.startTimeMs)&&(r.history.fixedTimewindow.startTimeMs=t.history.fixedTimewindow.startTimeMs),Mr(t.history.fixedTimewindow.endTimeMs)&&(r.history.fixedTimewindow.endTimeMs=t.history.fixedTimewindow.endTimeMs))),t.aggregation&&(t.aggregation.type&&(r.aggregation.type=t.aggregation.type),r.aggregation.limit=t.aggregation.limit||Math.floor(i.getMaxDatapointsLimit()/2)),r.timezone=t.timezone),e&&(r.realtime.realtimeType=Ro.INTERVAL),n&&(r.selectedTab=Do.HISTORY),r},toHistoryTimewindow:ds,timewindowTypeChanged:fs,getTimezone:hs,calculateTsOffset:ys,isHistoryTypeTimewindow:ms,getCurrentTime:gs,calculateIntervalStartTime:vs,calculateIntervalEndTime:Ts,calculateIntervalStartEndTime:Es,createSubscriptionTimewindow:bs,quickTimeIntervalPeriod:function(t){switch(t){case rs.CURRENT_HOUR:return Jo;case rs.YESTERDAY:case rs.DAY_BEFORE_YESTERDAY:case rs.THIS_DAY_LAST_WEEK:case rs.CURRENT_DAY:case rs.CURRENT_DAY_SO_FAR:return Xo;case rs.PREVIOUS_WEEK:case rs.PREVIOUS_WEEK_ISO:case rs.CURRENT_WEEK:case rs.CURRENT_WEEK_ISO:case rs.CURRENT_WEEK_SO_FAR:case rs.CURRENT_WEEK_ISO_SO_FAR:return $o;case rs.PREVIOUS_MONTH:case rs.CURRENT_MONTH:case rs.CURRENT_MONTH_SO_FAR:return 30*Xo;case rs.PREVIOUS_QUARTER:case rs.CURRENT_QUARTER:case rs.CURRENT_QUARTER_SO_FAR:return 30*Xo*3;case rs.PREVIOUS_HALF_YEAR:case rs.CURRENT_HALF_YEAR:case rs.CURRENT_HALF_YEAR_SO_FAR:return 30*Xo*6;case rs.PREVIOUS_YEAR:case rs.CURRENT_YEAR:case rs.CURRENT_YEAR_SO_FAR:return es}},calculateIntervalComparisonStartTime:Ss,calculateIntervalComparisonEndTime:_s,createTimewindowForComparison:As,cloneSelectedTimewindow:function(t){var e={};return e.hideInterval=t.hideInterval||!1,e.hideLastInterval=t.hideLastInterval||!1,e.hideQuickInterval=t.hideQuickInterval||!1,e.hideAggregation=t.hideAggregation||!1,e.hideAggInterval=t.hideAggInterval||!1,e.hideTimezone=t.hideTimezone||!1,Mr(t.selectedTab)&&(e.selectedTab=t.selectedTab,t.selectedTab===Do.REALTIME?e.realtime=Xr(t.realtime):t.selectedTab===Do.HISTORY&&(e.history=Xr(t.history))),e.aggregation=Xr(t.aggregation),e.timezone=t.timezone,e},defaultTimeIntervals:ws,get TimeUnit(){return os},get TimeUnitMilli(){return ss},timeUnitTranslationMap:Ds,getTimezones:Os,getDefaultTimezone:Cs,getTimezoneInfo:Ms,getDefaultTimezoneInfo:function(){var t=Cs();return Ms(t)},getTime:ks,calculateIntervalsCount:Ls,startIntervalDate:Us,endIntervalDate:Ps,calculateAggIntervalWithSubscriptionTimeWindow:xs,calculateAggIntervalWithWidgetTimeWindow:function(t,e){return Fs(t.minTime-t.tsOffset,t.maxTime,t.interval,t.tsOffset,t.timezone,e)},calculateInterval:Fs,getCurrentTimeForComparison:function(t,e){return gs(e).subtract(1,t)},get AlarmsMode(){return Da},get AlarmSeverity(){return Ra},get AlarmStatus(){return Na},get AlarmSearchStatus(){return Oa},alarmSeverityTranslations:xa,alarmStatusTranslations:Fa,alarmSearchStatusTranslations:Wa,alarmSeverityColors:Va,get AlarmCommentType(){return Ua},get AlarmAssigneeOption(){return Pa},simulatedAlarm:Ka,alarmFields:Ga,AlarmQuery:qa,AlarmQueryV2:za,get AliasFilterType(){return kc},edgeAliasFilterTypes:Bc,aliasFilterTypeTranslationMap:Kc,get ApiUsageStateValue(){return af},ApiUsageStateValueTranslationMap:Sf,get ApiFeature(){return bf},ApiFeatureTranslationMap:If,get AuditLogMode(){return _f},get ActionType(){return Af},get ActionStatus(){return wf},actionTypeTranslations:Nf,actionStatusTranslations:Of,get Authority(){return va},sortEntitiesByIds:Tp,hasIdEquals:function(t,e){return kr(t)&&kr(e)?t.id===e.id:t===e},Constants:gr,serverErrorCodesTranslations:vr,MediaBreakpoints:Tr,resolveBreakpoint:function(t){return Tr[t]?Tr[t]:t},helpBaseUrl:Er,docPlatformPrefix:br,HelpLinks:Sr,get ValueType(){return dr},get DataType(){return fr},DataTypeTranslationMap:Ar,valueTypesMap:wr,get ContentType(){return _r},contentTypesMap:Ir,hidePageSizePixelValue:550,customTranslationsPrefix:Dr,i18nPrefix:Rr,get PowerMode(){return xc},get DeviceProfileType(){return Fc},get DeviceTransportType(){return Wc},get BasicTransportType(){return Vc},get TransportPayloadType(){return jc},get CoapTransportDeviceType(){return Yc},get DeviceProvisionType(){return Hc},deviceProfileTypeTranslationMap:qc,deviceProfileTypeConfigurationInfoMap:zc,deviceTransportTypeTranslationMap:Qc,deviceProvisionTypeTranslationMap:Jc,deviceTransportTypeHintMap:Xc,transportPayloadTypeTranslationMap:$c,defaultTelemetrySchema:'syntax ="proto3";\npackage telemetry;\n\nmessage SensorDataReading {\n\n  optional double temperature = 1;\n  optional double humidity = 2;\n  InnerObject innerObject = 3;\n\n  message InnerObject {\n    optional string key1 = 1;\n    optional bool key2 = 2;\n    optional double key3 = 3;\n    optional int32 key4 = 4;\n    optional string key5 = 5;\n  }\n}\n',defaultAttributesSchema:'syntax ="proto3";\npackage attributes;\n\nmessage SensorConfiguration {\n  optional string firmwareVersion = 1;\n  optional string serialNumber = 2;\n}',defaultRpcRequestSchema:'syntax ="proto3";\npackage rpc;\n\nmessage RpcRequestMsg {\n  optional string method = 1;\n  optional int32 requestId = 2;\n  optional string params = 3;\n}',defaultRpcResponseSchema:'syntax ="proto3";\npackage rpc;\n\nmessage RpcResponseMsg {\n  optional string payload = 1;\n}',coapDeviceTypeTranslationMap:Zc,deviceTransportTypeConfigurationInfoMap:tl,get SnmpSpecType(){return Gc},SnmpSpecTypeTranslationMap:nl,createDeviceProfileConfiguration:function(t){var e=null;if(t&&t===Fc.DEFAULT){e=de(de({},{}),{type:Fc.DEFAULT})}return e},createDeviceConfiguration:function(t){var e=null;if(t&&t===Fc.DEFAULT){e=de(de({},{}),{type:Fc.DEFAULT})}return e},createDeviceProfileTransportConfiguration:function(t){var e=null;if(t)switch(t){case Wc.DEFAULT:e=de(de({},{}),{type:Wc.DEFAULT});break;case Wc.MQTT:var n={deviceTelemetryTopic:"v1/devices/me/telemetry",deviceAttributesTopic:"v1/devices/me/attributes",deviceAttributesSubscribeTopic:"v1/devices/me/attributes",sparkplug:!1,sparkplugAttributesMetricNames:["Node Control/*","Device Control/*","Properties/*"],sendAckOnValidationException:!1,transportPayloadTypeConfiguration:{transportPayloadType:jc.JSON,enableCompatibilityWithJsonPayloadFormat:!1,useJsonPayloadFormatForDefaultDownlinkTopics:!1}};e=de(de({},n),{type:Wc.MQTT});break;case Wc.COAP:var i={coapDeviceTypeConfiguration:{coapDeviceType:Yc.DEFAULT,transportPayloadTypeConfiguration:{transportPayloadType:jc.JSON}},clientSettings:{powerMode:xc.DRX}};e=de(de({},i),{type:Wc.COAP});break;case Wc.SNMP:e=de(de({},{timeoutMs:500,retries:0,communicationConfigs:null}),{type:Wc.SNMP})}return e},createDeviceTransportConfiguration:function(t){var e=null;if(t)switch(t){case Wc.DEFAULT:e=de(de({},{}),{type:Wc.DEFAULT});break;case Wc.MQTT:e=de(de({},{}),{type:Wc.MQTT});break;case Wc.COAP:e=de(de({},{powerMode:null}),{type:Wc.COAP});break;case Wc.LWM2M:e=de(de({},{powerMode:null}),{type:Wc.LWM2M});break;case Wc.SNMP:var n={host:"localhost",port:161,protocolVersion:al.V2C,community:"public"};e=de(de({},n),{type:Wc.SNMP})}return e},get AlarmConditionType(){return el},AlarmConditionTypeTranslationMap:rl,get AlarmScheduleType(){return il},AlarmScheduleTypeTranslationMap:sl,alarmRuleValidator:function(t){var e=t.value;return ul(e)?null:{alarmRule:!0}},deviceProfileAlarmValidator:function(t){var e,n,i=t.value;if(i&&i.id&&i.alarmType&&i.createRules){var r=Object.keys(i.createRules);if(r.length){var a=!0;try{for(var o=ve(r),s=o.next();!s.done;s=o.next()){var u=s.value,c=i.createRules[u];if(!ul(c)){a=!1;break}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}if(a&&i.clearRule&&!ul(i.clearRule)&&(a=!1),a)return null}}return{deviceProfileAlarm:!0}},get SnmpDeviceProtocolVersion(){return al},get SnmpAuthenticationProtocol(){return ol},SnmpAuthenticationProtocolTranslationMap:ll,get SnmpPrivacyProtocol(){return cl},SnmpPrivacyProtocolTranslationMap:dl,DeviceInfoQuery:fl,get DeviceCredentialsType(){return pl},credentialTypeNames:yl,credentialTypesByTransportType:ml,getDeviceCredentialMQTTDefault:function(){return{clientId:"",userName:"",password:""}},get ClaimResponse(){return hl},dayOfWeekTranslations:vl,timeOfDayToUTCTimestamp:function(t){return"number"==typeof t||null===t?0:_a.utc([1970,0,1,t.getHours(),t.getMinutes(),t.getSeconds(),0]).valueOf()},utcTimestampToTimeOfDay:function(t){return void 0===t&&(t=0),new Date(t+60*new Date(t).getTimezoneOffset()*1e3)},getAlarmScheduleRangeText:function(t,e){var n=Tl(t),i=Tl(e);return n<i?'<span><span class="nowrap">'.concat(n.format("hh:mm A"),'</span> – <span class="nowrap">').concat(i.format("hh:mm A"),"</span></span>"):0===n.valueOf()&&0===i.valueOf()||n.isSame(_a([1970,0]))&&i.isSame(_a([1970,0]))?'<span><span class="nowrap">12:00 AM</span> – <span class="nowrap">12:00 PM</span></span>':'<span><span class="nowrap">12:00 AM</span> – <span class="nowrap">'.concat(i.format("hh:mm A"),"</span>")+' and <span class="nowrap">'.concat(n.format("hh:mm A"),'</span> – <span class="nowrap">12:00 PM</span></span>')},get EdgeEventType(){return ep},get EdgeEventActionType(){return np},get EdgeEventStatus(){return ip},edgeEventTypeTranslations:up,edgeEventActionTypeTranslations:cp,bodyContentEdgeEventActionTypes:lp,edgeEventStatusColor:pp,get EdgeInstructionsMethod(){return sp},edgeVersionAttributeKey:"edgeVersion",get EdgeConnectionEvent(){return dp},EdgeConnectionEventTranslationMap:hp,entityFields:Qa,get EntityType(){return ur},get AliasEntityType(){return cr},entityTypeTranslations:hr,entityTypeResources:yr,baseDetailsPageByEntityType:mr,get EventType(){return Df},get DebugEventType(){return Rf},eventTypeTranslations:Mf,get LimitedApi(){return Cf},LimitedApiTranslationMap:Lf,materialColorPalette:Qu,materialColors:Ju,get ComponentLifecycleEvent(){return kf},ComponentLifecycleEventTranslationMap:Pf,get AlarmAction(){return Uf},AlarmActionTranslationMap:Ff,get AlarmAssignmentAction(){return xf},AlarmAssignmentActionTranslationMap:Vf,get DeviceEvent(){return Wf},DeviceEventTranslationMap:Yf,get NotificationTargetType(){return jf},NotificationTargetTypeTranslationMap:Kf,get NotificationStatus(){return Hf},get NotificationDeliveryMethod(){return Bf},NotificationDeliveryMethodInfoMap:qf,get NotificationRequestStatus(){return Gf},NotificationRequestStatusTranslateMap:Qf,get SlackChanelType(){return zf},SlackChanelTypesTranslateMap:Xf,get NotificationTargetConfigType(){return Jf},NotificationTargetConfigTypeInfoMap:Zf,get NotificationType(){return $f},NotificationTypeIcons:eh,AlarmSeverityNotificationColors:nh,get ActionButtonLinkType(){return th},ActionButtonLinkTypeTranslateMap:rh,NotificationTemplateTypeTranslateMap:ah,get TriggerType(){return ih},TriggerTypeTranslationMap:sh,CmdWrapper:Ja,WsSubscriber:Xa,get DomainSchema(){return oh},domainSchemaTranslations:ph,get MapperConfigType(){return uh},get TenantNameStrategy(){return ch},get PlatformType(){return lh},platformTypeTranslations:hh,get ClientAuthenticationMethod(){return dh},get ChecksumAlgorithm(){return fh},ChecksumAlgorithmTranslationMap:mh,get OtaUpdateType(){return yh},OtaUpdateTypeTranslationMap:Th,OtaUpdateTranslation:Eh,get ServiceType(){return gh},get QueueSubmitStrategyTypes(){return vh},QueueSubmitStrategyTypesMap:Sh,get QueueProcessingStrategyTypes(){return bh},QueueProcessingStrategyTypesMap:wh,CONTAINS_TYPE:Ih,MANAGES_TYPE:Dh,RelationTypes:Rh,get RelationTypeGroup(){return _h},get EntitySearchDirection(){return Ah},entitySearchDirectionTranslations:Ch,directionTypeTranslations:Mh,get ResourceType(){return Ad},ResourceTypeMIMETypes:Dd,ResourceTypeExtension:Rd,ResourceTypeTranslationMap:Nd,toImageDeleteResult:function(t,e){var n,i,r;if(e){var a={image:t,success:!1,error:e};if(400===(null==e?void 0:e.status)&&!1===(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.success)&&(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.references)){var o=null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.references;a.imageIsReferencedError=!0,a.references=o}return a}return{image:t,success:!0}},imageResourceType:Od,TB_IMAGE_PREFIX:Cd,IMAGES_URL_REGEXP:Md,IMAGES_URL_PREFIX:kd,PUBLIC_IMAGES_URL_PREFIX:"/api/images/public",IMAGE_BASE64_URL_PREFIX:Ld,removeTbImagePrefix:Ud,removeTbImagePrefixFromUrls:function(t){return t?t.map((function(t){return Ud(t)})):[]},prependTbImagePrefix:Pd,prependTbImagePrefixToUrls:function(t){return t?t.map((function(t){return Pd(t)})):[]},isImageResourceUrl:xd,extractParamsFromImageResourceUrl:function(t){var e=t.match(Md);return{type:e[1],key:e[2]}},isBase64DataImageUrl:function(t){return t&&t.startsWith(Ld)},NO_IMAGE_DATA_URI:Fd,get RpcStatus(){return Np},rpcStatusColors:qp,rpcStatusTranslation:zp,smtpPortPattern:/^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/,get SmtpProtocol(){return Nh},get MailServerOauth2Provider(){return Oh},phoneNumberPattern:/^\+[1-9]\d{1,14}$/,phoneNumberPatternTwilio:/^\+[1-9]\d{1,14}$|^(MG|PN).*$/,get SmsProviderType(){return kh},smsProviderTypeTranslationMap:Uh,smppVersions:[{value:3.3},{value:3.4}],get BindTypes(){return Lh},bindTypesTranslationMap:xh,get TypeOfNumber(){return Ph},typeOfNumberMap:Wh,get NumberingPlanIdentification(){return Fh},numberingPlanIdentificationMap:jh,get CodingSchemes(){return Vh},codingSchemesMap:Hh,smsProviderConfigurationValidator:function(t){return function(e){var n=e.value,i=null;if(t){var r=!1;if(n&&n.type)switch(n.type){case kh.AWS_SNS:var a=n;r=Ur(a.accessKeyId)&&Ur(a.secretAccessKey)&&Ur(a.region);break;case kh.TWILIO:var o=n;r=Ur(o.numberFrom)&&Ur(o.accountSid)&&Ur(o.accountToken);break;case kh.SMPP:var s=n;r=Ur(s.host)&&xr(s.port)&&Ur(s.systemId)&&Ur(s.password)}r||(i={invalid:!0})}return i}},createSmsProviderConfiguration:function(t){var e;if(t)switch(t){case kh.AWS_SNS:e=de(de({},{accessKeyId:"",secretAccessKey:"",region:"us-east-1"}),{type:kh.AWS_SNS});break;case kh.TWILIO:e=de(de({},{numberFrom:"",accountSid:"",accountToken:""}),{type:kh.TWILIO});break;case kh.SMPP:e=de(de({},{protocolVersion:3.3,host:"",port:null,systemId:"",password:"",systemType:"",bindType:"TX",serviceType:"",sourceAddress:"",sourceTon:5,sourceNpi:0,destinationTon:5,destinationNpi:0,addressRange:"",codingScheme:0}),{type:kh.SMPP})}return e},get RepositoryAuthMethod(){return Yh},repositoryAuthMethodTranslationMap:Kh,get TenantProfileType(){return Bh},createTenantProfileConfiguration:function(t){var e=null;if(t&&t===Bh.DEFAULT){e=de(de({},{maxDevices:0,maxAssets:0,maxCustomers:0,maxUsers:0,maxDashboards:0,maxRuleChains:0,maxResourcesInBytes:0,maxOtaPackagesInBytes:0,maxResourceSize:0,maxTransportMessages:0,maxTransportDataPoints:0,maxREExecutions:0,maxJSExecutions:0,maxTbelExecutions:0,maxDPStorageDays:0,maxRuleNodeExecutionsPerMessage:0,maxEmails:0,maxSms:0,smsEnabled:!0,maxCreatedAlarms:0,tenantServerRestLimitsConfiguration:"",customerServerRestLimitsConfiguration:"",maxWsSessionsPerTenant:0,maxWsSessionsPerCustomer:0,maxWsSessionsPerRegularUser:0,maxWsSessionsPerPublicUser:0,wsMsgQueueLimitPerSession:0,maxWsSubscriptionsPerTenant:0,maxWsSubscriptionsPerCustomer:0,maxWsSubscriptionsPerRegularUser:0,maxWsSubscriptionsPerPublicUser:0,wsUpdatesPerSessionRateLimit:"",cassandraQueryTenantRateLimitsConfiguration:"",defaultStorageTtlDays:0,alarmsTtlDays:0,rpcTtlDays:0,queueStatsTtlDays:0,ruleEngineExceptionsTtlDays:0}),{type:Bh.DEFAULT})}return e},get widgetType(){return Is},widgetTypesData:js,widgetActionSources:{headerButton:{name:"widget-action.header-button",value:"headerButton",multiple:!0,hasShowCondition:!0}},fullWidgetTypeFqn:function(t){var e;return(t.tenantId&&(null===(e=t.tenantId)||void 0===e?void 0:e.id)!==pr?"tenant":"system")+"."+t.fqn},widgetTypeFqn:function(t){if(Ur(t)){var e=t.split(".");if(e.length>1){var n=e[0];if(["system","tenant"].includes(n))return t.substring(n.length+1)}}return t},isValidWidgetFullFqn:function(t){if(Ur(t)){var e=t.split(".");if(e.length>1){var n=e[0];return["system","tenant"].includes(n)}}return!1},get DeprecatedFilter(){return Ws},get LegendDirection(){return Vs},legendDirectionTranslationMap:Hs,get LegendPosition(){return Ys},legendPositions:Ks,legendPositionTranslationMap:Gs,defaultLegendConfig:function(t){return{direction:Vs.column,position:Ys.bottom,sortDataKeys:!1,showMin:!1,showMax:!1,showAvg:t===Is.timeseries,showTotal:!1,showLatest:!1}},get ComparisonResultType(){return Bs},comparisonResultTypeTranslationMap:Qs,dataKeyAggregationTypeHintTranslationMap:Js,get DataKeyConfigMode(){return qs},get DatasourceType(){return zs},datasourceTypeTranslationMap:$s,datasourceValid:function(t){var e=null==t?void 0:t.type;if(e)switch(e){case zs.function:case zs.alarmCount:return!0;case zs.device:return!!t.deviceId;case zs.entity:case zs.entityCount:return!!t.entityAliasId}return!1},get TargetDeviceType(){return Xs},targetDeviceValid:eu,datasourcesHasAggregation:nu,datasourcesHasOnlyComparisonAggregation:function(t){if(!nu(t))return!1;if(t){var e=t.find((function(t){var e=t.dataKeys&&t.dataKeys.find((function(t){return(null==t?void 0:t.type)===ja.timeseries&&(null==t?void 0:t.aggregationType)&&t.aggregationType!==ns.NONE&&!t.comparisonEnabled}));return!!e}));if(e)return!1}return!0},get WidgetActionType(){return Zs},get WidgetMobileActionType(){return tu},widgetActionTypes:ru,widgetActionTypeTranslationMap:au,widgetMobileActionTypeTranslationMap:ou,actionDescriptorToAction:function(t){var e=de({},t);return delete e.id,delete e.name,delete e.icon,delete e.displayName,delete e.useShowWidgetActionFunction,delete e.showWidgetActionFunction,delete e.columnIndex,e},defaultWidgetAction:function(t){return void 0===t&&(t=!0),{type:Zs.updateDashboardState,targetDashboardStateId:null,openRightLayout:!1,setEntityId:t,stateEntityParamName:null}},isDataKeySettingsWithComparison:su,get WidgetConfigMode(){return iu},get EntityKeyType(){return gl},entityKeyTypeTranslationMap:bl,entityKeyTypeToDataKeyType:Sl,dataKeyTypeToEntityKeyType:_l,dataKeyToEntityKey:Al,get EntityKeyValueType(){return El},entityKeyValueTypesMap:Dl,entityKeyValueTypeToFilterPredicateType:Rl,createDefaultFilterPredicateInfo:function(t,e){return{keyFilterPredicate:Ol(t,e),userInfo:{editable:!0,label:"",autogeneratedLabel:!0,order:0}}},createDefaultFilterPredicateUserInfo:Nl,createDefaultFilterPredicate:Ol,getDynamicSourcesForAllowUser:function(t){var e=[xl.CURRENT_TENANT,xl.CURRENT_CUSTOMER];return t?e.push(xl.CURRENT_USER):e.push(xl.CURRENT_DEVICE),e},get FilterPredicateType(){return wl},get StringOperation(){return Il},stringOperationTranslationMap:Ml,get NumericOperation(){return Cl},numericOperationTranslationMap:Ll,get BooleanOperation(){return kl},booleanOperationTranslationMap:Pl,get ComplexOperation(){return Ul},complexOperationTranslationMap:Fl,get DynamicValueSourceType(){return xl},dynamicValueSourceTypeTranslationMap:Wl,inheritModeForDynamicValueSourceType:Vl,keyFiltersToText:function(t,e,n){var i,r=n.map((function(i){return jl(t,e,i,n.length>1?Ul.AND:void 0)}));if(r.length>1){var a=t.instant("filter.operation.and");i=r.join(' <span class="tb-filter-complex-operation">'+a+"</span> ")}else i=r[0];return i},keyFilterToText:jl,keyFilterPredicateToText:Yl,keyFilterInfosToKeyFilters:function(t){var e,n,i,r;if(!t)return[];var a=[];try{for(var o=ve(t),s=o.next();!s.done;s=o.next()){var u=s.value,c=u.key;try{for(var l=(i=void 0,ve(u.predicates)),p=l.next();!p.done;p=l.next()){var d=p.value,f={key:c,valueType:u.valueType,value:u.value,predicate:Bl(d)};a.push(f)}}catch(t){i={error:t}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return a},keyFiltersToKeyFilterInfos:function(t){var e,n,i=[],r={};if(t)try{for(var a=ve(t),o=a.next();!o.done;o=a.next()){var s=o.value,u=s.key,c=u.key+u.type+s.valueType,l=r[c];l||(l={key:u,valueType:s.valueType,value:s.value,predicates:[]},r[c]=l,i.push(l)),s.predicate&&l.predicates.push(Kl(s.predicate))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i},filterInfoToKeyFilters:Hl,keyFilterPredicateInfoToKeyFilterPredicate:Bl,keyFilterPredicateToKeyFilterPredicateInfo:Kl,isFilterEditable:function(t){return!!t.editable&&t.keyFilters.some((function(t){return Gl(t)}))},isKeyFilterInfoEditable:Gl,isPredicateInfoEditable:ql,filterToUserFilterInfoList:function(t,e){var n=t.keyFilters.map((function(t){return zl(t,e)})),i=[].concat.apply([],n);return i=i.sort((function(t,e){return(Mr(t.info.userInfo.order)?t.info.userInfo.order:0)-(Mr(e.info.userInfo.order)?e.info.userInfo.order:0)}))},keyFilterInfoToUserFilterInfoList:zl,predicateInfoToUserFilterInfoList:Ql,generateUserFilterValueLabel:Jl,alarmFilterConfigEquals:function(t,e){return t===e||(!(!Cr(t)&&!Zr(t)||!Cr(e)&&!Zr(e))||!(!kr(t)||!kr(e))&&(!!ea(t.typeList,e.typeList)&&(!!ea(t.statusList,e.statusList)&&(!!ea(t.severityList,e.severityList)&&(!!ta(t.assigneeId,e.assigneeId)&&(!!ta(t.searchPropagatedAlarms,e.searchPropagatedAlarms)&&!!ta(t.assignedToCurrentUser,e.assignedToCurrentUser)))))))},entityDataPageLinkSortDirection:function(t){return t.sortOrder?(t.sortOrder.direction+"").toLowerCase():""},createDefaultEntityDataPageLink:Xl,singleEntityDataPageLink:$l,singleEntityFilterFromDeviceId:Zl,entityPageDataChanged:tp,entityInfoFields:rp,entityDataToEntityInfo:ap,updateDatasourceFromEntityInfo:op,AliasController:Gh,DataAggregator:Hp,EntityDataService:Kp,EntityDataSubscription:Bp,AlarmDataSubscription:Mp,AlarmDataService:kp,WidgetSubscriptionContext:Gp,WidgetSubscription:Xp,AlarmCommentService:qh,defaultHttpOptionsFromConfig:nr,defaultHttpOptions:ir,defaultHttpUploadOptions:rr,ResourceService:bp,APP_PREFIX:vc,LocalStorageService:Tc,RafService:ed,TimeService:td,UtilsService:gc,TelemetryWebsocketService:Cp,WebsocketService:Op,onParentScrollOrWindowResize:function(t){var e=new nn,n=function(t){if(!(t instanceof HTMLElement||t instanceof SVGElement))return[];var e=[];qr(t,[]).forEach((function(t){(function(t){return t instanceof Element&&Gr.test(function(t){return zr(t,"overflow")+zr(t,"overflow-y")+zr(t,"overflow-x")}(t))})(t)&&e.push(t)})),document.scrollingElement?e.push(document.scrollingElement):document.documentElement&&e.push(document.documentElement);return e}(t),i={handleEvent:function(t){e.next(t)}};return n.forEach((function(t){t.addEventListener("scroll",i)})),window.addEventListener("resize",i),e.pipe(oi((function(){n.forEach((function(t){t.removeEventListener("scroll",i)})),window.removeEventListener("resize",i)})),function(t){void 0===t&&(t={});var e=t.connector,n=void 0===e?function(){return new nn}:e,i=t.resetOnError,r=void 0===i||i,a=t.resetOnComplete,o=void 0===a||a,s=t.resetOnRefCountZero,u=void 0===s||s;return function(t){var e,i,a,s=0,c=!1,l=!1,p=function(){null==i||i.unsubscribe(),i=void 0},d=function(){p(),e=a=void 0,c=l=!1},f=function(){var t=e;d(),null==t||t.unsubscribe()};return Je((function(t,h){s++,l||c||p();var y=a=null!=a?a:n();h.add((function(){0!=--s||l||c||(i=ui(f,u))})),y.subscribe(h),!e&&s>0&&(e=new Ye({next:function(t){return y.next(t)},error:function(t){l=!0,p(),i=ui(d,r,t),y.error(t)},complete:function(){c=!0,p(),i=ui(d,o),y.complete()}}),Dn(t).subscribe(e))}))(t)}}())},isLocalUrl:function(t){var e=document.createElement("a");e.href=t;var n=e.hostname;return"localhost"===n||"127.0.0.1"===n},animatedScroll:function(t,e,n){var i=0,r=t.scrollTop,a=e,o=n||0,s=a-r,u=function(){0===o?t.scrollTop=a:(i+=20,t.scrollTop=function(t,e,n,i){if(t/=i/2,t<1)return n/2*t*t+e;return t--,-n/2*(t*(t-2)-1)+e}(i,r,s,o),i<o&&setTimeout(u,20))};u()},isUndefined:Or,isUndefinedOrNull:Cr,isDefined:Mr,isDefinedAndNotNull:kr,isEmptyStr:Lr,isNotEmptyStr:Ur,isFunction:function(t){return"function"==typeof t},isObject:Pr,isNumber:xr,isNumeric:Fr,isBoolean:function(t){return"boolean"==typeof t},isString:Wr,isLiteralObject:function(t){return!!t&&t.constructor===Object},formatValue:Vr,formatNumberValue:function(t,e){if(kr(t)&&Fr(t)){var n=Number(t);return kr(e)&&(n=n.toFixed(e)),Number(n)}},objectValues:function(t){return Object.keys(t).map((function(e){return t[e]}))},deleteNullProperties:function t(e){Or(e)||null==e||Object.keys(e).forEach((function(n){null===e[n]||Or(e[n])?delete e[n]:Pr(e[n])?t(e[n]):e[n]instanceof Array&&e[n].forEach((function(e){t(e)}))}))},objToBase64:jr,base64toString:Yr,objToBase64URI:Hr,base64toObj:Br,stringToBase64:function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})))},blobToBase64:Kr,hashCode:Qr,objectHashCode:Jr,deepClone:Xr,extractType:function(t,e){return lr.pick(t,e)},isEqual:$r,isEmpty:Zr,unset:function(t,e){return lr.unset(t,e)},setByPath:function(t,e,n){return lr.set(t,e,n)},isEqualIgnoreUndefined:ta,isArraysEqualIgnoreUndefined:ea,mergeDeep:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return lr.merge.apply(lr,Ee([t],Te(e),!1))},guid:na,snakeCase:function(t,e){return e=e||"_",t.replace(ia,(function(t,n){return(n?e:"")+t.toLowerCase()}))},getDescendantProp:ra,insertVariable:function(t,e,n){for(var i=t,r=Nr.exec(t);null!==r;){var a=r[0];r[1]===e&&(i=i.replace(a,n)),r=Nr.exec(t)}return i},createLabelFromDatasource:aa,createLabelFromSubscriptionEntityInfo:function(t,e){var n=e;if(!t)return n;for(var i=Nr.exec(e);null!==i;){var r=i[0],a=i[1];"dsName"===a||"entityName"===a||"deviceName"===a?n=n.replace(r,t.entityName):"entityLabel"===a?n=n.replace(r,t.entityLabel||t.entityName):"aliasName"===a?n=n.replace(r,t.entityName):"entityDescription"===a&&(n=n.replace(r,t.entityDescription)),i=Nr.exec(e)}return n},hasDatasourceLabelsVariables:function(t){return null!==Nr.test(t)},formattedDataFormDatasourceData:oa,formattedDataArrayFromDatasourceData:function(t){return lr(t).groupBy((function(t){return t.datasource.entityName})).values().value().map((function(t,e){var n={};return t.filter((function(t){return t.data.length})).forEach((function(t){t.data.forEach((function(i){var r=i[0],a=i[1],o=n[r];o||((o=sa(t.datasource,e)).time=r,n[r]=o);o[t.dataKey.label]=a,o[t.dataKey.label+"|ts"]=r,"type"===t.dataKey.label.toLowerCase()&&(o.deviceType=a)}))})),lr.values(n)}))},formattedDataFromDatasource:sa,flatFormattedData:ua,flatDataWithoutOverride:function(t){var e={};return t.forEach((function(t){Object.keys(t).forEach((function(n){kr(e[n])&&!Lr(e[n])||(e[n]=t[n])}))})),e},mergeFormattedData:function(t,e){var n=t.concat(e);return lr(n).groupBy((function(t){return t.$datasource})).values().value().map((function(t,e){var n=t[0];if(t.length>1){var i=t[1];n=de(de({},n),i)}return n}))},processDataPattern:ca,fillDataPattern:la,createLabelFromPattern:pa,parseFunction:function(t,e){void 0===e&&(e=["def"]);var n=null;if(null==t?void 0:t.length)try{n=new(Function.bind.apply(Function,Ee(Ee([void 0],Te(e),!1),[t],!1)))}catch(t){n=null}return n},safeExecute:function(t,e){void 0===e&&(e=[]);var n=null;if(t&&"function"==typeof t)try{n=t.apply(void 0,Ee([],Te(e),!1))}catch(t){console.log("error in external function:",t),n=null}return n},padValue:da,baseUrl:fa,sortObjectKeys:function(t){return Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{})},deepTrim:function t(e){return xr(e)||Or(e)||Wr(e)||null===e||e instanceof File?e:Object.keys(e).reduce((function(n,i){return Wr(e[i])?n[i]=e[i].trim():Pr(e[i])?n[i]=t(e[i]):n[i]=e[i],n}),Array.isArray(e)?[]:{})},generateSecret:ha,validateEntityId:function(t){return kr(null==t?void 0:t.id)&&t.id!==pr&&kr(null==t?void 0:t.entityType)},isMobileApp:function(){return Mr(window.flutter_inappwebview)},randomAlphanumeric:function(t){for(var e="",n=0;n<t;n++)e+=ya.charAt(Math.floor(62*Math.random()));return e},getEntityDetailsPageURL:ma,parseHttpErrorMessage:ga,genNextLabel:function(t,e){var n=t,i=1,r=!1;if(e)do{r=!1,e.forEach((function(e){e&&(e.dataKeys&&e.dataKeys.forEach((function(e){(null==e?void 0:e.label)===n&&(i++,n=t+" "+i,r=!0)})),e.latestDataKeys&&e.latestDataKeys.forEach((function(e){(null==e?void 0:e.label)===n&&(i++,n=t+" "+i,r=!0)})))}))}while(r);return n},getOS:function(){var t=window.navigator.userAgent.toLowerCase(),e=null;return/(macintosh|macintel|macppc|mac68k|macos|mac_powerpc)/i.test(t)?e="macos":/(iphone|ipad|ipod|darwin|ios)/i.test(t)?e="ios":/(win32|win64|windows|wince)/i.test(t)?e="windows":/android/.test(t)?e="android":/linux/.test(t)&&(e="linux"),e},camelCase:function(t){return lr.camelCase(t)},convertKeysToCamelCase:function(t){return lr.mapKeys(t,(function(t,e){return lr.camelCase(e)}))},httpContainer:Xi,HttpErrorResponse:Ni,HttpClient:Ci,HttpHeaders:hi,HttpParams:vi,mainContainer:Xd,NgZone:Ea,TranslateService:ba}),Sy=function(){function t(){}var e;return t.subscribeCount=function(){return this.unsubscribeCount(),this.notificationCountSubscriber=Go.createNotificationCountSubscription(this.notificationWsService,null),this.notificationCountSubscriber.subscribe(),this.notificationCountSubscriber.notificationCount$.pipe(ci(1))},t.unsubscribeCount=function(){this.notificationCountSubscriber&&(this.notificationCountSubscriber.unsubscribe(),this.notificationCountSubscriber=null)},t.subscribeMessage=function(t){var e=this;return this.unsubscribeMessage(),this.notificationSubscriber=Go.createNotificationsSubscription(this.notificationWsService,null,t),this.countSubscription=this.notificationSubscriber.notificationCount$.pipe(ci(1)).subscribe((function(t){return e.countSubject.next(t)})),this.notificationSubscriber.subscribe(),this.notificationSubscriber.notifications$.pipe(xn((function(t){return Array.isArray(t)?t:[]}))).pipe(ci(1))},e=t,t.notificationWsService=Ty,t.countSubject=new an(0),t.unsubscribeMessage=function(){e.notificationSubscriber&&(e.countSubscription.unsubscribe(),e.notificationSubscriber.unsubscribe())},t}(),_y=function(){function t(){}return t.subscribeSingleAndListEntityInfo=function(t,e,n){var i,r=this,a=n&&n.pageSize&&"number"==typeof n.pageSize?n.pageSize:null,o=n&&n.pageSize&&"object"==typeof n.pageSize?n.pageSize:null;return hy.createSubscriptionFromInfo({type:(null==n?void 0:n.widgetType)||Is.latest,hasDataPageLink:!!o,timeWindowConfig:n.timeWindowConfig?n.timeWindowConfig:null,callbacks:{onDataUpdated:function(t){r.onDataUpdatedSubject.next(t)}}},this.toSubscriptionsInfo(t,e,null==n?void 0:n.datasourceType,a),!o).subscribe((function(t){i=t,o&&t.subscribeForPaginatedData(0,o,[])})),this.onDataUpdatedSubject.asObservable().pipe(xn((function(t){return t.data})),oi((function(){i&&i.destroy()})))},t.subscribeEntityInfoPublic=function(t,e){var n=this;((null==e?void 0:e.dataKeys)||[]).map((function(t){t.settings||(t.settings={})})),((null==e?void 0:e.latestDataKeys)||[]).map((function(t){t.settings||(t.settings={}),t.label="latest_"+t.name}));var i={type:zs.entity,dataKeys:e.dataKeys||[],latestDataKeys:e.latestDataKeys||[]};return this.createEntityFilter(i,t),e.isPage?hy.subscribeForPaginatedData(e.widgetType||Is.latest,i,e.pageLink,e.keyFilters||[],e.timeWindowConfig).pipe(xn((function(t){if(e.timeWindowConfig)return t.data;var i=t.datasourcePages[0],r=t.dataPages[0],a=new Array;return i.data.forEach((function(t,i){var o=n.datasourceToEntityData(t,r.data[i],e.dataKeys);a.push(o)})),{data:a,totalPages:i.totalPages,totalElements:i.totalElements,hasNext:i.hasNext}}))):(e.pageLink&&(i.pageLink=e.pageLink),e.keyFilters&&(i.keyFilters=e.keyFilters),hy.subscribeData(e.widgetType||Is.timeseries,i,e.timeWindowConfig).pipe(xn((function(t){var e=t.datasourcePages[0],n=t.dataPages[0],i=new Array;return e.data.forEach((function(t,e){var r={entityId:t.entityId,entityName:t.entityName,entityLabel:t.entityLabel};n.data[e].forEach((function(t){r[t.dataKey.label]=t.data})),i.push(r)})),{data:i,totalPages:e.totalPages,totalElements:e.totalElements,hasNext:e.hasNext}}))))},t.createEntityFilter=function(t,e){var n=e.type;switch(n){case kc.singleEntity:return t.entityFilter={type:n,singleEntity:{entityType:e.entityType,id:e.id}},t;case kc.entityList:return t.entityFilter={type:n,entityType:e.entityType,entityList:e.entityList},t;case kc.entityName:return t.entityFilter={type:n,entityType:e.entityType,entityNameFilter:e.entityNameFilter},t;case kc.entityType:return t.entityFilter={type:n,entityType:e.entityType},t;case kc.stateEntity:return t.stateEntity=!0,t.entityFilter={type:n,stateEntityParamName:e.stateEntityParamName,defaultStateEntity:{entityType:e.entityType,id:e.id}},t;case kc.assetType:return t.entityFilter={type:n,assetTypes:e.assetTypes,assetNameFilter:e.assetNameFilter},t;case kc.deviceType:return t.entityFilter={type:n,deviceTypes:e.deviceTypes,deviceNameFilter:e.deviceNameFilter},t;case kc.entityViewType:return t.entityFilter={type:n,entityViewTypes:e.entityViewTypes,entityViewNameFilter:e.entityViewNameFilter},t;case kc.edgeType:return t.entityFilter={type:n,edgeTypes:e.edgeTypes,edgeNameFilter:e.edgeNameFilter},t;case kc.relationsQuery:case kc.assetSearchQuery:case kc.deviceSearchQuery:case kc.edgeSearchQuery:case kc.entityViewSearchQuery:return t.entityFilter={stateEntityParamName:e.stateEntityParamName||"",defaultStateEntity:e.rootStateEntity?{entityType:e.entityType,id:e.id}:null,rootStateEntity:e.rootStateEntity||!1,rootEntity:{entityType:e.entityType,id:e.id},direction:e.direction,maxLevel:e.maxLevel,fetchLastLevelOnly:e.fetchLastLevelOnly||!1,type:n},n===kc.relationsQuery?t.entityFilter.filters=e.filters||[]:(t.entityFilter.relationType=e.relationType,n===kc.assetSearchQuery?t.entityFilter.assetTypes=e.assetTypes:n===kc.deviceSearchQuery?t.entityFilter.deviceTypes=e.deviceTypes:n===kc.edgeSearchQuery?t.entityFilter.edgeTypes=e.edgeTypes:n===kc.entityViewSearchQuery&&(t.entityFilter.entityViewTypes=e.entityViewTypes)),t}},t.datasourceToEntityData=function(t,e,n){var i={entityId:"",entityName:t.entityName,entityLabel:t.entityLabel};return t.entityId&&(i.entityId=t.entityId),t.entityType?i.entityType=t.entityType:i.entityType="",i.ts={},n.forEach((function(t,n){var r=e[n].data;r&&r.length&&r[0].length>1?e[n].dataKey.type===ja.entityField&&i.hasOwnProperty(t.name)||(i[t.name]=r[0][1],i.ts[t.name]=r[0][0]):i[t.name]=""})),i},t.toSubscriptionsInfo=function(t,e,n,i){var r=[{type:n||zs.entity,entityType:t.entityType,attributes:e.attributes||[],timeseries:e.timeseries||[]}];switch(e.alarmFields&&(r[0].alarmFields=e.alarmFields),t.type){case kc.singleEntity:r[0].entityId=t.id;break;case kc.entityList:r[0].entityIds=t.entityList}return i&&(r[0].pageSize=i),r},t.findEntityKeysByQuery=function(t,e,n){var i=this.createEntityFilter({pageLink:null},t);return i.pageLink={page:0,pageSize:100,sortOrder:{direction:yc.DESC,key:{key:"createdTime",type:gl.ENTITY_FIELD}}},cy.findEntityKeysByQuery(i,e,n)},t.onDataUpdatedSubject=new nn,t}();export{_y as EntitySubscriptionService,Sy as NotificationSubscriptionService,qe as Observable,by as default};
